var yU=Object.defineProperty;var vU=(t,e,n)=>e in t?yU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>(vU(t,typeof e!="symbol"?e+"":e,n),n),ab=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var U=(t,e,n)=>(ab(t,e,"read from private field"),n?n.call(t):e.get(t)),xe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ve=(t,e,n,r)=>(ab(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Mg=(t,e,n,r)=>({set _(i){ve(t,e,i,n)},get _(){return U(t,e,r)}}),Je=(t,e,n)=>(ab(t,e,"access private method"),n);function oO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aO={exports:{}},uv={},lO={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag=Symbol.for("react.element"),bU=Symbol.for("react.portal"),wU=Symbol.for("react.fragment"),SU=Symbol.for("react.strict_mode"),xU=Symbol.for("react.profiler"),TU=Symbol.for("react.provider"),EU=Symbol.for("react.context"),AU=Symbol.for("react.forward_ref"),CU=Symbol.for("react.suspense"),RU=Symbol.for("react.memo"),PU=Symbol.for("react.lazy"),EA=Symbol.iterator;function IU(t){return t===null||typeof t!="object"?null:(t=EA&&t[EA]||t["@@iterator"],typeof t=="function"?t:null)}var cO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uO=Object.assign,fO={};function Bf(t,e,n){this.props=t,this.context=e,this.refs=fO,this.updater=n||cO}Bf.prototype.isReactComponent={};Bf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dO(){}dO.prototype=Bf.prototype;function hx(t,e,n){this.props=t,this.context=e,this.refs=fO,this.updater=n||cO}var px=hx.prototype=new dO;px.constructor=hx;uO(px,Bf.prototype);px.isPureReactComponent=!0;var AA=Array.isArray,hO=Object.prototype.hasOwnProperty,gx={current:null},pO={key:!0,ref:!0,__self:!0,__source:!0};function gO(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hO.call(e,r)&&!pO.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ag,type:t,key:s,ref:o,props:i,_owner:gx.current}}function MU(t,e){return{$$typeof:ag,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _x(t){return typeof t=="object"&&t!==null&&t.$$typeof===ag}function OU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CA=/\/+/g;function lb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OU(""+t.key):e.toString(36)}function V_(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ag:case bU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lb(o,0):r,AA(i)?(n="",t!=null&&(n=t.replace(CA,"$&/")+"/"),V_(i,e,n,"",function(c){return c})):i!=null&&(_x(i)&&(i=MU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(CA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",AA(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+lb(s,a);o+=V_(s,e,n,l,i)}else if(l=IU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+lb(s,a++),o+=V_(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ng(t,e,n){if(t==null)return t;var r=[],i=0;return V_(t,r,"","",function(s){return e.call(n,s,i++)}),r}function NU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zn={current:null},W_={transition:null},kU={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:W_,ReactCurrentOwner:gx};function _O(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Ng,forEach:function(t,e,n){Ng(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ng(t,function(){e++}),e},toArray:function(t){return Ng(t,function(e){return e})||[]},only:function(t){if(!_x(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Bf;Ge.Fragment=wU;Ge.Profiler=xU;Ge.PureComponent=hx;Ge.StrictMode=SU;Ge.Suspense=CU;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kU;Ge.act=_O;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uO({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hO.call(e,l)&&!pO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ag,type:t.type,key:i,ref:s,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:EU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TU,_context:t},t.Consumer=t};Ge.createElement=gO;Ge.createFactory=function(t){var e=gO.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:AU,render:t}};Ge.isValidElement=_x;Ge.lazy=function(t){return{$$typeof:PU,_payload:{_status:-1,_result:t},_init:NU}};Ge.memo=function(t,e){return{$$typeof:RU,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=W_.transition;W_.transition={};try{t()}finally{W_.transition=e}};Ge.unstable_act=_O;Ge.useCallback=function(t,e){return Zn.current.useCallback(t,e)};Ge.useContext=function(t){return Zn.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return Zn.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return Zn.current.useEffect(t,e)};Ge.useId=function(){return Zn.current.useId()};Ge.useImperativeHandle=function(t,e,n){return Zn.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return Zn.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return Zn.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return Zn.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return Zn.current.useReducer(t,e,n)};Ge.useRef=function(t){return Zn.current.useRef(t)};Ge.useState=function(t){return Zn.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return Zn.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return Zn.current.useTransition()};Ge.version="18.3.1";lO.exports=Ge;var w=lO.exports;const J=Un(w),mx=oO({__proto__:null,default:J},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DU=w,FU=Symbol.for("react.element"),BU=Symbol.for("react.fragment"),LU=Object.prototype.hasOwnProperty,$U=DU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UU={key:!0,ref:!0,__self:!0,__source:!0};function mO(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LU.call(e,r)&&!UU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FU,type:t,key:s,ref:o,props:i,_owner:$U.current}}uv.Fragment=BU;uv.jsx=mO;uv.jsxs=mO;aO.exports=uv;var x=aO.exports,i2={},yO={exports:{}},$r={},vO={exports:{}},bO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,Y){var ce=X.length;X.push(Y);e:for(;0<ce;){var me=ce-1>>>1,G=X[me];if(0<i(G,Y))X[me]=Y,X[ce]=G,ce=me;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Y=X[0],ce=X.pop();if(ce!==Y){X[0]=ce;e:for(var me=0,G=X.length,ge=G>>>1;me<ge;){var le=2*(me+1)-1,ae=X[le],oe=le+1,ue=X[oe];if(0>i(ae,ce))oe<G&&0>i(ue,ae)?(X[me]=ue,X[oe]=ce,me=oe):(X[me]=ae,X[le]=ce,me=le);else if(oe<G&&0>i(ue,ce))X[me]=ue,X[oe]=ce,me=oe;else break e}}return Y}function i(X,Y){var ce=X.sortIndex-Y.sortIndex;return ce!==0?ce:X.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(X){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=X)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function b(X){if(g=!1,y(X),!p)if(n(l)!==null)p=!0,ee(S);else{var Y=n(c);Y!==null&&ne(b,Y.startTime-X)}}function S(X,Y){p=!1,g&&(g=!1,_(R),R=-1),h=!0;var ce=d;try{for(y(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||X&&!N());){var me=f.callback;if(typeof me=="function"){f.callback=null,d=f.priorityLevel;var G=me(f.expirationTime<=Y);Y=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),y(Y)}else r(l);f=n(l)}if(f!==null)var ge=!0;else{var le=n(c);le!==null&&ne(b,le.startTime-Y),ge=!1}return ge}finally{f=null,d=ce,h=!1}}var A=!1,I=null,R=-1,M=5,k=-1;function N(){return!(t.unstable_now()-k<M)}function F(){if(I!==null){var X=t.unstable_now();k=X;var Y=!0;try{Y=I(!0,X)}finally{Y?D():(A=!1,I=null)}}else A=!1}var D;if(typeof m=="function")D=function(){m(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=F,D=function(){Z.postMessage(null)}}else D=function(){v(F,0)};function ee(X){I=X,A||(A=!0,D())}function ne(X,Y){R=v(function(){X(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,ee(S))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var ce=d;d=Y;try{return X()}finally{d=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=d;d=X;try{return Y()}finally{d=ce}},t.unstable_scheduleCallback=function(X,Y,ce){var me=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?me+ce:me):ce=me,X){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ce+G,X={id:u++,callback:Y,priorityLevel:X,startTime:ce,expirationTime:G,sortIndex:-1},ce>me?(X.sortIndex=ce,e(c,X),n(l)===null&&X===n(c)&&(g?(_(R),R=-1):g=!0,ne(b,ce-me))):(X.sortIndex=G,e(l,X),p||h||(p=!0,ee(S))),X},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(X){var Y=d;return function(){var ce=d;d=Y;try{return X.apply(this,arguments)}finally{d=ce}}}})(bO);vO.exports=bO;var zU=vO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jU=w,Lr=zU;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wO=new Set,Wh={};function Ql(t,e){ef(t,e),ef(t+"Capture",e)}function ef(t,e){for(Wh[t]=e,t=0;t<e.length;t++)wO.add(e[t])}var no=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s2=Object.prototype.hasOwnProperty,VU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RA={},PA={};function WU(t){return s2.call(PA,t)?!0:s2.call(RA,t)?!1:VU.test(t)?PA[t]=!0:(RA[t]=!0,!1)}function HU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XU(t,e,n,r){if(e===null||typeof e>"u"||HU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cn[t]=new Qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cn[e]=new Qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cn[t]=new Qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cn[t]=new Qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cn[t]=new Qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cn[t]=new Qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cn[t]=new Qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cn[t]=new Qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cn[t]=new Qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var yx=/[\-:]([a-z])/g;function vx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yx,vx);Cn[e]=new Qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yx,vx);Cn[e]=new Qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yx,vx);Cn[e]=new Qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function bx(t,e,n,r){var i=Cn.hasOwnProperty(e)?Cn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XU(e,n,i,r)&&(n=null),r||i===null?WU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var go=jU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kg=Symbol.for("react.element"),Xc=Symbol.for("react.portal"),Yc=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),o2=Symbol.for("react.profiler"),SO=Symbol.for("react.provider"),xO=Symbol.for("react.context"),Sx=Symbol.for("react.forward_ref"),a2=Symbol.for("react.suspense"),l2=Symbol.for("react.suspense_list"),xx=Symbol.for("react.memo"),$o=Symbol.for("react.lazy"),TO=Symbol.for("react.offscreen"),IA=Symbol.iterator;function hd(t){return t===null||typeof t!="object"?null:(t=IA&&t[IA]||t["@@iterator"],typeof t=="function"?t:null)}var Ht=Object.assign,cb;function Hd(t){if(cb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cb=e&&e[1]||""}return`
`+cb+t}var ub=!1;function fb(t,e){if(!t||ub)return"";ub=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ub=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hd(t):""}function YU(t){switch(t.tag){case 5:return Hd(t.type);case 16:return Hd("Lazy");case 13:return Hd("Suspense");case 19:return Hd("SuspenseList");case 0:case 2:case 15:return t=fb(t.type,!1),t;case 11:return t=fb(t.type.render,!1),t;case 1:return t=fb(t.type,!0),t;default:return""}}function c2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yc:return"Fragment";case Xc:return"Portal";case o2:return"Profiler";case wx:return"StrictMode";case a2:return"Suspense";case l2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xO:return(t.displayName||"Context")+".Consumer";case SO:return(t._context.displayName||"Context")+".Provider";case Sx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xx:return e=t.displayName||null,e!==null?e:c2(t.type)||"Memo";case $o:e=t._payload,t=t._init;try{return c2(t(e))}catch{}}return null}function KU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c2(e);case 8:return e===wx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qU(t){var e=EO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dg(t){t._valueTracker||(t._valueTracker=qU(t))}function AO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Am(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function u2(t,e){var n=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function MA(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ba(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CO(t,e){e=e.checked,e!=null&&bx(t,"checked",e,!1)}function f2(t,e){CO(t,e);var n=ba(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?d2(t,e.type,n):e.hasOwnProperty("defaultValue")&&d2(t,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function d2(t,e,n){(e!=="number"||Am(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xd=Array.isArray;function mu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ba(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function h2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Xd(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ba(n)}}function RO(t,e){var n=ba(e.value),r=ba(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fg,IO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fg=Fg||document.createElement("div"),Fg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZU=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(t){ZU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vh[e]=vh[t]})});function MO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vh.hasOwnProperty(t)&&vh[t]?(""+e).trim():e+"px"}function OO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=MO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var QU=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g2(t,e){if(e){if(QU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function _2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m2=null;function Tx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var y2=null,yu=null,vu=null;function DA(t){if(t=ug(t)){if(typeof y2!="function")throw Error(re(280));var e=t.stateNode;e&&(e=gv(e),y2(t.stateNode,t.type,e))}}function NO(t){yu?vu?vu.push(t):vu=[t]:yu=t}function kO(){if(yu){var t=yu,e=vu;if(vu=yu=null,DA(t),e)for(t=0;t<e.length;t++)DA(e[t])}}function DO(t,e){return t(e)}function FO(){}var db=!1;function BO(t,e,n){if(db)return t(e,n);db=!0;try{return DO(t,e,n)}finally{db=!1,(yu!==null||vu!==null)&&(FO(),kO())}}function Xh(t,e){var n=t.stateNode;if(n===null)return null;var r=gv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var v2=!1;if(no)try{var pd={};Object.defineProperty(pd,"passive",{get:function(){v2=!0}}),window.addEventListener("test",pd,pd),window.removeEventListener("test",pd,pd)}catch{v2=!1}function GU(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var bh=!1,Cm=null,Rm=!1,b2=null,JU={onError:function(t){bh=!0,Cm=t}};function ez(t,e,n,r,i,s,o,a,l){bh=!1,Cm=null,GU.apply(JU,arguments)}function tz(t,e,n,r,i,s,o,a,l){if(ez.apply(this,arguments),bh){if(bh){var c=Cm;bh=!1,Cm=null}else throw Error(re(198));Rm||(Rm=!0,b2=c)}}function Gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function FA(t){if(Gl(t)!==t)throw Error(re(188))}function nz(t){var e=t.alternate;if(!e){if(e=Gl(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return FA(i),t;if(s===r)return FA(i),e;s=s.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function $O(t){return t=nz(t),t!==null?UO(t):null}function UO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UO(t);if(e!==null)return e;t=t.sibling}return null}var zO=Lr.unstable_scheduleCallback,BA=Lr.unstable_cancelCallback,rz=Lr.unstable_shouldYield,iz=Lr.unstable_requestPaint,Jt=Lr.unstable_now,sz=Lr.unstable_getCurrentPriorityLevel,Ex=Lr.unstable_ImmediatePriority,jO=Lr.unstable_UserBlockingPriority,Pm=Lr.unstable_NormalPriority,oz=Lr.unstable_LowPriority,VO=Lr.unstable_IdlePriority,fv=null,_s=null;function az(t){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(fv,t,void 0,(t.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:uz,lz=Math.log,cz=Math.LN2;function uz(t){return t>>>=0,t===0?32:31-(lz(t)/cz|0)|0}var Bg=64,Lg=4194304;function Yd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Im(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Yd(a):(s&=o,s!==0&&(r=Yd(s)))}else o=n&~i,o!==0?r=Yd(o):s!==0&&(r=Yd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ii(e),i=1<<n,r|=t[n],e&=~i;return r}function fz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ii(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=fz(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function w2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WO(){var t=Bg;return Bg<<=1,!(Bg&4194240)&&(Bg=64),t}function hb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ii(e),t[e]=n}function hz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ii(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ax(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ht=0;function HO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XO,Cx,YO,KO,qO,S2=!1,$g=[],la=null,ca=null,ua=null,Yh=new Map,Kh=new Map,Ho=[],pz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function LA(t,e){switch(t){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":Yh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(e.pointerId)}}function gd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ug(e),e!==null&&Cx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gz(t,e,n,r,i){switch(e){case"focusin":return la=gd(la,t,e,n,r,i),!0;case"dragenter":return ca=gd(ca,t,e,n,r,i),!0;case"mouseover":return ua=gd(ua,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Yh.set(s,gd(Yh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kh.set(s,gd(Kh.get(s)||null,t,e,n,r,i)),!0}return!1}function ZO(t){var e=al(t.target);if(e!==null){var n=Gl(e);if(n!==null){if(e=n.tag,e===13){if(e=LO(n),e!==null){t.blockedOn=e,qO(t.priority,function(){YO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function H_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=x2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);m2=r,n.target.dispatchEvent(r),m2=null}else return e=ug(n),e!==null&&Cx(e),t.blockedOn=n,!1;e.shift()}return!0}function $A(t,e,n){H_(t)&&n.delete(e)}function _z(){S2=!1,la!==null&&H_(la)&&(la=null),ca!==null&&H_(ca)&&(ca=null),ua!==null&&H_(ua)&&(ua=null),Yh.forEach($A),Kh.forEach($A)}function _d(t,e){t.blockedOn===e&&(t.blockedOn=null,S2||(S2=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,_z)))}function qh(t){function e(i){return _d(i,t)}if(0<$g.length){_d($g[0],t);for(var n=1;n<$g.length;n++){var r=$g[n];r.blockedOn===t&&(r.blockedOn=null)}}for(la!==null&&_d(la,t),ca!==null&&_d(ca,t),ua!==null&&_d(ua,t),Yh.forEach(e),Kh.forEach(e),n=0;n<Ho.length;n++)r=Ho[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ho.length&&(n=Ho[0],n.blockedOn===null);)ZO(n),n.blockedOn===null&&Ho.shift()}var bu=go.ReactCurrentBatchConfig,Mm=!0;function mz(t,e,n,r){var i=ht,s=bu.transition;bu.transition=null;try{ht=1,Rx(t,e,n,r)}finally{ht=i,bu.transition=s}}function yz(t,e,n,r){var i=ht,s=bu.transition;bu.transition=null;try{ht=4,Rx(t,e,n,r)}finally{ht=i,bu.transition=s}}function Rx(t,e,n,r){if(Mm){var i=x2(t,e,n,r);if(i===null)xb(t,e,r,Om,n),LA(t,r);else if(gz(i,t,e,n,r))r.stopPropagation();else if(LA(t,r),e&4&&-1<pz.indexOf(t)){for(;i!==null;){var s=ug(i);if(s!==null&&XO(s),s=x2(t,e,n,r),s===null&&xb(t,e,r,Om,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xb(t,e,r,null,n)}}var Om=null;function x2(t,e,n,r){if(Om=null,t=Tx(r),t=al(t),t!==null)if(e=Gl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Om=t,null}function QO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sz()){case Ex:return 1;case jO:return 4;case Pm:case oz:return 16;case VO:return 536870912;default:return 16}default:return 16}}var ea=null,Px=null,X_=null;function GO(){if(X_)return X_;var t,e=Px,n=e.length,r,i="value"in ea?ea.value:ea.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return X_=i.slice(t,1<r?1-r:void 0)}function Y_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ug(){return!0}function UA(){return!1}function Ur(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ug:UA,this.isPropagationStopped=UA,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ug)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ug)},persist:function(){},isPersistent:Ug}),e}var Lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ix=Ur(Lf),cg=Ht({},Lf,{view:0,detail:0}),vz=Ur(cg),pb,gb,md,dv=Ht({},cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==md&&(md&&t.type==="mousemove"?(pb=t.screenX-md.screenX,gb=t.screenY-md.screenY):gb=pb=0,md=t),pb)},movementY:function(t){return"movementY"in t?t.movementY:gb}}),zA=Ur(dv),bz=Ht({},dv,{dataTransfer:0}),wz=Ur(bz),Sz=Ht({},cg,{relatedTarget:0}),_b=Ur(Sz),xz=Ht({},Lf,{animationName:0,elapsedTime:0,pseudoElement:0}),Tz=Ur(xz),Ez=Ht({},Lf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Az=Ur(Ez),Cz=Ht({},Lf,{data:0}),jA=Ur(Cz),Rz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Iz[t])?!!e[t]:!1}function Mx(){return Mz}var Oz=Ht({},cg,{key:function(t){if(t.key){var e=Rz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Y_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mx,charCode:function(t){return t.type==="keypress"?Y_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Y_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nz=Ur(Oz),kz=Ht({},dv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VA=Ur(kz),Dz=Ht({},cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mx}),Fz=Ur(Dz),Bz=Ht({},Lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lz=Ur(Bz),$z=Ht({},dv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uz=Ur($z),zz=[9,13,27,32],Ox=no&&"CompositionEvent"in window,wh=null;no&&"documentMode"in document&&(wh=document.documentMode);var jz=no&&"TextEvent"in window&&!wh,JO=no&&(!Ox||wh&&8<wh&&11>=wh),WA=" ",HA=!1;function e8(t,e){switch(t){case"keyup":return zz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t8(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kc=!1;function Vz(t,e){switch(t){case"compositionend":return t8(e);case"keypress":return e.which!==32?null:(HA=!0,WA);case"textInput":return t=e.data,t===WA&&HA?null:t;default:return null}}function Wz(t,e){if(Kc)return t==="compositionend"||!Ox&&e8(t,e)?(t=GO(),X_=Px=ea=null,Kc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JO&&e.locale!=="ko"?null:e.data;default:return null}}var Hz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hz[t.type]:e==="textarea"}function n8(t,e,n,r){NO(r),e=Nm(e,"onChange"),0<e.length&&(n=new Ix("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sh=null,Zh=null;function Xz(t){h8(t,0)}function hv(t){var e=Qc(t);if(AO(e))return t}function Yz(t,e){if(t==="change")return e}var r8=!1;if(no){var mb;if(no){var yb="oninput"in document;if(!yb){var YA=document.createElement("div");YA.setAttribute("oninput","return;"),yb=typeof YA.oninput=="function"}mb=yb}else mb=!1;r8=mb&&(!document.documentMode||9<document.documentMode)}function KA(){Sh&&(Sh.detachEvent("onpropertychange",i8),Zh=Sh=null)}function i8(t){if(t.propertyName==="value"&&hv(Zh)){var e=[];n8(e,Zh,t,Tx(t)),BO(Xz,e)}}function Kz(t,e,n){t==="focusin"?(KA(),Sh=e,Zh=n,Sh.attachEvent("onpropertychange",i8)):t==="focusout"&&KA()}function qz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hv(Zh)}function Zz(t,e){if(t==="click")return hv(e)}function Qz(t,e){if(t==="input"||t==="change")return hv(e)}function Gz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ni=typeof Object.is=="function"?Object.is:Gz;function Qh(t,e){if(Ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!s2.call(e,i)||!Ni(t[i],e[i]))return!1}return!0}function qA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZA(t,e){var n=qA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qA(n)}}function s8(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s8(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o8(){for(var t=window,e=Am();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Am(t.document)}return e}function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jz(t){var e=o8(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s8(n.ownerDocument.documentElement,n)){if(r!==null&&Nx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ZA(n,s);var o=ZA(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ej=no&&"documentMode"in document&&11>=document.documentMode,qc=null,T2=null,xh=null,E2=!1;function QA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;E2||qc==null||qc!==Am(r)||(r=qc,"selectionStart"in r&&Nx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xh&&Qh(xh,r)||(xh=r,r=Nm(T2,"onSelect"),0<r.length&&(e=new Ix("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qc)))}function zg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zc={animationend:zg("Animation","AnimationEnd"),animationiteration:zg("Animation","AnimationIteration"),animationstart:zg("Animation","AnimationStart"),transitionend:zg("Transition","TransitionEnd")},vb={},a8={};no&&(a8=document.createElement("div").style,"AnimationEvent"in window||(delete Zc.animationend.animation,delete Zc.animationiteration.animation,delete Zc.animationstart.animation),"TransitionEvent"in window||delete Zc.transitionend.transition);function pv(t){if(vb[t])return vb[t];if(!Zc[t])return t;var e=Zc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a8)return vb[t]=e[n];return t}var l8=pv("animationend"),c8=pv("animationiteration"),u8=pv("animationstart"),f8=pv("transitionend"),d8=new Map,GA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(t,e){d8.set(t,e),Ql(e,[t])}for(var bb=0;bb<GA.length;bb++){var wb=GA[bb],tj=wb.toLowerCase(),nj=wb[0].toUpperCase()+wb.slice(1);Oa(tj,"on"+nj)}Oa(l8,"onAnimationEnd");Oa(c8,"onAnimationIteration");Oa(u8,"onAnimationStart");Oa("dblclick","onDoubleClick");Oa("focusin","onFocus");Oa("focusout","onBlur");Oa(f8,"onTransitionEnd");ef("onMouseEnter",["mouseout","mouseover"]);ef("onMouseLeave",["mouseout","mouseover"]);ef("onPointerEnter",["pointerout","pointerover"]);ef("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kd));function JA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tz(r,e,void 0,t),t.currentTarget=null}function h8(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;JA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;JA(i,a,c),s=l}}}if(Rm)throw t=b2,Rm=!1,b2=null,t}function Rt(t,e){var n=e[I2];n===void 0&&(n=e[I2]=new Set);var r=t+"__bubble";n.has(r)||(p8(e,t,2,!1),n.add(r))}function Sb(t,e,n){var r=0;e&&(r|=4),p8(n,t,r,e)}var jg="_reactListening"+Math.random().toString(36).slice(2);function Gh(t){if(!t[jg]){t[jg]=!0,wO.forEach(function(n){n!=="selectionchange"&&(rj.has(n)||Sb(n,!1,t),Sb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jg]||(e[jg]=!0,Sb("selectionchange",!1,e))}}function p8(t,e,n,r){switch(QO(e)){case 1:var i=mz;break;case 4:i=yz;break;default:i=Rx}n=i.bind(null,e,n,t),i=void 0,!v2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=al(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BO(function(){var c=s,u=Tx(n),f=[];e:{var d=d8.get(t);if(d!==void 0){var h=Ix,p=t;switch(t){case"keypress":if(Y_(n)===0)break e;case"keydown":case"keyup":h=Nz;break;case"focusin":p="focus",h=_b;break;case"focusout":p="blur",h=_b;break;case"beforeblur":case"afterblur":h=_b;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=zA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=wz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Fz;break;case l8:case c8:case u8:h=Tz;break;case f8:h=Lz;break;case"scroll":h=vz;break;case"wheel":h=Uz;break;case"copy":case"cut":case"paste":h=Az;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=VA}var g=(e&4)!==0,v=!g&&t==="scroll",_=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,y;m!==null;){y=m;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,_!==null&&(b=Xh(m,_),b!=null&&g.push(Jh(m,b,y)))),v)break;m=m.return}0<g.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==m2&&(p=n.relatedTarget||n.fromElement)&&(al(p)||p[ro]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?al(p):null,p!==null&&(v=Gl(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=zA,b="onMouseLeave",_="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=VA,b="onPointerLeave",_="onPointerEnter",m="pointer"),v=h==null?d:Qc(h),y=p==null?d:Qc(p),d=new g(b,m+"leave",h,n,u),d.target=v,d.relatedTarget=y,b=null,al(u)===c&&(g=new g(_,m+"enter",p,n,u),g.target=y,g.relatedTarget=v,b=g),v=b,h&&p)t:{for(g=h,_=p,m=0,y=g;y;y=yc(y))m++;for(y=0,b=_;b;b=yc(b))y++;for(;0<m-y;)g=yc(g),m--;for(;0<y-m;)_=yc(_),y--;for(;m--;){if(g===_||_!==null&&g===_.alternate)break t;g=yc(g),_=yc(_)}g=null}else g=null;h!==null&&eC(f,d,h,g,!1),p!==null&&v!==null&&eC(f,v,p,g,!0)}}e:{if(d=c?Qc(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=Yz;else if(XA(d))if(r8)S=Qz;else{S=qz;var A=Kz}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=Zz);if(S&&(S=S(t,c))){n8(f,S,n,u);break e}A&&A(t,d,c),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&d2(d,"number",d.value)}switch(A=c?Qc(c):window,t){case"focusin":(XA(A)||A.contentEditable==="true")&&(qc=A,T2=c,xh=null);break;case"focusout":xh=T2=qc=null;break;case"mousedown":E2=!0;break;case"contextmenu":case"mouseup":case"dragend":E2=!1,QA(f,n,u);break;case"selectionchange":if(ej)break;case"keydown":case"keyup":QA(f,n,u)}var I;if(Ox)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Kc?e8(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(JO&&n.locale!=="ko"&&(Kc||R!=="onCompositionStart"?R==="onCompositionEnd"&&Kc&&(I=GO()):(ea=u,Px="value"in ea?ea.value:ea.textContent,Kc=!0)),A=Nm(c,R),0<A.length&&(R=new jA(R,t,null,n,u),f.push({event:R,listeners:A}),I?R.data=I:(I=t8(n),I!==null&&(R.data=I)))),(I=jz?Vz(t,n):Wz(t,n))&&(c=Nm(c,"onBeforeInput"),0<c.length&&(u=new jA("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=I))}h8(f,e)})}function Jh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xh(t,n),s!=null&&r.unshift(Jh(t,s,i)),s=Xh(t,e),s!=null&&r.push(Jh(t,s,i))),t=t.return}return r}function yc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Xh(n,s),l!=null&&o.unshift(Jh(n,l,a))):i||(l=Xh(n,s),l!=null&&o.push(Jh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ij=/\r\n?/g,sj=/\u0000|\uFFFD/g;function tC(t){return(typeof t=="string"?t:""+t).replace(ij,`
`).replace(sj,"")}function Vg(t,e,n){if(e=tC(e),tC(t)!==e&&n)throw Error(re(425))}function km(){}var A2=null,C2=null;function R2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P2=typeof setTimeout=="function"?setTimeout:void 0,oj=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,aj=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(t){return nC.resolve(null).then(t).catch(lj)}:P2;function lj(t){setTimeout(function(){throw t})}function Tb(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qh(e)}function fa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $f=Math.random().toString(36).slice(2),as="__reactFiber$"+$f,ep="__reactProps$"+$f,ro="__reactContainer$"+$f,I2="__reactEvents$"+$f,cj="__reactListeners$"+$f,uj="__reactHandles$"+$f;function al(t){var e=t[as];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ro]||n[as]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rC(t);t!==null;){if(n=t[as])return n;t=rC(t)}return e}t=n,n=t.parentNode}return null}function ug(t){return t=t[as]||t[ro],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function gv(t){return t[ep]||null}var M2=[],Gc=-1;function Na(t){return{current:t}}function Nt(t){0>Gc||(t.current=M2[Gc],M2[Gc]=null,Gc--)}function Tt(t,e){Gc++,M2[Gc]=t.current,t.current=e}var wa={},$n=Na(wa),fr=Na(!1),Dl=wa;function tf(t,e){var n=t.type.contextTypes;if(!n)return wa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dr(t){return t=t.childContextTypes,t!=null}function Dm(){Nt(fr),Nt($n)}function iC(t,e,n){if($n.current!==wa)throw Error(re(168));Tt($n,e),Tt(fr,n)}function g8(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,KU(t)||"Unknown",i));return Ht({},n,r)}function Fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wa,Dl=$n.current,Tt($n,t),Tt(fr,fr.current),!0}function sC(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=g8(t,e,Dl),r.__reactInternalMemoizedMergedChildContext=t,Nt(fr),Nt($n),Tt($n,t)):Nt(fr),Tt(fr,n)}var Vs=null,_v=!1,Eb=!1;function _8(t){Vs===null?Vs=[t]:Vs.push(t)}function fj(t){_v=!0,_8(t)}function ka(){if(!Eb&&Vs!==null){Eb=!0;var t=0,e=ht;try{var n=Vs;for(ht=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vs=null,_v=!1}catch(i){throw Vs!==null&&(Vs=Vs.slice(t+1)),zO(Ex,ka),i}finally{ht=e,Eb=!1}}return null}var Jc=[],eu=0,Bm=null,Lm=0,qr=[],Zr=0,Fl=null,qs=1,Zs="";function Ja(t,e){Jc[eu++]=Lm,Jc[eu++]=Bm,Bm=t,Lm=e}function m8(t,e,n){qr[Zr++]=qs,qr[Zr++]=Zs,qr[Zr++]=Fl,Fl=t;var r=qs;t=Zs;var i=32-Ii(r)-1;r&=~(1<<i),n+=1;var s=32-Ii(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qs=1<<32-Ii(e)+i|n<<i|r,Zs=s+t}else qs=1<<s|n<<i|r,Zs=t}function kx(t){t.return!==null&&(Ja(t,1),m8(t,1,0))}function Dx(t){for(;t===Bm;)Bm=Jc[--eu],Jc[eu]=null,Lm=Jc[--eu],Jc[eu]=null;for(;t===Fl;)Fl=qr[--Zr],qr[Zr]=null,Zs=qr[--Zr],qr[Zr]=null,qs=qr[--Zr],qr[Zr]=null}var kr=null,Mr=null,Lt=!1,bi=null;function y8(t,e){var n=ni(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Mr=fa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fl!==null?{id:qs,overflow:Zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ni(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,Mr=null,!0):!1;default:return!1}}function O2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function N2(t){if(Lt){var e=Mr;if(e){var n=e;if(!oC(t,e)){if(O2(t))throw Error(re(418));e=fa(n.nextSibling);var r=kr;e&&oC(t,e)?y8(r,n):(t.flags=t.flags&-4097|2,Lt=!1,kr=t)}}else{if(O2(t))throw Error(re(418));t.flags=t.flags&-4097|2,Lt=!1,kr=t}}}function aC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function Wg(t){if(t!==kr)return!1;if(!Lt)return aC(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!R2(t.type,t.memoizedProps)),e&&(e=Mr)){if(O2(t))throw v8(),Error(re(418));for(;e;)y8(t,e),e=fa(e.nextSibling)}if(aC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mr=fa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mr=null}}else Mr=kr?fa(t.stateNode.nextSibling):null;return!0}function v8(){for(var t=Mr;t;)t=fa(t.nextSibling)}function nf(){Mr=kr=null,Lt=!1}function Fx(t){bi===null?bi=[t]:bi.push(t)}var dj=go.ReactCurrentBatchConfig;function yd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Hg(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lC(t){var e=t._init;return e(t._payload)}function b8(t){function e(_,m){if(t){var y=_.deletions;y===null?(_.deletions=[m],_.flags|=16):y.push(m)}}function n(_,m){if(!t)return null;for(;m!==null;)e(_,m),m=m.sibling;return null}function r(_,m){for(_=new Map;m!==null;)m.key!==null?_.set(m.key,m):_.set(m.index,m),m=m.sibling;return _}function i(_,m){return _=ga(_,m),_.index=0,_.sibling=null,_}function s(_,m,y){return _.index=y,t?(y=_.alternate,y!==null?(y=y.index,y<m?(_.flags|=2,m):y):(_.flags|=2,m)):(_.flags|=1048576,m)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,m,y,b){return m===null||m.tag!==6?(m=Ob(y,_.mode,b),m.return=_,m):(m=i(m,y),m.return=_,m)}function l(_,m,y,b){var S=y.type;return S===Yc?u(_,m,y.props.children,b,y.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$o&&lC(S)===m.type)?(b=i(m,y.props),b.ref=yd(_,m,y),b.return=_,b):(b=em(y.type,y.key,y.props,null,_.mode,b),b.ref=yd(_,m,y),b.return=_,b)}function c(_,m,y,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Nb(y,_.mode,b),m.return=_,m):(m=i(m,y.children||[]),m.return=_,m)}function u(_,m,y,b,S){return m===null||m.tag!==7?(m=Cl(y,_.mode,b,S),m.return=_,m):(m=i(m,y),m.return=_,m)}function f(_,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ob(""+m,_.mode,y),m.return=_,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case kg:return y=em(m.type,m.key,m.props,null,_.mode,y),y.ref=yd(_,null,m),y.return=_,y;case Xc:return m=Nb(m,_.mode,y),m.return=_,m;case $o:var b=m._init;return f(_,b(m._payload),y)}if(Xd(m)||hd(m))return m=Cl(m,_.mode,y,null),m.return=_,m;Hg(_,m)}return null}function d(_,m,y,b){var S=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(_,m,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kg:return y.key===S?l(_,m,y,b):null;case Xc:return y.key===S?c(_,m,y,b):null;case $o:return S=y._init,d(_,m,S(y._payload),b)}if(Xd(y)||hd(y))return S!==null?null:u(_,m,y,b,null);Hg(_,y)}return null}function h(_,m,y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(y)||null,a(m,_,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kg:return _=_.get(b.key===null?y:b.key)||null,l(m,_,b,S);case Xc:return _=_.get(b.key===null?y:b.key)||null,c(m,_,b,S);case $o:var A=b._init;return h(_,m,y,A(b._payload),S)}if(Xd(b)||hd(b))return _=_.get(y)||null,u(m,_,b,S,null);Hg(m,b)}return null}function p(_,m,y,b){for(var S=null,A=null,I=m,R=m=0,M=null;I!==null&&R<y.length;R++){I.index>R?(M=I,I=null):M=I.sibling;var k=d(_,I,y[R],b);if(k===null){I===null&&(I=M);break}t&&I&&k.alternate===null&&e(_,I),m=s(k,m,R),A===null?S=k:A.sibling=k,A=k,I=M}if(R===y.length)return n(_,I),Lt&&Ja(_,R),S;if(I===null){for(;R<y.length;R++)I=f(_,y[R],b),I!==null&&(m=s(I,m,R),A===null?S=I:A.sibling=I,A=I);return Lt&&Ja(_,R),S}for(I=r(_,I);R<y.length;R++)M=h(I,_,R,y[R],b),M!==null&&(t&&M.alternate!==null&&I.delete(M.key===null?R:M.key),m=s(M,m,R),A===null?S=M:A.sibling=M,A=M);return t&&I.forEach(function(N){return e(_,N)}),Lt&&Ja(_,R),S}function g(_,m,y,b){var S=hd(y);if(typeof S!="function")throw Error(re(150));if(y=S.call(y),y==null)throw Error(re(151));for(var A=S=null,I=m,R=m=0,M=null,k=y.next();I!==null&&!k.done;R++,k=y.next()){I.index>R?(M=I,I=null):M=I.sibling;var N=d(_,I,k.value,b);if(N===null){I===null&&(I=M);break}t&&I&&N.alternate===null&&e(_,I),m=s(N,m,R),A===null?S=N:A.sibling=N,A=N,I=M}if(k.done)return n(_,I),Lt&&Ja(_,R),S;if(I===null){for(;!k.done;R++,k=y.next())k=f(_,k.value,b),k!==null&&(m=s(k,m,R),A===null?S=k:A.sibling=k,A=k);return Lt&&Ja(_,R),S}for(I=r(_,I);!k.done;R++,k=y.next())k=h(I,_,R,k.value,b),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?R:k.key),m=s(k,m,R),A===null?S=k:A.sibling=k,A=k);return t&&I.forEach(function(F){return e(_,F)}),Lt&&Ja(_,R),S}function v(_,m,y,b){if(typeof y=="object"&&y!==null&&y.type===Yc&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case kg:e:{for(var S=y.key,A=m;A!==null;){if(A.key===S){if(S=y.type,S===Yc){if(A.tag===7){n(_,A.sibling),m=i(A,y.props.children),m.return=_,_=m;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$o&&lC(S)===A.type){n(_,A.sibling),m=i(A,y.props),m.ref=yd(_,A,y),m.return=_,_=m;break e}n(_,A);break}else e(_,A);A=A.sibling}y.type===Yc?(m=Cl(y.props.children,_.mode,b,y.key),m.return=_,_=m):(b=em(y.type,y.key,y.props,null,_.mode,b),b.ref=yd(_,m,y),b.return=_,_=b)}return o(_);case Xc:e:{for(A=y.key;m!==null;){if(m.key===A)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(_,m.sibling),m=i(m,y.children||[]),m.return=_,_=m;break e}else{n(_,m);break}else e(_,m);m=m.sibling}m=Nb(y,_.mode,b),m.return=_,_=m}return o(_);case $o:return A=y._init,v(_,m,A(y._payload),b)}if(Xd(y))return p(_,m,y,b);if(hd(y))return g(_,m,y,b);Hg(_,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(_,m.sibling),m=i(m,y),m.return=_,_=m):(n(_,m),m=Ob(y,_.mode,b),m.return=_,_=m),o(_)):n(_,m)}return v}var rf=b8(!0),w8=b8(!1),$m=Na(null),Um=null,tu=null,Bx=null;function Lx(){Bx=tu=Um=null}function $x(t){var e=$m.current;Nt($m),t._currentValue=e}function k2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wu(t,e){Um=t,Bx=tu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ur=!0),t.firstContext=null)}function oi(t){var e=t._currentValue;if(Bx!==t)if(t={context:t,memoizedValue:e,next:null},tu===null){if(Um===null)throw Error(re(308));tu=t,Um.dependencies={lanes:0,firstContext:t}}else tu=tu.next=t;return e}var ll=null;function Ux(t){ll===null?ll=[t]:ll.push(t)}function S8(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ux(e)):(n.next=i.next,i.next=n),e.interleaved=n,io(t,r)}function io(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Uo=!1;function zx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x8(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function da(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,io(t,n)}return i=r.interleaved,i===null?(e.next=e,Ux(r)):(e.next=i.next,i.next=e),r.interleaved=e,io(t,n)}function K_(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ax(t,n)}}function cC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zm(t,e,n,r){var i=t.updateQueue;Uo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ht({},f,d);break e;case 2:Uo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ll|=o,t.lanes=o,t.memoizedState=f}}function uC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var fg={},ms=Na(fg),tp=Na(fg),np=Na(fg);function cl(t){if(t===fg)throw Error(re(174));return t}function jx(t,e){switch(Tt(np,e),Tt(tp,t),Tt(ms,fg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=p2(e,t)}Nt(ms),Tt(ms,e)}function sf(){Nt(ms),Nt(tp),Nt(np)}function T8(t){cl(np.current);var e=cl(ms.current),n=p2(e,t.type);e!==n&&(Tt(tp,t),Tt(ms,n))}function Vx(t){tp.current===t&&(Nt(ms),Nt(tp))}var zt=Na(0);function jm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ab=[];function Wx(){for(var t=0;t<Ab.length;t++)Ab[t]._workInProgressVersionPrimary=null;Ab.length=0}var q_=go.ReactCurrentDispatcher,Cb=go.ReactCurrentBatchConfig,Bl=0,Wt=null,fn=null,yn=null,Vm=!1,Th=!1,rp=0,hj=0;function Pn(){throw Error(re(321))}function Hx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ni(t[n],e[n]))return!1;return!0}function Xx(t,e,n,r,i,s){if(Bl=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,q_.current=t===null||t.memoizedState===null?mj:yj,t=n(r,i),Th){s=0;do{if(Th=!1,rp=0,25<=s)throw Error(re(301));s+=1,yn=fn=null,e.updateQueue=null,q_.current=vj,t=n(r,i)}while(Th)}if(q_.current=Wm,e=fn!==null&&fn.next!==null,Bl=0,yn=fn=Wt=null,Vm=!1,e)throw Error(re(300));return t}function Yx(){var t=rp!==0;return rp=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Wt.memoizedState=yn=t:yn=yn.next=t,yn}function ai(){if(fn===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=yn===null?Wt.memoizedState:yn.next;if(e!==null)yn=e,fn=t;else{if(t===null)throw Error(re(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},yn===null?Wt.memoizedState=yn=t:yn=yn.next=t}return yn}function ip(t,e){return typeof e=="function"?e(t):e}function Rb(t){var e=ai(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=fn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Bl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Wt.lanes|=u,Ll|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ni(r,e.memoizedState)||(ur=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Wt.lanes|=s,Ll|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pb(t){var e=ai(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ni(s,e.memoizedState)||(ur=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function E8(){}function A8(t,e){var n=Wt,r=ai(),i=e(),s=!Ni(r.memoizedState,i);if(s&&(r.memoizedState=i,ur=!0),r=r.queue,Kx(P8.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yn!==null&&yn.memoizedState.tag&1){if(n.flags|=2048,sp(9,R8.bind(null,n,r,i,e),void 0,null),vn===null)throw Error(re(349));Bl&30||C8(n,e,i)}return i}function C8(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R8(t,e,n,r){e.value=n,e.getSnapshot=r,I8(e)&&M8(t)}function P8(t,e,n){return n(function(){I8(e)&&M8(t)})}function I8(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ni(t,n)}catch{return!0}}function M8(t){var e=io(t,1);e!==null&&Mi(e,t,1,-1)}function fC(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:t},e.queue=t,t=t.dispatch=_j.bind(null,Wt,t),[e.memoizedState,t]}function sp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function O8(){return ai().memoizedState}function Z_(t,e,n,r){var i=Ji();Wt.flags|=t,i.memoizedState=sp(1|e,n,void 0,r===void 0?null:r)}function mv(t,e,n,r){var i=ai();r=r===void 0?null:r;var s=void 0;if(fn!==null){var o=fn.memoizedState;if(s=o.destroy,r!==null&&Hx(r,o.deps)){i.memoizedState=sp(e,n,s,r);return}}Wt.flags|=t,i.memoizedState=sp(1|e,n,s,r)}function dC(t,e){return Z_(8390656,8,t,e)}function Kx(t,e){return mv(2048,8,t,e)}function N8(t,e){return mv(4,2,t,e)}function k8(t,e){return mv(4,4,t,e)}function D8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F8(t,e,n){return n=n!=null?n.concat([t]):null,mv(4,4,D8.bind(null,e,t),n)}function qx(){}function B8(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function L8(t,e){var n=ai();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $8(t,e,n){return Bl&21?(Ni(n,e)||(n=WO(),Wt.lanes|=n,Ll|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ur=!0),t.memoizedState=n)}function pj(t,e){var n=ht;ht=n!==0&&4>n?n:4,t(!0);var r=Cb.transition;Cb.transition={};try{t(!1),e()}finally{ht=n,Cb.transition=r}}function U8(){return ai().memoizedState}function gj(t,e,n){var r=pa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z8(t))j8(e,n);else if(n=S8(t,e,n,r),n!==null){var i=qn();Mi(n,t,r,i),V8(n,e,r)}}function _j(t,e,n){var r=pa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z8(t))j8(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ni(a,o)){var l=e.interleaved;l===null?(i.next=i,Ux(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=S8(t,e,i,r),n!==null&&(i=qn(),Mi(n,t,r,i),V8(n,e,r))}}function z8(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function j8(t,e){Th=Vm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V8(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ax(t,n)}}var Wm={readContext:oi,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},mj={readContext:oi,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:oi,useEffect:dC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Z_(4194308,4,D8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Z_(4194308,4,t,e)},useInsertionEffect:function(t,e){return Z_(4,2,t,e)},useMemo:function(t,e){var n=Ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gj.bind(null,Wt,t),[r.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:fC,useDebugValue:qx,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=fC(!1),e=t[0];return t=pj.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Wt,i=Ji();if(Lt){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),vn===null)throw Error(re(349));Bl&30||C8(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,dC(P8.bind(null,r,s,t),[t]),r.flags|=2048,sp(9,R8.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ji(),e=vn.identifierPrefix;if(Lt){var n=Zs,r=qs;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yj={readContext:oi,useCallback:B8,useContext:oi,useEffect:Kx,useImperativeHandle:F8,useInsertionEffect:N8,useLayoutEffect:k8,useMemo:L8,useReducer:Rb,useRef:O8,useState:function(){return Rb(ip)},useDebugValue:qx,useDeferredValue:function(t){var e=ai();return $8(e,fn.memoizedState,t)},useTransition:function(){var t=Rb(ip)[0],e=ai().memoizedState;return[t,e]},useMutableSource:E8,useSyncExternalStore:A8,useId:U8,unstable_isNewReconciler:!1},vj={readContext:oi,useCallback:B8,useContext:oi,useEffect:Kx,useImperativeHandle:F8,useInsertionEffect:N8,useLayoutEffect:k8,useMemo:L8,useReducer:Pb,useRef:O8,useState:function(){return Pb(ip)},useDebugValue:qx,useDeferredValue:function(t){var e=ai();return fn===null?e.memoizedState=t:$8(e,fn.memoizedState,t)},useTransition:function(){var t=Pb(ip)[0],e=ai().memoizedState;return[t,e]},useMutableSource:E8,useSyncExternalStore:A8,useId:U8,unstable_isNewReconciler:!1};function _i(t,e){if(t&&t.defaultProps){e=Ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function D2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yv={isMounted:function(t){return(t=t._reactInternals)?Gl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qn(),i=pa(t),s=eo(r,i);s.payload=e,n!=null&&(s.callback=n),e=da(t,s,i),e!==null&&(Mi(e,t,i,r),K_(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qn(),i=pa(t),s=eo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=da(t,s,i),e!==null&&(Mi(e,t,i,r),K_(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qn(),r=pa(t),i=eo(n,r);i.tag=2,e!=null&&(i.callback=e),e=da(t,i,r),e!==null&&(Mi(e,t,r,n),K_(e,t,r))}};function hC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qh(n,r)||!Qh(i,s):!0}function W8(t,e,n){var r=!1,i=wa,s=e.contextType;return typeof s=="object"&&s!==null?s=oi(s):(i=dr(e)?Dl:$n.current,r=e.contextTypes,s=(r=r!=null)?tf(t,i):wa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yv.enqueueReplaceState(e,e.state,null)}function F2(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=oi(s):(s=dr(e)?Dl:$n.current,i.context=tf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(D2(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yv.enqueueReplaceState(i,i.state,null),zm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function of(t,e){try{var n="",r=e;do n+=YU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ib(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function B2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bj=typeof WeakMap=="function"?WeakMap:Map;function H8(t,e,n){n=eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xm||(Xm=!0,Y2=r),B2(t,e)},n}function X8(t,e,n){n=eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){B2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){B2(t,e),typeof r!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kj.bind(null,t,e,n),e.then(t,t))}function _C(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=eo(-1,1),e.tag=2,da(n,e,1))),n.lanes|=1),t)}var wj=go.ReactCurrentOwner,ur=!1;function Xn(t,e,n,r){e.child=t===null?w8(e,null,n,r):rf(e,t.child,n,r)}function yC(t,e,n,r,i){n=n.render;var s=e.ref;return wu(e,i),r=Xx(t,e,n,r,s,i),n=Yx(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,so(t,e,i)):(Lt&&n&&kx(e),e.flags|=1,Xn(t,e,r,i),e.child)}function vC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Y8(t,e,s,r,i)):(t=em(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qh,n(o,r)&&t.ref===e.ref)return so(t,e,i)}return e.flags|=1,t=ga(s,r),t.ref=e.ref,t.return=e,e.child=t}function Y8(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qh(s,r)&&t.ref===e.ref)if(ur=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ur=!0);else return e.lanes=t.lanes,so(t,e,i)}return L2(t,e,n,r,i)}function K8(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(ru,Ar),Ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(ru,Ar),Ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Tt(ru,Ar),Ar|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Tt(ru,Ar),Ar|=r;return Xn(t,e,i,n),e.child}function q8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function L2(t,e,n,r,i){var s=dr(n)?Dl:$n.current;return s=tf(e,s),wu(e,i),n=Xx(t,e,n,r,s,i),r=Yx(),t!==null&&!ur?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,so(t,e,i)):(Lt&&r&&kx(e),e.flags|=1,Xn(t,e,n,i),e.child)}function bC(t,e,n,r,i){if(dr(n)){var s=!0;Fm(e)}else s=!1;if(wu(e,i),e.stateNode===null)Q_(t,e),W8(e,n,r),F2(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=oi(c):(c=dr(n)?Dl:$n.current,c=tf(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pC(e,o,r,c),Uo=!1;var d=e.memoizedState;o.state=d,zm(e,r,o,i),l=e.memoizedState,a!==r||d!==l||fr.current||Uo?(typeof u=="function"&&(D2(e,n,u,r),l=e.memoizedState),(a=Uo||hC(e,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,x8(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_i(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=oi(l):(l=dr(n)?Dl:$n.current,l=tf(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&pC(e,o,r,l),Uo=!1,d=e.memoizedState,o.state=d,zm(e,r,o,i);var p=e.memoizedState;a!==f||d!==p||fr.current||Uo?(typeof h=="function"&&(D2(e,n,h,r),p=e.memoizedState),(c=Uo||hC(e,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return $2(t,e,n,r,s,i)}function $2(t,e,n,r,i,s){q8(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sC(e,n,!1),so(t,e,s);r=e.stateNode,wj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=rf(e,t.child,null,s),e.child=rf(e,null,a,s)):Xn(t,e,a,s),e.memoizedState=r.state,i&&sC(e,n,!0),e.child}function Z8(t){var e=t.stateNode;e.pendingContext?iC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iC(t,e.context,!1),jx(t,e.containerInfo)}function wC(t,e,n,r,i){return nf(),Fx(i),e.flags|=256,Xn(t,e,n,r),e.child}var U2={dehydrated:null,treeContext:null,retryLane:0};function z2(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q8(t,e,n){var r=e.pendingProps,i=zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Tt(zt,i&1),t===null)return N2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wv(o,r,0,null),t=Cl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=z2(n),e.memoizedState=U2,t):Zx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Sj(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ga(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ga(a,s):(s=Cl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?z2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=U2,r}return s=t.child,t=s.sibling,r=ga(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zx(t,e){return e=wv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xg(t,e,n,r){return r!==null&&Fx(r),rf(e,t.child,null,n),t=Zx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Sj(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ib(Error(re(422))),Xg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wv({mode:"visible",children:r.children},i,0,null),s=Cl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&rf(e,t.child,null,o),e.child.memoizedState=z2(o),e.memoizedState=U2,s);if(!(e.mode&1))return Xg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(re(419)),r=Ib(s,r,void 0),Xg(t,e,o,r)}if(a=(o&t.childLanes)!==0,ur||a){if(r=vn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,io(t,i),Mi(r,t,i,-1))}return nT(),r=Ib(Error(re(421))),Xg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Dj.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mr=fa(i.nextSibling),kr=e,Lt=!0,bi=null,t!==null&&(qr[Zr++]=qs,qr[Zr++]=Zs,qr[Zr++]=Fl,qs=t.id,Zs=t.overflow,Fl=e),e=Zx(e,r.children),e.flags|=4096,e)}function SC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),k2(t.return,e,n)}function Mb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function G8(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xn(t,e,r.children,n),r=zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&SC(t,n,e);else if(t.tag===19)SC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt(zt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mb(e,!0,n,null,s);break;case"together":Mb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Q_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function so(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ll|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=ga(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ga(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xj(t,e,n){switch(e.tag){case 3:Z8(e),nf();break;case 5:T8(e);break;case 1:dr(e.type)&&Fm(e);break;case 4:jx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Tt($m,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(zt,zt.current&1),e.flags|=128,null):n&e.child.childLanes?Q8(t,e,n):(Tt(zt,zt.current&1),t=so(t,e,n),t!==null?t.sibling:null);Tt(zt,zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G8(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(zt,zt.current),r)break;return null;case 22:case 23:return e.lanes=0,K8(t,e,n)}return so(t,e,n)}var J8,j2,eN,tN;J8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j2=function(){};eN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,cl(ms.current);var s=null;switch(n){case"input":i=u2(t,i),r=u2(t,r),s=[];break;case"select":i=Ht({},i,{value:void 0}),r=Ht({},r,{value:void 0}),s=[];break;case"textarea":i=h2(t,i),r=h2(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=km)}g2(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tN=function(t,e,n,r){n!==r&&(e.flags|=4)};function vd(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function In(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tj(t,e,n){var r=e.pendingProps;switch(Dx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(e),null;case 1:return dr(e.type)&&Dm(),In(e),null;case 3:return r=e.stateNode,sf(),Nt(fr),Nt($n),Wx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(Z2(bi),bi=null))),j2(t,e),In(e),null;case 5:Vx(e);var i=cl(np.current);if(n=e.type,t!==null&&e.stateNode!=null)eN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return In(e),null}if(t=cl(ms.current),Wg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[as]=e,r[ep]=s,t=(e.mode&1)!==0,n){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(i=0;i<Kd.length;i++)Rt(Kd[i],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":MA(r,s),Rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rt("invalid",r);break;case"textarea":NA(r,s),Rt("invalid",r)}g2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vg(r.textContent,a,t),i=["children",""+a]):Wh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",r)}switch(n){case"input":Dg(r),OA(r,s,!0);break;case"textarea":Dg(r),kA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=km)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[as]=e,t[ep]=r,J8(t,e,!1,!1),e.stateNode=t;e:{switch(o=_2(n,r),n){case"dialog":Rt("cancel",t),Rt("close",t),i=r;break;case"iframe":case"object":case"embed":Rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Kd.length;i++)Rt(Kd[i],t);i=r;break;case"source":Rt("error",t),i=r;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),i=r;break;case"details":Rt("toggle",t),i=r;break;case"input":MA(t,r),i=u2(t,r),Rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ht({},r,{value:void 0}),Rt("invalid",t);break;case"textarea":NA(t,r),i=h2(t,r),Rt("invalid",t);break;default:i=r}g2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?OO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hh(t,l):typeof l=="number"&&Hh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rt("scroll",t):l!=null&&bx(t,s,l,o))}switch(n){case"input":Dg(t),OA(t,r,!1);break;case"textarea":Dg(t),kA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ba(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mu(t,!!r.multiple,s,!1):r.defaultValue!=null&&mu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=km)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return In(e),null;case 6:if(t&&e.stateNode!=null)tN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=cl(np.current),cl(ms.current),Wg(e)){if(r=e.stateNode,n=e.memoizedProps,r[as]=e,(s=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:Vg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[as]=e,e.stateNode=r}return In(e),null;case 13:if(Nt(zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&Mr!==null&&e.mode&1&&!(e.flags&128))v8(),nf(),e.flags|=98560,s=!1;else if(s=Wg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[as]=e}else nf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;In(e),s=!1}else bi!==null&&(Z2(bi),bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||zt.current&1?hn===0&&(hn=3):nT())),e.updateQueue!==null&&(e.flags|=4),In(e),null);case 4:return sf(),j2(t,e),t===null&&Gh(e.stateNode.containerInfo),In(e),null;case 10:return $x(e.type._context),In(e),null;case 17:return dr(e.type)&&Dm(),In(e),null;case 19:if(Nt(zt),s=e.memoizedState,s===null)return In(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vd(s,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jm(t),o!==null){for(e.flags|=128,vd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(zt,zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Jt()>af&&(e.flags|=128,r=!0,vd(s,!1),e.lanes=4194304)}else{if(!r)if(t=jm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return In(e),null}else 2*Jt()-s.renderingStartTime>af&&n!==1073741824&&(e.flags|=128,r=!0,vd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,n=zt.current,Tt(zt,r?n&1|2:n&1),e):(In(e),null);case 22:case 23:return tT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ar&1073741824&&(In(e),e.subtreeFlags&6&&(e.flags|=8192)):In(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function Ej(t,e){switch(Dx(e),e.tag){case 1:return dr(e.type)&&Dm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sf(),Nt(fr),Nt($n),Wx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vx(e),null;case 13:if(Nt(zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));nf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(zt),null;case 4:return sf(),null;case 10:return $x(e.type._context),null;case 22:case 23:return tT(),null;case 24:return null;default:return null}}var Yg=!1,Fn=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,_e=null;function nu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Kt(t,e,r)}else n.current=null}function V2(t,e,n){try{n()}catch(r){Kt(t,e,r)}}var xC=!1;function Cj(t,e){if(A2=Mm,t=o8(),Nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(C2={focusedElem:t,selectionRange:n},Mm=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,_=e.stateNode,m=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:_i(e.type,g),v);_.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(b){Kt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return p=xC,xC=!1,p}function Eh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&V2(e,n,s)}i=i.next}while(i!==r)}}function vv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function W2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nN(t){var e=t.alternate;e!==null&&(t.alternate=null,nN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[ep],delete e[I2],delete e[cj],delete e[uj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rN(t){return t.tag===5||t.tag===3||t.tag===4}function TC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function H2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=km));else if(r!==4&&(t=t.child,t!==null))for(H2(t,e,n),t=t.sibling;t!==null;)H2(t,e,n),t=t.sibling}function X2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(X2(t,e,n),t=t.sibling;t!==null;)X2(t,e,n),t=t.sibling}var xn=null,yi=!1;function Co(t,e,n){for(n=n.child;n!==null;)iN(t,e,n),n=n.sibling}function iN(t,e,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(fv,n)}catch{}switch(n.tag){case 5:Fn||nu(n,e);case 6:var r=xn,i=yi;xn=null,Co(t,e,n),xn=r,yi=i,xn!==null&&(yi?(t=xn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(yi?(t=xn,n=n.stateNode,t.nodeType===8?Tb(t.parentNode,n):t.nodeType===1&&Tb(t,n),qh(t)):Tb(xn,n.stateNode));break;case 4:r=xn,i=yi,xn=n.stateNode.containerInfo,yi=!0,Co(t,e,n),xn=r,yi=i;break;case 0:case 11:case 14:case 15:if(!Fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&V2(n,e,o),i=i.next}while(i!==r)}Co(t,e,n);break;case 1:if(!Fn&&(nu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Kt(n,e,a)}Co(t,e,n);break;case 21:Co(t,e,n);break;case 22:n.mode&1?(Fn=(r=Fn)||n.memoizedState!==null,Co(t,e,n),Fn=r):Co(t,e,n);break;default:Co(t,e,n)}}function EC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Aj),e.forEach(function(r){var i=Fj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,yi=!1;break e;case 3:xn=a.stateNode.containerInfo,yi=!0;break e;case 4:xn=a.stateNode.containerInfo,yi=!0;break e}a=a.return}if(xn===null)throw Error(re(160));iN(s,o,i),xn=null,yi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Kt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sN(e,t),e=e.sibling}function sN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gi(e,t),Hi(t),r&4){try{Eh(3,t,t.return),vv(3,t)}catch(g){Kt(t,t.return,g)}try{Eh(5,t,t.return)}catch(g){Kt(t,t.return,g)}}break;case 1:gi(e,t),Hi(t),r&512&&n!==null&&nu(n,n.return);break;case 5:if(gi(e,t),Hi(t),r&512&&n!==null&&nu(n,n.return),t.flags&32){var i=t.stateNode;try{Hh(i,"")}catch(g){Kt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CO(i,s),_2(a,o);var c=_2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?OO(i,f):u==="dangerouslySetInnerHTML"?IO(i,f):u==="children"?Hh(i,f):bx(i,u,f,c)}switch(a){case"input":f2(i,s);break;case"textarea":RO(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?mu(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?mu(i,!!s.multiple,s.defaultValue,!0):mu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(g){Kt(t,t.return,g)}}break;case 6:if(gi(e,t),Hi(t),r&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Kt(t,t.return,g)}}break;case 3:if(gi(e,t),Hi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qh(e.containerInfo)}catch(g){Kt(t,t.return,g)}break;case 4:gi(e,t),Hi(t);break;case 13:gi(e,t),Hi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jx=Jt())),r&4&&EC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fn=(c=Fn)||u,gi(e,t),Fn=c):gi(e,t),Hi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(_e=t,u=t.child;u!==null;){for(f=_e=u;_e!==null;){switch(d=_e,h=d.child,d.tag){case 0:case 11:case 14:case 15:Eh(4,d,d.return);break;case 1:nu(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Kt(r,n,g)}}break;case 5:nu(d,d.return);break;case 22:if(d.memoizedState!==null){CC(f);continue}}h!==null?(h.return=d,_e=h):CC(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MO("display",o))}catch(g){Kt(t,t.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Kt(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gi(e,t),Hi(t),r&4&&EC(t);break;case 21:break;default:gi(e,t),Hi(t)}}function Hi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rN(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hh(i,""),r.flags&=-33);var s=TC(t);X2(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=TC(t);H2(t,a,o);break;default:throw Error(re(161))}}catch(l){Kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rj(t,e,n){_e=t,oN(t)}function oN(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var i=_e,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Fn;a=Yg;var c=Fn;if(Yg=o,(Fn=l)&&!c)for(_e=i;_e!==null;)o=_e,l=o.child,o.tag===22&&o.memoizedState!==null?RC(i):l!==null?(l.return=o,_e=l):RC(i);for(;s!==null;)_e=s,oN(s),s=s.sibling;_e=i,Yg=a,Fn=c}AC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,_e=s):AC(t)}}function AC(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fn||vv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_i(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&qh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Fn||e.flags&512&&W2(e)}catch(d){Kt(e,e.return,d)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function CC(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function RC(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vv(4,e)}catch(l){Kt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Kt(e,i,l)}}var s=e.return;try{W2(e)}catch(l){Kt(e,s,l)}break;case 5:var o=e.return;try{W2(e)}catch(l){Kt(e,o,l)}}}catch(l){Kt(e,e.return,l)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var Pj=Math.ceil,Hm=go.ReactCurrentDispatcher,Qx=go.ReactCurrentOwner,ii=go.ReactCurrentBatchConfig,nt=0,vn=null,sn=null,En=0,Ar=0,ru=Na(0),hn=0,op=null,Ll=0,bv=0,Gx=0,Ah=null,lr=null,Jx=0,af=1/0,Bs=null,Xm=!1,Y2=null,ha=null,Kg=!1,ta=null,Ym=0,Ch=0,K2=null,G_=-1,J_=0;function qn(){return nt&6?Jt():G_!==-1?G_:G_=Jt()}function pa(t){return t.mode&1?nt&2&&En!==0?En&-En:dj.transition!==null?(J_===0&&(J_=WO()),J_):(t=ht,t!==0||(t=window.event,t=t===void 0?16:QO(t.type)),t):1}function Mi(t,e,n,r){if(50<Ch)throw Ch=0,K2=null,Error(re(185));lg(t,n,r),(!(nt&2)||t!==vn)&&(t===vn&&(!(nt&2)&&(bv|=n),hn===4&&Xo(t,En)),hr(t,r),n===1&&nt===0&&!(e.mode&1)&&(af=Jt()+500,_v&&ka()))}function hr(t,e){var n=t.callbackNode;dz(t,e);var r=Im(t,t===vn?En:0);if(r===0)n!==null&&BA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&BA(n),e===1)t.tag===0?fj(PC.bind(null,t)):_8(PC.bind(null,t)),aj(function(){!(nt&6)&&ka()}),n=null;else{switch(HO(r)){case 1:n=Ex;break;case 4:n=jO;break;case 16:n=Pm;break;case 536870912:n=VO;break;default:n=Pm}n=pN(n,aN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aN(t,e){if(G_=-1,J_=0,nt&6)throw Error(re(327));var n=t.callbackNode;if(Su()&&t.callbackNode!==n)return null;var r=Im(t,t===vn?En:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Km(t,r);else{e=r;var i=nt;nt|=2;var s=cN();(vn!==t||En!==e)&&(Bs=null,af=Jt()+500,Al(t,e));do try{Oj();break}catch(a){lN(t,a)}while(!0);Lx(),Hm.current=s,nt=i,sn!==null?e=0:(vn=null,En=0,e=hn)}if(e!==0){if(e===2&&(i=w2(t),i!==0&&(r=i,e=q2(t,i))),e===1)throw n=op,Al(t,0),Xo(t,r),hr(t,Jt()),n;if(e===6)Xo(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ij(i)&&(e=Km(t,r),e===2&&(s=w2(t),s!==0&&(r=s,e=q2(t,s))),e===1))throw n=op,Al(t,0),Xo(t,r),hr(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:el(t,lr,Bs);break;case 3:if(Xo(t,r),(r&130023424)===r&&(e=Jx+500-Jt(),10<e)){if(Im(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=P2(el.bind(null,t,lr,Bs),e);break}el(t,lr,Bs);break;case 4:if(Xo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ii(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pj(r/1960))-r,10<r){t.timeoutHandle=P2(el.bind(null,t,lr,Bs),r);break}el(t,lr,Bs);break;case 5:el(t,lr,Bs);break;default:throw Error(re(329))}}}return hr(t,Jt()),t.callbackNode===n?aN.bind(null,t):null}function q2(t,e){var n=Ah;return t.current.memoizedState.isDehydrated&&(Al(t,e).flags|=256),t=Km(t,e),t!==2&&(e=lr,lr=n,e!==null&&Z2(e)),t}function Z2(t){lr===null?lr=t:lr.push.apply(lr,t)}function Ij(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ni(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xo(t,e){for(e&=~Gx,e&=~bv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ii(e),r=1<<n;t[n]=-1,e&=~r}}function PC(t){if(nt&6)throw Error(re(327));Su();var e=Im(t,0);if(!(e&1))return hr(t,Jt()),null;var n=Km(t,e);if(t.tag!==0&&n===2){var r=w2(t);r!==0&&(e=r,n=q2(t,r))}if(n===1)throw n=op,Al(t,0),Xo(t,e),hr(t,Jt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,el(t,lr,Bs),hr(t,Jt()),null}function eT(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(af=Jt()+500,_v&&ka())}}function $l(t){ta!==null&&ta.tag===0&&!(nt&6)&&Su();var e=nt;nt|=1;var n=ii.transition,r=ht;try{if(ii.transition=null,ht=1,t)return t()}finally{ht=r,ii.transition=n,nt=e,!(nt&6)&&ka()}}function tT(){Ar=ru.current,Nt(ru)}function Al(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oj(n)),sn!==null)for(n=sn.return;n!==null;){var r=n;switch(Dx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dm();break;case 3:sf(),Nt(fr),Nt($n),Wx();break;case 5:Vx(r);break;case 4:sf();break;case 13:Nt(zt);break;case 19:Nt(zt);break;case 10:$x(r.type._context);break;case 22:case 23:tT()}n=n.return}if(vn=t,sn=t=ga(t.current,null),En=Ar=e,hn=0,op=null,Gx=bv=Ll=0,lr=Ah=null,ll!==null){for(e=0;e<ll.length;e++)if(n=ll[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ll=null}return t}function lN(t,e){do{var n=sn;try{if(Lx(),q_.current=Wm,Vm){for(var r=Wt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vm=!1}if(Bl=0,yn=fn=Wt=null,Th=!1,rp=0,Qx.current=null,n===null||n.return===null){hn=1,op=e,sn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=En,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=_C(o);if(h!==null){h.flags&=-257,mC(h,o,a,s,e),h.mode&1&&gC(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){gC(s,c,e),nT();break e}l=Error(re(426))}}else if(Lt&&a.mode&1){var v=_C(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),mC(v,o,a,s,e),Fx(of(l,a));break e}}s=l=of(l,a),hn!==4&&(hn=2),Ah===null?Ah=[s]:Ah.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=H8(s,l,e);cC(s,_);break e;case 1:a=l;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ha===null||!ha.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=X8(s,a,e);cC(s,b);break e}}s=s.return}while(s!==null)}fN(n)}catch(S){e=S,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function cN(){var t=Hm.current;return Hm.current=Wm,t===null?Wm:t}function nT(){(hn===0||hn===3||hn===2)&&(hn=4),vn===null||!(Ll&268435455)&&!(bv&268435455)||Xo(vn,En)}function Km(t,e){var n=nt;nt|=2;var r=cN();(vn!==t||En!==e)&&(Bs=null,Al(t,e));do try{Mj();break}catch(i){lN(t,i)}while(!0);if(Lx(),nt=n,Hm.current=r,sn!==null)throw Error(re(261));return vn=null,En=0,hn}function Mj(){for(;sn!==null;)uN(sn)}function Oj(){for(;sn!==null&&!rz();)uN(sn)}function uN(t){var e=hN(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,e===null?fN(t):sn=e,Qx.current=null}function fN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ej(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,sn=null;return}}else if(n=Tj(n,e,Ar),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);hn===0&&(hn=5)}function el(t,e,n){var r=ht,i=ii.transition;try{ii.transition=null,ht=1,Nj(t,e,n,r)}finally{ii.transition=i,ht=r}return null}function Nj(t,e,n,r){do Su();while(ta!==null);if(nt&6)throw Error(re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hz(t,s),t===vn&&(sn=vn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kg||(Kg=!0,pN(Pm,function(){return Su(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ii.transition,ii.transition=null;var o=ht;ht=1;var a=nt;nt|=4,Qx.current=null,Cj(t,n),sN(n,t),Jz(C2),Mm=!!A2,C2=A2=null,t.current=n,Rj(n),iz(),nt=a,ht=o,ii.transition=s}else t.current=n;if(Kg&&(Kg=!1,ta=t,Ym=i),s=t.pendingLanes,s===0&&(ha=null),az(n.stateNode),hr(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xm)throw Xm=!1,t=Y2,Y2=null,t;return Ym&1&&t.tag!==0&&Su(),s=t.pendingLanes,s&1?t===K2?Ch++:(Ch=0,K2=t):Ch=0,ka(),null}function Su(){if(ta!==null){var t=HO(Ym),e=ii.transition,n=ht;try{if(ii.transition=null,ht=16>t?16:t,ta===null)var r=!1;else{if(t=ta,ta=null,Ym=0,nt&6)throw Error(re(331));var i=nt;for(nt|=4,_e=t.current;_e!==null;){var s=_e,o=s.child;if(_e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(_e=c;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:Eh(8,u,s)}var f=u.child;if(f!==null)f.return=u,_e=f;else for(;_e!==null;){u=_e;var d=u.sibling,h=u.return;if(nN(u),u===c){_e=null;break}if(d!==null){d.return=h,_e=d;break}_e=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}_e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_e=o;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,_e=_;break e}_e=s.return}}var m=t.current;for(_e=m;_e!==null;){o=_e;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,_e=y;else e:for(o=m;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vv(9,a)}}catch(S){Kt(a,a.return,S)}if(a===o){_e=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,_e=b;break e}_e=a.return}}if(nt=i,ka(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(fv,t)}catch{}r=!0}return r}finally{ht=n,ii.transition=e}}return!1}function IC(t,e,n){e=of(n,e),e=H8(t,e,1),t=da(t,e,1),e=qn(),t!==null&&(lg(t,1,e),hr(t,e))}function Kt(t,e,n){if(t.tag===3)IC(t,t,n);else for(;e!==null;){if(e.tag===3){IC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ha===null||!ha.has(r))){t=of(n,t),t=X8(e,t,1),e=da(e,t,1),t=qn(),e!==null&&(lg(e,1,t),hr(e,t));break}}e=e.return}}function kj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qn(),t.pingedLanes|=t.suspendedLanes&n,vn===t&&(En&n)===n&&(hn===4||hn===3&&(En&130023424)===En&&500>Jt()-Jx?Al(t,0):Gx|=n),hr(t,e)}function dN(t,e){e===0&&(t.mode&1?(e=Lg,Lg<<=1,!(Lg&130023424)&&(Lg=4194304)):e=1);var n=qn();t=io(t,e),t!==null&&(lg(t,e,n),hr(t,n))}function Dj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dN(t,n)}function Fj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),dN(t,n)}var hN;hN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fr.current)ur=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ur=!1,xj(t,e,n);ur=!!(t.flags&131072)}else ur=!1,Lt&&e.flags&1048576&&m8(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Q_(t,e),t=e.pendingProps;var i=tf(e,$n.current);wu(e,n),i=Xx(null,e,r,t,i,n);var s=Yx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dr(r)?(s=!0,Fm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zx(e),i.updater=yv,e.stateNode=i,i._reactInternals=e,F2(e,r,t,n),e=$2(null,e,r,!0,s,n)):(e.tag=0,Lt&&s&&kx(e),Xn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Q_(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Lj(r),t=_i(r,t),i){case 0:e=L2(null,e,r,t,n);break e;case 1:e=bC(null,e,r,t,n);break e;case 11:e=yC(null,e,r,t,n);break e;case 14:e=vC(null,e,r,_i(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_i(r,i),L2(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_i(r,i),bC(t,e,r,i,n);case 3:e:{if(Z8(e),t===null)throw Error(re(387));r=e.pendingProps,s=e.memoizedState,i=s.element,x8(t,e),zm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=of(Error(re(423)),e),e=wC(t,e,r,n,i);break e}else if(r!==i){i=of(Error(re(424)),e),e=wC(t,e,r,n,i);break e}else for(Mr=fa(e.stateNode.containerInfo.firstChild),kr=e,Lt=!0,bi=null,n=w8(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nf(),r===i){e=so(t,e,n);break e}Xn(t,e,r,n)}e=e.child}return e;case 5:return T8(e),t===null&&N2(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,R2(r,i)?o=null:s!==null&&R2(r,s)&&(e.flags|=32),q8(t,e),Xn(t,e,o,n),e.child;case 6:return t===null&&N2(e),null;case 13:return Q8(t,e,n);case 4:return jx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rf(e,null,r,n):Xn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_i(r,i),yC(t,e,r,i,n);case 7:return Xn(t,e,e.pendingProps,n),e.child;case 8:return Xn(t,e,e.pendingProps.children,n),e.child;case 12:return Xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt($m,r._currentValue),r._currentValue=o,s!==null)if(Ni(s.value,o)){if(s.children===i.children&&!fr.current){e=so(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=eo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),k2(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),k2(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wu(e,n),i=oi(i),r=r(i),e.flags|=1,Xn(t,e,r,n),e.child;case 14:return r=e.type,i=_i(r,e.pendingProps),i=_i(r.type,i),vC(t,e,r,i,n);case 15:return Y8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_i(r,i),Q_(t,e),e.tag=1,dr(r)?(t=!0,Fm(e)):t=!1,wu(e,n),W8(e,r,i),F2(e,r,i,n),$2(null,e,r,!0,t,n);case 19:return G8(t,e,n);case 22:return K8(t,e,n)}throw Error(re(156,e.tag))};function pN(t,e){return zO(t,e)}function Bj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(t,e,n,r){return new Bj(t,e,n,r)}function rT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lj(t){if(typeof t=="function")return rT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sx)return 11;if(t===xx)return 14}return 2}function ga(t,e){var n=t.alternate;return n===null?(n=ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function em(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yc:return Cl(n.children,i,s,e);case wx:o=8,i|=8;break;case o2:return t=ni(12,n,e,i|2),t.elementType=o2,t.lanes=s,t;case a2:return t=ni(13,n,e,i),t.elementType=a2,t.lanes=s,t;case l2:return t=ni(19,n,e,i),t.elementType=l2,t.lanes=s,t;case TO:return wv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SO:o=10;break e;case xO:o=9;break e;case Sx:o=11;break e;case xx:o=14;break e;case $o:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=ni(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Cl(t,e,n,r){return t=ni(7,t,r,e),t.lanes=n,t}function wv(t,e,n,r){return t=ni(22,t,r,e),t.elementType=TO,t.lanes=n,t.stateNode={isHidden:!1},t}function Ob(t,e,n){return t=ni(6,t,null,e),t.lanes=n,t}function Nb(t,e,n){return e=ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $j(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hb(0),this.expirationTimes=hb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iT(t,e,n,r,i,s,o,a,l){return t=new $j(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ni(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zx(s),t}function Uj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gN(t){if(!t)return wa;t=t._reactInternals;e:{if(Gl(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(dr(n))return g8(t,n,e)}return e}function _N(t,e,n,r,i,s,o,a,l){return t=iT(n,r,!0,t,i,s,o,a,l),t.context=gN(null),n=t.current,r=qn(),i=pa(n),s=eo(r,i),s.callback=e??null,da(n,s,i),t.current.lanes=i,lg(t,i,r),hr(t,r),t}function Sv(t,e,n,r){var i=e.current,s=qn(),o=pa(i);return n=gN(n),e.context===null?e.context=n:e.pendingContext=n,e=eo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=da(i,e,o),t!==null&&(Mi(t,i,o,s),K_(t,i,o)),o}function qm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function MC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sT(t,e){MC(t,e),(t=t.alternate)&&MC(t,e)}function zj(){return null}var mN=typeof reportError=="function"?reportError:function(t){console.error(t)};function oT(t){this._internalRoot=t}xv.prototype.render=oT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Sv(t,e,null,null)};xv.prototype.unmount=oT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$l(function(){Sv(null,t,null,null)}),e[ro]=null}};function xv(t){this._internalRoot=t}xv.prototype.unstable_scheduleHydration=function(t){if(t){var e=KO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ho.length&&e!==0&&e<Ho[n].priority;n++);Ho.splice(n,0,t),n===0&&ZO(t)}};function aT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OC(){}function jj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=qm(o);s.call(c)}}var o=_N(e,r,t,0,null,!1,!1,"",OC);return t._reactRootContainer=o,t[ro]=o.current,Gh(t.nodeType===8?t.parentNode:t),$l(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=qm(l);a.call(c)}}var l=iT(t,0,!1,null,null,!1,!1,"",OC);return t._reactRootContainer=l,t[ro]=l.current,Gh(t.nodeType===8?t.parentNode:t),$l(function(){Sv(e,l,n,r)}),l}function Ev(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qm(o);a.call(l)}}Sv(e,o,t,i)}else o=jj(n,e,t,i,r);return qm(o)}XO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yd(e.pendingLanes);n!==0&&(Ax(e,n|1),hr(e,Jt()),!(nt&6)&&(af=Jt()+500,ka()))}break;case 13:$l(function(){var r=io(t,1);if(r!==null){var i=qn();Mi(r,t,1,i)}}),sT(t,1)}};Cx=function(t){if(t.tag===13){var e=io(t,134217728);if(e!==null){var n=qn();Mi(e,t,134217728,n)}sT(t,134217728)}};YO=function(t){if(t.tag===13){var e=pa(t),n=io(t,e);if(n!==null){var r=qn();Mi(n,t,e,r)}sT(t,e)}};KO=function(){return ht};qO=function(t,e){var n=ht;try{return ht=t,e()}finally{ht=n}};y2=function(t,e,n){switch(e){case"input":if(f2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gv(r);if(!i)throw Error(re(90));AO(r),f2(r,i)}}}break;case"textarea":RO(t,n);break;case"select":e=n.value,e!=null&&mu(t,!!n.multiple,e,!1)}};DO=eT;FO=$l;var Vj={usingClientEntryPoint:!1,Events:[ug,Qc,gv,NO,kO,eT]},bd={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wj={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$O(t),t===null?null:t.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||zj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qg.isDisabled&&qg.supportsFiber)try{fv=qg.inject(Wj),_s=qg}catch{}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj;$r.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aT(e))throw Error(re(200));return Uj(t,e,null,n)};$r.createRoot=function(t,e){if(!aT(t))throw Error(re(299));var n=!1,r="",i=mN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iT(t,1,!1,null,null,n,!1,r,i),t[ro]=e.current,Gh(t.nodeType===8?t.parentNode:t),new oT(e)};$r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=$O(e),t=t===null?null:t.stateNode,t};$r.flushSync=function(t){return $l(t)};$r.hydrate=function(t,e,n){if(!Tv(e))throw Error(re(200));return Ev(null,t,e,!0,n)};$r.hydrateRoot=function(t,e,n){if(!aT(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_N(e,null,t,1,n??null,i,!1,s,o),t[ro]=e.current,Gh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xv(e)};$r.render=function(t,e,n){if(!Tv(e))throw Error(re(200));return Ev(null,t,e,!1,n)};$r.unmountComponentAtNode=function(t){if(!Tv(t))throw Error(re(40));return t._reactRootContainer?($l(function(){Ev(null,null,t,!1,function(){t._reactRootContainer=null,t[ro]=null})}),!0):!1};$r.unstable_batchedUpdates=eT;$r.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tv(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Ev(t,e,n,!1,r)};$r.version="18.3.1-next-f1338f8080-20240426";function yN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yN)}catch(t){console.error(t)}}yN(),yO.exports=$r;var Da=yO.exports;const Hj=Un(Da);var NC=Da;i2.createRoot=NC.createRoot,i2.hydrateRoot=NC.hydrateRoot;const kC=()=>{const[t,e]=w.useState({width:null,height:null}),n=w.useRef(null);return[w.useCallback(i=>{if(n.current&&(n.current.disconnect(),n.current=null),(i==null?void 0:i.nodeType)===Node.ELEMENT_NODE){const s=new ResizeObserver(([o])=>{if(o&&o.borderBoxSize){const{inlineSize:a,blockSize:l}=o.borderBoxSize[0];e({width:a,height:l})}});s.observe(i),n.current=s}},[]),t]};function vN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=vN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xj(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=vN(t))&&(r&&(r+=" "),r+=e);return r}const lT="-";function Yj(t){const e=qj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(lT);return a[0]===""&&a.length!==1&&a.shift(),bN(a,e)||Kj(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function bN(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?bN(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(lT);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const DC=/^\[(.+)\]$/;function Kj(t){if(DC.test(t)){const e=DC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function qj(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Qj(Object.entries(t.classGroups),n).forEach(([s,o])=>{Q2(o,r,s,e)}),r}function Q2(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:FC(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Zj(i)){Q2(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Q2(o,FC(e,s),n,r)})})}function FC(t,e){let n=t;return e.split(lT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Zj(t){return t.isThemeGetter}function Qj(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function Gj(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const wN="!";function Jj(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,u;for(let g=0;g<o.length;g++){let v=o[g];if(l===0){if(v===r&&(n||o.slice(g,g+i)===e)){a.push(o.slice(c,g)),c=g+i;continue}if(v==="/"){u=g;continue}}v==="["?l++:v==="]"&&l--}const f=a.length===0?o:o.substring(c),d=f.startsWith(wN),h=d?f.substring(1):f,p=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}}}function eV(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function tV(t){return{cache:Gj(t.cacheSize),splitModifiers:Jj(t),...Yj(t)}}const nV=/\s+/;function rV(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(nV).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=n(o);let f=r(u?c.substring(0,u):c),d=!!u;if(!f){if(!u)return{isTailwindClass:!1,originalClassName:o};if(f=r(c),!f)return{isTailwindClass:!1,originalClassName:o};d=!1}const h=eV(a).join(":");return{isTailwindClass:!0,modifierId:l?h+wN:h,classGroupId:f,originalClassName:o,hasPostfixModifier:d}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(f=>s.add(a+f)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function iV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=SN(e))&&(r&&(r+=" "),r+=n);return r}function SN(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=SN(t[r]))&&(n&&(n+=" "),n+=e);return n}function sV(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,f)=>f(u),t());return n=tV(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=rV(l,n);return i(l,u),u}return function(){return s(iV.apply(null,arguments))}}function Ct(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const xN=/^\[(?:([a-z-]+):)?(.+)\]$/i,oV=/^\d+\/\d+$/,aV=new Set(["px","full","screen"]),lV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function ks(t){return ul(t)||aV.has(t)||oV.test(t)}function Ro(t){return Uf(t,"length",bV)}function ul(t){return!!t&&!Number.isNaN(Number(t))}function Zg(t){return Uf(t,"number",ul)}function wd(t){return!!t&&Number.isInteger(Number(t))}function hV(t){return t.endsWith("%")&&ul(t.slice(0,-1))}function Ve(t){return xN.test(t)}function Po(t){return lV.test(t)}const pV=new Set(["length","size","percentage"]);function gV(t){return Uf(t,pV,TN)}function _V(t){return Uf(t,"position",TN)}const mV=new Set(["image","url"]);function yV(t){return Uf(t,mV,SV)}function vV(t){return Uf(t,"",wV)}function Sd(){return!0}function Uf(t,e,n){const r=xN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function bV(t){return cV.test(t)&&!uV.test(t)}function TN(){return!1}function wV(t){return fV.test(t)}function SV(t){return dV.test(t)}function xV(){const t=Ct("colors"),e=Ct("spacing"),n=Ct("blur"),r=Ct("brightness"),i=Ct("borderColor"),s=Ct("borderRadius"),o=Ct("borderSpacing"),a=Ct("borderWidth"),l=Ct("contrast"),c=Ct("grayscale"),u=Ct("hueRotate"),f=Ct("invert"),d=Ct("gap"),h=Ct("gradientColorStops"),p=Ct("gradientColorStopPositions"),g=Ct("inset"),v=Ct("margin"),_=Ct("opacity"),m=Ct("padding"),y=Ct("saturate"),b=Ct("scale"),S=Ct("sepia"),A=Ct("skew"),I=Ct("space"),R=Ct("translate"),M=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Ve,e],F=()=>[Ve,e],D=()=>["",ks,Ro],z=()=>["auto",ul,Ve],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Ve],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>[ul,Zg],G=()=>[ul,Ve];return{cacheSize:500,separator:":",theme:{colors:[Sd],spacing:[ks,Ro],blur:["none","",Po,Ve],brightness:me(),borderColor:[t],borderRadius:["none","","full",Po,Ve],borderSpacing:F(),borderWidth:D(),contrast:me(),grayscale:Y(),hueRotate:G(),invert:Y(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[hV,Ro],inset:N(),margin:N(),opacity:me(),padding:F(),saturate:me(),scale:me(),sepia:Y(),skew:G(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[Po]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Ve]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wd,Ve]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",wd,Ve]}],"grid-cols":[{"grid-cols":[Sd]}],"col-start-end":[{col:["auto",{span:["full",wd,Ve]},Ve]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Sd]}],"row-start-end":[{row:["auto",{span:[wd,Ve]},Ve]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[Po]},Po]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Po,Ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zg]}],"font-family":[{font:[Sd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",ul,Zg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ks,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ks,Ro]}],"underline-offset":[{"underline-offset":["auto",ks,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),_V]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[ks,Ve]}],"outline-w":[{outline:[ks,Ro]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ks,Ro]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Po,vV]}],"shadow-color":[{shadow:[Sd]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Po,Ve]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[wd,Ve]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ks,Ro,Zg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const TV=sV(xV),an=(...t)=>TV(Xj(t));/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EV={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=(t,e,n,r)=>{const i=w.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:l,children:c,...u},f)=>w.createElement("svg",{ref:f,...EV[t],width:o,height:o,className:["tabler-icon",`tabler-icon-${e}`,l].join(" "),...t==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...u},[...r.map(([d,h])=>w.createElement(d,h)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AV=_o("outline","building-hospital","IconBuildingHospital",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16",key:"svg-1"}],["path",{d:"M9 21v-4a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v4",key:"svg-2"}],["path",{d:"M10 9l4 0",key:"svg-3"}],["path",{d:"M12 7l0 4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CV=_o("outline","circle-off","IconCircleOff",[["path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RV=_o("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PV=_o("outline","grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IV=_o("outline","map","IconMap",[["path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v13",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MV=_o("outline","mountain","IconMountain",[["path",{d:"M3 20h18l-6.921 -14.612a2.3 2.3 0 0 0 -4.158 0l-6.921 14.612z",key:"svg-0"}],["path",{d:"M7.5 11l2 2.5l2.5 -2.5l2 3l2.5 -2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OV=_o("outline","satellite","IconSatellite",[["path",{d:"M3.707 6.293l2.586 -2.586a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 1 0 1.414l-2.586 2.586a1 1 0 0 1 -1.414 0l-5.586 -5.586a1 1 0 0 1 0 -1.414z",key:"svg-0"}],["path",{d:"M6 10l-3 3l3 3l3 -3",key:"svg-1"}],["path",{d:"M10 6l3 -3l3 3l-3 3",key:"svg-2"}],["path",{d:"M12 12l1.5 1.5",key:"svg-3"}],["path",{d:"M14.5 17a2.5 2.5 0 0 0 2.5 -2.5",key:"svg-4"}],["path",{d:"M15 21a6 6 0 0 0 6 -6",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NV=_o("outline","school","IconSchool",[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kV=_o("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const{createElement:lf,createContext:DV,createRef:tRe,forwardRef:EN,useCallback:Sr,useContext:AN,useEffect:Rl,useImperativeHandle:CN,useLayoutEffect:FV,useMemo:BV,useRef:or,useState:Rh}=mx,BC=mx.useId,LV=FV,Av=DV(null);Av.displayName="PanelGroupContext";const Pl=LV,$V=typeof BC=="function"?BC:()=>null;let UV=0;function cT(t=null){const e=$V(),n=or(t||e||null);return n.current===null&&(n.current=""+UV++),t??n.current}function RN({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:f,order:d,style:h,tagName:p="div",...g}){const v=AN(Av);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:_,expandPanel:m,getPanelSize:y,getPanelStyle:b,groupId:S,isPanelCollapsed:A,reevaluatePanelConstraints:I,registerPanel:R,resizePanel:M,unregisterPanel:k}=v,N=cT(o),F=or({callbacks:{onCollapse:c,onExpand:u,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:N,idIsFromProps:o!==void 0,order:d});or({didLogMissingDefaultSizeWarning:!1}),Pl(()=>{const{callbacks:z,constraints:Z}=F.current,ee={...Z};F.current.id=N,F.current.idIsFromProps=o!==void 0,F.current.order=d,z.onCollapse=c,z.onExpand=u,z.onResize=f,Z.collapsedSize=n,Z.collapsible=r,Z.defaultSize=i,Z.maxSize=a,Z.minSize=l,(ee.collapsedSize!==Z.collapsedSize||ee.collapsible!==Z.collapsible||ee.maxSize!==Z.maxSize||ee.minSize!==Z.minSize)&&I(F.current,ee)}),Pl(()=>{const z=F.current;return R(z),()=>{k(z)}},[d,N,R,k]),CN(s,()=>({collapse:()=>{_(F.current)},expand:z=>{m(F.current,z)},getId(){return N},getSize(){return y(F.current)},isCollapsed(){return A(F.current)},isExpanded(){return!A(F.current)},resize:z=>{M(F.current,z)}}),[_,m,y,A,N,M]);const D=b(F.current,i);return lf(p,{...g,children:t,className:e,id:o,style:{...D,...h},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":S,"data-panel-id":N,"data-panel-size":parseFloat(""+D.flexGrow).toFixed(1)})}const PN=EN((t,e)=>lf(RN,{...t,forwardedRef:e}));RN.displayName="Panel";PN.displayName="forwardRef(Panel)";let G2=null,fl=null;function zV(t,e){if(e){const n=(e&kN)!==0,r=(e&DN)!==0,i=(e&FN)!==0,s=(e&BN)!==0;if(n)return i?"se-resize":s?"ne-resize":"e-resize";if(r)return i?"sw-resize":s?"nw-resize":"w-resize";if(i)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function jV(){fl!==null&&(document.head.removeChild(fl),G2=null,fl=null)}function kb(t,e){const n=zV(t,e);G2!==n&&(G2=n,fl===null&&(fl=document.createElement("style"),document.head.appendChild(fl)),fl.innerHTML=`*{cursor: ${n}!important;}`)}function IN(t){return t.type==="keydown"}function MN(t){return t.type.startsWith("pointer")}function ON(t){return t.type.startsWith("mouse")}function Cv(t){if(MN(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(ON(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function VV(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function WV(t,e,n){return n?t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y:t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y}function HV(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:UC(t),b:UC(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Ke(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:$C(LC(n.a)),b:$C(LC(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const XV=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function YV(t){var e;const n=getComputedStyle((e=NN(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function KV(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||YV(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||XV.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function LC(t){let e=t.length;for(;e--;){const n=t[e];if(Ke(n,"Missing node"),KV(n))return n}return null}function $C(t){return t&&Number(getComputedStyle(t).zIndex)||0}function UC(t){const e=[];for(;t;)e.push(t),t=NN(t);return e}function NN(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const kN=1,DN=2,FN=4,BN=8,qV=VV()==="coarse";let Sa=[],Rv=!1,Yo=new Map,Pv=new Map;const ap=new Set;function ZV(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},l=(s=Yo.get(o))!==null&&s!==void 0?s:0;return Yo.set(o,l+1),ap.add(a),Zm(),function(){var u;Pv.delete(t),ap.delete(a);const f=(u=Yo.get(o))!==null&&u!==void 0?u:1;Yo.set(o,f-1),Zm(),f===1&&Yo.delete(o)}}function zC(t){const{target:e}=t,{x:n,y:r}=Cv(t);Rv=!0,uT({target:e,x:n,y:r}),Zm(),Sa.length>0&&(fT("down",t),t.preventDefault(),t.stopPropagation())}function xd(t){const{x:e,y:n}=Cv(t);if(!Rv){const{target:r}=t;uT({target:r,x:e,y:n})}fT("move",t),LN(),Sa.length>0&&t.preventDefault()}function vc(t){const{target:e}=t,{x:n,y:r}=Cv(t);Pv.clear(),Rv=!1,Sa.length>0&&t.preventDefault(),fT("up",t),uT({target:e,x:n,y:r}),LN(),Zm()}function uT({target:t,x:e,y:n}){Sa.splice(0);let r=null;t instanceof HTMLElement&&(r=t),ap.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:f}=a,d=qV?o.coarse:o.fine;if(e>=c-d&&e<=u+d&&n>=f-d&&n<=l+d){if(r!==null&&s!==r&&!s.contains(r)&&!r.contains(s)&&HV(r,s)>0){let p=r,g=!1;for(;p&&!p.contains(s);){if(WV(p.getBoundingClientRect(),a,!0)){g=!0;break}p=p.parentElement}if(g)return}Sa.push(i)}})}function Db(t,e){Pv.set(t,e)}function LN(){let t=!1,e=!1;Sa.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;Pv.forEach(r=>{n|=r}),t&&e?kb("intersection",n):t?kb("horizontal",n):e?kb("vertical",n):jV()}function Zm(){Yo.forEach((t,e)=>{const{body:n}=e;n.removeEventListener("contextmenu",vc),n.removeEventListener("pointerdown",zC),n.removeEventListener("pointerleave",xd),n.removeEventListener("pointermove",xd)}),window.removeEventListener("pointerup",vc),window.removeEventListener("pointercancel",vc),ap.size>0&&(Rv?(Sa.length>0&&Yo.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",vc),n.addEventListener("pointerleave",xd),n.addEventListener("pointermove",xd))}),window.addEventListener("pointerup",vc),window.addEventListener("pointercancel",vc)):Yo.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",zC,{capture:!0}),n.addEventListener("pointermove",xd))}))}function fT(t,e){ap.forEach(n=>{const{setResizeHandlerState:r}=n,i=Sa.includes(n);r(t,i,e)})}function Ke(t,e){if(!t)throw console.error(e),Error(e)}const dT=10;function Ul(t,e,n=dT){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ws(t,e,n=dT){return Ul(t,e,n)===0}function Cr(t,e,n){return Ul(t,e,n)===0}function QV(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!Cr(i,s,n))return!1}return!0}function iu({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Ke(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Ul(n,a)<0)if(s){const l=(i+a)/2;Ul(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(dT)),n}function qd({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(Cr(t,0))return e;const o=[...e],[a,l]=r;Ke(a!=null,"Invalid first pivot index"),Ke(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const f=t<0?l:a,d=n[f];Ke(d,`Panel constraints not found for index ${f}`);const{collapsedSize:h=0,collapsible:p,minSize:g=0}=d;if(p){const v=e[f];if(Ke(v!=null,`Previous layout not found for panel index ${f}`),Cr(v,h)){const _=g-v;Ul(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}{const f=t<0?a:l,d=n[f];Ke(d,`No panel constraints found for index ${f}`);const{collapsedSize:h=0,collapsible:p,minSize:g=0}=d;if(p){const v=e[f];if(Ke(v!=null,`Previous layout not found for panel index ${f}`),Cr(v,g)){const _=v-h;Ul(_,Math.abs(t))>0&&(t=t<0?0-_:_)}}}}{const f=t<0?1:-1;let d=t<0?l:a,h=0;for(;;){const g=e[d];Ke(g!=null,`Previous layout not found for panel index ${d}`);const _=iu({panelConstraints:n,panelIndex:d,size:100})-g;if(h+=_,d+=f,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-p:p}{let d=t<0?a:l;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(c),p=e[d];Ke(p!=null,`Previous layout not found for panel index ${d}`);const g=p-h,v=iu({panelConstraints:n,panelIndex:d,size:g});if(!Cr(p,v)&&(c+=p-v,o[d]=v,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(QV(i,o))return i;{const f=t<0?l:a,d=e[f];Ke(d!=null,`Previous layout not found for panel index ${f}`);const h=d+c,p=iu({panelConstraints:n,panelIndex:f,size:h});if(o[f]=p,!Cr(p,h)){let g=h-p,_=t<0?l:a;for(;_>=0&&_<n.length;){const m=o[_];Ke(m!=null,`Previous layout not found for panel index ${_}`);const y=m+g,b=iu({panelConstraints:n,panelIndex:_,size:y});if(Cr(m,b)||(g-=b-m,o[_]=b),Cr(g,0))break;t>0?_--:_++}}}const u=o.reduce((f,d)=>d+f,0);return Cr(u,100)?o:i}function GV({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Ke(a!=null,"No pivot index found"),e.forEach((f,d)=>{const{constraints:h}=f,{maxSize:p=100,minSize:g=0}=h;d===a?(r=g,i=p):(s+=g,o+=p)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function lp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function $N(t,e,n=document){const i=lp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function UN(t,e,n){const r=$N(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function zN(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function Iv(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function JV(t,e,n,r=document){var i,s,o,a;const l=Iv(e,r),c=lp(t,r),u=l?c.indexOf(l):-1,f=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,d=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[f,d]}function eW({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){or({didWarnAboutMissingResizeHandle:!1}),Pl(()=>{if(!s)return;const a=lp(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:f}=GV({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),d=a[l];if(d!=null){const h=i[l];Ke(h,`No panel data found for index "${l}"`),d.setAttribute("aria-controls",h.id),d.setAttribute("aria-valuemax",""+Math.round(c)),d.setAttribute("aria-valuemin",""+Math.round(u)),d.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),Rl(()=>{if(!s)return;const a=e.current;Ke(a,"Eager values not found");const{panelDataArray:l}=a,c=zN(n,s);Ke(c!=null,`No group found for id "${n}"`);const u=lp(n,s);Ke(u,`No resize handles found for group id "${n}"`);const f=u.map(d=>{const h=d.getAttribute("data-panel-resize-handle-id");Ke(h,"Resize handle element has no handle id attribute");const[p,g]=JV(n,h,l,s);if(p==null||g==null)return()=>{};const v=_=>{if(!_.defaultPrevented)switch(_.key){case"Enter":{_.preventDefault();const m=l.findIndex(y=>y.id===p);if(m>=0){const y=l[m];Ke(y,`No panel data found for index ${m}`);const b=r[m],{collapsedSize:S=0,collapsible:A,minSize:I=0}=y.constraints;if(b!=null&&A){const R=qd({delta:Cr(b,S)?I-S:S-b,initialLayout:r,panelConstraints:l.map(M=>M.constraints),pivotIndices:UN(n,h,s),prevLayout:r,trigger:"keyboard"});r!==R&&o(R)}}break}}};return d.addEventListener("keydown",v),()=>{d.removeEventListener("keydown",v)}});return()=>{f.forEach(d=>d())}},[s,t,e,n,r,i,o])}function jC(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jN(t,e){const n=t==="horizontal",{x:r,y:i}=Cv(e);return n?r:i}function tW(t,e,n,r,i){const s=n==="horizontal",o=Iv(e,i);Ke(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");Ke(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=jN(n,t),u=zN(a,i);Ke(u,`No group element found for id "${a}"`);const f=u.getBoundingClientRect(),d=s?f.width:f.height;return(c-l)/d*100}function nW(t,e,n,r,i,s){if(IN(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:tW(t,e,n,r,s)}function rW({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Ke(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ke(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function bc(t,e,n){e.forEach((r,i)=>{const s=t[i];Ke(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,f=n[l];if(f==null||r!==f){n[l]=r;const{onCollapse:d,onExpand:h,onResize:p}=o;p&&p(r,f),u&&(d||h)&&(h&&(f==null||Ws(f,c))&&!Ws(r,c)&&h(),d&&(f==null||!Ws(f,c))&&Ws(r,c)&&d())}})}function Qg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function iW({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toPrecision(s):"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function sW(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function VC(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function VN(t){return`react-resizable-panels:${t}`}function WN(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function HN(t,e){try{const n=VN(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function oW(t,e,n){var r,i;const s=(r=HN(t,n))!==null&&r!==void 0?r:{},o=WN(e);return(i=s[o])!==null&&i!==void 0?i:null}function aW(t,e,n,r,i){var s;const o=VN(t),a=WN(e),l=(s=HN(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function WC({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Cr(r,100))for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null,`No layout data found for index ${s}`);const a=iu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Cr(i,0))for(let s=0;s<e.length;s++){const o=n[s];Ke(o!=null,`No layout data found for index ${s}`);const a=o+i,l=iu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Cr(i,0)))break}return n}const lW=100,Zd={getItem:t=>(VC(Zd),Zd.getItem(t)),setItem:(t,e)=>{VC(Zd),Zd.setItem(t,e)}},HC={};function XN({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Zd,style:c,tagName:u="div",...f}){const d=cT(s),h=or(null),[p,g]=Rh(null),[v,_]=Rh([]),m=or({}),y=or(new Map),b=or(0),S=or({autoSaveId:t,direction:r,dragState:p,id:d,keyboardResizeBy:a,onLayout:o,storage:l}),A=or({layout:v,panelDataArray:[],panelDataArrayChanged:!1});or({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),CN(i,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:G}=A.current;return G},setLayout:G=>{const{onLayout:ge}=S.current,{layout:le,panelDataArray:ae}=A.current,oe=WC({layout:G,panelConstraints:ae.map(ue=>ue.constraints)});jC(le,oe)||(_(oe),A.current.layout=oe,ge&&ge(oe),bc(ae,oe,m.current))}}),[]),Pl(()=>{S.current.autoSaveId=t,S.current.direction=r,S.current.dragState=p,S.current.id=d,S.current.onLayout=o,S.current.storage=l}),eW({committedValuesRef:S,eagerValuesRef:A,groupId:d,layout:v,panelDataArray:A.current.panelDataArray,setLayout:_,panelGroupElement:h.current}),Rl(()=>{const{panelDataArray:G}=A.current;if(t){if(v.length===0||v.length!==G.length)return;let ge=HC[t];ge==null&&(ge=sW(aW,lW),HC[t]=ge);const le=[...G],ae=new Map(y.current);ge(t,le,ae,v,l)}},[t,v,l]),Rl(()=>{});const I=Sr(G=>{const{onLayout:ge}=S.current,{layout:le,panelDataArray:ae}=A.current;if(G.constraints.collapsible){const oe=ae.map(q=>q.constraints),{collapsedSize:ue=0,panelSize:Ee,pivotIndices:K}=Ka(ae,G,le);if(Ke(Ee!=null,`Panel size not found for panel "${G.id}"`),!Ws(Ee,ue)){y.current.set(G.id,Ee);const de=kc(ae,G)===ae.length-1?Ee-ue:ue-Ee,H=qd({delta:de,initialLayout:le,panelConstraints:oe,pivotIndices:K,prevLayout:le,trigger:"imperative-api"});Qg(le,H)||(_(H),A.current.layout=H,ge&&ge(H),bc(ae,H,m.current))}}},[]),R=Sr((G,ge)=>{const{onLayout:le}=S.current,{layout:ae,panelDataArray:oe}=A.current;if(G.constraints.collapsible){const ue=oe.map(je=>je.constraints),{collapsedSize:Ee=0,panelSize:K=0,minSize:q=0,pivotIndices:de}=Ka(oe,G,ae),H=ge??q;if(Ws(K,Ee)){const je=y.current.get(G.id),Be=je!=null&&je>=H?je:H,Xe=kc(oe,G)===oe.length-1?K-Be:Be-K,rt=qd({delta:Xe,initialLayout:ae,panelConstraints:ue,pivotIndices:de,prevLayout:ae,trigger:"imperative-api"});Qg(ae,rt)||(_(rt),A.current.layout=rt,le&&le(rt),bc(oe,rt,m.current))}}},[]),M=Sr(G=>{const{layout:ge,panelDataArray:le}=A.current,{panelSize:ae}=Ka(le,G,ge);return Ke(ae!=null,`Panel size not found for panel "${G.id}"`),ae},[]),k=Sr((G,ge)=>{const{panelDataArray:le}=A.current,ae=kc(le,G);return iW({defaultSize:ge,dragState:p,layout:v,panelData:le,panelIndex:ae})},[p,v]),N=Sr(G=>{const{layout:ge,panelDataArray:le}=A.current,{collapsedSize:ae=0,collapsible:oe,panelSize:ue}=Ka(le,G,ge);return Ke(ue!=null,`Panel size not found for panel "${G.id}"`),oe===!0&&Ws(ue,ae)},[]),F=Sr(G=>{const{layout:ge,panelDataArray:le}=A.current,{collapsedSize:ae=0,collapsible:oe,panelSize:ue}=Ka(le,G,ge);return Ke(ue!=null,`Panel size not found for panel "${G.id}"`),!oe||Ul(ue,ae)>0},[]),D=Sr(G=>{const{panelDataArray:ge}=A.current;ge.push(G),ge.sort((le,ae)=>{const oe=le.order,ue=ae.order;return oe==null&&ue==null?0:oe==null?-1:ue==null?1:oe-ue}),A.current.panelDataArrayChanged=!0},[]);Pl(()=>{if(A.current.panelDataArrayChanged){A.current.panelDataArrayChanged=!1;const{autoSaveId:G,onLayout:ge,storage:le}=S.current,{layout:ae,panelDataArray:oe}=A.current;let ue=null;if(G){const K=oW(G,oe,le);K&&(y.current=new Map(Object.entries(K.expandToSizes)),ue=K.layout)}ue==null&&(ue=rW({panelDataArray:oe}));const Ee=WC({layout:ue,panelConstraints:oe.map(K=>K.constraints)});jC(ae,Ee)||(_(Ee),A.current.layout=Ee,ge&&ge(Ee),bc(oe,Ee,m.current))}}),Pl(()=>{const G=A.current;return()=>{G.layout=[]}},[]);const z=Sr(G=>function(le){le.preventDefault();const ae=h.current;if(!ae)return()=>null;const{direction:oe,dragState:ue,id:Ee,keyboardResizeBy:K,onLayout:q}=S.current,{layout:de,panelDataArray:H}=A.current,{initialLayout:je}=ue??{},Be=UN(Ee,G,ae);let Fe=nW(le,G,oe,ue,K,ae);if(Fe===0)return;const Xe=oe==="horizontal";document.dir==="rtl"&&Xe&&(Fe=-Fe);const rt=H.map(Gt=>Gt.constraints),Ut=qd({delta:Fe,initialLayout:je??de,panelConstraints:rt,pivotIndices:Be,prevLayout:de,trigger:IN(le)?"keyboard":"mouse-or-touch"}),er=!Qg(de,Ut);(MN(le)||ON(le))&&b.current!=Fe&&(b.current=Fe,er?Db(G,0):Xe?Db(G,Fe<0?kN:DN):Db(G,Fe<0?FN:BN)),er&&(_(Ut),A.current.layout=Ut,q&&q(Ut),bc(H,Ut,m.current))},[]),Z=Sr((G,ge)=>{const{onLayout:le}=S.current,{layout:ae,panelDataArray:oe}=A.current,ue=oe.map(je=>je.constraints),{panelSize:Ee,pivotIndices:K}=Ka(oe,G,ae);Ke(Ee!=null,`Panel size not found for panel "${G.id}"`);const de=kc(oe,G)===oe.length-1?Ee-ge:ge-Ee,H=qd({delta:de,initialLayout:ae,panelConstraints:ue,pivotIndices:K,prevLayout:ae,trigger:"imperative-api"});Qg(ae,H)||(_(H),A.current.layout=H,le&&le(H),bc(oe,H,m.current))},[]),ee=Sr((G,ge)=>{const{layout:le,panelDataArray:ae}=A.current,{collapsedSize:oe=0,collapsible:ue}=ge,{collapsedSize:Ee=0,collapsible:K,maxSize:q=100,minSize:de=0}=G.constraints,{panelSize:H}=Ka(ae,G,le);H!=null&&(ue&&K&&Ws(H,oe)?Ws(oe,Ee)||Z(G,Ee):H<de?Z(G,de):H>q&&Z(G,q))},[Z]),ne=Sr((G,ge)=>{const{direction:le}=S.current,{layout:ae}=A.current;if(!h.current)return;const oe=Iv(G,h.current);Ke(oe,`Drag handle element not found for id "${G}"`);const ue=jN(le,ge);g({dragHandleId:G,dragHandleRect:oe.getBoundingClientRect(),initialCursorPosition:ue,initialLayout:ae})},[]),X=Sr(()=>{g(null)},[]),Y=Sr(G=>{const{panelDataArray:ge}=A.current,le=kc(ge,G);le>=0&&(ge.splice(le,1),delete m.current[G.id],A.current.panelDataArrayChanged=!0)},[]),ce=BV(()=>({collapsePanel:I,direction:r,dragState:p,expandPanel:R,getPanelSize:M,getPanelStyle:k,groupId:d,isPanelCollapsed:N,isPanelExpanded:F,reevaluatePanelConstraints:ee,registerPanel:D,registerResizeHandle:z,resizePanel:Z,startDragging:ne,stopDragging:X,unregisterPanel:Y,panelGroupElement:h.current}),[I,p,r,R,M,k,d,N,F,ee,D,z,Z,ne,X,Y]),me={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return lf(Av.Provider,{value:ce},lf(u,{...f,children:e,className:n,id:s,ref:h,style:{...me,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":d}))}const YN=EN((t,e)=>lf(XN,{...t,forwardedRef:e}));XN.displayName="PanelGroup";YN.displayName="forwardRef(PanelGroup)";function kc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ka(t,e,n){const r=kc(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function cW({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){Rl(()=>{if(t||n==null||r==null)return;const i=Iv(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Ke(a,`No group element found for id "${a}"`);const l=lp(a,r),c=$N(a,e,r);Ke(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function KN({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onDragging:s,style:o={},tabIndex:a=0,tagName:l="div",...c}){var u,f;const d=or(null),h=or({onDragging:s});Rl(()=>{h.current.onDragging=s});const p=AN(Av);if(p===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:g,groupId:v,registerResizeHandle:_,startDragging:m,stopDragging:y,panelGroupElement:b}=p,S=cT(i),[A,I]=Rh("inactive"),[R,M]=Rh(!1),[k,N]=Rh(null),F=or({state:A});Pl(()=>{F.current.state=A}),Rl(()=>{if(n)N(null);else{const ee=_(S);N(()=>ee)}},[n,S,_]);const D=(u=r==null?void 0:r.coarse)!==null&&u!==void 0?u:15,z=(f=r==null?void 0:r.fine)!==null&&f!==void 0?f:5;return Rl(()=>{if(n||k==null)return;const ee=d.current;return Ke(ee,"Element ref not attached"),ZV(S,ee,g,{coarse:D,fine:z},(X,Y,ce)=>{if(Y)switch(X){case"down":{I("drag"),m(S,ce);const{onDragging:me}=h.current;me&&me(!0);break}case"move":{const{state:me}=F.current;me!=="drag"&&I("hover"),k(ce);break}case"up":{I("hover"),y();const{onDragging:me}=h.current;me&&me(!1);break}}else I("inactive")})},[D,g,n,z,_,S,k,m,y]),cW({disabled:n,handleId:S,resizeHandler:k,panelGroupElement:b}),lf(l,{...c,children:t,className:e,id:i,onBlur:()=>M(!1),onFocus:()=>M(!0),ref:d,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...o},tabIndex:a,"data-panel-group-direction":g,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":A==="drag"?"pointer":R?"keyboard":void 0,"data-resize-handle-state":A,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":S})}KN.displayName="PanelResizeHandle";const uW=({className:t,...e})=>x.jsx(YN,{className:an("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...e}),XC=PN,fW=({direction:t,withHandle:e,className:n,...r})=>x.jsx(KN,{className:an("after:-translate-x-1/2 data-[panel-group-direction=vertical]:after:-translate-y-1/2 relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:h-px after:w-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1",n),...r,children:e&&x.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:t==="horizontal"?x.jsx(RV,{className:"size-2.5"}):x.jsx(PV,{className:"size-2.5"})})});function Qm(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const hT=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),YC=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);YC&&parseFloat(YC[1]);const Gg=globalThis,wc=globalThis.process||{},dW=globalThis.navigator||{};function qN(t){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const e=typeof navigator<"u"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Fa(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||qN()}function hW(t){return!t&&!Fa()?"Node":qN(t)?"Electron":(t||dW.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown"}const ZN="4.0.7";function pW(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class gW{constructor(e,n,r="sessionStorage"){this.storage=pW(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function _W(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function mW(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var Gm;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Gm||(Gm={}));const yW=10;function KC(t){return typeof t!="string"?t:(t=t.toUpperCase(),Gm[t]||Gm.WHITE)}function vW(t,e,n){return!Fa&&typeof t=="string"&&(e&&(t=`\x1B[${KC(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${KC(n)+yW}m${t}\x1B[49m`)),t}function bW(t,e=["constructor"]){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function pT(t,e){if(!t)throw new Error(e||"Assertion failed")}function Sc(){var e,n,r;let t;if(Fa()&&Gg.performance)t=(n=(e=Gg==null?void 0:Gg.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in wc){const i=(r=wc==null?void 0:wc.hrtime)==null?void 0:r.call(wc);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const xc={debug:Fa()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},wW={enabled:!0,level:0};function Tc(){}const qC={},ZC={once:!0};class dg{constructor({id:e}={id:""}){this.VERSION=ZN,this._startTs=Sc(),this._deltaTs=Sc(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new gW(`__probe-${this.id}__`,wW),this.timeStamp(`${this.id} started`),bW(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Sc()-this._startTs).toPrecision(10))}getDelta(){return Number((Sc()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,xc.warn,arguments,ZC)}error(e){return this._getLogFunction(0,e,xc.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,xc.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,xc.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,xc.debug||xc.info,arguments,ZC)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Tc,r&&[r],{tag:xW(n)}):Tc}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Tc)}group(e,n,r={collapsed:!1}){const i=QC({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Tc)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=QN(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=QC({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,pT(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Sc();const o=s.tag||s.message;if(s.once&&o)if(!qC[o])qC[o]=Sc();else return Tc;return n=SW(this.id,s.message,s),r.bind(console,n,...s.args)}return Tc}}dg.VERSION=ZN;function QN(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return pT(Number.isFinite(e)&&e>=0),e}function QC(t){const{logLevel:e,message:n}=t;t.logLevel=QN(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return pT(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function SW(t,e,n){if(typeof e=="string"){const r=n.time?mW(_W(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=vW(e,n.color,n.background)}return e}function xW(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}function TW(t,e){return GN(t||{},e)}function GN(t,e,n=0){if(n>3)return e;const r={...t};for(const[i,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?r[i]=GN(r[i]||{},e[i],n+1):r[i]=e[i];return r}const EW="latest";function AW(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.0-beta.2"),globalThis._loadersgl_.version}const CW=AW();function xa(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Il=typeof process!="object"||String(process)!=="[object process]"||process.browser,RW=typeof window<"u"&&typeof window.orientation<"u",GC=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);GC&&parseFloat(GC[1]);class PW{constructor(e,n){E(this,"name");E(this,"workerThread");E(this,"isRunning",!0);E(this,"result");E(this,"_resolve",()=>{});E(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){xa(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){xa(this.isRunning),this.isRunning=!1,this._reject(e)}}class Fb{terminate(){}}const Bb=new Map;function IW(t){xa(t.source&&!t.url||!t.source&&t.url);let e=Bb.get(t.source||t.url);return e||(t.url&&(e=MW(t.url),Bb.set(t.url,e)),t.source&&(e=JN(t.source),Bb.set(t.source,e))),xa(e),e}function MW(t){if(!t.startsWith("http"))return t;const e=OW(t);return JN(e)}function JN(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function OW(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function e5(t,e=!0,n){const r=n||new Set;if(t){if(JC(t))r.add(t);else if(JC(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)e5(t[i],e,r)}}return n===void 0?Array.from(r):[]}function JC(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Lb=()=>{};class J2{constructor(e){E(this,"name");E(this,"source");E(this,"url");E(this,"terminated",!1);E(this,"worker");E(this,"onMessage");E(this,"onError");E(this,"_loadableURL","");const{name:n,source:r,url:i}=e;xa(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Lb,this.onError=s=>console.log(s),this.worker=Il?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Il||typeof Fb<"u"&&!Il}destroy(){this.onMessage=Lb,this.onError=Lb,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||e5(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=IW({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new Fb(r,{eval:!1})}else if(this.source)e=new Fb(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class NW{constructor(e){E(this,"name","unnamed");E(this,"source");E(this,"url");E(this,"maxConcurrency",1);E(this,"maxMobileConcurrency",1);E(this,"onDebug",()=>{});E(this,"reuseWorkers",!0);E(this,"props",{});E(this,"jobQueue",[]);E(this,"idleQueue",[]);E(this,"count",0);E(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return J2.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new PW(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Il||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new J2({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return RW?this.maxMobileConcurrency:this.maxConcurrency}}const kW={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Wo=class Wo{constructor(e){E(this,"props");E(this,"workerPools",new Map);this.props={...kW},this.setProps(e),this.workerPools=new Map}static isSupported(){return J2.isSupported()}static getWorkerFarm(e={}){return Wo._workerFarm=Wo._workerFarm||new Wo({}),Wo._workerFarm.setProps(e),Wo._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new NW({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};E(Wo,"_workerFarm");let Jm=Wo;function DW(t,e={}){const n=e[t.id]||{},r=Il?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(Il?i=`modules/${t.module}/dist/${r}`:i=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!i){let s=t.version;s==="latest"&&(s=EW);const o=s?`@${s}`:"";i=`https://unpkg.com/@loaders.gl/${t.module}${o}/dist/${r}`}return xa(i),i}function FW(t,e=CW){xa(t,"no worker provided");const n=t.version;return!(!e||!n)}function BW(t,e){return!Jm.isSupported()||!Il&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function LW(t,e,n,r,i){const s=t.id,o=DW(t,n),l=Jm.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",$W.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function $W(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function UW(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function zW(...t){return jW(t)}function jW(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}async function VW(t){const e=[];for await(const n of t)e.push(n);return zW(...e)}function eR(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class tR{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=eR(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(eR()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Mv{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let i=this.stats[n];return i||(e instanceof tR?i=e:i=new tR(n,r),this.stats[n]=i),i}}let WW="";const nR={};function HW(t){for(const e in nR)if(t.startsWith(e)){const n=nR[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${WW}${t}`),t}function XW(t){return t&&typeof t=="object"&&t.isBuffer}function t5(t){if(XW(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function n5(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function YW(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const KW=t=>typeof t=="boolean",Ph=t=>typeof t=="function",hg=t=>t!==null&&typeof t=="object",rR=t=>hg(t)&&t.constructor==={}.constructor,qW=t=>!!t&&typeof t[Symbol.iterator]=="function",ZW=t=>t&&typeof t[Symbol.asyncIterator]=="function",Jl=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ec=t=>typeof Blob<"u"&&t instanceof Blob,QW=t=>t&&typeof t=="object"&&t.isBuffer,GW=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||hg(t)&&Ph(t.tee)&&Ph(t.cancel)&&Ph(t.getReader),JW=t=>hg(t)&&Ph(t.read)&&Ph(t.pipe)&&KW(t.readable),r5=t=>GW(t)||JW(t);class eH extends Error{constructor(n,r){super(n);E(this,"reason");E(this,"url");E(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const tH=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,nH=/^([-\w.]+\/[-\w.+]+)/;function iR(t,e){return t.toLowerCase()===e.toLowerCase()}function rH(t){const e=nH.exec(t);return e?e[1]:t}function sR(t){const e=tH.exec(t);return e?e[1]:""}const i5=/\?.*/;function iH(t){const e=t.match(i5);return e&&e[0]}function gT(t){return t.replace(i5,"")}function sH(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Ov(t){return Jl(t)?t.url:ec(t)?t.name||"":typeof t=="string"?t:""}function _T(t){if(Jl(t)){const e=t,n=e.headers.get("content-type")||"",r=gT(e.url);return rH(n)||sR(r)}return ec(t)?t.type||"":typeof t=="string"?sR(t):""}function oH(t){return Jl(t)?t.headers["content-length"]||-1:ec(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function s5(t){if(Jl(t))return t;const e={},n=oH(t);n>=0&&(e["content-length"]=String(n));const r=Ov(t),i=_T(t);i&&(e["content-type"]=i);const s=await cH(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function aH(t){if(!t.ok)throw await lH(t)}async function lH(t){const e=sH(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:t.statusText,url:t.url,response:t};try{const i=t.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await t.json():t.text()}catch{}return new eH(n,r)}async function cH(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r((o=s==null?void 0:s.target)==null?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${uH(n)}`}return null}function uH(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function fH(t){return!dH(t)&&!hH(t)}function dH(t){return t.startsWith("http:")||t.startsWith("https:")}function hH(t){return t.startsWith("data:")}async function oR(t,e){var n,r;if(typeof t=="string"){const i=HW(t);return fH(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,e):await fetch(i,e)}return await s5(t)}const aR=new dg({id:"loaders.gl"});class pH{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class gH{constructor(){E(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const o5={fetch:null,mimeType:void 0,nothrow:!1,log:new gH,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:hT,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},_H={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function a5(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function l5(){const t=a5();return t.globalOptions=t.globalOptions||{...o5},t.globalOptions}function mH(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],yH(t,n),bH(e,t,r)}function yH(t,e){lR(t,null,o5,_H,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};lR(r,n.id,i,s,e)}}function lR(t,e,n,r,i){const s=e||"Top level",o=e?`${e}.`:"";for(const a in t){const l=!e&&hg(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)aR.warn(`${s} loader option '${o}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=vH(a,i);aR.warn(`${s} loader option '${o}${a}' not recognized. ${f}`)()}}}}function vH(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return`Did you mean '${i.id}.${s}'?`;const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||`Did you mean '${i.id}.${s}'?`)}return r}function bH(t,e,n){const i={...t.options||{}};return wH(i,n),i.log===null&&(i.log=new pH),cR(i,l5()),cR(i,e),i}function cR(t,e){for(const n in e)if(n in e){const r=e[n];rR(r)&&rR(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function wH(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function mT(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function yT(t){Qm(t,"null loader"),Qm(mT(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const c5=()=>{const t=a5();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function SH(t){const e=c5();t=Array.isArray(t)?t:[t];for(const n of t){const r=yT(n);e.find(i=>r===i)||e.unshift(r)}}function xH(){return c5()}const TH=new dg({id:"loaders.gl"}),EH=/\.([^.]+)$/;async function AH(t,e=[],n,r){if(!u5(t))return null;let i=uR(t,e,{...n,nothrow:!0},r);if(i)return i;if(ec(t)&&(t=await t.slice(0,10).arrayBuffer(),i=uR(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(f5(t));return i}function uR(t,e=[],n,r){if(!u5(t))return null;if(e&&!Array.isArray(e))return yT(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...xH()),RH(i);const s=CH(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(f5(t));return s}function CH(t,e,n,r){const i=Ov(t),s=_T(t),o=gT(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=$b(e,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||PH(e,o),l=l||(a?`matched url ${o}`:""),a=a||$b(e,s),l=l||(a?`matched MIME type ${s}`:""),a=a||MH(e,t),l=l||(a?`matched initial data ${d5(t)}`:""),n!=null&&n.fallbackMimeType&&(a=a||$b(e,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${s}`:"")),l&&TH.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function u5(t){return!(t instanceof Response&&t.status===204)}function f5(t){const e=Ov(t),n=_T(t);let r="No valid loader found (";r+=e?`${n5(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=t?d5(t):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function RH(t){for(const e of t)yT(e)}function PH(t,e){const n=e&&EH.exec(e),r=n&&n[1];return r?IH(t,r):null}function IH(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function $b(t,e){var n;for(const r of t)if((n=r.mimeTypes)!=null&&n.some(i=>iR(e,i))||iR(e,`application/x.${r.id}`))return r;return null}function MH(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(OH(e,n))return n}else if(ArrayBuffer.isView(e)){if(fR(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&fR(e,0,n))return n;return null}function OH(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function fR(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>NH(t,e,n,i))}function NH(t,e,n,r){if(r instanceof ArrayBuffer)return UW(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const i=eS(t,e,r.length);return r===i;default:return!1}}function d5(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?eS(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?eS(t,0,e):""}function eS(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const kH=256*1024;function*DH(t,e){const n=(e==null?void 0:e.chunkSize)||kH;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const FH=256*1024;function*BH(t,e={}){const{chunkSize:n=FH}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const LH=1024*1024;async function*$H(t,e){const n=(e==null?void 0:e.chunkSize)||LH;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function dR(t,e){return hT?UH(t,e):zH(t)}async function*UH(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield t5(o)}}catch{n.releaseLock()}}async function*zH(t,e){for await(const n of t)yield t5(n)}function jH(t,e){if(typeof t=="string")return DH(t,e);if(t instanceof ArrayBuffer)return BH(t,e);if(ec(t))return $H(t,e);if(r5(t))return dR(t,e);if(Jl(t))return dR(t.body,e);throw new Error("makeIterator")}const h5="Cannot convert supplied data type";function VH(t,e,n){if(e.text&&typeof t=="string")return t;if(QW(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(h5)}async function WH(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return VH(t,e);if(ec(t)&&(t=await s5(t)),Jl(t)){const i=t;return await aH(i),e.binary?await i.arrayBuffer():await i.text()}if(r5(t)&&(t=jH(t,n)),qW(t)||ZW(t))return VW(t);throw new Error(h5)}function p5(t,e){const n=l5(),r=t||n;return typeof r.fetch=="function"?r.fetch:hg(r.fetch)?i=>oR(i,r.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:oR}function HH(t,e,n){if(n)return n;const r={fetch:p5(e,t),...t};if(r.url){const i=gT(r.url);r.baseUrl=i,r.queryString=iH(r.url),r.filename=n5(i),r.baseUrl=YW(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function XH(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function e0(t,e,n,r){e&&!Array.isArray(e)&&!mT(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=Ov(t),o=XH(e,r),a=await AH(t,o,n);return a?(n=mH(n,a,o,i),r=HH({url:i,_parse:e0,loaders:o},n,r||null),await YH(a,t,n,r)):null}async function YH(t,e,n,r){if(FW(t),n=TW(t.options,n),Jl(e)){const s=e,{ok:o,redirected:a,status:l,statusText:c,type:u,url:f}=s,d=Object.fromEntries(s.headers.entries());r.response={headers:d,ok:o,redirected:a,status:l,statusText:c,type:u,url:f}}e=await WH(e,t,n);const i=t;if(i.parseTextSync&&typeof e=="string")return i.parseTextSync(e,n,r);if(BW(t,n))return await LW(t,e,n,r,e0);if(i.parseText&&typeof e=="string")return await i.parseText(e,n,r);if(i.parse)return await i.parse(e,n,r);throw xa(!i.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function t0(t,e,n,r){let i,s;!Array.isArray(e)&&!mT(e)?(i=[],s=e):(i=e,s=n);const o=p5(s);let a=t;return typeof t=="string"&&(a=await o(t)),ec(t)&&(a=await o(t)),Array.isArray(i)?await e0(a,i,s):await e0(a,i,s)}const KH="4.2.0-beta.2";var ZM;const qH=(ZM=globalThis.loaders)==null?void 0:ZM.parseImageNode,tS=typeof Image<"u",nS=typeof ImageBitmap<"u",ZH=!!qH,rS=hT?!0:ZH;function QH(t){switch(t){case"auto":return nS||tS||rS;case"imagebitmap":return nS;case"image":return tS;case"data":return rS;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function GH(){if(nS)return"imagebitmap";if(tS)return"image";if(rS)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function JH(t){const e=tX(t);if(!e)throw new Error("Not an image");return e}function eX(t){switch(JH(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function tX(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const nX=/^data:image\/svg\+xml/,rX=/\.svg((\?|#).*)?$/;function vT(t){return t&&(nX.test(t)||rX.test(t))}function iX(t,e){if(vT(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return g5(t,e)}function g5(t,e){if(vT(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function _5(t,e,n){const r=iX(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await sX(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function sX(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>{const o=s instanceof Error?s.message:"error";i(new Error(o))}}catch(s){i(s)}})}const oX={};let hR=!0;async function aX(t,e,n){let r;vT(n)?r=await _5(t,e,n):r=g5(t,n);const i=e&&e.imagebitmap;return await lX(r,i)}async function lX(t,e=null){if((cX(e)||!hR)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),hR=!1}return await createImageBitmap(t)}function cX(t){for(const e in t||oX)return!1;return!0}function uX(t){return!pX(t,"ftyp",4)||!(t[8]&96)?null:fX(t)}function fX(t){switch(dX(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function dX(t,e,n){return String.fromCharCode(...t.slice(e,n))}function hX(t){return[...t].map(e=>e.charCodeAt(0))}function pX(t,e,n=0){const r=hX(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const ls=!1,Ih=!0;function m5(t){const e=pg(t);return _X(e)||vX(e)||mX(e)||yX(e)||gX(e)}function gX(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=uX(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function _X(t){const e=pg(t);return e.byteLength>=24&&e.getUint32(0,ls)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ls),height:e.getUint32(20,ls)}:null}function mX(t){const e=pg(t);return e.byteLength>=10&&e.getUint32(0,ls)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Ih),height:e.getUint16(8,Ih)}:null}function yX(t){const e=pg(t);return e.byteLength>=14&&e.getUint16(0,ls)===16973&&e.getUint32(2,Ih)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Ih),height:e.getUint32(22,Ih)}:null}function vX(t){const e=pg(t);if(!(e.byteLength>=3&&e.getUint16(0,ls)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=bX();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,ls);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ls),width:e.getUint16(s+7,ls)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,ls)}return null}function bX(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function pg(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function wX(t,e){var i;const{mimeType:n}=m5(t)||{},r=(i=globalThis.loaders)==null?void 0:i.parseImageNode;return Qm(r),await r(t,n)}async function SX(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=xX(i);let a;switch(o){case"imagebitmap":a=await aX(t,e,s);break;case"image":a=await _5(t,e,s);break;case"data":a=await wX(t);break;default:Qm(!1)}return i==="data"&&(a=eX(a)),a}function xX(t){switch(t){case"auto":case"data":return GH();default:return QH(t),t}}const TX=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],EX=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],AX={image:{type:"auto",decode:!0}},CX={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:KH,mimeTypes:EX,extensions:TX,parse:SX,tests:[t=>!!m5(new DataView(t))],options:AX},qe=new dg({id:"deck"});let iS={};function RX(t){iS=t}function Dn(t,e,n,r){qe.level>0&&iS[t]&&iS[t].call(null,e,n,r)}function PX(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const IX={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:PX,parseTextSync:JSON.parse};function MX(){const t="9.0.17",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(qe.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:qe,_registerLoggers:RX},SH([IX,[CX,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const OX=MX();function dl(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Ub={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function NX(t){const e={};for(const[n,r]of Object.entries(t))e[n]=DX(r);return e}function kX(t,e,n){const r={};for(const[i,s]of Object.entries(e))t&&i in t&&!s.private?(s.validate&&dl(s.validate(t[i],s),`${n}: invalid ${i}`),r[i]=t[i]):r[i]=s.value;return r}function DX(t){let e=pR(t);if(e!=="object")return{value:t,...Ub[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...Ub[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=pR(t.value),{...t,...Ub[e],type:e}):{type:"object",value:null};throw new Error("props")}function pR(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const FX=`#ifdef MODULE_LOGDEPTH
logdepth_adjustPosition(gl_Position);
#endif
`,BX=`#ifdef MODULE_MATERIAL
gl_FragColor = material_filterColor(gl_FragColor);
#endif
#ifdef MODULE_LIGHTING
gl_FragColor = lighting_filterColor(gl_FragColor);
#endif
#ifdef MODULE_FOG
gl_FragColor = fog_filterColor(gl_FragColor);
#endif
#ifdef MODULE_PICKING
gl_FragColor = picking_filterHighlightColor(gl_FragColor);
gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif
#ifdef MODULE_LOGDEPTH
logdepth_setFragDepth();
#endif
`,LX={vertex:FX,fragment:BX},gR=/void\s+main\s*\([^)]*\)\s*\{\n?/,_R=/}\n?[^{}]*$/,zb=[],tm="__LUMA_INJECT_DECLARATIONS__";function $X(t){const e={vertex:{},fragment:{}};for(const n in t){let r=t[n];const i=UX(n);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function UX(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function n0(t,e,n,r=!1){const i=e==="vertex";for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),zb.length=o.length;for(let l=0,c=o.length;l<c;++l)zb[l]=o[l].injection;const a=`${zb.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(tm,a));break;case"vs:#main-start":i&&(t=t.replace(gR,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(_R,l=>a+l));break;case"fs:#decl":i||(t=t.replace(tm,a));break;case"fs:#main-start":i||(t=t.replace(gR,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(_R,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(tm,""),r&&(t=t.replace(/\}\s*$/,s=>s+LX[e])),t}let zX=1;class hl{constructor(e){E(this,"name");E(this,"vs");E(this,"fs");E(this,"getModuleUniforms");E(this,"dependencies");E(this,"deprecations");E(this,"defines");E(this,"injections");E(this,"uniforms",{});E(this,"uniformTypes",{});const{name:n,vs:r,fs:i,dependencies:s=[],uniformTypes:o={},uniformPropTypes:a={},getUniforms:l,deprecations:c=[],defines:u={},inject:f={}}=e;dl(typeof n=="string"),this.name=n,this.vs=r,this.fs=i,this.getModuleUniforms=l,this.dependencies=hl.instantiateModules(s),this.deprecations=this._parseDeprecationDefinitions(c),this.defines=u,this.injections=$X(f),this.uniformTypes=o,a&&(this.uniforms=NX(a))}static instantiateModules(e){return e.map(n=>{if(n instanceof hl)return n;dl(typeof n!="string",`Shader module use by name is deprecated. Import shader module '${JSON.stringify(n)}' and use it directly.`),n.name||(console.warn("shader module has no name"),n.name=`shader-module-${zX++}`);const r=new hl(n);return r.dependencies=hl.instantiateModules(n.dependencies||[]),r})}getModuleSource(e){let n;switch(e){case"vertex":n=this.vs||"";break;case"fragment":n=this.fs||"";break;default:dl(!1)}const r=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------

#define MODULE_${r}
${n}

`}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):kX(e,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{var i;(i=r.regex)!=null&&i.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp(`\\b${n.old}\\(`);break;default:n.regex=new RegExp(`${n.type} ${n.old};`)}}),e}_defaultGetUniforms(e={}){const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&dl(s.validate(e[i],s),`${this.name}: invalid ${i}`),n[i]=e[i]):n[i]=s.value}return n}}function mR(t){if(t.source&&t.platformInfo.type==="webgpu")return{...t,vs:void 0,fs:void 0};if(!t.vs)throw new Error("no vertex shader");const e=yR(t.platformInfo,t.vs);let n;return t.fs&&(n=yR(t.platformInfo,t.fs)),{...t,vs:e,fs:n}}function yR(t,e){if(typeof e=="string")return e;switch(t.type){case"webgpu":if(e!=null&&e.wgsl)return e.wgsl;throw new Error("WebGPU does not support GLSL shaders");default:if(e!=null&&e.glsl)return e.glsl;throw new Error("WebGL does not support WGSL shaders")}}function Nv(t){const e=hl.instantiateModules(t);return jX(e)}function jX(t){const e={},n={};return y5({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function y5(t){const{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&y5({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function VX(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function WX(t,e){var r;if(Number(((r=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:r[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=vR(t,HX),t;case"fragment":return t=vR(t,XX),t;default:throw new Error(e)}}const v5=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],HX=[...v5,[sS("attribute"),"in $1"],[sS("varying"),"out $1"]],XX=[...v5,[sS("varying"),"in $1"]];function vR(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function sS(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function b5(t,e){let n="";for(const r in t){const i=t[r];if(n+=`void ${i.signature} {
`,i.header&&(n+=`  ${i.header}`),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+=`  ${o.injection}
`}i.footer&&(n+=`  ${i.footer}`),n+=`}
`}return n}function w5(t){const e={vertex:{},fragment:{}};for(const n of t){let r,i;typeof n!="string"?(r=n,i=r.hook):(r={},i=n),i=i.trim();const[s,o]=i.split(":"),a=i.replace(/\(.+/,""),l=Object.assign(r,{signature:o});switch(s){case"vs":e.vertex[a]=l;break;case"fs":e.fragment[a]=l;break;default:throw new Error(s)}}return e}function YX(t,e){return{name:KX(t,e),language:"glsl",version:qX(t)}}function KX(t,e="unnamed"){const r=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return r?r[1]:e}function qX(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const S5=`

${tm}
`,ZX=`precision highp float;
`;function QX(t){const e=Nv(t.modules||[]);return{source:oS(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:bT(e)}}function GX(t){const e=Nv(t.modules||[]);return{vs:oS(t.platformInfo,{...t,source:t.vs,stage:"vertex",modules:e}),fs:oS(t.platformInfo,{...t,source:t.fs,stage:"fragment",modules:e}),getUniforms:bT(e)}}function JX(t){const{vs:e,fs:n}=t,r=Nv(t.modules||[]);return{vs:bR(t.platformInfo,{...t,source:e,stage:"vertex",modules:r}),fs:bR(t.platformInfo,{...t,source:n,stage:"fragment",modules:r}),getUniforms:bT(r)}}function oS(t,e){const{source:n,stage:r,modules:i,hookFunctions:s=[],inject:o={},log:a}=e;dl(typeof n=="string","shader source must be a string");const l=n;let c="";const u=w5(s),f={},d={},h={};for(const g in o){const v=typeof o[g]=="string"?{injection:o[g],order:0}:o[g],_=/^(v|f)s:(#)?([\w-]+)$/.exec(g);if(_){const m=_[2],y=_[3];m?y==="decl"?d[g]=[v]:h[g]=[v]:f[g]=[v]}else h[g]=[v]}const p=t.type!=="webgpu"?i:[];for(const g of p){a&&g.checkDeprecations(l,a);const v=g.getModuleSource(r,"wgsl");c+=v;const _=g.injections[r];for(const m in _){const y=/^(v|f)s:#([\w-]+)$/.exec(m);if(y){const S=y[2]==="decl"?d:h;S[m]=S[m]||[],S[m].push(_[m])}else f[m]=f[m]||[],f[m].push(_[m])}}return c+=S5,c=n0(c,r,d),c+=b5(u[r],f),c+=l,c=n0(c,r,h),c}function bR(t,e){const{id:n,source:r,stage:i,language:s="glsl",modules:o,defines:a={},hookFunctions:l=[],inject:c={},prologue:u=!0,log:f}=e;dl(typeof r=="string","shader source must be a string");const d=s==="glsl"?YX(r).version:-1,h=t.shaderLanguageVersion,p=d===100?"#version 100":"#version 300 es",v=r.split(`
`).slice(1).join(`
`),_={};o.forEach(I=>{Object.assign(_,I.getDefines())}),Object.assign(_,a);let m="";switch(s){case"wgsl":break;case"glsl":m=u?`${p}

// ----- PROLOGUE -------------------------
${eY({id:n,source:r,stage:i})}
${`#define SHADER_TYPE_${i.toUpperCase()}`}
${VX(t)}
${i==="fragment"?ZX:""}

// ----- APPLICATION DEFINES -------------------------

${tY(_)}

`:`${p}
`;break}const y=w5(l),b={},S={},A={};for(const I in c){const R=typeof c[I]=="string"?{injection:c[I],order:0}:c[I],M=/^(v|f)s:(#)?([\w-]+)$/.exec(I);if(M){const k=M[2],N=M[3];k?N==="decl"?S[I]=[R]:A[I]=[R]:b[I]=[R]}else A[I]=[R]}for(const I of o){f&&I.checkDeprecations(v,f);const R=I.getModuleSource(i);m+=R;const M=I.injections[i];for(const k in M){const N=/^(v|f)s:#([\w-]+)$/.exec(k);if(N){const D=N[2]==="decl"?S:A;D[k]=D[k]||[],D[k].push(M[k])}else b[k]=b[k]||[],b[k].push(M[k])}}return m+="// ----- MAIN SHADER SOURCE -------------------------",m+=S5,m=n0(m,i,S),m+=b5(y[i],b),m+=v,m=n0(m,i,A),s==="glsl"&&d!==h&&(m=WX(m,i)),m.trim()}function bT(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function eY(t){const{id:e,source:n,stage:r}=t;return e&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${r}

`:""}function tY(t={}){let e="";for(const n in t){const r=t[n];(r||Number.isFinite(r))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}const sl=class sl{constructor(){E(this,"_hookFunctions",[]);E(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return sl.defaultShaderAssembler=sl.defaultShaderAssembler||new sl,sl.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleShader(e){const n=this._getModuleList(e.modules),r=this._hookFunctions,i=mR(e);return{...QX({platformInfo:e.platformInfo,...i,modules:n,hookFunctions:r}),modules:n}}assembleShaderPair(e){const n=mR(e),r=this._getModuleList(e.modules),i=this._hookFunctions,{platformInfo:s}=e;return{...e.platformInfo.shaderLanguage==="wgsl"?GX({platformInfo:s,...n,modules:r,hookFunctions:i}):JX({platformInfo:s,...n,modules:r,hookFunctions:i}),modules:r}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,hl.instantiateModules(n)}};E(sl,"defaultShaderAssembler");let r0=sl;const nY=`out vec4 transform_output;
void main() {
transform_output = vec4(0);
}`,rY=`#version 300 es
${nY}`;function iY(t){const{input:e,inputChannels:n,output:r}=t||{};if(!e)return rY;if(!n)throw new Error("inputChannels");const i=sY(n),s=oY(e,n);return`#version 300 es
in ${i} ${e};
out vec4 ${r};
void main() {
  ${r} = ${s};
}`}function sY(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function oY(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}const ie=new dg({id:"luma.gl"});class aY{constructor(){E(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Mv({id:e})),this.stats.get(e)}}const wT=new aY;function lY(){const t="9.0.14",e="set luma.log.level=1 (or higher) to trace rendering";if(globalThis.luma&&globalThis.luma.VERSION!==t)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${t}`);return globalThis.luma||(Fa()&&ie.log(1,`${t} - ${e}`)(),globalThis.luma=globalThis.luma||{VERSION:t,version:t,log:ie,stats:wT}),t}const cY=lY();function uY(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)?t:null}function cp(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number"?t:null:uY(t)}const jb={};function Ba(t="id"){jb[t]=jb[t]||1;const e=jb[t]++;return`${t}-${e}`}function i0(t){let e=!0;for(const n in t){e=!1;break}return e}var r2;let yt=(r2=class{constructor(e,n,r){E(this,"id");E(this,"props");E(this,"userData",{});E(this,"_device");E(this,"destroyed",!1);E(this,"allocatedBytes",0);E(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=fY(n,r);const i=this.props.id!=="undefined"?this.props.id:Ba(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},E(r2,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),r2);function fY(t,e){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}var un;let qt=(un=class extends yt{constructor(n,r){const i={...r};(r.usage||0)&un.INDEX&&!r.indexType&&(r.data instanceof Uint32Array?i.indexType="uint32":r.data instanceof Uint16Array&&(i.indexType="uint16"));super(n,i,un.defaultProps);E(this,"usage");E(this,"indexType");E(this,"updateTimestamp");E(this,"debugData",new ArrayBuffer(0));this.usage=r.usage||0,this.indexType=i.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}readSyncWebGL(n,r){throw new Error("not implemented")}_setDebugData(n,r,i){const s=ArrayBuffer.isView(n)?n.buffer:n,o=Math.min(n?n.byteLength:i,un.DEBUG_DATA_MAX_LENGTH);n===null?this.debugData=new ArrayBuffer(o):r===0&&i===n.byteLength?this.debugData=s.slice(0,o):this.debugData=s.slice(r,r+o)}},E(un,"defaultProps",{...yt.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),E(un,"MAP_READ",1),E(un,"MAP_WRITE",2),E(un,"COPY_SRC",4),E(un,"COPY_DST",8),E(un,"INDEX",16),E(un,"VERTEX",32),E(un,"UNIFORM",64),E(un,"STORAGE",128),E(un,"INDIRECT",256),E(un,"QUERY_RESOLVE",512),E(un,"DEBUG_DATA_MAX_LENGTH",32),un);function x5(t){const e=wR[t],n=dY(e),r=t.includes("norm"),i=!r&&!t.startsWith("float"),s=t.startsWith("s");return{dataType:wR[t],byteLength:n,integer:i,signed:s,normalized:r}}function dY(t){return hY[t]}const wR={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},hY={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},pY=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],gY=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function _Y(t){return pY.some(e=>t.startsWith(e))}function T5(t){const e=gY.exec(t);if(e){const[,n,r,i,s,o]=e;if(n){const a=`${i}${r}`,l=x5(a);return{format:n,components:n.length,srgb:s==="-srgb",unsized:o==="-unsized",webgl:o==="-webgl",...l}}}return yY(t)}const mY={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};function yY(t){var n;const e=mY[t];if(!e)throw new Error(`Unknown format ${t}`);return{format:e.format||"",components:e.components||((n=e.format)==null?void 0:n.length)||1,byteLength:e.bpp||1,srgb:!1,unsized:!1}}class vY{}class bY{constructor(e=[],n){E(this,"features");E(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures[e]&&this.features.has(e)}}const zh=class zh{constructor(e){E(this,"id");E(this,"props");E(this,"userData",{});E(this,"statsManager",wT);E(this,"_lumaData",{});E(this,"timestamp",0);this.props={...zh.defaultProps,...e},this.id=this.props.id||Ba(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}isTextureFormatCompressed(e){return _Y(e)}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(e){return(e instanceof Promise||typeof e=="string")&&(e={data:e}),this._createTexture(e)}createCommandEncoder(e={}){throw new Error("not implemented")}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}_getBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};return(e.usage||0)&qt.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array?n.indexType="uint16":ie.warn("indices buffer content must be of integer type")()),n}};E(zh,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:!!ie.get("debug"),spector:!!(ie.get("spector")||ie.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:e=>ie.error(e.message)}),E(zh,"VERSION",cY);let cf=zh;function Et(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Td=new Map,_u=class _u{static registerDevices(e){for(const n of e)Et(n.type&&n.isSupported&&n.create),Td.set(n.type,n)}static getAvailableDevices(){return Array.from(Td).map(e=>e.type)}static getSupportedDevices(){return Array.from(Td).filter(e=>e.isSupported()).map(e=>e.type)}static setDefaultDeviceProps(e){Object.assign(cf.defaultProps,e)}static async attachDevice(e){const n=SR(e.devices)||Td;if(e.handle instanceof WebGL2RenderingContext){const r=n.get("webgl");if(r)return await r.attach(e.handle)}if(e.handle===null){const r=n.get("unknown");if(r)return await r.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(e={}){var r,i;e={..._u.defaultProps,...e},e.gl&&(e.type="webgl");const n=SR(e.devices)||Td;switch(e.type){case"webgpu":let s=n.get("webgpu");if(s)return await s.create(e);break;case"webgl":let o=n.get("webgl");if(o)return await o.create(e);break;case"unknown":const a=n.get("unknown");if(a)return await a.create(e);break;case"best-available":if(s=n.get("webgpu"),(r=s==null?void 0:s.isSupported)!=null&&r.call(s))return await s.create(e);if(o=n.get("webgl"),(i=o==null?void 0:o.isSupported)!=null&&i.call(o))return await o.create(e);break}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(e=!0){const n=HTMLCanvasElement.prototype;if(!e&&n.originalGetContext){n.getContext=n.originalGetContext,n.originalGetContext=void 0;return}n.originalGetContext=n.getContext,n.getContext=function(r,i){return r==="webgl"||r==="experimental-webgl"?this.originalGetContext("webgl2",i):this.originalGetContext(r,i)}}};E(_u,"defaultProps",{...cf.defaultProps,type:"best-available",devices:void 0}),E(_u,"stats",wT),E(_u,"log",ie);let xu=_u;function SR(t){if(!t||(t==null?void 0:t.length)===0)return null;const e=new Map;for(const n of t)e.set(n.type,n);return e}const wY=Fa()&&typeof document<"u",kv=()=>wY&&document.readyState==="complete",SY={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class ST{constructor(e){E(this,"id");E(this,"props");E(this,"canvas");E(this,"htmlCanvas");E(this,"offscreenCanvas");E(this,"type");E(this,"width",1);E(this,"height",1);E(this,"resizeObserver");E(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...SY,...e},e=this.props,!Fa()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=EY(e.canvas):this.canvas=e.canvas;else{const n=AY(e),r=TY((e==null?void 0:e.container)||null);r.insertBefore(n,r.firstChild),this.canvas=n,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(n=>{for(const r of n)r.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}static get isPageLoaded(){return kv()}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),n=this.canvas;return n.parentElement?[n.clientWidth*e,n.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,n]=this.getPixelSize();return e/n}cssToDeviceRatio(){try{const[e]=this.getDrawingBufferSize(),{clientWidth:n}=this._canvasSizeInfo;return n?e/n:1}catch{return 1}}cssToDevicePixels(e,n=!0){const r=this.cssToDeviceRatio(),[i,s]=this.getDrawingBufferSize();return CY(e,r,i,s,n)}setDevicePixelRatio(e,n={}){if(!this.htmlCanvas)return;let r="width"in n?n.width:this.htmlCanvas.clientWidth,i="height"in n?n.height:this.htmlCanvas.clientHeight;(!r||!i)&&(ie.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const s=this._canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);this.htmlCanvas.width=a,this.htmlCanvas.height=l;const[c,u]=this.getDrawingBufferSize();(c!==a||u!==l)&&(o=Math.min(c/r,u/i),this.htmlCanvas.width=Math.floor(r*o),this.htmlCanvas.height=Math.floor(i*o),ie.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=r,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}getDrawingBufferSize(){const e=this.device.gl;if(!e)throw new Error("canvas size");return[e.drawingBufferWidth,e.drawingBufferHeight]}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}}E(ST,"pageLoaded",xY());function xY(){return kv()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}function TY(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e&&!kv())throw new Error(`Accessing '${t}' before page was loaded`);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function EY(t){const e=document.getElementById(t);if(!e&&!kv())throw new Error(`Accessing '${t}' before page was loaded`);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function AY(t){const{width:e,height:n}=t,r=document.createElement("canvas");return r.id="lumagl-auto-created-canvas",r.width=e||1,r.height=n||1,r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}function CY(t,e,n,r,i){const s=t,o=xR(s[0],e,n);let a=TR(s[1],e,r,i),l=xR(s[0]+1,e,n);const c=l===n-1?l:l-1;l=TR(s[1]+1,e,r,i);let u;return i?(l=l===0?l:l+1,u=a,a=l):u=l===r-1?l:l-1,{x:o,y:a,width:Math.max(c-o+1,1),height:Math.max(u-a+1,1)}}function xR(t,e,n){return Math.min(Math.round(t*e),n-1)}function TR(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const js=class js extends yt{constructor(n,r,i=js.defaultProps){super(n,r,i);E(this,"dimension");E(this,"format");E(this,"width");E(this,"height");E(this,"depth");E(this,"updateTimestamp");this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}};E(js,"defaultProps",{...yt.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),E(js,"COPY_SRC",1),E(js,"COPY_DST",2),E(js,"TEXTURE_BINDING",4),E(js,"STORAGE_BINDING",8),E(js,"RENDER_ATTACHMENT",16);let ri=js;const ky=class ky extends yt{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,ky.defaultProps)}};E(ky,"defaultProps",{...yt.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let s0=ky;function RY(t,e,n){let r="";const i=e.split(/\r?\n/),s=t.slice().sort((o,a)=>o.lineNum-a.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let o=0;for(let a=1;a<=i.length;a++)for(r+=E5(i[a-1],a,n);s.length>o&&s[o].lineNum===a;){const l=s[o++];r+=ER(l,i,l.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const a of t)r+=ER(a,i,a.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return r}}function ER(t,e,n,r){if(r!=null&&r.inlineSource){const i=PY(e,n),s=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${i}${s}${t.type.toUpperCase()}: ${t.message}

`}return r!=null&&r.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function PY(t,e,n){let r="";for(let i=e-2;i<=e;i++){const s=t[i-1];s!==void 0&&(r+=E5(s,e,n))}return r}function E5(t,e,n){const r=n!=null&&n.html?MY(t):t;return`${IY(String(e),4)}: ${r}${n!=null&&n.html?"<br/>":`
`}`}function IY(t,e){let n="";for(let r=t.length;r<e;++r)n+=" ";return n+t}function MY(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function A5(t,e){return{name:OY(t,e),language:"glsl",version:NY(t)}}function OY(t,e="unnamed"){const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return r?r[1]:e}function NY(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const Dy=class Dy extends yt{constructor(n,r){super(n,{id:kY(r),...r},Dy.defaultProps);E(this,"stage");E(this,"source");E(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(n=this.props.debug){switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const r=await this.getCompilationInfo();this.props.debug==="warnings"&&(r==null?void 0:r.length)===0||this._displayShaderLog(r)}_displayShaderLog(n){var c;if(typeof document>"u"||!(document!=null&&document.createElement))return;const r=A5(this.source).name,i=`${this.stage} ${r}`;let s=RY(n,this.source,{showSourceCode:"all",html:!0});const o=this.getTranslatedSource();o&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${o}</pre></code>`);const a=document.createElement("Button");a.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a);const l=document.getElementsByClassName("luma-compiler-log-error");(c=l[0])!=null&&c.scrollIntoView&&l[0].scrollIntoView(),a.onclick=()=>{const u=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(u)}}};E(Dy,"defaultProps",{...yt.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});let o0=Dy;function kY(t){return A5(t.source).name||t.id||Ba(`unnamed ${t.stage}-shader`)}const Fy=class Fy extends yt{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){super(e,n,Fy.defaultProps)}};E(Fy,"defaultProps",{...yt.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let a0=Fy;const By=class By extends yt{constructor(n,r={}){super(n,r,By.defaultProps);E(this,"width");E(this,"height");E(this,"colorAttachments",[]);E(this,"depthStencilAttachment",null);this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}resize(n){let r=!n;if(n){const[i,s]=Array.isArray(n)?n:[n.width,n.height];r=r||s!==this.height||i!==this.width,this.width=i,this.height=s}r&&(ie.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(r=>{if(typeof r=="string"){const i=this.createColorTexture(r);return this.attachResource(i),i.view}return r instanceof ri?r.view:r});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const r=this.createDepthStencilTexture(n);this.attachResource(r),this.depthStencilAttachment=r.view}else n instanceof ri?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n){return this.device.createTexture({id:"color-attachment",usage:ri.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height})}createDepthStencilTexture(n){return this.device.createTexture({id:"depth-stencil-attachment",usage:ri.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height})}resizeAttachments(n,r){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const s=this.device._createTexture({...this.colorAttachments[i].props,width:n,height:r});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const i=this.device._createTexture({...this.depthStencilAttachment.props,width:n,height:r});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}}};E(By,"defaultProps",{...yt.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let l0=By;const Ly=class Ly extends yt{constructor(n,r){super(n,r,Ly.defaultProps);E(this,"shaderLayout");E(this,"bufferLayout");E(this,"linkStatus","pending");E(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(n){throw new Error("Use uniform blocks")}};E(Ly,"defaultProps",{...yt.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let uf=Ly;const $y=class $y extends yt{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){super(e,n,$y.defaultProps)}};E($y,"defaultProps",{...yt.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let aS=$y;const Uy=class Uy extends yt{constructor(n,r){super(n,r,Uy.defaultProps);E(this,"hash","")}get[Symbol.toStringTag](){return"ComputePipeline"}};E(Uy,"defaultProps",{...yt.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let c0=Uy;const zy=class zy extends yt{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,zy.defaultProps)}};E(zy,"defaultProps",{...yt.defaultProps,measureExecutionTime:void 0});let lS=zy;const jy=class jy extends yt{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,jy.defaultProps)}};E(jy,"defaultProps",{...yt.defaultProps});let cS=jy;function DY(t){const[e,n]=BY[t],r=e==="i32"||e==="u32",i=e!=="u32",s=LY[e]*n,o=FY(e,n);return{dataType:e,components:n,defaultVertexFormat:o,byteLength:s,integer:r,signed:i}}function FY(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?n:`${n}x${e}`}const BY={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},LY={f32:4,f16:2,i32:4,u32:4};function C5(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,r]=t.split("x"),i=n,s=r?parseInt(r):1,o=x5(i),a={type:i,components:s,byteLength:o.byteLength*s,integer:o.integer,signed:o.signed,normalized:o.normalized};return e&&(a.webglOnly=!0),a}function R5(t,e){const n={};for(const r of t.attributes)n[r.name]=UY(t,e,r.name);return n}function $Y(t,e,n=16){const r=R5(t,e),i=new Array(n).fill(null);for(const s of Object.values(r))i[s.location]=s;return i}function UY(t,e,n){const r=zY(t,n),i=jY(e,n);if(!r)return null;const s=DY(r.type),o=(i==null?void 0:i.vertexFormat)||s.defaultVertexFormat,a=C5(o);return{attributeName:(i==null?void 0:i.attributeName)||r.name,bufferName:(i==null?void 0:i.bufferName)||r.name,location:r.location,shaderType:r.type,shaderDataType:s.dataType,shaderComponents:s.components,vertexFormat:o,bufferDataType:a.type,bufferComponents:a.components,normalized:a.normalized,integer:s.integer,stepMode:(i==null?void 0:i.stepMode)||r.stepMode,byteOffset:(i==null?void 0:i.byteOffset)||0,byteStride:(i==null?void 0:i.byteStride)||0}}function zY(t,e){const n=t.attributes.find(r=>r.name===e);return n||ie.warn(`shader layout attribute "${e}" not present in shader`),n||null}function jY(t,e){VY(t);let n=WY(t,e);return n||(n=HY(t,e),n)?n:(ie.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function VY(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&ie.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function WY(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function HY(t,e){var n;for(const r of t){let i=r.byteStride;if(typeof r.byteStride!="number")for(const o of r.attributes||[]){const a=C5(o.format);i+=a.byteLength}const s=(n=r.attributes)==null?void 0:n.find(o=>o.attribute===e);if(s)return{attributeName:s.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:i}}return null}function XY(t,e){const n={...t,attributes:t.attributes.map(r=>({...r}))};for(const r of(e==null?void 0:e.attributes)||[]){const i=n.attributes.find(s=>s.name===r.name);i?(i.type=r.type||i.type,i.stepMode=r.stepMode||i.stepMode):ie.warn(`shader layout attribute ${r.name} not present in shader`)}return n}const Vy=class Vy extends yt{constructor(n,r){super(n,r,Vy.defaultProps);E(this,"maxVertexAttributes");E(this,"attributeInfos");E(this,"indexBuffer",null);E(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=$Y(r.renderPipeline.shaderLayout,r.renderPipeline.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,r){throw new Error("constant attributes not supported")}};E(Vy,"defaultProps",{...yt.defaultProps,renderPipeline:null});let uS=Vy;const Wy=class Wy extends yt{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,Wy.defaultProps)}};E(Wy,"defaultProps",{...yt.defaultProps,layout:void 0,buffers:{}});let fS=Wy;const Hy=class Hy extends yt{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,Hy.defaultProps)}};E(Hy,"defaultProps",{...yt.defaultProps,type:void 0,count:void 0});let dS=Hy;const YY={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function KY(t){const e=YY[t];return Et(t),e}function qY(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Jg;function P5(t){return(!Jg||Jg.byteLength<t)&&(Jg=new ArrayBuffer(t)),Jg}function ZY(t,e){const n=P5(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function QY(t){const{target:e,source:n,start:r=0,count:i=1}=t,s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return t.target}const AR=1024;class GY{constructor(e){E(this,"layout",{});E(this,"byteLength");let n=0;for(const[i,s]of Object.entries(e)){const o=KY(s),{type:a,components:l}=o;n=qY(n,l);const c=n;n+=l,this.layout[i]={type:a,size:l,offset:c}}n+=(4-n%4)%4;const r=n*4;this.byteLength=Math.max(r,AR)}getData(e){const n=Math.max(this.byteLength,AR),r=P5(n),i={i32:new Int32Array(r),u32:new Uint32Array(r),f32:new Float32Array(r),f16:new Uint16Array(r)};for(const[s,o]of Object.entries(e)){const a=this.layout[s];if(!a){ie.warn(`Supplied uniform value ${s} not present in uniform block layout`)();continue}const{type:l,size:c,offset:u}=a,f=i[l];if(c===1){if(typeof o!="number"&&typeof o!="boolean"){ie.warn(`Supplied value for single component uniform ${s} is not a number: ${o}`)();continue}f[u]=Number(o)}else{const d=cp(o);if(!d){ie.warn(`Supplied value for multi component / array uniform ${s} is not a numeric array: ${o}`)();continue}f.set(d,u)}}return new Uint8Array(r)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function JY(t,e,n=16){if(t!==e)return!1;const r=cp(t);if(!r)return!1;const i=cp(e);if(i&&r.length===i.length){for(let s=0;s<r.length;++s)if(i[s]!==r[s])return!1}return!0}function eK(t){const e=cp(t);return e?e.slice():t}class tK{constructor(e){E(this,"name");E(this,"uniforms",{});E(this,"modifiedUniforms",{});E(this,"modified",!0);E(this,"bindingLayout",{});E(this,"needsRedraw","initialized");var n;if(this.name=e==null?void 0:e.name,e!=null&&e.name&&(e!=null&&e.shaderLayout)){const r=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!r)throw new Error(e==null?void 0:e.name);const i=r;for(const s of i.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[n,r]of Object.entries(e))this._setUniform(n,r),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${r}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){JY(this.uniforms[e],n)||(this.uniforms[e]=eK(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class nK{constructor(e){E(this,"uniformBlocks",new Map);E(this,"uniformBufferLayouts",new Map);E(this,"uniformBuffers",new Map);for(const[n,r]of Object.entries(e)){const i=n,s=new GY(r.uniformTypes||{});this.uniformBufferLayouts.set(i,s);const o=new tK({name:n});o.setUniforms(r.defaultUniforms||{}),this.uniformBlocks.set(i,o)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[n,r]of Object.entries(e))this.uniformBlocks.get(n).setUniforms(r);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e).byteLength}getUniformBufferData(e){const n=this.uniformBlocks.get(e).getAllUniforms();return this.uniformBufferLayouts.get(e).getData(n)}createUniformBuffer(e,n,r){r&&this.setUniforms(r);const i=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:qt.UNIFORM|qt.COPY_DST,byteLength:i}),o=this.getUniformBufferData(n);return s.write(o),s}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const r=this.getUniformBufferByteLength(n),i=e.createBuffer({usage:qt.UNIFORM|qt.COPY_DST,byteLength:r});this.uniformBuffers.set(n,i)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const r=this.updateUniformBuffer(n);e||(e=r)}return e&&ie.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){const n=this.uniformBlocks.get(e),r=this.uniformBuffers.get(e);let i=!1;if(r&&n.needsRedraw){i||(i=n.needsRedraw);const s=this.getUniformBufferData(e);this.uniformBuffers.get(e).write(s);const a=this.uniformBlocks.get(e).getAllUniforms();ie.log(4,`Writing to uniform buffer ${String(e)}`,s,a)()}return i}}function I5(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function M5(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function rK(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const r=e;let i=I5(t);if(i==="uint8"||i==="sint8"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}if(i==="uint16"||i==="sint16"){if(r===1||r===3)throw new Error(`size: ${e}`);return n&&(i=i.replace("int","norm")),`${i}x${r}`}return r===1?i:`${i}x${r}`}function iK(t){return cp(t)!==null||typeof t=="number"||typeof t=="boolean"}function O5(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const r=t[n];iK(r)?e.uniforms[n]=r:e.bindings[n]=r}),e}function sK(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?`${t}.${r[a]}`:"N/A";ie.removed(`${t}.${a}`,c)()}for(const a in i)if(a in e){const l=i[a];ie.deprecated(`${t}.${a}`,`${t}.${l}`)()}let o=null;for(const[a,l]of Object.entries(s))a in e&&(ie.deprecated(`${t}.${a}`,`${t}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]);return o||e}let oK="";async function aK(t,e){return await new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error(`Could not load image ${t}.`)),i.crossOrigin=(e==null?void 0:e.crossOrigin)||"anonymous",i.src=t.startsWith("http")?t:oK+t}catch(i){r(i)}})}async function N5(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",t),e&&(r.id=e),new Promise((i,s)=>{r.onload=i,r.onerror=o=>s(new Error(`Unable to load script '${t}': ${o}`)),n.appendChild(r)})}function hS(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!hS(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!hS(t[s],e[s],n-1))return!1;return!0}return!1}function lK(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function cK(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}class uK{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}let tc=class{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}};class Qt extends tc{constructor(){super()}}let k5=class extends Qt{constructor(e,n,r,i){super(),this.name=e,this.args=n,this.returnType=r,this.body=i}get astNodeType(){return"function"}};class fK extends Qt{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}}class dK extends Qt{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}}class hK extends Qt{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}}class pK extends Qt{constructor(e,n,r,i){super(),this.init=e,this.condition=n,this.increment=r,this.body=i}get astNodeType(){return"for"}}class su extends Qt{constructor(e,n,r,i,s){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"var"}}class D5 extends Qt{constructor(e,n,r){super(),this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}}class CR extends Qt{constructor(e,n,r,i,s){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"let"}}class RR extends Qt{constructor(e,n,r,i,s){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=s}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}}var ff;(function(t){t.increment="++",t.decrement="--"})(ff||(ff={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for IncrementOperator");return t[r]}t.parse=e})(ff||(ff={}));class gK extends Qt{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}}var up;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(up||(up={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for AssignOperator");return t[r]}t.parse=e})(up||(up={}));class _K extends Qt{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}}class mK extends Qt{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}}class yK extends Qt{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}let vK=class extends Qt{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"body"}};class bK extends Qt{constructor(e,n,r,i){super(),this.condition=e,this.body=n,this.elseif=r,this.else=i}get astNodeType(){return"if"}}class wK extends Qt{constructor(e){super(),this.value=e}get astNodeType(){return"return"}}class SK extends Qt{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class F5 extends Qt{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class xK extends Qt{constructor(){super()}get astNodeType(){return"discard"}}class TK extends Qt{constructor(){super()}get astNodeType(){return"break"}}class EK extends Qt{constructor(){super()}get astNodeType(){return"continue"}}let nc=class extends Qt{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}},tl=class extends nc{constructor(e,n){super(e),this.members=n}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}};class B5 extends nc{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}}class AK extends nc{constructor(e,n,r,i){super(e),this.storage=n,this.type=r,this.access=i}get astNodeType(){return"pointer"}}class L5 extends nc{constructor(e,n,r,i){super(e),this.attributes=n,this.format=r,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class Qd extends nc{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class Cs extends tc{constructor(){super()}}class PR extends Cs{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Gd extends Cs{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}}class CK extends Cs{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}}class RK extends Cs{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}}class IR extends Cs{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}evaluate(e){var n,r;if(this.initializer instanceof Gd){const i=(n=this.postfix)===null||n===void 0?void 0:n.evaluateString(e),s=(r=this.initializer.type)===null||r===void 0?void 0:r.name,o=e.structs.get(s),a=o==null?void 0:o.getMemberIndex(i);if(a!=-1)return this.initializer.args[a].evaluate(e);console.log(a)}return this.initializer.evaluate(e)}}class MR extends Cs{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class PK extends Cs{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}}class IK extends Cs{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}}class OR extends Cs{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}}class $5 extends Cs{constructor(){super()}}class MK extends $5{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}}class Xi extends $5{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}}class U5 extends tc{constructor(){super()}}class OK extends U5{constructor(e,n){super(),this.selector=e,this.body=n}get astNodeType(){return"case"}}class NK extends U5{constructor(e){super(),this.body=e}get astNodeType(){return"default"}}class kK extends tc{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class DK extends tc{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}}class FK extends tc{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}let NR=class extends tc{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}};var Q,L;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(L||(L={}));class ${constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class P{}Q=P;P.none=new $("",L.reserved,"");P.eof=new $("EOF",L.token,"");P.reserved={asm:new $("asm",L.reserved,"asm"),bf16:new $("bf16",L.reserved,"bf16"),do:new $("do",L.reserved,"do"),enum:new $("enum",L.reserved,"enum"),f16:new $("f16",L.reserved,"f16"),f64:new $("f64",L.reserved,"f64"),handle:new $("handle",L.reserved,"handle"),i8:new $("i8",L.reserved,"i8"),i16:new $("i16",L.reserved,"i16"),i64:new $("i64",L.reserved,"i64"),mat:new $("mat",L.reserved,"mat"),premerge:new $("premerge",L.reserved,"premerge"),regardless:new $("regardless",L.reserved,"regardless"),typedef:new $("typedef",L.reserved,"typedef"),u8:new $("u8",L.reserved,"u8"),u16:new $("u16",L.reserved,"u16"),u64:new $("u64",L.reserved,"u64"),unless:new $("unless",L.reserved,"unless"),using:new $("using",L.reserved,"using"),vec:new $("vec",L.reserved,"vec"),void:new $("void",L.reserved,"void")};P.keywords={array:new $("array",L.keyword,"array"),atomic:new $("atomic",L.keyword,"atomic"),bool:new $("bool",L.keyword,"bool"),f32:new $("f32",L.keyword,"f32"),i32:new $("i32",L.keyword,"i32"),mat2x2:new $("mat2x2",L.keyword,"mat2x2"),mat2x3:new $("mat2x3",L.keyword,"mat2x3"),mat2x4:new $("mat2x4",L.keyword,"mat2x4"),mat3x2:new $("mat3x2",L.keyword,"mat3x2"),mat3x3:new $("mat3x3",L.keyword,"mat3x3"),mat3x4:new $("mat3x4",L.keyword,"mat3x4"),mat4x2:new $("mat4x2",L.keyword,"mat4x2"),mat4x3:new $("mat4x3",L.keyword,"mat4x3"),mat4x4:new $("mat4x4",L.keyword,"mat4x4"),ptr:new $("ptr",L.keyword,"ptr"),sampler:new $("sampler",L.keyword,"sampler"),sampler_comparison:new $("sampler_comparison",L.keyword,"sampler_comparison"),struct:new $("struct",L.keyword,"struct"),texture_1d:new $("texture_1d",L.keyword,"texture_1d"),texture_2d:new $("texture_2d",L.keyword,"texture_2d"),texture_2d_array:new $("texture_2d_array",L.keyword,"texture_2d_array"),texture_3d:new $("texture_3d",L.keyword,"texture_3d"),texture_cube:new $("texture_cube",L.keyword,"texture_cube"),texture_cube_array:new $("texture_cube_array",L.keyword,"texture_cube_array"),texture_multisampled_2d:new $("texture_multisampled_2d",L.keyword,"texture_multisampled_2d"),texture_storage_1d:new $("texture_storage_1d",L.keyword,"texture_storage_1d"),texture_storage_2d:new $("texture_storage_2d",L.keyword,"texture_storage_2d"),texture_storage_2d_array:new $("texture_storage_2d_array",L.keyword,"texture_storage_2d_array"),texture_storage_3d:new $("texture_storage_3d",L.keyword,"texture_storage_3d"),texture_depth_2d:new $("texture_depth_2d",L.keyword,"texture_depth_2d"),texture_depth_2d_array:new $("texture_depth_2d_array",L.keyword,"texture_depth_2d_array"),texture_depth_cube:new $("texture_depth_cube",L.keyword,"texture_depth_cube"),texture_depth_cube_array:new $("texture_depth_cube_array",L.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new $("texture_depth_multisampled_2d",L.keyword,"texture_depth_multisampled_2d"),texture_external:new $("texture_external",L.keyword,"texture_external"),u32:new $("u32",L.keyword,"u32"),vec2:new $("vec2",L.keyword,"vec2"),vec3:new $("vec3",L.keyword,"vec3"),vec4:new $("vec4",L.keyword,"vec4"),bitcast:new $("bitcast",L.keyword,"bitcast"),block:new $("block",L.keyword,"block"),break:new $("break",L.keyword,"break"),case:new $("case",L.keyword,"case"),continue:new $("continue",L.keyword,"continue"),continuing:new $("continuing",L.keyword,"continuing"),default:new $("default",L.keyword,"default"),discard:new $("discard",L.keyword,"discard"),else:new $("else",L.keyword,"else"),enable:new $("enable",L.keyword,"enable"),fallthrough:new $("fallthrough",L.keyword,"fallthrough"),false:new $("false",L.keyword,"false"),fn:new $("fn",L.keyword,"fn"),for:new $("for",L.keyword,"for"),function:new $("function",L.keyword,"function"),if:new $("if",L.keyword,"if"),let:new $("let",L.keyword,"let"),const:new $("const",L.keyword,"const"),loop:new $("loop",L.keyword,"loop"),while:new $("while",L.keyword,"while"),private:new $("private",L.keyword,"private"),read:new $("read",L.keyword,"read"),read_write:new $("read_write",L.keyword,"read_write"),return:new $("return",L.keyword,"return"),storage:new $("storage",L.keyword,"storage"),switch:new $("switch",L.keyword,"switch"),true:new $("true",L.keyword,"true"),alias:new $("alias",L.keyword,"alias"),type:new $("type",L.keyword,"type"),uniform:new $("uniform",L.keyword,"uniform"),var:new $("var",L.keyword,"var"),override:new $("override",L.keyword,"override"),workgroup:new $("workgroup",L.keyword,"workgroup"),write:new $("write",L.keyword,"write"),r8unorm:new $("r8unorm",L.keyword,"r8unorm"),r8snorm:new $("r8snorm",L.keyword,"r8snorm"),r8uint:new $("r8uint",L.keyword,"r8uint"),r8sint:new $("r8sint",L.keyword,"r8sint"),r16uint:new $("r16uint",L.keyword,"r16uint"),r16sint:new $("r16sint",L.keyword,"r16sint"),r16float:new $("r16float",L.keyword,"r16float"),rg8unorm:new $("rg8unorm",L.keyword,"rg8unorm"),rg8snorm:new $("rg8snorm",L.keyword,"rg8snorm"),rg8uint:new $("rg8uint",L.keyword,"rg8uint"),rg8sint:new $("rg8sint",L.keyword,"rg8sint"),r32uint:new $("r32uint",L.keyword,"r32uint"),r32sint:new $("r32sint",L.keyword,"r32sint"),r32float:new $("r32float",L.keyword,"r32float"),rg16uint:new $("rg16uint",L.keyword,"rg16uint"),rg16sint:new $("rg16sint",L.keyword,"rg16sint"),rg16float:new $("rg16float",L.keyword,"rg16float"),rgba8unorm:new $("rgba8unorm",L.keyword,"rgba8unorm"),rgba8unorm_srgb:new $("rgba8unorm_srgb",L.keyword,"rgba8unorm_srgb"),rgba8snorm:new $("rgba8snorm",L.keyword,"rgba8snorm"),rgba8uint:new $("rgba8uint",L.keyword,"rgba8uint"),rgba8sint:new $("rgba8sint",L.keyword,"rgba8sint"),bgra8unorm:new $("bgra8unorm",L.keyword,"bgra8unorm"),bgra8unorm_srgb:new $("bgra8unorm_srgb",L.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new $("rgb10a2unorm",L.keyword,"rgb10a2unorm"),rg11b10float:new $("rg11b10float",L.keyword,"rg11b10float"),rg32uint:new $("rg32uint",L.keyword,"rg32uint"),rg32sint:new $("rg32sint",L.keyword,"rg32sint"),rg32float:new $("rg32float",L.keyword,"rg32float"),rgba16uint:new $("rgba16uint",L.keyword,"rgba16uint"),rgba16sint:new $("rgba16sint",L.keyword,"rgba16sint"),rgba16float:new $("rgba16float",L.keyword,"rgba16float"),rgba32uint:new $("rgba32uint",L.keyword,"rgba32uint"),rgba32sint:new $("rgba32sint",L.keyword,"rgba32sint"),rgba32float:new $("rgba32float",L.keyword,"rgba32float"),static_assert:new $("static_assert",L.keyword,"static_assert")};P.tokens={decimal_float_literal:new $("decimal_float_literal",L.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new $("hex_float_literal",L.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new $("int_literal",L.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new $("uint_literal",L.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new $("ident",L.token,/[a-zA-Z][0-9a-zA-Z_]*/),and:new $("and",L.token,"&"),and_and:new $("and_and",L.token,"&&"),arrow:new $("arrow ",L.token,"->"),attr:new $("attr",L.token,"@"),attr_left:new $("attr_left",L.token,"[["),attr_right:new $("attr_right",L.token,"]]"),forward_slash:new $("forward_slash",L.token,"/"),bang:new $("bang",L.token,"!"),bracket_left:new $("bracket_left",L.token,"["),bracket_right:new $("bracket_right",L.token,"]"),brace_left:new $("brace_left",L.token,"{"),brace_right:new $("brace_right",L.token,"}"),colon:new $("colon",L.token,":"),comma:new $("comma",L.token,","),equal:new $("equal",L.token,"="),equal_equal:new $("equal_equal",L.token,"=="),not_equal:new $("not_equal",L.token,"!="),greater_than:new $("greater_than",L.token,">"),greater_than_equal:new $("greater_than_equal",L.token,">="),shift_right:new $("shift_right",L.token,">>"),less_than:new $("less_than",L.token,"<"),less_than_equal:new $("less_than_equal",L.token,"<="),shift_left:new $("shift_left",L.token,"<<"),modulo:new $("modulo",L.token,"%"),minus:new $("minus",L.token,"-"),minus_minus:new $("minus_minus",L.token,"--"),period:new $("period",L.token,"."),plus:new $("plus",L.token,"+"),plus_plus:new $("plus_plus",L.token,"++"),or:new $("or",L.token,"|"),or_or:new $("or_or",L.token,"||"),paren_left:new $("paren_left",L.token,"("),paren_right:new $("paren_right",L.token,")"),semicolon:new $("semicolon",L.token,";"),star:new $("star",L.token,"*"),tilde:new $("tilde",L.token,"~"),underscore:new $("underscore",L.token,"_"),xor:new $("xor",L.token,"^"),plus_equal:new $("plus_equal",L.token,"+="),minus_equal:new $("minus_equal",L.token,"-="),times_equal:new $("times_equal",L.token,"*="),division_equal:new $("division_equal",L.token,"/="),modulo_equal:new $("modulo_equal",L.token,"%="),and_equal:new $("and_equal",L.token,"&="),or_equal:new $("or_equal",L.token,"|="),xor_equal:new $("xor_equal",L.token,"^="),shift_right_equal:new $("shift_right_equal",L.token,">>="),shift_left_equal:new $("shift_left_equal",L.token,"<<=")};P.storage_class=[Q.keywords.function,Q.keywords.private,Q.keywords.workgroup,Q.keywords.uniform,Q.keywords.storage];P.access_mode=[Q.keywords.read,Q.keywords.write,Q.keywords.read_write];P.sampler_type=[Q.keywords.sampler,Q.keywords.sampler_comparison];P.sampled_texture_type=[Q.keywords.texture_1d,Q.keywords.texture_2d,Q.keywords.texture_2d_array,Q.keywords.texture_3d,Q.keywords.texture_cube,Q.keywords.texture_cube_array];P.multisampled_texture_type=[Q.keywords.texture_multisampled_2d];P.storage_texture_type=[Q.keywords.texture_storage_1d,Q.keywords.texture_storage_2d,Q.keywords.texture_storage_2d_array,Q.keywords.texture_storage_3d];P.depth_texture_type=[Q.keywords.texture_depth_2d,Q.keywords.texture_depth_2d_array,Q.keywords.texture_depth_cube,Q.keywords.texture_depth_cube_array,Q.keywords.texture_depth_multisampled_2d];P.texture_external_type=[Q.keywords.texture_external];P.any_texture_type=[...Q.sampled_texture_type,...Q.multisampled_texture_type,...Q.storage_texture_type,...Q.depth_texture_type,...Q.texture_external_type];P.texel_format=[Q.keywords.r8unorm,Q.keywords.r8snorm,Q.keywords.r8uint,Q.keywords.r8sint,Q.keywords.r16uint,Q.keywords.r16sint,Q.keywords.r16float,Q.keywords.rg8unorm,Q.keywords.rg8snorm,Q.keywords.rg8uint,Q.keywords.rg8sint,Q.keywords.r32uint,Q.keywords.r32sint,Q.keywords.r32float,Q.keywords.rg16uint,Q.keywords.rg16sint,Q.keywords.rg16float,Q.keywords.rgba8unorm,Q.keywords.rgba8unorm_srgb,Q.keywords.rgba8snorm,Q.keywords.rgba8uint,Q.keywords.rgba8sint,Q.keywords.bgra8unorm,Q.keywords.bgra8unorm_srgb,Q.keywords.rgb10a2unorm,Q.keywords.rg11b10float,Q.keywords.rg32uint,Q.keywords.rg32sint,Q.keywords.rg32float,Q.keywords.rgba16uint,Q.keywords.rgba16sint,Q.keywords.rgba16float,Q.keywords.rgba32uint,Q.keywords.rgba32sint,Q.keywords.rgba32float];P.const_literal=[Q.tokens.int_literal,Q.tokens.uint_literal,Q.tokens.decimal_float_literal,Q.tokens.hex_float_literal,Q.keywords.true,Q.keywords.false];P.literal_or_ident=[Q.tokens.ident,Q.tokens.int_literal,Q.tokens.uint_literal,Q.tokens.decimal_float_literal,Q.tokens.hex_float_literal];P.element_count_expression=[Q.tokens.int_literal,Q.tokens.uint_literal,Q.tokens.ident];P.template_types=[Q.keywords.vec2,Q.keywords.vec3,Q.keywords.vec4,Q.keywords.mat2x2,Q.keywords.mat2x3,Q.keywords.mat2x4,Q.keywords.mat3x2,Q.keywords.mat3x3,Q.keywords.mat3x4,Q.keywords.mat4x2,Q.keywords.mat4x3,Q.keywords.mat4x4,Q.keywords.atomic,Q.keywords.bitcast,...Q.any_texture_type];P.attribute_name=[Q.tokens.ident,Q.keywords.block];P.assignment_operators=[Q.tokens.equal,Q.tokens.plus_equal,Q.tokens.minus_equal,Q.tokens.times_equal,Q.tokens.division_equal,Q.tokens.modulo_equal,Q.tokens.and_equal,Q.tokens.or_equal,Q.tokens.xor_equal,Q.tokens.shift_right_equal,Q.tokens.shift_left_equal];P.increment_operators=[Q.tokens.plus_plus,Q.tokens.minus_minus];class kR{constructor(e,n,r){this.type=e,this.lexeme=n,this.line=r}toString(){return this.lexeme}isTemplateType(){return P.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==P.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class BK{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new kR(P.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let r=1;for(;r>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),r--,r==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),r++)}return!0}}let n=P.none;for(;;){let r=this._findType(e);const i=this._peekAhead();if(e==">"&&(i==">"||i=="=")){let s=!1,o=this._tokens.length-1;for(let a=0;a<5&&o>=0;++a,--o)if(this._tokens[o].type===P.tokens.less_than){o>0&&this._tokens[o-1].isArrayOrTemplateType()&&(s=!0);break}if(s)return this._addToken(r),!0}if(r===P.none){let s=e,o=0;const a=2;for(let l=0;l<a;++l)if(s+=this._peekAhead(l),r=this._findType(s),r!==P.none){o=l;break}if(r===P.none)return n===P.none?!1:(this._current--,this._addToken(n),!0);e=s,this._current+=o+1}if(n=r,this._isAtEnd())break;e+=this._advance()}return n===P.none?!1:(this._addToken(n),!0)}_findType(e){for(const n in P.keywords){const r=P.keywords[n];if(this._match(e,r.rule))return r}for(const n in P.tokens){const r=P.tokens[n];if(this._match(e,r.rule))return r}return P.none}_match(e,n){if(typeof n=="string"){if(n==e)return!0}else{const r=n.exec(e);if(r&&r.index==0&&r[0]==e)return!0}return!1}_isAtEnd(){return this._current>=this._source.length}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new kR(e,n,this._line))}}class LK{constructor(){this._tokens=[],this._current=0,this._context=new uK}parse(e){this._initialize(e);let n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}return n}_initialize(e){if(e)if(typeof e=="string"){const n=new BK(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,n){return console.error(e,n),{token:e,message:n,toString:function(){return`${n}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==P.eof}_match(e){if(e instanceof $)return this._check(e)?(this._advance(),!0):!1;for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this._check(i))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),n)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){let r=n.type;return e.indexOf(r)!=-1}return n.type==e}_advance(){return this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(P.tokens.semicolon)&&!this._isAtEnd(););if(this._match(P.keywords.alias)){const n=this._type_alias();return this._consume(P.tokens.semicolon,"Expected ';'"),n}if(this._match(P.keywords.enable)){const n=this._enable_directive();return this._consume(P.tokens.semicolon,"Expected ';'"),n}const e=this._attribute();if(this._check(P.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(P.tokens.semicolon,"Expected ';'."),n}if(this._check(P.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(P.tokens.semicolon,"Expected ';'."),n}if(this._check(P.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(P.tokens.semicolon,"Expected ';'."),n}if(this._check(P.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(P.tokens.semicolon,"Expected ';'."),n}if(this._check(P.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),n}if(this._check(P.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),n}return null}_function_decl(){if(!this._match(P.keywords.fn))return null;const e=this._consume(P.tokens.ident,"Expected function name.").toString();this._consume(P.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(P.tokens.paren_right))do{if(this._check(P.tokens.paren_right))break;const s=this._attribute(),o=this._consume(P.tokens.ident,"Expected argument name.").toString();this._consume(P.tokens.colon,"Expected ':' for argument type.");const a=this._attribute(),l=this._type_decl();l!=null&&(l.attributes=a,n.push(new kK(o,l,s)))}while(this._match(P.tokens.comma));this._consume(P.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(P.tokens.arrow)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}const i=this._compound_statement();return new k5(e,n,r,i)}_compound_statement(){const e=[];for(this._consume(P.tokens.brace_left,"Expected '{' for block.");!this._check(P.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(P.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(P.tokens.semicolon)&&!this._isAtEnd(););if(this._check(P.keywords.if))return this._if_statement();if(this._check(P.keywords.switch))return this._switch_statement();if(this._check(P.keywords.loop))return this._loop_statement();if(this._check(P.keywords.for))return this._for_statement();if(this._check(P.keywords.while))return this._while_statement();if(this._check(P.keywords.continuing))return this._continuing_statement();if(this._check(P.keywords.static_assert))return this._static_assert_statement();if(this._check(P.tokens.brace_left))return this._compound_statement();let e=null;return this._check(P.keywords.return)?e=this._return_statement():this._check([P.keywords.var,P.keywords.let,P.keywords.const])?e=this._variable_statement():this._match(P.keywords.discard)?e=new xK:this._match(P.keywords.break)?e=new TK:this._match(P.keywords.continue)?e=new EK:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(P.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(P.keywords.static_assert))return null;let e=this._optional_paren_expression();return new fK(e)}_while_statement(){if(!this._match(P.keywords.while))return null;let e=this._optional_paren_expression();const n=this._compound_statement();return new dK(e,n)}_continuing_statement(){if(!this._match(P.keywords.continuing))return null;const e=this._compound_statement();return new hK(e)}_for_statement(){if(!this._match(P.keywords.for))return null;this._consume(P.tokens.paren_left,"Expected '('.");const e=this._check(P.tokens.semicolon)?null:this._for_init();this._consume(P.tokens.semicolon,"Expected ';'.");const n=this._check(P.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(P.tokens.semicolon,"Expected ';'.");const r=this._check(P.tokens.paren_right)?null:this._for_increment();this._consume(P.tokens.paren_right,"Expected ')'.");const i=this._compound_statement();return new pK(e,n,r,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(P.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(P.tokens.equal)&&(n=this._short_circuit_or_expression()),new su(e.name,e.type,e.storage,e.access,n)}if(this._match(P.keywords.let)){const e=this._consume(P.tokens.ident,"Expected name for let.").toString();let n=null;if(this._match(P.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}this._consume(P.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return new CR(e,n,null,null,r)}if(this._match(P.keywords.const)){const e=this._consume(P.tokens.ident,"Expected name for const.").toString();let n=null;if(this._match(P.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}this._consume(P.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return new RR(e,n,null,null,r)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(P.increment_operators))return this._current=e,null;const r=this._consume(P.increment_operators,"Expected increment operator");return new gK(r.type===P.tokens.plus_plus?ff.increment:ff.decrement,n)}_assignment_statement(){let e=null;if(this._check(P.tokens.brace_right))return null;let n=this._match(P.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;const r=this._consume(P.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new _K(up.parse(r.lexeme),e,i)}_func_call_statement(){if(!this._check(P.tokens.ident))return null;const e=this._current,n=this._consume(P.tokens.ident,"Expected function name."),r=this._argument_expression_list();return r===null?(this._current=e,null):new mK(n.lexeme,r)}_loop_statement(){if(!this._match(P.keywords.loop))return null;this._consume(P.tokens.brace_left,"Expected '{' for loop.");const e=[];let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let i of n)e.push(i);else e.push(n);n=this._statement()}let r=null;return this._match(P.keywords.continuing)&&(r=this._compound_statement()),this._consume(P.tokens.brace_right,"Expected '}' for loop."),new yK(e,r)}_switch_statement(){if(!this._match(P.keywords.switch))return null;const e=this._optional_paren_expression();this._consume(P.tokens.brace_left,"Expected '{' for switch.");const n=this._switch_body();if(n==null||n.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(P.tokens.brace_right,"Expected '}' for switch."),new vK(e,n)}_switch_body(){const e=[];if(this._match(P.keywords.case)){const n=this._case_selectors();this._match(P.tokens.colon),this._consume(P.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(P.tokens.brace_right,"Exected '}' for switch case."),e.push(new OK(n,r))}if(this._match(P.keywords.default)){this._match(P.tokens.colon),this._consume(P.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(P.tokens.brace_right,"Exected '}' for switch default."),e.push(new NK(n))}if(this._check([P.keywords.default,P.keywords.case])){const n=this._switch_body();e.push(n[0])}return e}_case_selectors(){var e,n,r,i;const s=[(n=(e=this._shift_expression())===null||e===void 0?void 0:e.evaluate(this._context).toString())!==null&&n!==void 0?n:""];for(;this._match(P.tokens.comma);)s.push((i=(r=this._shift_expression())===null||r===void 0?void 0:r.evaluate(this._context).toString())!==null&&i!==void 0?i:"");return s}_case_body(){if(this._match(P.keywords.fallthrough))return this._consume(P.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(P.keywords.if))return null;const e=this._optional_paren_expression(),n=this._compound_statement();let r=[];this._match_elseif()&&(r=this._elseif_statement(r));let i=null;return this._match(P.keywords.else)&&(i=this._compound_statement()),new bK(e,n,r,i)}_match_elseif(){return this._tokens[this._current].type===P.keywords.else&&this._tokens[this._current+1].type===P.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(new DK(n,r)),this._match_elseif()&&this._elseif_statement(e),e}_return_statement(){if(!this._match(P.keywords.return))return null;const e=this._short_circuit_or_expression();return new wK(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(P.tokens.or_or);)e=new Xi(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(P.tokens.and_and);)e=new Xi(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(P.tokens.or);)e=new Xi(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(P.tokens.xor);)e=new Xi(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(P.tokens.and);)e=new Xi(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([P.tokens.equal_equal,P.tokens.not_equal])?new Xi(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([P.tokens.less_than,P.tokens.greater_than,P.tokens.less_than_equal,P.tokens.greater_than_equal]);)e=new Xi(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([P.tokens.shift_left,P.tokens.shift_right]);)e=new Xi(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([P.tokens.plus,P.tokens.minus]);)e=new Xi(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([P.tokens.star,P.tokens.forward_slash,P.tokens.modulo]);)e=new Xi(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([P.tokens.minus,P.tokens.bang,P.tokens.tilde,P.tokens.star,P.tokens.and])?new MK(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(P.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(P.tokens.bracket_right,"Expected ']'.");const n=this._postfix_expression();return n&&(e.postfix=n),e}if(this._match(P.tokens.period)){const e=this._consume(P.tokens.ident,"Expected member name."),n=this._postfix_expression(),r=new PR(e.lexeme);return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(P.tokens.ident)){const r=this._previous().toString();if(this._check(P.tokens.paren_left)){const i=this._argument_expression_list(),s=this._getStruct(r);return s!=null?new Gd(s,i):new CK(r,i)}if(this._context.constants.has(r)){const i=this._context.constants.get(r);return new IR(r,i.value)}return new RK(r)}if(this._match(P.const_literal))return new MR(parseFloat(this._previous().toString()));if(this._check(P.tokens.paren_left))return this._paren_expression();if(this._match(P.keywords.bitcast)){this._consume(P.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(P.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return new PK(r,i)}const e=this._type_decl(),n=this._argument_expression_list();return new IK(e,n)}_argument_expression_list(){if(!this._match(P.tokens.paren_left))return null;const e=[];do{if(this._check(P.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(P.tokens.comma));return this._consume(P.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(P.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(P.tokens.paren_right),new OR([e])}_paren_expression(){this._consume(P.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(P.tokens.paren_right,"Expected ')'."),new OR([e])}_struct_decl(){if(!this._match(P.keywords.struct))return null;const e=this._consume(P.tokens.ident,"Expected name for struct.").toString();this._consume(P.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(P.tokens.brace_right);){const i=this._attribute(),s=this._consume(P.tokens.ident,"Expected variable name.").toString();this._consume(P.tokens.colon,"Expected ':' for struct member type.");const o=this._attribute(),a=this._type_decl();a!=null&&(a.attributes=o),this._check(P.tokens.brace_right)?this._match(P.tokens.comma):this._consume(P.tokens.comma,"Expected ',' for struct member."),n.push(new FK(s,a,i))}this._consume(P.tokens.brace_right,"Expected '}' after struct body.");const r=new tl(e,n);return this._context.structs.set(e,r),r}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(P.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(P.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(P.keywords.const))return null;const e=this._consume(P.tokens.ident,"Expected variable name");let n=null;if(this._match(P.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}let r=null;if(this._match(P.tokens.equal)){const s=this._short_circuit_or_expression();if(s instanceof Gd)r=s;else if(s instanceof IR&&s.initializer instanceof Gd)r=s.initializer;else try{const o=s.evaluate(this._context);r=new MR(o)}catch{r=s}}const i=new RR(e.toString(),n,"","",r);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(P.keywords.let))return null;const e=this._consume(P.tokens.ident,"Expected variable name");let n=null;if(this._match(P.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}let r=null;return this._match(P.tokens.equal)&&(r=this._const_expression()),new CR(e.toString(),n,"","",r)}_const_expression(){if(this._match(P.const_literal))return new PR(this._previous().toString());const e=this._type_decl();this._consume(P.tokens.paren_left,"Expected '('.");let n=[];for(;!this._check(P.tokens.paren_right)&&(n.push(this._const_expression()),!!this._check(P.tokens.comma));)this._advance();return this._consume(P.tokens.paren_right,"Expected ')'."),new Gd(e,n)}_variable_decl(){if(!this._match(P.keywords.var))return null;let e="",n="";this._match(P.tokens.less_than)&&(e=this._consume(P.storage_class,"Expected storage_class.").toString(),this._match(P.tokens.comma)&&(n=this._consume(P.access_mode,"Expected access_mode.").toString()),this._consume(P.tokens.greater_than,"Expected '>'."));const r=this._consume(P.tokens.ident,"Expected variable name");let i=null;if(this._match(P.tokens.colon)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}return new su(r.toString(),i,e,n,null)}_override_decl(){if(!this._match(P.keywords.override))return null;const e=this._consume(P.tokens.ident,"Expected variable name");let n=null;if(this._match(P.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return new D5(e.toString(),n,null)}_enable_directive(){const e=this._consume(P.tokens.ident,"identity expected.");return new SK(e.toString())}_type_alias(){const e=this._consume(P.tokens.ident,"identity expected.");this._consume(P.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=new F5(e.toString(),n);return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([P.tokens.ident,...P.texel_format,P.keywords.bool,P.keywords.f32,P.keywords.i32,P.keywords.u32])){const r=this._advance(),i=r.toString();return this._context.structs.has(i)?this._context.structs.get(i):this._context.aliases.has(i)?this._context.aliases.get(i).type:new nc(r.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(P.template_types)){let r=this._advance().toString(),i=null,s=null;return this._match(P.tokens.less_than)&&(i=this._type_decl(),s=null,this._match(P.tokens.comma)&&(s=this._consume(P.access_mode,"Expected access_mode for pointer").toString()),this._consume(P.tokens.greater_than,"Expected '>' for type.")),new B5(r,i,s)}if(this._match(P.keywords.ptr)){let r=this._previous().toString();this._consume(P.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(P.storage_class,"Expected storage_class for pointer");this._consume(P.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let o=null;return this._match(P.tokens.comma)&&(o=this._consume(P.access_mode,"Expected access_mode for pointer").toString()),this._consume(P.tokens.greater_than,"Expected '>' for pointer."),new AK(r,i.toString(),s,o)}const n=this._attribute();if(this._match(P.keywords.array)){let r=null,i=-1;const s=this._previous();if(this._match(P.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let o="";this._match(P.tokens.comma)&&(o=this._shift_expression().evaluate(this._context).toString()),this._consume(P.tokens.greater_than,"Expected '>' for array."),i=o?parseInt(o):0}return new L5(s.toString(),n,r,i)}return null}_texture_sampler_types(){if(this._match(P.sampler_type))return new Qd(this._previous().toString(),null,null);if(this._match(P.depth_texture_type))return new Qd(this._previous().toString(),null,null);if(this._match(P.sampled_texture_type)||this._match(P.multisampled_texture_type)){const e=this._previous();this._consume(P.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(P.tokens.greater_than,"Expected '>' for sampler type."),new Qd(e.toString(),n,null)}if(this._match(P.storage_texture_type)){const e=this._previous();this._consume(P.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(P.texel_format,"Invalid texel format.").toString();this._consume(P.tokens.comma,"Expected ',' after texel format.");const r=this._consume(P.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(P.tokens.greater_than,"Expected '>' for sampler type."),new Qd(e.toString(),n,r)}return null}_attribute(){let e=[];for(;this._match(P.tokens.attr);){const n=this._consume(P.attribute_name,"Expected attribute name"),r=new NR(n.toString(),null);if(this._match(P.tokens.paren_left)){if(r.value=this._consume(P.literal_or_ident,"Expected attribute value").toString(),this._check(P.tokens.comma)){this._advance();do{const i=this._consume(P.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(i)}while(this._match(P.tokens.comma))}this._consume(P.tokens.paren_right,"Expected ')'")}e.push(r)}for(;this._match(P.tokens.attr_left);){if(!this._check(P.tokens.attr_right))do{const n=this._consume(P.attribute_name,"Expected attribute name"),r=new NR(n.toString(),null);if(this._match(P.tokens.paren_left)){if(r.value=[this._consume(P.literal_or_ident,"Expected attribute value").toString()],this._check(P.tokens.comma)){this._advance();do{const i=this._consume(P.literal_or_ident,"Expected attribute value").toString();r.value.push(i)}while(this._match(P.tokens.comma))}this._consume(P.tokens.paren_right,"Expected ')'")}e.push(r)}while(this._match(P.tokens.comma));this._consume(P.tokens.attr_right,"Expected ']]' after attribute declarations")}return e.length==0?null:e}}class Tu{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class DR{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class e_ extends Tu{constructor(e,n){super(e,n),this.members=[],this.align=0}get isStruct(){return!0}}class Vb extends Tu{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}}class FR extends Tu{constructor(e,n,r,i){super(e,r),this.format=n,this.access=i}get isTemplate(){return!0}}var zo;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(zo||(zo={}));class t_{constructor(e,n,r,i,s,o,a){this.name=e,this.type=n,this.group=r,this.binding=i,this.attributes=s,this.resourceType=o,this.access=a}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class $K{constructor(e,n){this.name=e,this.type=n}}class n_{constructor(e,n){this.align=e,this.size=n}}class UK{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i,this.interpolation=null}}class BR{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i}}class zK{constructor(e,n=null){this.stage=null,this.inputs=[],this.outputs=[],this.name=e,this.stage=n}}class jK{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class VK{constructor(e,n,r,i){this.name=e,this.type=n,this.attributes=r,this.id=i}}class Qs{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new jK,this._types=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const r=new LK().parse(e);for(const i of r){if(i instanceof tl){const s=this._getTypeInfo(i,null);s instanceof e_&&this.structs.push(s);continue}if(i instanceof F5){this.aliases.push(this._getAliasInfo(i));continue}if(i instanceof D5){const s=i,o=this._getAttributeNum(s.attributes,"id",0),a=s.type!=null?this._getTypeInfo(s.type,s.attributes):null;this.overrides.push(new VK(s.name,a,s.attributes,o));continue}if(this._isUniformVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),a=this._getAttributeNum(s.attributes,"binding",0),l=this._getTypeInfo(s.type,s.attributes),c=new t_(s.name,l,o,a,s.attributes,zo.Uniform,s.access);this.uniforms.push(c);continue}if(this._isStorageVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),a=this._getAttributeNum(s.attributes,"binding",0),l=this._getTypeInfo(s.type,s.attributes),c=this._isStorageTexture(l),u=new t_(s.name,l,o,a,s.attributes,c?zo.StorageTexture:zo.Storage,s.access);this.storage.push(u);continue}if(this._isTextureVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),a=this._getAttributeNum(s.attributes,"binding",0),l=this._getTypeInfo(s.type,s.attributes),c=this._isStorageTexture(l),u=new t_(s.name,l,o,a,s.attributes,c?zo.StorageTexture:zo.Texture,s.access);c?this.storage.push(u):this.textures.push(u);continue}if(this._isSamplerVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),a=this._getAttributeNum(s.attributes,"binding",0),l=this._getTypeInfo(s.type,s.attributes),c=new t_(s.name,l,o,a,s.attributes,zo.Sampler,s.access);this.samplers.push(c);continue}if(i instanceof k5){const s=this._getAttribute(i,"vertex"),o=this._getAttribute(i,"fragment"),a=this._getAttribute(i,"compute"),l=s||o||a;if(l){const c=new zK(i.name,l.name);c.inputs=this._getInputs(i.args),c.outputs=this._getOutputs(i.returnType),this.entry[l.name].push(c)}continue}}}getBindGroups(){const e=[];function n(r,i){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),i>=e[r].length&&(e[r].length=i+1)}for(const r of this.uniforms){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.storage){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.textures){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.samplers){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof tl)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof tl)this._getStructOutputs(r.type,n);else{const i=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(i!==null){const s=this._getTypeInfo(r.type,r.type.attributes),o=this._parseInt(i.value),a=new BR(r.name,s,i.name,o);n.push(a)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getTypeInfo(e,e.attributes),i=this._parseInt(n.value);return new BR("",r,n.name,i)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof tl)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof tl)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),i=this._getTypeInfo(e.type,e.attributes),s=this._parseInt(n.value),o=new UK(e.name,i,n.name,s);return r!==null&&(o.interpolation=this._parseString(r.value)),o}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new $K(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,n){if(this._types.has(e))return this._types.get(e);if(e instanceof L5){const i=e,s=this._getTypeInfo(i.format,i.attributes),o=new Vb(i.name,n);return o.format=s,o.count=i.count,this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof tl){const i=e,s=new e_(i.name,n);for(const o of i.members){const a=this._getTypeInfo(o.type,o.attributes);s.members.push(new DR(o.name,a,o.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Qd){const i=e,s=i.format instanceof nc,o=i.format?s?this._getTypeInfo(i.format,null):new Tu(i.format,null):null,a=new FR(i.name,o,n,i.access);return this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof B5){const i=e,s=i.format?this._getTypeInfo(i.format,null):null,o=new FR(i.name,s,n,i.access);return this._types.set(e,o),this._updateTypeInfo(o),o}const r=new Tu(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r;const i=this._getTypeSize(e);if(e.size=(n=i==null?void 0:i.size)!==null&&n!==void 0?n:0,e instanceof Vb){const s=this._getTypeSize(e.format);e.stride=(r=s==null?void 0:s.size)!==null&&r!==void 0?r:0,this._updateTypeInfo(e.format)}e instanceof e_&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,i=0,s=0,o=0;for(let a=0,l=e.members.length;a<l;++a){const c=e.members[a],u=this._getTypeSize(c);if(!u)continue;(n=this._getAlias(c.type.name))!==null&&n!==void 0||c.type;const f=u.align,d=u.size;r=this._roundUp(f,r+i),i=d,s=r,o=Math.max(o,f),c.offset=r,c.size=d,this._updateTypeInfo(c.type)}e.size=this._roundUp(o,s+i),e.align=o}_getTypeSize(e){var n;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof DR&&(e=e.type),e instanceof Tu){const s=this._getAlias(e.name);s!==null&&(e=s)}{const s=Qs._typeInfo[e.name];if(s!==void 0){const o=e.format==="f16"?2:1;return new n_(Math.max(i,s.align/o),Math.max(r,s.size/o))}}{const s=Qs._typeInfo[e.name.substring(0,e.name.length-1)];if(s){const o=e.name[e.name.length-1]==="h"?2:1;return new n_(Math.max(i,s.align/o),Math.max(r,s.size/o))}}if(e instanceof Vb){let s=e,o=8,a=8;const l=this._getTypeSize(s.format);l!==null&&(a=l.size,o=l.align);const c=s.count,u=this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(o,a));return a=c*u,r&&(a=r),new n_(Math.max(i,o),Math.max(r,a))}if(e instanceof e_){let s=0,o=0,a=0,l=0,c=0;for(const u of e.members){const f=this._getTypeSize(u.type);f!==null&&(s=Math.max(f.align,s),a=this._roundUp(f.align,a+l),l=f.size,c=a)}return o=this._roundUp(s,c+l),new n_(Math.max(i,s),Math.max(r,o))}return null}_isUniformVar(e){return e instanceof su&&e.storage=="uniform"}_isStorageVar(e){return e instanceof su&&e.storage=="storage"}_isTextureVar(e){return e instanceof su&&e.type!==null&&Qs._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof su&&e.type!==null&&Qs._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const i=r.attributes;for(let s of i)if(s.name==n)return s;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let i of e)if(i.name==n){let s=i!==null&&i.value!==null?i.value:r;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}Qs._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};Qs._textureTypes=P.any_texture_type.map(t=>t.name);Qs._samplerTypes=P.sampler_type.map(t=>t.name);function WK(t){const e={attributes:[],bindings:[]};let n;try{n=HK(t)}catch(s){return ie.error(s.message)(),e}for(const s of n.uniforms){const o=[];for(const a of s.type.members)o.push({name:a.name,type:LR(a.type)});e.bindings.push({type:"uniform",name:s.name,location:s.binding,group:s.group,members:o})}const r=n.entry.vertex[0],i=(r==null?void 0:r.inputs.length)||0;for(let s=0;s<i;s++){const o=r.inputs[s];if(o.locationType==="location"){const a=LR(o.type);e.attributes.push({name:o.name,location:o.location,type:a})}}return e}function LR(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function HK(t){try{return new Qs(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const XK=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;
const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;
const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;
const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;
float sin_taylor_fp32(float a) {
float r, s, t, x;
if (a == 0.0) {
return 0.0;
}
x = -a * a;
s = a;
r = a;
r = r * x;
t = r * INVERSE_FACTORIAL_3;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_5;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_7;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_9;
s = s + t;
return s;
}
void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
if (a == 0.0) {
sin_t = 0.0;
cos_t = 1.0;
}
sin_t = sin_taylor_fp32(a);
cos_t = sqrt(1.0 - sin_t * sin_t);
}
float tan_taylor_fp32(float a) {
float sin_a;
float cos_a;
if (a == 0.0) {
return 0.0;
}
float z = floor(a / TWO_PI);
float r = a - TWO_PI * z;
float t;
float q = floor(r / PI_2 + 0.5);
int j = int(q);
if (j < -2 || j > 2) {
return 1.0 / 0.0;
}
t = r - PI_2 * q;
q = floor(t / PI_16 + 0.5);
int k = int(q);
int abs_k = int(abs(float(k)));
if (abs_k > 4) {
return 1.0 / 0.0;
} else {
t = t - PI_16 * q;
}
float u = 0.0;
float v = 0.0;
float sin_t, cos_t;
float s, c;
sincos_taylor_fp32(t, sin_t, cos_t);
if (k == 0) {
s = sin_t;
c = cos_t;
} else {
if (abs(float(abs_k) - 1.0) < 0.5) {
u = COS_TABLE_0;
v = SIN_TABLE_0;
} else if (abs(float(abs_k) - 2.0) < 0.5) {
u = COS_TABLE_1;
v = SIN_TABLE_1;
} else if (abs(float(abs_k) - 3.0) < 0.5) {
u = COS_TABLE_2;
v = SIN_TABLE_2;
} else if (abs(float(abs_k) - 4.0) < 0.5) {
u = COS_TABLE_3;
v = SIN_TABLE_3;
}
if (k > 0) {
s = u * sin_t + v * cos_t;
c = u * cos_t - v * sin_t;
} else {
s = u * sin_t - v * cos_t;
c = u * cos_t + v * sin_t;
}
}
if (j == 0) {
sin_a = s;
cos_a = c;
} else if (j == 1) {
sin_a = c;
cos_a = -s;
} else if (j == -1) {
sin_a = -c;
cos_a = s;
} else {
sin_a = -s;
cos_a = -c;
}
return sin_a / cos_a;
}
#endif
float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
return tan_taylor_fp32(a);
#else
return tan(a);
#endif
}
`,YK={name:"fp32",vs:XK},KK=new Float32Array([0,1,1,1]),qK=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
out vec4 picking_vRGBcolor_Avalid;
vec3 picking_normalizeColor(vec3 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
vec4 picking_normalizeColor(vec4 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
bool picking_isColorZero(vec3 color) {
return dot(color, vec3(1.0)) < 0.00001;
}
bool picking_isColorValid(vec3 color) {
return dot(color, vec3(1.0)) > 0.00001;
}
bool isVertexHighlighted(vec3 vertexColor) {
vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
return
bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}
void picking_setPickingColor(vec3 pickingColor) {
pickingColor = picking_normalizeColor(pickingColor);
if (bool(picking.isActive)) {
picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));
if (!bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = pickingColor;
}
} else {
picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
}
}
void picking_setPickingAttribute(float value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.r = value;
}
}
void picking_setPickingAttribute(vec2 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rg = value;
}
}
void picking_setPickingAttribute(vec3 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = value;
}
}
`,ZK=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
if (picking.isActive > 0.5) {
return color;
}
bool selected = bool(picking_vRGBcolor_Avalid.a);
if (selected) {
float highLightAlpha = picking.highlightColor.a;
float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
float highLightRatio = highLightAlpha / blendedAlpha;
vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
return vec4(blendedRGB, blendedAlpha);
} else {
return color;
}
}
vec4 picking_filterPickingColor(vec4 color) {
if (bool(picking.isActive)) {
if (picking_vRGBcolor_Avalid.a == 0.0) {
discard;
}
return picking_vRGBcolor_Avalid;
}
return color;
}
vec4 picking_filterColor(vec4 color) {
vec4 highlightColor = picking_filterHighlightColor(color);
return picking_filterPickingColor(highlightColor);
}
`,$R={name:"picking",vs:qK,fs:ZK,uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:new Float32Array([0,0,0]),highlightColor:KK},getUniforms:QK};function QK(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const r=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=r}if(t.highlightColor){const r=Array.from(t.highlightColor,i=>i/255);Number.isFinite(r[3])||(r[3]=1),n.highlightColor=r}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}function z5(t,e=[],n=0){const r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}function GK(t){return t-Math.fround(t)}function JK(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=n*4+r;z5(t[r*4+n],e,i*2)}return e}const eq=`uniform float ONE;
vec2 split(float a) {
const float SPLIT = 4097.0;
float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float a_hi = t * ONE - (t - a);
float a_lo = a * ONE - a_hi;
#else
float a_hi = t - (t - a);
float a_lo = a - a_hi;
#endif
return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
vec2 b = split(a.x);
b.y += a.y;
return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float sum = (a + b) * ONE;
float err = b - (sum - a) * ONE;
#else
float sum = a + b;
float err = b - (sum - a);
#endif
return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
float v = s - a;
float err = (a - (s - v)) + (b - v);
#endif
return vec2(s, err);
}
vec2 twoSub(float a, float b) {
float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
float v = s - a;
float err = (a - (s - v)) - (b + v);
#endif
return vec2(s, err);
}
vec2 twoSqr(float a) {
float prod = a * a;
vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
return vec2(prod, err);
}
vec2 twoProd(float a, float b) {
float prod = a * b;
vec2 a_fp64 = split(a);
vec2 b_fp64 = split(b);
float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
return vec2(prod, err);
}
vec2 sum_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSum(a.x, b.x);
t = twoSum(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 sub_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSub(a.x, b.x);
t = twoSub(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 mul_fp64(vec2 a, vec2 b) {
vec2 prod = twoProd(a.x, b.x);
prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
return prod;
}
vec2 div_fp64(vec2 a, vec2 b) {
float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
vec2 yn = a * xn;
#endif
float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
vec2 prod = twoProd(xn, diff);
return sum_fp64(yn, prod);
}
vec2 sqrt_fp64(vec2 a) {
if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);
float x = 1.0 / sqrt(a.x);
float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
vec2 yn_sqr = twoSqr(yn) * ONE;
#else
vec2 yn_sqr = twoSqr(yn);
#endif
float diff = sub_fp64(a, yn_sqr).x;
vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
return sum_fp64(split(yn), prod);
#else
return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,tq={ONE:1};function nq(){return tq}const rq={name:"fp64-arithmetic",vs:eq,getUniforms:nq,fp64ify:z5,fp64LowPart:GK,fp64ifyMatrix4:JK},iq={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...iq}};const Or=globalThis.mathgl.config;function sq(t,{precision:e=Or.precision}={}){return t=oq(t),`${parseFloat(t.toPrecision(e))}`}function df(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function na(t,e,n){return lq(t,r=>Math.max(e,Math.min(n,r)))}function u0(t,e,n){return df(t)?t.map((r,i)=>u0(r,e[i],n)):n*e+(1-n)*t}function fp(t,e,n){const r=Or.EPSILON;n&&(Or.EPSILON=n);try{if(t===e)return!0;if(df(t)&&df(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!fp(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Or.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Or.EPSILON=r}}function oq(t){return Math.round(t/Or.EPSILON)*Or.EPSILON}function aq(t){return t.clone?t.clone():new Array(t.length)}function lq(t,e,n){if(df(t)){const r=t;n=n||aq(r);for(let i=0;i<n.length&&i<r.length;++i){const s=typeof t=="number"?t:t[i];n[i]=e(s,i,n)}return n}return e(t)}class j5 extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:df(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Or)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+sq(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!fp(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i],o=typeof n=="number"?n:n[i];this[i]=s+r*(o-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Or.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function cq(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Rr(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Wb(t,e,n=""){if(Or.debug&&!cq(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function UR(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}let uq=class extends j5{get x(){return this[0]}set x(e){this[0]=Rr(e)}get y(){return this[1]}set y(e){this[1]=Rr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Rr(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Rr(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return UR(e>=0&&e<this.ELEMENTS,"index is out of range"),Rr(this[e])}setComponent(e,n){return UR(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}};const nm=1e-6;let hf=typeof Float32Array<"u"?Float32Array:Array;function fq(){const t=new hf(2);return hf!=Float32Array&&(t[0]=0,t[1]=0),t}function zR(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function dq(t,e){return t[0]=-e[0],t[1]=-e[1],t}function V5(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function hq(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){const t=fq();return function(e,n,r,i,s,o){let a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function pq(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function W5(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function gq(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function _q(){const t=new hf(3);return hf!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function mq(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function yq(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function vq(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function bq(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function H5(t,e,n){const r=e[0],i=e[1],s=e[2];let o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function wq(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function Sq(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2];let u=i*c-s*l,f=s*a-r*c,d=r*l-i*a,h=i*d-s*f,p=s*u-r*d,g=r*f-i*u;const v=o*2;return u*=v,f*=v,d*=v,h*=2,p*=2,g*=2,t[0]=a+u+h,t[1]=l+f+p,t[2]=c+d+g,t}function xq(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Tq(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Eq(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Aq(t,e){const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt((n*n+r*r+i*i)*(s*s+o*o+a*a)),c=l&&vq(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}const Cq=mq;(function(){const t=_q();return function(e,n,r,i,s,o){let a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Hb=[0,0,0];let r_;class vs extends uq{static get ZERO(){return r_||(r_=new vs(0,0,0),Object.freeze(r_)),r_}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&df(e)?this.copy(e):(Or.debug&&(Rr(e),Rr(n),Rr(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Or.debug&&(Rr(e.x),Rr(e.y),Rr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Rr(e)}angle(e){return Aq(this,e)}cross(e){return bq(this,this,e),this.check()}rotateX({radians:e,origin:n=Hb}){return xq(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Hb}){return Tq(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Hb}){return Eq(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return H5(this,this,e),this.check()}transformAsVector(e){return W5(this,this,e),this.check()}transformByMatrix3(e){return wq(this,this,e),this.check()}transformByMatrix2(e){return gq(this,this,e),this.check()}transformByQuaternion(e){return Sq(this,this,e),this.check()}}class Rq extends j5{toString(){let e="[";if(Or.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Rr(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function Pq(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Iq(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function pS(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],_=e[15],m=n*a-r*o,y=n*l-i*o,b=n*c-s*o,S=r*l-i*a,A=r*c-s*a,I=i*c-s*l,R=u*g-f*p,M=u*v-d*p,k=u*_-h*p,N=f*v-d*g,F=f*_-h*g,D=d*_-h*v;let z=m*D-y*F+b*N+S*k-A*M+I*R;return z?(z=1/z,t[0]=(a*D-l*F+c*N)*z,t[1]=(i*F-r*D-s*N)*z,t[2]=(g*I-v*A+_*S)*z,t[3]=(d*A-f*I-h*S)*z,t[4]=(l*k-o*D-c*M)*z,t[5]=(n*D-i*k+s*M)*z,t[6]=(v*b-p*I-_*y)*z,t[7]=(u*I-d*b+h*y)*z,t[8]=(o*F-a*k+c*R)*z,t[9]=(r*k-n*F-s*R)*z,t[10]=(p*A-g*b+_*m)*z,t[11]=(f*b-u*A-h*m)*z,t[12]=(a*M-o*N-l*R)*z,t[13]=(n*N-r*M+i*R)*z,t[14]=(g*y-p*S-v*m)*z,t[15]=(u*S-f*y+d*m)*z,t):null}function Mq(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],h=t[12],p=t[13],g=t[14],v=t[15],_=e*o-n*s,m=e*a-r*s,y=n*a-r*o,b=c*p-u*h,S=c*g-f*h,A=u*g-f*p,I=e*A-n*S+r*b,R=s*A-o*S+a*b,M=c*y-u*m+f*_,k=h*y-p*m+g*_;return l*I-i*R+v*M-d*k}function Ml(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],h=e[10],p=e[11],g=e[12],v=e[13],_=e[14],m=e[15];let y=n[0],b=n[1],S=n[2],A=n[3];return t[0]=y*r+b*a+S*f+A*g,t[1]=y*i+b*l+S*d+A*v,t[2]=y*s+b*c+S*h+A*_,t[3]=y*o+b*u+S*p+A*m,y=n[4],b=n[5],S=n[6],A=n[7],t[4]=y*r+b*a+S*f+A*g,t[5]=y*i+b*l+S*d+A*v,t[6]=y*s+b*c+S*h+A*_,t[7]=y*o+b*u+S*p+A*m,y=n[8],b=n[9],S=n[10],A=n[11],t[8]=y*r+b*a+S*f+A*g,t[9]=y*i+b*l+S*d+A*v,t[10]=y*s+b*c+S*h+A*_,t[11]=y*o+b*u+S*p+A*m,y=n[12],b=n[13],S=n[14],A=n[15],t[12]=y*r+b*a+S*f+A*g,t[13]=y*i+b*l+S*d+A*v,t[14]=y*s+b*c+S*h+A*_,t[15]=y*o+b*u+S*p+A*m,t}function f0(t,e,n){const r=n[0],i=n[1],s=n[2];let o,a,l,c,u,f,d,h,p,g,v,_;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],f=e[5],d=e[6],h=e[7],p=e[8],g=e[9],v=e[10],_=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=g,t[10]=v,t[11]=_,t[12]=o*r+u*i+p*s+e[12],t[13]=a*r+f*i+g*s+e[13],t[14]=l*r+d*i+v*s+e[14],t[15]=c*r+h*i+_*s+e[15]),t}function xT(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Oq(t,e,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o),l,c,u,f,d,h,p,g,v,_,m,y,b,S,A,I,R,M,k,N,F,D,z,Z;return a<nm?null:(a=1/a,i*=a,s*=a,o*=a,c=Math.sin(n),l=Math.cos(n),u=1-l,f=e[0],d=e[1],h=e[2],p=e[3],g=e[4],v=e[5],_=e[6],m=e[7],y=e[8],b=e[9],S=e[10],A=e[11],I=i*i*u+l,R=s*i*u+o*c,M=o*i*u-s*c,k=i*s*u-o*c,N=s*s*u+l,F=o*s*u+i*c,D=i*o*u+s*c,z=s*o*u-i*c,Z=o*o*u+l,t[0]=f*I+g*R+y*M,t[1]=d*I+v*R+b*M,t[2]=h*I+_*R+S*M,t[3]=p*I+m*R+A*M,t[4]=f*k+g*N+y*F,t[5]=d*k+v*N+b*F,t[6]=h*k+_*N+S*F,t[7]=p*k+m*N+A*F,t[8]=f*D+g*z+y*Z,t[9]=d*D+v*z+b*Z,t[10]=h*D+_*z+S*Z,t[11]=p*D+m*z+A*Z,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function X5(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+f*r,t[7]=l*i+d*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=f*i-a*r,t[11]=d*i-l*r,t}function Nq(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-f*r,t[3]=l*i-d*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+f*i,t[11]=l*r+d*i,t}function Y5(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+f*r,t[3]=l*i+d*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=f*i-a*r,t[7]=d*i-l*r,t}function kq(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,d=i*o,h=i*a,p=i*l,g=s*o,v=s*a,_=s*l;return t[0]=1-f-p,t[1]=u+_,t[2]=d-v,t[3]=0,t[4]=u-_,t[5]=1-c-p,t[6]=h+g,t[7]=0,t[8]=d+v,t[9]=h-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dq(t,e,n,r,i,s,o){const a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function Fq(t,e,n,r,i){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){const o=1/(r-i);t[10]=(i+r)*o,t[14]=2*i*r*o}else t[10]=-1,t[14]=-2*r;return t}const Bq=Fq;function Lq(t,e,n,r,i,s,o){const a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}const $q=Lq;function Uq(t,e,n,r){let i,s,o,a,l,c,u,f,d,h;const p=e[0],g=e[1],v=e[2],_=r[0],m=r[1],y=r[2],b=n[0],S=n[1],A=n[2];return Math.abs(p-b)<nm&&Math.abs(g-S)<nm&&Math.abs(v-A)<nm?Pq(t):(f=p-b,d=g-S,h=v-A,i=1/Math.sqrt(f*f+d*d+h*h),f*=i,d*=i,h*=i,s=m*h-y*d,o=y*f-_*h,a=_*d-m*f,i=Math.sqrt(s*s+o*o+a*a),i?(i=1/i,s*=i,o*=i,a*=i):(s=0,o=0,a=0),l=d*a-h*o,c=h*s-f*a,u=f*o-d*s,i=Math.sqrt(l*l+c*c+u*u),i?(i=1/i,l*=i,c*=i,u*=i):(l=0,c=0,u=0),t[0]=s,t[1]=l,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=d,t[7]=0,t[8]=a,t[9]=u,t[10]=h,t[11]=0,t[12]=-(s*p+o*g+a*v),t[13]=-(l*p+c*g+u*v),t[14]=-(f*p+d*g+h*v),t[15]=1,t)}function zq(){const t=new hf(4);return hf!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function jq(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function gg(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){const t=zq();return function(e,n,r,i,s,o){let a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var gS;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(gS||(gS={}));const Vq=45*Math.PI/180,Wq=1,Xb=.1,Yb=500,Hq=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class bs extends Rq{static get IDENTITY(){return Yq()}static get ZERO(){return Xq()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return gS}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,f,d,h,p,g,v){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=f,this[11]=d,this[12]=h,this[13]=p,this[14]=g,this[15]=v,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,f,d,h,p,g,v){return this[0]=e,this[1]=s,this[2]=c,this[3]=h,this[4]=n,this[5]=o,this[6]=u,this[7]=p,this[8]=r,this[9]=a,this[10]=f,this[11]=g,this[12]=i,this[13]=l,this[14]=d,this[15]=v,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Hq)}fromObject(e){return this.check()}fromQuaternion(e){return kq(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=Xb,far:a=Yb}=e;return a===1/0?Kq(this,n,r,i,s,o):Dq(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return Uq(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=Xb,far:a=Yb}=e;return $q(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=Vq,aspect:r=Wq,focalDistance:i=1,near:s=Xb,far:o=Yb}=e;jR(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return jR(n),Bq(this,n,r,i,s),this.check()}determinant(){return Mq(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return Iq(this,this),this.check()}invert(){return pS(this,this),this.check()}multiplyLeft(e){return Ml(this,e,this),this.check()}multiplyRight(e){return Ml(this,this,e),this.check()}rotateX(e){return X5(this,this,e),this.check()}rotateY(e){return Nq(this,this,e),this.check()}rotateZ(e){return Y5(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return Oq(this,this,e,n),this.check()}scale(e){return xT(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return f0(this,this,e),this.check()}transform(e,n){return e.length===4?(n=gg(n||[-0,-0,-0,-0],e,this),Wb(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=hq(n||[-0,-0],e,this);break;case 3:i=H5(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Wb(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=pq(n||[-0,-0],e,this);break;case 3:r=W5(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Wb(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let i_,s_;function Xq(){return i_||(i_=new bs([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(i_)),i_}function Yq(){return s_||(s_=new bs,Object.freeze(s_)),s_}function jR(t){if(t>Math.PI*2)throw Error("expected radians")}function Kq(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,f=-1,d=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}const VR=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
vec3 color;
};
struct PointLight {
vec3 color;
vec3 position;
vec3 attenuation;
};
struct DirectionalLight {
vec3 color;
vec3 direction;
};
uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;
uniform bool lighting_uEnabled;
float getPointLightAttenuation(PointLight pointLight, float distance) {
return pointLight.attenuation.x
+ pointLight.attenuation.y * distance
+ pointLight.attenuation.z * distance * distance;
}
#endif
`,qq={lightSources:{}};function Kb(t={}){const{color:e=[0,0,0],intensity:n=1}=t;return e.map(r=>r*n/255)}function Zq({ambientLight:t,pointLights:e=[],directionalLights:n=[]}){const r={};return t?r["lighting_uAmbientLight.color"]=Kb(t):r["lighting_uAmbientLight.color"]=[0,0,0],e.forEach((i,s)=>{r[`lighting_uPointLight[${s}].color`]=Kb(i),r[`lighting_uPointLight[${s}].position`]=i.position,r[`lighting_uPointLight[${s}].attenuation`]=i.attenuation||[1,0,0]}),r.lighting_uPointLightCount=e.length,n.forEach((i,s)=>{r[`lighting_uDirectionalLight[${s}].color`]=Kb(i),r[`lighting_uDirectionalLight[${s}].direction`]=i.direction}),r.lighting_uDirectionalLightCount=n.length,r}function K5(t=qq){var e,n;if("lightSources"in t){const{ambientLight:r,pointLights:i,directionalLights:s}=t.lightSources||{};return r||i&&i.length>0||s&&s.length>0?Object.assign({},Zq({ambientLight:r,pointLights:i,directionalLights:s}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const r={pointLights:[],directionalLights:[]};for(const i of t.lights||[])switch(i.type){case"ambient":r.ambientLight=i;break;case"directional":(e=r.directionalLights)==null||e.push(i);break;case"point":(n=r.pointLights)==null||n.push(i);break}return K5({lightSources:r})}return{}}const q5={name:"lights",vs:VR,fs:VR,getUniforms:K5,defines:{MAX_LIGHTS:3}},Z5=`uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
vec3 halfway_direction = normalize(light_direction + view_direction);
float lambertian = dot(light_direction, normal_worldspace);
float specular = 0.0;
if (lambertian > 0.0) {
float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
specular = pow(specular_angle, lighting_uShininess);
}
lambertian = max(lambertian, 0.0);
return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = surfaceColor;
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = vec3(0, 0, 0);
vec3 surfaceColor = vec3(0, 0, 0);
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
`,Qq={};function Gq(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function Q5(t=Qq){if(!("material"in t))return{};const{material:e}=t;return e?Gq(e):{lighting_uEnabled:!1}}const G5={name:"gouraud-lighting",dependencies:[q5],vs:Z5,defines:{LIGHTING_VERTEX:1},getUniforms:Q5},Jq={name:"phong-lighting",dependencies:[q5],fs:Z5,defines:{LIGHTING_FRAGMENT:1},getUniforms:Q5},J5="#define SMOOTH_EDGE_RADIUS 0.5",eZ=`
${J5}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,tZ=`
${J5}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,nZ={name:"geometry",vs:eZ,fs:tZ},it={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(it,"IDENTITY",{get:()=>(qe.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const hs={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ws={common:0,meters:1,pixels:2},_S={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},rZ=Object.keys(it).map(t=>`const int COORDINATE_SYSTEM_${t} = ${it[t]};`).join(""),iZ=Object.keys(hs).map(t=>`const int PROJECTION_MODE_${t} = ${hs[t]};`).join(""),sZ=Object.keys(ws).map(t=>`const int UNIT_${t.toUpperCase()} = ${ws[t]};`).join(""),oZ=`${rZ}
${iZ}
${sZ}
uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project_uPseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project_uCommonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project_uCommonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project_uCommonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project_uWrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project_uModelMatrix * position;
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project_uCoordinateOrigin;
}
}
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project_uCoordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
return offset * project_uFocalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project_uScale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project_uScale;
}
`;function aZ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function _g(t){let e={},n;return r=>{for(const i in r)if(!aZ(r[i],e[i])){n=t(r),e=r;break}return n}}const WR=[0,0,0,0],lZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ek=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],cZ=[0,0,0],tk=[0,0,0],uZ=_g(hZ);function nk(t,e,n=tk){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===it.LNGLAT_OFFSETS||e===it.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case hs.WEB_MERCATOR:(e===it.LNGLAT||e===it.CARTESIAN)&&(i=[0,0,0],s=!1);break;case hs.WEB_MERCATOR_AUTO_OFFSET:e===it.LNGLAT?r=i:e===it.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case hs.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case hs.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function fZ(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=WR,l=WR,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:f,offsetMode:d}=nk(t,e,n);return d&&(l=t.projectPosition(u||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=gg([],l,o),s=r||s,o=Ml([],i,s),o=Ml([],o,lZ)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:u}}function dZ({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=it.DEFAULT,coordinateOrigin:i=tk,autoWrapLongitude:s=!1}){r===it.DEFAULT&&(r=t.isGeospatial?it.LNGLAT:it.CARTESIAN);const o=uZ({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||ek,o}function hZ({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=fZ(t,n,r),u=t.getDistanceScales(),f=[t.width*e,t.height*e],d=gg([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,h={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:d,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:cZ,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:ek,project_uCameraPosition:a};if(c){const p=t.getDistanceScales(c);switch(n){case it.METER_OFFSETS:h.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case it.LNGLAT:case it.LNGLAT_OFFSETS:t._pseudoMeters||(h.project_uCommonUnitsPerMeter=p.unitsPerMeter),h.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case it.CARTESIAN:h.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],h.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return h}const pZ={};function gZ(t=pZ){return"viewport"in t?dZ(t):{}}const TT={name:"project",dependencies:[YK,nZ],vs:oZ,getUniforms:gZ},_Z=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,zf={name:"project32",dependencies:[TT],vs:_Z};function mZ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Eu(t,e){const n=gg([],e,t);return jq(n,n,1/n[3]),n}function HR(t,e){const n=t%e;return n<0?e+n:n}function mS(t,e,n){return t<e?e:t>n?n:t}function yZ(t){return Math.log(t)*Math.LOG2E}const ET=Math.log2||yZ;function oo(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Ei=Math.PI,rk=Ei/4,si=Ei/180,yS=180/Ei,pf=512,d0=4003e4,o_=85.051129,vZ=1.5;function bZ(t){return ET(t)}function dp(t){const[e,n]=t;oo(Number.isFinite(e)),oo(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*si,i=n*si,s=pf*(r+Ei)/(2*Ei),o=pf*(Ei+Math.log(Math.tan(rk+i*.5)))/(2*Ei);return[s,o]}function gf(t){const[e,n]=t,r=e/pf*(2*Ei)-Ei,i=2*(Math.atan(Math.exp(n/pf*(2*Ei)-Ei))-rk);return[r*yS,i*yS]}function wZ(t){const{latitude:e}=t;oo(Number.isFinite(e));const n=Math.cos(e*si);return bZ(d0*n)-9}function rm(t){const e=Math.cos(t*si);return pf/d0/e}function vS(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;oo(Number.isFinite(e)&&Number.isFinite(n));const i=pf,s=Math.cos(e*si),o=i/360,a=o/s,l=i/d0/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=si*Math.tan(e*si)/s,f=o*u/2,d=i/d0*u,h=d/a*l;c.unitsPerDegree2=[0,f,d],c.unitsPerMeter2=[h,0,h]}return c}function ik(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=vS({longitude:n,latitude:r,highPrecision:!0}),u=dp(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const f=gf(u),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],d]:f}function SZ(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=mZ();f0(a,a,[0,0,-i]),X5(a,a,-n*si),Y5(a,a,r*si);const l=s/e;return xT(a,a,[l,l,l]),o&&f0(a,a,yq([],o)),a}function xZ(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=h0(vZ)}=t;r!==void 0&&(u=h0(r));const f=u*si,d=i*si,h=sk(u);let p=h;o&&(p+=o[2]*a/Math.cos(d)/n);const g=f*(.5+(s?s[1]:0)/n),v=Math.sin(g)*p/Math.sin(mS(Math.PI/2-d-g,.01,Math.PI-.01)),_=Math.sin(d)*v+p,m=p*10,y=Math.min(_*c,m);return{fov:f,aspect:e/n,focalDistance:h,near:l,far:y}}function h0(t){return 2*Math.atan(.5/t)*yS}function sk(t){return .5/Math.tan(.5*t*si)}function ok(t,e){const[n,r,i=0]=t;return oo(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Eu(e,[n,r,i,1])}function AT(t,e,n=0){const[r,i,s]=t;if(oo(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Eu(e,[r,i,s,1]);const o=Eu(e,[r,i,0,1]),a=Eu(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return V5([],o,a,u)}function TZ(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,f=EZ(t.padding),d=dp([a,mS(u,-o_,o_)]),h=dp([c,mS(l,-o_,o_)]),p=[Math.max(Math.abs(h[0]-d[0]),i),Math.max(Math.abs(h[1]-d[1]),i)],g=[e-f.left-f.right-Math.abs(o[0])*2,n-f.top-f.bottom-Math.abs(o[1])*2];oo(g[0]>0&&g[1]>0);const v=g[0]/p[0],_=g[1]/p[1],m=(f.right-f.left)/2/v,y=(f.top-f.bottom)/2/_,b=[(h[0]+d[0])/2+m,(h[1]+d[1])/2+y],S=gf(b),A=Math.min(s,ET(Math.abs(Math.min(v,_))));return oo(Number.isFinite(A)),{longitude:S[0],latitude:S[1],zoom:A}}function EZ(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(oo(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const XR=Math.PI/180;function AZ(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*XR:Math.atan(.5/t.altitude),f=(90-t.pitch)*XR;return u>f-.01?(l=YR(t,0,e),c=YR(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function YR(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Eu(r,[e,0,1,1]),s=Eu(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=V5([],i,s,a),c=gf(l);return c.push(n),c}const KR=512;function CZ(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=HR(i+180,360)-180),(a<-180||a>180)&&(a=HR(a+180,360)-180);const l=ET(n/KR);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=gf([0,c])[1];if(s<u)s=u;else{const f=gf([0,KR-c])[1];s>f&&(s=f)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const RZ=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,PZ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,IZ=_g(DZ),MZ=_g(FZ),OZ=[0,0,0,1],NZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function kZ(t,e){const[n,r,i]=t,s=AT([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function DZ({viewport:t,center:e}){return new bs(t.viewProjectionMatrix).invert().transform(e)}function FZ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>kZ(o,r));for(const o of e){const a=o.clone().translate(new vs(t.center).negate()),l=s.map(u=>a.transform(u)),c=new bs().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function BZ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||OZ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=IZ({viewport:t.viewport,center:e.project_uCenter}),s=[],o=MZ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new vs(t.viewport.center).negate());e.project_uCoordinateSystem===it.LNGLAT&&e.project_uProjectionMode===hs.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(NZ),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r[`shadow_uViewProjectionMatrices[${a}]`]=o[a],r[`shadow_uProjectCenters[${a}]`]=s[a];for(let a=0;a<2;a++)r[`shadow_uShadowMap${a}`]=t.shadowMaps&&t.shadowMaps[a]||t.dummyShadowMap;return r}const qR={name:"shadow",dependencies:[TT],vs:RZ,fs:PZ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?BZ(t,e):{}},jf={...$R,defaultUniforms:{...$R.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},LZ=[TT],$Z=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function UZ(){const t=r0.getDefaultShaderAssembler();for(const e of LZ)t.addDefaultModule(e);for(const e of $Z)t.addShaderHook(e);return t}const zZ=[255,255,255],jZ=1;let VZ=0;class WZ{constructor(e={}){this.type="ambient";const{color:n=zZ}=e,{intensity:r=jZ}=e;this.id=e.id||`ambient-${VZ++}`,this.color=n,this.intensity=r}}const HZ=[255,255,255],XZ=1,YZ=[0,0,-1];let KZ=0;class ZR{constructor(e={}){this.type="directional";const{color:n=HZ}=e,{intensity:r=XZ}=e,{direction:i=YZ}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${KZ++}`,this.color=n,this.intensity=r,this.type="directional",this.direction=new vs(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class qZ{constructor(e,n={id:"pass"}){const{id:r}=n;this.id=r,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class CT extends qZ{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,r]=this.device.canvasContext.getDrawingBufferSize(),i=e.clearCanvas??!0,s=e.clearColor??(i?[0,0,0,0]:!1),o=i?1:!1,a=i?0:!1,l=e.colorMask??15,c={viewport:[0,0,n,r]};e.colorMask&&(c.colorMask=l),e.scissorRect&&(c.scissorRect=e.scissorRect);const u=this.device.beginRenderPass({framebuffer:e.target,parameters:c,clearColor:s,clearDepth:o,clearStencil:a});try{return this._drawLayers(u,e)}finally{u.end()}}_drawLayers(e,n){const{target:r,moduleParameters:i,viewports:s,views:o,onViewportActive:a,clearStack:l=!0}=n;n.pass=n.pass||"unknown",l&&(this._lastRenderIndex=-1);const c=[];for(const u of s){const f=o&&o[u.id];a==null||a(u);const d=this._getDrawLayerParams(u,n),h=u.subViewports||[u];for(const p of h){const g=this._drawLayersInViewport(e,{target:r,moduleParameters:i,viewport:p,view:f,pass:n.pass,layers:n.layers},d);c.push(g)}}return c}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){var p;const u=[],f=ak(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},h={};for(let g=0;g<n.length;g++){const v=n[g],_=this._shouldDrawLayer(v,d,s,h),m={shouldDrawLayer:_};_&&!c&&(m.layerRenderIndex=f(v,_),m.moduleParameters=this._getModuleParameters(v,a,r,l),m.layerParameters={...(p=v.context.deck)==null?void 0:p.props.parameters,...this.getLayerParameters(v,g,e)}),u[g]=m}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=ZZ(this.device,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:c},()=>this.device.clearWebGL(f))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:c});for(let f=0;f<n.length;f++){const d=n[f],{shouldDrawLayer:h,layerRenderIndex:p,moduleParameters:g,layerParameters:v}=l[f];if(h&&d.props.pickable&&u.pickableCount++,d.isComposite)u.compositeCount++;else if(h){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),g.viewport=o,d.context.renderPass=e;try{d._drawLayer({renderPass:e,moduleParameters:g,uniforms:{layerIndex:p},parameters:v})}catch(_){d.raiseError(_,`drawing ${d} to ${i}`)}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var a,l;const s=this.device.canvasContext.cssToDeviceRatio(),o=Object.assign(Object.create(((a=e.internalState)==null?void 0:a.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,picking:{isActive:0},devicePixelRatio:s});if(n)for(const c of n)Object.assign(o,(l=c.getModuleParameters)==null?void 0:l.call(c,e));return Object.assign(o,this.getModuleParameters(e,n),i)}}function ak(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||ak(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function ZZ(t,{moduleParameters:e,target:n,viewport:r}){const i=e&&e.devicePixelRatio||t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),o=n?n.height:s,a=r;return[a.x*i,o-(a.y+a.height)*i,a.width*i,a.height*i]}class QZ extends CT{constructor(e,n){super(e,n),this.shadowMap=e.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(e){const n=this.fbo,r=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],s=i.width*r,o=i.height*r,a=[1,1,1,1];(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,clearColor:a,target:n,pass:"shadow"})}getLayerParameters(e,n,r){return{...e.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const GZ={color:[255,255,255],intensity:1},QR=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],JZ=[0,0,0,200/255];class lk{constructor(e={}){this.id="lighting-effect",this.shadowColor=JZ,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:r}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),r._addDefaultShaderModule(qR),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let o=0;o<this.shadowPasses.length;o++)this.shadowPasses[o].render({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s,moduleParameters:{shadowLightId:o,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(qR))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new bs().lookAt({eye:new vs(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new QZ(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new WZ(GZ),this.directionalLights.push(new ZR(QR[0]),new ZR(QR[1])))}}class eQ{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let f=1/0;l&&(f=l*r+s);const d=this._allocate(c,u,a,f);return e&&o?d.set(e):a||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const _f=new eQ;function Jd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tQ(t){return[t[12],t[13],t[14]]}function nQ(t){return{left:Ec(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ec(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ec(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ec(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ec(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ec(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const GR=new vs;function Ec(t,e,n,r){GR.set(t,e,n);const i=GR.len();return{distance:r/i,normal:new vs(-t/i,-e/i,-n/i)}}function rQ(t){return t-Math.fround(t)}let Ed;function qb(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;Ed=_f.allocate(Ed,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];Ed[a+l]=c,Ed[a+l+n]=rQ(c)}a+=n*2}return Ed.subarray(0,s*n*2)}function iQ(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const sQ=Math.PI/180,oQ=Jd(),JR=[0,0,0],aQ={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function lQ({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new bs().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new bs().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:f=0,top:d=0,bottom:h=0}=s,p=na((u+t-f)/2,0,t)-t/2,g=na((d+e-h)/2,0,e)-e/2;c[8]-=p*2/t,c[9]+=g*2/e}return c}const Xy=class Xy{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||aQ,this.focalDistance=e.focalDistance||1,this.position=e.position||JR,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?hs.WEB_MERCATOR:hs.WEB_MERCATOR_AUTO_OFFSET:hs.IDENTITY}equals(e){return e instanceof Xy?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&fp(e.projectionMatrix,this.projectionMatrix)&&fp(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=ok(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=AT([i,a,o],this.pixelUnprojectionMatrix,l),[u,f,d]=this.unprojectPosition(c);return Number.isFinite(o)?[u,f,d]:Number.isFinite(r)?[u,f,r]:[u,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=dp(e);return n[1]=na(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?gf(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?vS({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,nQ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=wZ({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||vS({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=JR;if(s&&(a=o?new bs(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new vs(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=oQ,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new bs().multiplyRight(n).translate(new vs(this.center).negate()),this.projectionMatrix=r||lQ({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*sQ,focalDistance:u,padding:c,near:a,far:l});const f=Jd();Ml(f,f,this.projectionMatrix),Ml(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=pS([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=tQ(this.viewMatrixInverse);const d=Jd(),h=Jd();xT(d,d,[this.width/2,-this.height/2,1]),f0(d,d,[1,-1,0]),Ml(h,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=pS(Jd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||qe.warn("Pixel project matrix not invertible")()}};Xy.displayName="Viewport";let p0=Xy;const jh=class jh extends p0{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:f=!1,projectionMatrix:d,repeat:h=!1,worldOffset:p=0,position:g,padding:v,legacyMeterSizes:_=!1}=e;let{width:m,height:y,altitude:b=1.5}=e;const S=Math.pow(2,i);m=m||1,y=y||1;let A,I=null;if(d)b=d[5]/2,A=h0(b);else{e.fovy?(A=e.fovy,b=sk(A)):A=h0(b);let M;if(v){const{top:k=0,bottom:N=0}=v;M=[0,na((k+y-N)/2,0,y)-y/2]}I=xZ({width:m,height:y,scale:S,center:g&&[0,0,g[2]*rm(n)],offset:M,pitch:s,fovy:A,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(I.near=c),Number.isFinite(u)&&(I.far=u)}let R=SZ({height:y,pitch:s,bearing:o,scale:S,altitude:b});p&&(R=new bs().translate([512*p,0,0]).multiplyLeft(R)),super({...e,width:m,height:y,viewMatrix:R,longitude:r,latitude:n,zoom:i,...I,fovy:A,focalDistance:b}),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=b,this.fovy=A,this.orthographic=f,this._subViewports=h?[]:null,this._pseudoMeters=_,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new jh({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*rm(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/rm(r);return[n,r,i]}addMetersToLngLat(e,n){return ik(e,n)}panByPosition(e,n){const r=AT(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=zR([],i,dq([],r)),o=zR([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=AZ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=TZ({width:r,height:i,bounds:e,...n});return new jh({width:r,height:i,longitude:s,latitude:o,zoom:a})}};jh.displayName="WebMercatorViewport";let hp=jh;const eP=[0,0,0];function Zb(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof hp){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function cQ(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===it.DEFAULT&&(i=e.isGeospatial?it.LNGLAT:it.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function ck(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=gg([],[o,a,l,1],n)),r){case it.LNGLAT:return Zb([o,a,l],e,s);case it.LNGLAT_OFFSETS:return Zb([o+i[0],a+i[1],l+(i[2]||0)],e,s);case it.METER_OFFSETS:return Zb(ik(i,[o,a,l]),e,s);case it.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function uQ(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=cQ(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=eP,shaderCoordinateOrigin:u=eP,offsetMode:f=!1}=l?nk(n,r,i):{},d=ck(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:f});if(f){const h=n.projectPosition(c||u);Cq(d,d,h)}return d}let fQ=1,dQ=1;class uk{constructor(){E(this,"time",0);E(this,"channels",new Map);E(this,"animations",new Map);E(this,"playing",!1);E(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=fQ++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=dQ++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}let hQ=0;const pQ={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:xu.stats.get(`animation-loop-${hQ++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class gQ{constructor(e){E(this,"device",null);E(this,"canvas",null);E(this,"props");E(this,"animationProps",null);E(this,"timeline",null);E(this,"stats");E(this,"cpuTime");E(this,"gpuTime");E(this,"frameRate");E(this,"display");E(this,"needsRedraw","initialized");E(this,"_initialized",!1);E(this,"_running",!1);E(this,"_animationFrameId",null);E(this,"_nextFramePromise",null);E(this,"_resolveNextFrame",null);E(this,"_cpuStartTime",0);if(this.props={...pQ,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:n=!0}=this.props;this.stats=e.stats||new Mv({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:n}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=lK(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(cK(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),this.device.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var e,n;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:(n=(e=this.device)==null?void 0:e.canvasContext)==null?void 0:n.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){var s,o,a,l;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((o=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:o.getPixelSize())||[1,1];let r=1;const i=(l=(a=this.device)==null?void 0:a.canvasContext)==null?void 0:l.canvas;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,n;this.props.autoResizeDrawingBuffer&&((n=(e=this.device)==null?void 0:e.canvasContext)==null||n.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}class tP{constructor(e){E(this,"id");E(this,"userData",{});E(this,"topology");E(this,"bufferLayout",[]);E(this,"vertexCount");E(this,"indices");E(this,"attributes");this.id=e.id||Ba("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&Et(this.indices.usage===qt.INDEX)}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(e){return e.byteLength/12}}function _Q(t,e){if(e instanceof tP)return e;const n=mQ(t,e),{attributes:r,bufferLayout:i}=yQ(t,e);return new tP({topology:e.topology||"triangle-list",bufferLayout:i,vertexCount:e.vertexCount,indices:n,attributes:r})}function mQ(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:qt.INDEX,data:n})}function yQ(t,e){const n=[],r={};for(const[s,o]of Object.entries(e.attributes)){let a=s;switch(s){case"POSITION":a="positions";break;case"NORMAL":a="normals";break;case"TEXCOORD_0":a="texCoords";break;case"COLOR_0":a="colors";break}r[a]=t.createBuffer({data:o.value,id:`${s}-buffer`});const{value:l,size:c,normalized:u}=o;n.push({name:a,format:rK(l,c,u)})}const i=e._calculateVertexCount(e.attributes,e.indices);return{attributes:r,bufferLayout:n,vertexCount:i}}class vQ{constructor(e){E(this,"modules");E(this,"moduleUniforms");E(this,"moduleBindings");E(this,"moduleUniformsChanged");const n=Nv(Object.values(e).filter(r=>r.dependencies));for(const r of n)e[r.name]=r;ie.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[r,i]of Object.entries(e)){const s=r;this.moduleUniforms[s]=i.defaultUniforms||{},this.moduleBindings[s]={}}}destroy(){}setProps(e){var n;for(const r of Object.keys(e)){const i=r,s=e[i],o=this.modules[i];if(!o){ie.warn(`Module ${r} not found`)();continue}const a=this.moduleUniforms[i],l=((n=o.getUniforms)==null?void 0:n.call(o,s,this.moduleUniforms[i]))||s;this.moduleUniforms[i]={...a,...l}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[r,i]of Object.entries(this.moduleUniforms))for(const[s,o]of Object.entries(i))e[`${r}.${s}`]={type:(n=this.modules[r].uniformTypes)==null?void 0:n[s],value:String(o)};return e}}const Yy=class Yy{constructor(e){E(this,"device");E(this,"_hashCounter",0);E(this,"_hashes",{});E(this,"_renderPipelineCache",{});E(this,"_computePipelineCache",{});this.device=e}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Yy(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const n={...uf.defaultProps,...e},r=this._hashRenderPipeline(n);if(!this._renderPipelineCache[r]){const i=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:void 0});i.hash=r,this._renderPipelineCache[r]={pipeline:i,useCount:0}}return this._renderPipelineCache[r].useCount++,this._renderPipelineCache[r].pipeline}createComputePipeline(e){const n={...c0.defaultProps,...e},r=this._hashComputePipeline(n);if(!this._computePipelineCache[r]){const i=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0});i.hash=r,this._computePipelineCache[r]={pipeline:i,useCount:0}}return this._computePipelineCache[r].useCount++,this._computePipelineCache[r].pipeline}release(e){const n=e.hash,r=e instanceof c0?this._computePipelineCache:this._renderPipelineCache;r[n].useCount--,r[n].useCount===0&&(r[n].pipeline.destroy(),delete r[n])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const n=this._getHash(e.vs.source),r=e.fs?this._getHash(e.fs.source):0,i="-",s=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${n}/${r}V${i}BL${s}`;default:const o=this._getHash(JSON.stringify(e.parameters));return`${n}/${r}V${i}T${e.topology}P${o}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};E(Yy,"defaultProps",{...uf.defaultProps});let bS=Yy;const Ky=class Ky{constructor(e){E(this,"device");E(this,"_cache",{});this.device=e}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new Ky(e)),e._lumaData.defaultShaderFactory}createShader(e){const n=this._hashShader(e);let r=this._cache[n];if(!r){const i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=r={shader:i,useCount:0}}return r.useCount++,r.shader}release(e){const n=this._hashShader(e),r=this._cache[n];r&&(r.useCount--,r.useCount===0&&(delete this._cache[n],r.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};E(Ky,"defaultProps",{...o0.defaultProps});let wS=Ky;function bQ(t,e){var i;const n={},r="Values";if(t.attributes.length===0&&!((i=t.varyings)!=null&&i.length))return{"No attributes or varyings":{[r]:"N/A"}};for(const s of t.attributes)if(s){const o=`${s.location} ${s.name}: ${s.type}`;n[`in ${o}`]={[r]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const o=`${s.location} ${s.name}`;n[`out ${o}`]={[r]:JSON.stringify(s.accessor)}}return n}let mn=null,Qb=null;function wQ(t,{id:e,minimap:n,opaque:r,top:i="0",left:s="0",rgbaScale:o=1}){mn||(mn=document.createElement("canvas"),mn.id=e,mn.title=e,mn.style.zIndex="100",mn.style.position="absolute",mn.style.top=i,mn.style.left=s,mn.style.border="blue 1px solid",mn.style.transform="scaleY(-1)",document.body.appendChild(mn),Qb=mn.getContext("2d")),(mn.width!==t.width||mn.height!==t.height)&&(mn.width=t.width/2,mn.height=t.height/2,mn.style.width="400px",mn.style.height="400px");const a=t.device.readPixelsToArrayWebGL(t),l=Qb.createImageData(t.width,t.height),c=0;for(let u=0;u<a.length;u+=4)l.data[c+u+0]=a[u+0]*o,l.data[c+u+1]=a[u+1]*o,l.data[c+u+2]=a[u+2]*o,l.data[c+u+3]=r?255:a[u+3]*o;Qb.putImageData(l,0,0)}const Ac=2,SQ=1e4,qy=class qy{constructor(e,n){E(this,"device");E(this,"id");E(this,"source");E(this,"vs");E(this,"fs");E(this,"pipelineFactory");E(this,"shaderFactory");E(this,"userData",{});E(this,"parameters");E(this,"topology");E(this,"bufferLayout");E(this,"isInstanced");E(this,"instanceCount",0);E(this,"vertexCount");E(this,"indexBuffer",null);E(this,"bufferAttributes",{});E(this,"constantAttributes",{});E(this,"bindings",{});E(this,"uniforms",{});E(this,"vertexArray");E(this,"transformFeedback",null);E(this,"pipeline");E(this,"shaderInputs");E(this,"_uniformStore");E(this,"_attributeInfos",{});E(this,"_gpuGeometry",null);E(this,"_getModuleUniforms");E(this,"props");E(this,"_pipelineNeedsUpdate","newly created");E(this,"_needsRedraw","initializing");E(this,"_destroyed",!1);E(this,"_lastDrawTimestamp",-1);E(this,"_lastLogTime",0);E(this,"_logOpen",!1);E(this,"_drawCount",0);var a,l,c,u;this.props={...qy.defaultProps,...n},n=this.props,this.id=n.id||Ba("model"),this.device=e,Object.assign(this.userData,n.userData);const r=Object.fromEntries(((a=this.props.modules)==null?void 0:a.map(f=>[f.name,f]))||[]);this.setShaderInputs(n.shaderInputs||new vQ(r));const i=xQ(e),s=(((l=this.props.modules)==null?void 0:l.length)>0?this.props.modules:(c=this.shaderInputs)==null?void 0:c.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(u=this.props).shaderLayout||(u.shaderLayout=WK(this.props.source));const{source:f,getUniforms:d}=this.props.shaderAssembler.assembleShader({platformInfo:i,...this.props,modules:s});this.source=f,this._getModuleUniforms=d}else{const{vs:f,fs:d,getUniforms:h}=this.props.shaderAssembler.assembleShaderPair({platformInfo:i,...this.props,modules:s});this.vs=f,this.fs=d,this._getModuleUniforms=h}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||bS.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||wS.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.uniforms&&this.setUniforms(n.uniforms),n.moduleSettings&&this.updateModuleSettings(n.moduleSettings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){this.predraw();let n;try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),i0(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:r}=this.vertexArray,i=r?r.byteLength/(r.indexType==="uint32"?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",n}setGeometry(e){var r;(r=this._gpuGeometry)==null||r.destroy();const n=e&&_Q(this.device,e);n&&(this.setTopology(n.topology||"triangle-list"),this.bufferLayout=nP(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)),this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){this.bufferLayout=this._gpuGeometry?nP(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){hS(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new nK(this.shaderInputs.modules);for(const n of Object.keys(this.shaderInputs.modules)){const r=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=r}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){e.indices&&ie.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[r,i]of Object.entries(e)){const s=this.bufferLayout.find(l=>rP(l).includes(r));if(!s){ie.warn(`Model(${this.id}): Missing layout for buffer "${r}".`)();continue}const o=rP(s);let a=!1;for(const l of o){const c=this._attributeInfos[l];c&&(this.vertexArray.setBuffer(c.location,i),a=!0)}!a&&!((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)&&ie.warn(`Model(${this.id}): Ignoring buffer "${i.id}" for unknown attribute "${r}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[r,i]of Object.entries(e)){const s=this._attributeInfos[r];s?this.vertexArray.setConstantWebGL(s.location,i):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||ie.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${r}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){i0(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettings(e){const{bindings:n,uniforms:r}=O5(this._getModuleUniforms(e));Object.assign(this.bindings,n),Object.assign(this.uniforms,r),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof s0?e=Math.max(e,n.texture.updateTimestamp):n instanceof qt||n instanceof ri?e=Math.max(e,n.updateTimestamp):n instanceof a0||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[r]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(i=>i.name===r)&&r!=="positions"&&delete n[r];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&(ie.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const r=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let i=null;this.source?i=r:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:r,fs:i}),this._attributeInfos=R5(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=ie.level>3?0:SQ;ie.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,ie.group(Ac,`>>> DRAWING MODEL ${this.id}`,{collapsed:ie.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=bQ(this.pipeline.shaderLayout,this.id);ie.table(Ac,e)();const n=this.shaderInputs.getDebugTable();for(const[i,s]of Object.entries(this.uniforms))n[i]={value:s};ie.table(Ac,n)();const r=this._getAttributeDebugTable();ie.table(Ac,this._attributeInfos)(),ie.table(Ac,r)(),ie.groupEnd(Ac)(),this._logOpen=!1}}_logFramebuffer(e){const n=ie.get("framebuffer");if(this._drawCount++,!n||this._drawCount++>3&&this._drawCount%60)return;const r=e.props.framebuffer;r&&wQ(r,{id:r.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,r]of Object.entries(this._attributeInfos))e[r.location]={name:n,type:r.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[r.location],r.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,r=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:r.toString()}}return e}_getBufferOrConstantValues(e,n){const r=M5(n);return(e instanceof qt?new r(e.debugData):e).toString()}};E(qy,"defaultProps",{...uf.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:r0.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Dr=qy;function nP(t,e){const n=[...t];for(const r of e){const i=n.findIndex(s=>s.name===r.name);i<0?n.push(r):n[i]=r}return n}function xQ(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function rP(t){var e;return t.attributes?(e=t.attributes)==null?void 0:e.map(n=>n.attribute):[t.name]}class pp{constructor(e,n=Dr.defaultProps){E(this,"device");E(this,"model");E(this,"transformFeedback");Et(pp.isSupported(e),"BufferTransform not yet implemented on WebGPU"),this.device=e,this.model=new Dr(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||iY(),topology:n.topology||"point-list",...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}update(...e){console.warn("TextureTransform#update() not implemented")}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(n instanceof qt)return n.readAsync();const{buffer:r,byteOffset:i=0,byteLength:s=r.byteLength}=n;return r.readAsync(i,s)}}class Ta{constructor(e){E(this,"id");E(this,"topology");E(this,"vertexCount");E(this,"indices");E(this,"attributes");E(this,"userData",{});const{attributes:n={},indices:r=null,vertexCount:i=null}=e;this.id=e.id||Ba("geometry"),this.topology=e.topology,r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r),this.attributes={};for(const[s,o]of Object.entries(n)){const a=ArrayBuffer.isView(o)?{value:o}:o;Et(ArrayBuffer.isView(a.value),`${this._print(s)}: must be typed array or object with value as typed array`),(s==="POSITION"||s==="positions")&&!a.size&&(a.size=3),s==="indices"?(Et(!this.indices),this.indices=a):this.attributes[s]=a}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i of Object.values(e)){const{value:s,size:o,constant:a}=i;!a&&s&&o>=1&&(r=Math.min(r,s.length/o))}return Et(Number.isFinite(r)),r}}class TQ extends Ta{constructor(e={}){const{id:n=Ba("cube-geometry"),indices:r=!0}=e;super(r?{...e,id:n,topology:"triangle-list",indices:{size:1,value:EQ},attributes:{...OQ,...e.attributes}}:{...e,id:n,topology:"triangle-list",indices:void 0,attributes:{...NQ,...e.attributes}})}}const EQ=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),AQ=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),CQ=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),RQ=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),PQ=new Float32Array([1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1]),IQ=new Float32Array([1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0]),MQ=new Float32Array([1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,0,0,0,1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,1,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,1]),OQ={POSITION:{size:3,value:AQ},NORMAL:{size:3,value:CQ},TEXCOORD_0:{size:2,value:RQ}},NQ={POSITION:{size:3,value:PQ},TEXCOORD_0:{size:2,value:IQ},COLOR_0:{size:3,value:MQ}},kQ={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class fk extends CT{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:f,effects:d,pass:h="picking",pickZ:p,moduleParameters:g}){this.pickZ=p;const v=this._resetColorEncoder(p),_=[a,l,c,u],m=super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:f,effects:d==null?void 0:d.filter(b=>b.useInPicking),pass:h,isPicking:!0,moduleParameters:g,clearColor:[0,0,0,0],colorMask:15,scissorRect:_});return this._colorEncoderState=null,{decodePickingColor:v&&FQ.bind(null,v),stats:m}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(e,n,r){const i={depthMask:!0,depthTest:!0,depthRange:[0,1],...e.props.parameters},{pickable:s,operation:o}=e.props;return!this._colorEncoderState||o.includes("terrain")?i.blend=!1:s&&o.includes("draw")&&(Object.assign(i,kQ),i.blend=!0,i.blendColor=DQ(this._colorEncoderState,e,r)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function DQ(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(qe.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function FQ(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Dc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},g0=Symbol.for("component"),_a=Symbol.for("propTypes"),Gb=Symbol.for("deprecatedProps"),Au=Symbol.for("asyncPropDefaults"),zl=Symbol.for("asyncPropOriginal"),ra=Symbol.for("asyncPropResolved");function mf(t,e=()=>!0){return Array.isArray(t)?dk(t,e,[]):e(t)?[t]:[]}function dk(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?dk(i,e,n):e(i)&&n.push(i)}return n}function BQ({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class LQ{constructor(e,n,r){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=t0(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class $Q{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new LQ(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{};let a=o[n];const l=a&&a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(a?(a.onChange=i,a.resourceId=r.id):a={onChange:i,resourceId:r.id},o[n]=a,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const UQ="layerManager.setLayers",zQ="layerManager.activateViewport";class jQ{constructor(e,n){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=a=>{Dn(zQ,this,a),a&&(this.context.viewport=a)};const{deck:r,stats:i,viewport:s,timeline:o}=n||{};this.layers=[],this.resourceManager=new $Q({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:r,shaderAssembler:UZ(),defaultShaderModules:[],renderPass:void 0,stats:i||new Mv({id:"deck.gl"}),viewport:s||new p0({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new uk,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Dn(UQ,this,n,e),this._lastRenderedLayers=e;const r=mf(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(r=>r.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,r=n.findIndex(i=>i.name===e.name);r>=0&&(n.splice(r,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,r){r.raiseError(n,`${e} of ${r}`)}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?qe.warn(`Multiple old layers with same id ${o.id}`)():r[o.id]=o;if(this._defaultShaderModulesChanged){for(const o of e)o.setNeedsUpdate(),o.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s=`Uniform transition in ${o}`;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&qe.warn(`Multiple new layers with same id ${i.id}`)(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Dc.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Dc.MATCHED,n!==e&&(e.lifecycle=Dc.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Dc.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Dc.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Ai(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Ai(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!Ai(t[s],e[s],n-1))return!1;return!0}return!1}class VQ{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=mf(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Ai(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):qe.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))==null?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const WQ=/([0-9]+\.?[0-9]*)(%|px)/;function Io(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=WQ.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function Mo(t,e){return t.relative?Math.round(t.position*e):t.position}class HQ{constructor(e){const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Io(r),this._y=Io(i),this._width=Io(s),this._height=Io(o),this._padding=a&&{left:Io(a.left||0),right:Io(a.right||0),top:Io(a.top||0),bottom:Io(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.ViewportType===e.ViewportType&&Ai(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Mo(this._x,e),y:Mo(this._y,n),width:Mo(this._width,e),height:Mo(this._height,n)};return this._padding&&(r.padding={left:Mo(this._padding.left,e),top:Mo(this._padding.top,n),right:Mo(this._padding.right,e),bottom:Mo(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Dv{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(r=(n=this.settings).onStart)==null||r.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const iP=()=>{},SS={BREAK:1,SNAP_TO_END:2,IGNORE:3},XQ=t=>t,YQ=SS.BREAK;class KQ{constructor(e){this._onTransitionUpdate=n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Dv(e.timeline),this.onViewStateChange=e.onViewStateChange||iP,this.onStateChange=e.onStateChange||iP}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===SS.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===SS.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||XQ,interpolator:s,interruption:n.transitionInterruption||YQ,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function rn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class qQ{constructor(e){const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!fp(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];rn(Number.isFinite(r)||Array.isArray(r),`${n} is required for transition`)})}}const ZQ=["longitude","latitude","zoom","bearing","pitch"],QQ=["longitude","latitude","zoom"];class hk extends qQ{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:ZQ,required:QQ},super(r.transitionProps),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=u0(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,u0(e.around,n.around,r)))}return i}}const Oo={transitionDuration:0},GQ=300,a_=t=>1-(1-t)*(1-t),Cc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},qa={};let JQ=class{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new KQ({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?GQ:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Cc.WHEEL,u&&r),this.toggleEvents(Cc.PAN,u),this.toggleEvents(Cc.PINCH,u&&(a||l)),this.toggleEvents(Cc.TRIPLE_PAN,u&&l),this.toggleEvents(Cc.DOUBLE_TAP,u&&o),this.toggleEvents(Cc.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Oo,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Oo,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:a_},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Oo,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:a_},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Oo,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Oo,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:a_},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return qa._startPinchRotation=e.rotation,qa._lastPinchEvent=e,this.updateViewport(r,Oo,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:qa._startPinchRotation-r})}return this.updateViewport(n,Oo,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),qa._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=qa;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:a_},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return qa._startPinchRotation=null,qa._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Oo:e?{...n,transitionInterpolator:new hk({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}};class eG{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const sP=5,tG=1.2;class nG extends eG{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:f=20,minZoom:d=0,maxPitch:h=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:v,startRotatePos:_,startBearing:m,startPitch:y,startZoom:b,normalize:S=!0}=e;rn(Number.isFinite(s)),rn(Number.isFinite(i)),rn(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:f,minZoom:d,maxPitch:h,minPitch:p,normalize:S,position:u},{startPanLngLat:g,startZoomLngLat:v,startRotatePos:_,startBearing:m,startPitch:y,startZoom:b}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=na(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=na(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=na(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,CZ(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),f=s/c;let d=0;o>0?Math.abs(u-l)>sP&&(d=o/(l-u)*tG):o<0&&l>sP&&(d=1-a/l),d=na(d,-1,1);const{minPitch:h,maxPitch:p}=this.getViewportProps(),g=i+180*f;let v=r;return d>0?v=r+d*(p-r):d<0&&(v=r-d*(h-r)),{pitch:v,bearing:g}}}class rG extends JQ{constructor(){super(...arguments),this.ControllerState=nG,this.transition={transitionDuration:300,transitionInterpolator:new hk({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}const SA=class SA extends HQ{constructor(e={}){super(e)}get ViewportType(){return hp}get ControllerType(){return rG}};SA.displayName="MapView";let _0=SA;const iG=new lk;function sG(t,e){const n=t.order??1/0,r=e.order??1/0;return n-r}class oG{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>sG(i,e)>0);r<0?n.push(e):n.splice(r,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Ai(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];let o=i;s&&s!==i?s.setProps?(s.setProps(i.props),o=s):s.cleanup(this._context):s||i.setup(this._context),r.push(o),delete n[i.id]}for(const i in n)n[i].cleanup(this._context);this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof lk)||this._resolvedEffects.push(iG),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class aG extends CT{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const lG="deckRenderer.renderLayers";class cG{constructor(e){this.device=e,this.gl=e.gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new aG(e),this.pickLayersPass=new fk(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target;this.lastPostProcessEffect&&(r.clearColor=[0,0,0,0],r.clearCanvas=!0);const s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Dn(lG,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(r=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${r}`,colorAttachments:[i]}))});for(const r of e)r.resize(n)}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1]};for(const s of e)if(s.postRender){i.target=s.id===this.lastPostProcessEffect?n.target:void 0;const o=s.postRender(i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const uG={pickedColor:null,pickedObjectIndex:-1};function fG({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,f=-1,d=0;for(let h=0;h<c;h++){const p=h+a-r,g=p*p;if(g>u)d+=4*l;else for(let v=0;v<l;v++){if(t[d+3]-1>=0){const m=v+o-n,y=m*m+g;y<=u&&(u=y,f=d)}d+=4}}if(f>=0){const h=t.slice(f,f+4),p=e(h);if(p){const g=Math.floor(f/4/l),v=f/4-g*l;return{...p,pickedColor:h,pickedX:o+v,pickedY:a+g}}qe.error("Picked non-existent layer. Is picking buffer corrupt?")()}return uG}function dG({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):qe.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function pk({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=pG((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function hG(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,d=n.layerId,h=o?o.props.id:null;if(h!==d||a!==f){if(h!==d){const p=i.find(g=>g.props.id===d);p&&l.unshift(p)}n.layerId=h,n.index=a,n.info=null}}const c=pk(t),u=new Map;return u.set(null,c),l.forEach(f=>{let d={...c};f===o&&(d.color=s,d.index=a,d.picked=!0),d=gk({layer:f,info:d,mode:r});const h=d.layer;f===o&&r==="hover"&&(n.info=d),u.set(h.id,d),r==="hover"&&h.updateAutoHighlight(d)}),u}function gk({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function pG(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class gG{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new fk(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(d=>d.id===o):null,c=a&&i.find(d=>d.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var n,r;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const i=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=i}const e=this.device.gl;(n=this.pickingFBO)==null||n.resize({width:e.canvas.width,height:e.canvas.height}),(r=this.depthFBO)==null||r.resize({width:e.canvas.width,height:e.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:f}){const d=this.device.canvasContext.cssToDeviceRatio(),h=this._getPickable(e);if(!h||r.length===0)return{result:[],emptyInfo:pk({viewports:r,x:i,y:s,pixelRatio:d})};this._resizeBuffer();const p=this.device.canvasContext.cssToDevicePixels([i,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],v=Math.round(o*d),{width:_,height:m}=this.pickingFBO,y=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:v,deviceWidth:_,deviceHeight:m}),b={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let S;const A=[],I=new Set;for(let R=0;R<a;R++){let M;if(y){const N=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:y,cullRect:b,effects:f,pass:`picking:${l}`});M=fG({...N,deviceX:g[0],deviceY:g[1],deviceRadius:v,deviceRect:y})}else M={pickedColor:null,pickedObjectIndex:-1};let k;if(M.pickedLayer&&c&&this.depthFBO){const{pickedColors:N}=this._drawAndSample({layers:[M.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:M.pickedX,y:M.pickedY,width:1,height:1},cullRect:b,effects:f,pass:`picking:${l}:z`},!0);N[3]&&(k=N[0])}M.pickedLayer&&R+1<a&&(I.add(M.pickedLayer),M.pickedLayer.disablePickingIndex(M.pickedObjectIndex)),S=hG({pickInfo:M,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:r,x:i,y:s,z:k,pixelRatio:d});for(const N of S.values())N.layer&&A.push(N);if(!M.pickedColor)break}for(const R of I)R.restorePickingColors();return{result:A,emptyInfo:S.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:f}){const d=this._getPickable(e);if(!d||r.length===0)return[];this._resizeBuffer();const h=this.device.canvasContext.cssToDeviceRatio(),p=this.device.canvasContext.cssToDevicePixels([i,s],!0),g=p.x,v=p.y+p.height,_=this.device.canvasContext.cssToDevicePixels([i+o,s+a],!0),m=_.x+_.width,y=_.y,b={x:g,y,width:m-g,height:v-y},S=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:{x:i,y:s,width:o,height:a},effects:f,pass:`picking:${l}`}),A=dG(S),I=new Map,R=[],M=Number.isFinite(c);for(let k=0;k<A.length&&!(M&&R.length>=c);k++){const N=A[k];let F={color:N.pickedColor,layer:null,index:N.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:h};F=gk({layer:N.pickedLayer,info:F,mode:l});const D=F.layer.id;I.has(D)||I.set(D,new Set);const z=I.get(D),Z=F.object??F.index;z.has(Z)||(z.add(Z),R.push(F))}return R}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const m of a)m.useInPicking&&(f.preRenderStats[m.id]=m.preRender(f));const{decodePickingColor:d}=this.pickLayersPass.render(f),{x:h,y:p,width:g,height:v}=s,_=new(c?Float32Array:Uint8Array)(g*v*4);return this.device.readPixelsToArrayWebGL(u,{sourceX:h,sourceY:p,sourceWidth:g,sourceHeight:v,target:_}),{pickedColors:_,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const _G={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},mG="top-left",oP="__root";class yG{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!Ai(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const n={};for(const r of this.resolvedWidgets)n[r.id]=r;this.resolvedWidgets.length=0;for(const r of this.defaultWidgets)n[r.id]=null,this.resolvedWidgets.push(r);for(let r of e){const i=n[r.id];i?i.viewId!==r.viewId||i.placement!==r.placement?(this._remove(i),this._add(r)):r!==i&&(i.setProps(r.props),r=i):this._add(r),n[r.id]=null,this.resolvedWidgets.push(r)}for(const r in n){const i=n[r];i&&this._remove(i)}this.widgets=e}_add(e){const{viewId:n=null,placement:r=mG}=e,i=e.onAdd({deck:this.deck,viewId:n});i&&this._getContainer(n,r).append(i),e._element=i}_remove(e){e.onRemove(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,n){var o;const r=e||oP;let i=this.containers[r];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",(o=this.parentElement)==null||o.append(i),this.containers[r]=i);let s=i.querySelector(`.${n}`);return s||(s=document.createElement("div"),s.className=n,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,_G[n]),i.append(s)),s}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const r in this.containers){const i=this.lastViewports[r]||null,s=r===oP||i,o=this.containers[r];s?(o.style.display="block",o.style.left=`${i?i.x:0}px`,o.style.top=`${i?i.y:0}px`,o.style.width=`${i?i.width:e}px`,o.style.height=`${i?i.height:n}px`):o.style.display="none"}}onRedraw({viewports:e,layers:n}){var s,o;const r=e.reduce((a,l)=>(a[l.id]=l,a),{}),{lastViewports:i}=this;for(const a of this.getWidgets()){const{viewId:l}=a;if(l){const c=r[l];c&&(a.onViewportChange&&!c.equals(i[l])&&a.onViewportChange(c),(s=a.onRedraw)==null||s.call(a,{viewports:[c],layers:n}))}else{if(a.onViewportChange)for(const c of e)c.equals(i[c.id])||a.onViewportChange(c);(o=a.onRedraw)==null||o.call(a,{viewports:e,layers:n})}}this.lastViewports=r,this._updateContainers()}onHover(e,n){var r,i;for(const s of this.getWidgets()){const{viewId:o}=s;(!o||o===((r=e.viewport)==null?void 0:r.id))&&((i=s.onHover)==null||i.call(s,e,n))}}onEvent(e,n){var i,s;const r=_S[n.type];if(r)for(const o of this.getWidgets()){const{viewId:a}=o;(!a||a===((i=e.viewport)==null?void 0:i.id))&&((s=o[r.handler])==null||s.call(o,e,n))}}}const vG={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};let bG=class{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const n=document.createElement("div");return n.className="deck-tooltip",Object.assign(n.style,vG),this.deck=e,this.element=n,n}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:n}=this,r=n&&n.props.getTooltip;if(!r)return;const i=r(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,n,r){const i=this.element;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${n}px, ${r}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}};var ou;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(ou||(ou={}));const RT={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},tn=(t,e,n)=>e?t.enable(n):t.disable(n),aP=(t,e,n)=>t.hint(n,e),xr=(t,e,n)=>t.pixelStorei(n,e),lP=(t,e,n)=>{const r=n===36006?36009:36008;return t.bindFramebuffer(r,e)},Ad=(t,e,n)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(i,e)};function Jb(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const wG={3042:tn,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:tn,2885:(t,e)=>t.cullFace(e),2929:tn,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:tn,35723:aP,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:lP,36010:lP,34964:Ad,36662:Ad,36663:Ad,35053:Ad,35055:Ad,2886:(t,e)=>t.frontFace(e),33170:aP,2849:(t,e)=>t.lineWidth(e),32823:tn,32824:"polygonOffset",10752:"polygonOffset",35977:tn,32926:tn,32928:tn,32938:"sampleCoverage",32939:"sampleCoverage",3089:tn,3088:(t,e)=>t.scissor(...e),2960:tn,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:tn,10754:tn,12288:tn,12289:tn,12290:tn,12291:tn,12292:tn,12293:tn,12294:tn,12295:tn,3333:xr,3317:xr,37440:xr,37441:xr,37443:xr,3330:xr,3332:xr,3331:xr,3314:xr,32878:xr,3316:xr,3315:xr,32877:xr,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Jb(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Jb(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=Jb(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Xt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const SG={blendEquation:(t,e,n)=>t.blendEquationSeparate(Xt(32777,e,n),Xt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Xt(32969,e,n),Xt(32968,e,n),Xt(32971,e,n),Xt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Xt(32824,e,n),Xt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Xt(32938,e,n),Xt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Xt(2962,e,n),Xt(2967,e,n),Xt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Xt(34816,e,n),Xt(36003,e,n),Xt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Xt(2964,e,n),Xt(2965,e,n),Xt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Xt(34817,e,n),Xt(34818,e,n),Xt(34819,e,n))},cP={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return r?t({[r]:n}):{valueChanged:!0}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Yi=(t,e)=>t.isEnabled(e),uP={3042:Yi,2884:Yi,2929:Yi,3024:Yi,32823:Yi,32926:Yi,32928:Yi,3089:Yi,2960:Yi,35977:Yi},xG=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Vf(t,e){if(EG(e))return;const n={};for(const i in e){const s=Number(i),o=wG[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=SG[i];s(t,e,r)}}function _k(t,e=RT){if(typeof e=="number"){const i=e,s=uP[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=uP[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function TG(t){Vf(t,RT)}function EG(t){for(const e in t)return!1;return!0}function AG(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}class CG{constructor(e,{copyState:n=!1,log:r=()=>{}}={}){E(this,"gl");E(this,"program",null);E(this,"stateStack",[]);E(this,"enable",!0);E(this,"cache");E(this,"log");this.gl=e,this.cache=n?_k(e):Object.assign({},RT),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){Et(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Vf(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){Et(s!==void 0);const o=e[s],a=this.cache[s];AG(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function jl(t){return t.state}function mk(t,e){const{enable:n=!0,copyState:r}=e;if(Et(r!==void 0),!t.state){t.state=new CG(t,{copyState:r}),PG(t);for(const s in cP){const o=cP[s];RG(t,s,o)}fP(t,"getParameter"),fP(t,"isEnabled")}const i=jl(t);return i.enable=n,t}function Fv(t){let e=jl(t);e||(mk(t,{copyState:!1}),e=jl(t)),e.push()}function gp(t){const e=jl(t);Et(e),e.pop()}function fP(t,e){const n=t[e].bind(t);t[e]=function(i){if(i===void 0||xG.has(i))return n(i);const s=jl(t);return i in s.cache||(s.cache[i]=n(i)),s.enable?s.cache[i]:n(i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function RG(t,e,n){if(!t[e])return;const r=t[e].bind(t);t[e]=function(...s){const o=jl(t),{valueChanged:a,oldValue:l}=n(o._updateCache,...s);return a&&r(...s),l},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function PG(t){const e=t.useProgram.bind(t);t.useProgram=function(r){const i=jl(t);i.program!==r&&(e(r),i.program=r)}}const IG={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function MG(t,e){e={...IG,...e};let n=null;const r=s=>n=s.statusMessage||n;t.addEventListener("webglcontextcreationerror",r,!1);let i=null;if(i||(i=t.getContext("webgl2",e)),t.removeEventListener("webglcontextcreationerror",r,!1),!i)throw new Error(`Failed to create WebGL context: ${n||"Unknown error"}`);if(e.onContextLost){const{onContextLost:s}=e;t.addEventListener("webglcontextlost",o=>s(o),!1)}if(e.onContextRestored){const{onContextRestored:s}=e;t.addEventListener("webglcontextrestored",o=>s(o),!1)}return i}function Ea(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function OG(t,e){const n=t.getParameter(7936),r=t.getParameter(7937);Ea(t,"WEBGL_debug_renderer_info",e);const i=e.WEBGL_debug_renderer_info,s=t.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),o=t.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),a=s||n,l=o||r,c=t.getParameter(7938),u=yk(a,l),f=NG(a,l),d=kG(a,l);return{type:"webgl",gpu:u,gpuType:d,gpuBackend:f,vendor:a,renderer:l,version:c,shadingLanguage:"glsl",shadingLanguageVersion:300}}function yk(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function NG(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function kG(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(yk(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function vk(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const Mn="texture-compression-bc",gt="texture-compression-astc",Ki="texture-compression-etc2",DG="texture-compression-etc1-webgl",l_="texture-compression-pvrtc-webgl",ew="texture-compression-atc-webgl",Cd="float32-renderable-webgl",tw="float16-renderable-webgl",FG="rgb9e5ufloat_renderable-webgl",nw="snorm8-renderable-webgl",Rd="norm16-renderable-webgl",rw="snorm16-renderable-webgl",c_="float32-filterable",dP="float16-filterable-webgl",eh="WEBGL_compressed_texture_s3tc",th="WEBGL_compressed_texture_s3tc_srgb",au="EXT_texture_compression_rgtc",lu="EXT_texture_compression_bptc",BG="WEBGL_compressed_texture_etc",LG="WEBGL_compressed_texture_astc",$G="WEBGL_compressed_texture_etc1",UG="WEBGL_compressed_texture_pvrtc",zG="WEBGL_compressed_texture_atc",hP="EXT_texture_norm16",pP="EXT_render_snorm",jG="EXT_color_buffer_float",PT={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[pP],"norm16-renderable-webgl":[hP],"snorm16-renderable-webgl":[hP,pP],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[eh,th,au,lu],"texture-compression-bc5-webgl":[au],"texture-compression-bc7-webgl":[lu],"texture-compression-etc2":[BG],"texture-compression-astc":[LG],"texture-compression-etc1-webgl":[$G],"texture-compression-pvrtc-webgl":[UG],"texture-compression-atc-webgl":[zG]};function VG(t){return t in PT}function WG(t,e,n){return(PT[e]||[]).every(i=>Ea(t,i,n))}const Bv={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:nw},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:nw},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:tw,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:Rd,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:rw},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:nw},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:tw,filter:dP,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:Rd},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:rw},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:Cd,filter:c_},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:FG},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:Cd,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:Rd},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:Rd},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:Cd,filter:c_,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:tw,filter:dP},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:Rd,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:rw},"rgb32float-webgl":{gl:34837,render:Cd,filter:c_,gl2ext:jG,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:Cd,filter:c_,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:eh,f:Mn},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:th,f:Mn},"bc1-rgba-unorm":{gl:33777,x:eh,f:Mn},"bc1-rgba-unorm-srgb":{gl:35916,x:th,f:Mn},"bc2-rgba-unorm":{gl:33778,x:eh,f:Mn},"bc2-rgba-unorm-srgb":{gl:35918,x:th,f:Mn},"bc3-rgba-unorm":{gl:33779,x:eh,f:Mn},"bc3-rgba-unorm-srgb":{gl:35919,x:th,f:Mn},"bc4-r-unorm":{gl:36283,x:au,f:Mn},"bc4-r-snorm":{gl:36284,x:au,f:Mn},"bc5-rg-unorm":{gl:36285,x:au,f:Mn},"bc5-rg-snorm":{gl:36286,x:au,f:Mn},"bc6h-rgb-ufloat":{gl:36495,x:lu,f:Mn},"bc6h-rgb-float":{gl:36494,x:lu,f:Mn},"bc7-rgba-unorm":{gl:36492,x:lu,f:Mn},"bc7-rgba-unorm-srgb":{gl:36493,x:lu,f:Mn},"etc2-rgb8unorm":{gl:37492,f:Ki},"etc2-rgb8unorm-srgb":{gl:37494,f:Ki},"etc2-rgb8a1unorm":{gl:37496,f:Ki},"etc2-rgb8a1unorm-srgb":{gl:37497,f:Ki},"etc2-rgba8unorm":{gl:37493,f:Ki},"etc2-rgba8unorm-srgb":{gl:37495,f:Ki},"eac-r11unorm":{gl:37488,f:Ki},"eac-r11snorm":{gl:37489,f:Ki},"eac-rg11unorm":{gl:37490,f:Ki},"eac-rg11snorm":{gl:37491,f:Ki},"astc-4x4-unorm":{gl:37808,f:gt},"astc-4x4-unorm-srgb":{gl:37840,f:gt},"astc-5x4-unorm":{gl:37809,f:gt},"astc-5x4-unorm-srgb":{gl:37841,f:gt},"astc-5x5-unorm":{gl:37810,f:gt},"astc-5x5-unorm-srgb":{gl:37842,f:gt},"astc-6x5-unorm":{gl:37811,f:gt},"astc-6x5-unorm-srgb":{gl:37843,f:gt},"astc-6x6-unorm":{gl:37812,f:gt},"astc-6x6-unorm-srgb":{gl:37844,f:gt},"astc-8x5-unorm":{gl:37813,f:gt},"astc-8x5-unorm-srgb":{gl:37845,f:gt},"astc-8x6-unorm":{gl:37814,f:gt},"astc-8x6-unorm-srgb":{gl:37846,f:gt},"astc-8x8-unorm":{gl:37815,f:gt},"astc-8x8-unorm-srgb":{gl:37847,f:gt},"astc-10x5-unorm":{gl:37819,f:gt},"astc-10x5-unorm-srgb":{gl:37851,f:gt},"astc-10x6-unorm":{gl:37817,f:gt},"astc-10x6-unorm-srgb":{gl:37849,f:gt},"astc-10x8-unorm":{gl:37818,f:gt},"astc-10x8-unorm-srgb":{gl:37850,f:gt},"astc-10x10-unorm":{gl:37819,f:gt},"astc-10x10-unorm-srgb":{gl:37851,f:gt},"astc-12x10-unorm":{gl:37820,f:gt},"astc-12x10-unorm-srgb":{gl:37852,f:gt},"astc-12x12-unorm":{gl:37821,f:gt},"astc-12x12-unorm-srgb":{gl:37853,f:gt},"pvrtc-rgb4unorm-webgl":{gl:35840,f:l_},"pvrtc-rgba4unorm-webgl":{gl:35842,f:l_},"pvrtc-rbg2unorm-webgl":{gl:35841,f:l_},"pvrtc-rgba2unorm-webgl":{gl:35843,f:l_},"etc1-rbg-unorm-webgl":{gl:36196,f:DG},"atc-rgb-unorm-webgl":{gl:35986,f:ew},"atc-rgba-unorm-webgl":{gl:35986,f:ew},"atc-rgbai-unorm-webgl":{gl:34798,f:ew}},HG={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},XG={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function IT(t,e,n){const r=Bv[e];if(!r||r.gl===void 0)return!1;const i=r.x||r.gl2ext;return i?!!Ea(t,i,n):!0}function bk(t){const e=Bv[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}function YG(t,e,n){if(!IT(t,e,n)||e.startsWith("depth")||e.startsWith("stencil"))return!1;try{if(T5(e).signed)return!1}catch{return!1}return e.endsWith("32float")?!!Ea(t,"OES_texture_float_linear, extensions",n):e.endsWith("16float")?!!Ea(t,"OES_texture_half_float_linear, extensions",n):!0}function KG(t,e,n){return!(!IT(t,e,n)||typeof e=="number")}function m0(t){var i;const e=Bv[t],n=bk(t),r=T5(t);return{format:n,dataFormat:(e==null?void 0:e.dataFormat)||ZG(r.format,r.integer,r.normalized,n),type:r.dataType?vk(r.dataType):((i=e==null?void 0:e.types)==null?void 0:i[0])||5121,compressed:r.compressed}}function qG(t){const e=Bv[t];if(!(e!=null&&e.attachment))throw new Error(`${t} is not a depth stencil format`);return e.attachment}function gP(t){const e=m0(t),n=HG[e.dataFormat]||4,r=XG[e.type]||1;return n*r}function ZG(t,e,n,r){if(r===6408||r===6407)return r;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;default:return 6408}}const _P={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class QG extends bY{constructor(n,r,i){super([],i);E(this,"gl");E(this,"extensions");E(this,"testedFeatures",new Set);this.gl=n,this.extensions=r,Ea(n,"EXT_color_buffer_float",r)}*[Symbol.iterator](){const n=this.getFeatures();for(const r of n)this.has(r)&&(yield r);return[]}has(n){return this.disabledFeatures[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),VG(n)&&WG(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(r=>r!=="polygon-mode-webgl");for(const r of n)this.has(r)}getFeatures(){return[...Object.keys(_P),...Object.keys(PT)]}getWebGLFeature(n){const r=_P[n];return typeof r=="string"?!!Ea(this.gl,r,this.extensions):!!r}}class GG extends vY{constructor(n){super();E(this,"gl");E(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]}}function ia(t,e,n){if(JG(e))return n(t);const{nocatch:r=!0}=e;Fv(t),Vf(t,e);let i;if(r)i=n(t),gp(t);else try{i=n(t)}finally{gp(t)}return i}function JG(t){for(const e in t)return!1;return!0}function eJ(t,e,n,r){if(i0(e))return r(t);const i=t;Fv(i.gl);try{return tJ(t,e),Vf(i.gl,n),r(t)}finally{gp(i.gl)}}function tJ(t,e){const n=t,{gl:r}=n;if(e.cullMode)switch(e.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029);break}if(e.frontFace&&r.frontFace(Ol("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&r.enable(34383),e.depthBias!==void 0&&(r.enable(32823),r.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,o=Ol("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(o)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,o=Ol("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,o),s==null||s.polygonModeWEBGL(1029,o)}e.polygonOffsetLine&&r.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&r.enable(12288),e.clipDistance1&&r.enable(12289),e.clipDistance2&&r.enable(12290),e.clipDistance3&&r.enable(12291),e.clipDistance4&&r.enable(12292),e.clipDistance5&&r.enable(12293),e.clipDistance6&&r.enable(12294),e.clipDistance7&&r.enable(12295)),e.depthWriteEnabled!==void 0&&r.depthMask(rJ("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?r.enable(2929):r.disable(2929),r.depthFunc(xS("depthCompare",e.depthCompare))),e.stencilWriteMask){const i=e.stencilWriteMask;r.stencilMaskSeparate(1028,i),r.stencilMaskSeparate(1029,i)}if(e.stencilReadMask&&ie.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const i=e.stencilReadMask||4294967295,s=xS("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,s,0,i),r.stencilFuncSeparate(1029,s,0,i)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const i=iw("stencilPassOperation",e.stencilPassOperation),s=iw("stencilFailOperation",e.stencilFailOperation),o=iw("stencilDepthFailOperation",e.stencilDepthFailOperation);r.stencilOpSeparate(1028,s,o,i),r.stencilOpSeparate(1029,s,o,i)}if(e.blendColorOperation||e.blendAlphaOperation){r.enable(3042);const i=mP("blendColorOperation",e.blendColorOperation||"add"),s=mP("blendAlphaOperation",e.blendAlphaOperation||"add");r.blendEquationSeparate(i,s);const o=u_("blendColorSrcFactor",e.blendColorSrcFactor||"one"),a=u_("blendColorDstFactor",e.blendColorDstFactor||"zero"),l=u_("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),c=u_("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");r.blendFuncSeparate(o,a,l,c)}}function xS(t,e){return Ol(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function iw(t,e){return Ol(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function mP(t,e){return Ol(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function u_(t,e){return Ol(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function nJ(t,e){return`Illegal parameter ${e} for ${t}`}function Ol(t,e,n){if(!(e in n))throw new Error(nJ(t,e));return n[e]}function rJ(t,e){return e}function wk(t){const e={};return t.addressModeU&&(e[10242]=sw(t.addressModeU)),t.addressModeV&&(e[10243]=sw(t.addressModeV)),t.addressModeW&&(e[32882]=sw(t.addressModeW)),t.magFilter&&(e[10240]=Sk(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=iJ(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=xS("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function sw(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function Sk(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function iJ(t,e){if(!e)return Sk(t);switch(t){case"nearest":return e==="nearest"?9984:9986;case"linear":return e==="nearest"?9985:9987}}class ma extends qt{constructor(n,r={}){super(n,r);E(this,"device");E(this,"gl");E(this,"handle");E(this,"glTarget");E(this,"glUsage");E(this,"glIndexType",5123);E(this,"byteLength");E(this,"bytesUsed");this.device=n,this.gl=this.device.gl;const i=typeof r=="object"?r.handle:void 0;this.handle=i||this.gl.createBuffer(),n.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=sJ(this.props.usage),this.glUsage=oJ(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,r.data?this._initWithData(r.data,r.byteOffset,r.byteLength):this._initWithByteLength(r.byteLength||0)}_initWithData(n,r=0,i=n.byteLength+r){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,this.glUsage),this.gl.bufferSubData(s,r,n),this.gl.bindBuffer(s,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(n,r,i),this.trackAllocatedMemory(i)}_initWithByteLength(n){Et(n>=0);let r=n;n===0&&(r=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(n,r=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,r,n),this.gl.bindBuffer(36663,null),this._setDebugData(n,r,n.byteLength)}async readAsync(n=0,r){return this.readSyncWebGL(n,r)}readSyncWebGL(n=0,r){r=r??this.byteLength-n;const i=new Uint8Array(r),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,i,s,r),this.gl.bindBuffer(36662,null),this._setDebugData(i,n,r),i}}function sJ(t){return t&qt.INDEX?34963:t&qt.VERTEX?34962:t&qt.UNIFORM?35345:34962}function oJ(t){return t&qt.INDEX||t&qt.VERTEX?35044:t&qt.UNIFORM?35048:35044}class TS extends a0{constructor(n,r){super(n,r);E(this,"device");E(this,"handle");E(this,"parameters");this.device=n,this.parameters=wk(r),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[r,i]of Object.entries(n)){const s=Number(r);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,i);break;default:this.device.gl.samplerParameteri(this.handle,s,i);break}}}}class cu extends s0{constructor(n,r){super(n,{...ri.defaultProps,...r});E(this,"device");E(this,"gl");E(this,"handle");E(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=r.texture}}const aJ={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0},Vh=class Vh extends ri{constructor(n,r){var i;super(n,{...aJ,format:"rgba8unorm",...r});E(this,"MAX_ATTRIBUTES");E(this,"device");E(this,"gl");E(this,"handle");E(this,"sampler");E(this,"view");E(this,"glFormat");E(this,"type");E(this,"dataFormat");E(this,"mipmaps");E(this,"target");E(this,"textureUnit");E(this,"loaded",!1);E(this,"_video");this.device=n,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=lJ(this.props),this.loaded=!1,typeof((i=this.props)==null?void 0:i.data)=="string"&&Object.assign(this.props,{data:aK(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(n){return new cu(this.device,{...n,texture:this})}initialize(n={}){if(this.props.dimension==="cube")return this.initializeCube(n);let r=n.data;if(r instanceof Promise)return r.then(_=>this.initialize(Object.assign({},n,{pixels:_,data:_}))),this;const i=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(i&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(n)),this;const{parameters:s={}}=n,{pixels:o=null,pixelStore:a={},textureUnit:l=void 0,mipmaps:c=!0}=n;r||(r=o);let{width:u,height:f,dataFormat:d,type:h,compressed:p=!1}=n;const{depth:g=0}=n,v=bk(n.format);return{width:u,height:f,compressed:p,dataFormat:d,type:h}=this._deduceParameters({format:n.format,type:h,dataFormat:d,compressed:p,data:r,width:u,height:f}),this.width=u,this.height=f,this.glFormat=v,this.type=h,this.dataFormat=d,this.textureUnit=l,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=c,this.setImageData({data:r,width:u,height:f,depth:g,format:v,type:h,dataFormat:d,parameters:a,compressed:p}),this.setSampler(n.sampler),this._setSamplerParameters(s),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),c&&this.device.isTextureFormatFilterable(n.format)&&this.generateMipmap(),i&&(this._video={video:r,parameters:s,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}initializeCube(n){const{mipmaps:r=!0,parameters:i={}}=n;return this.setCubeMapImageData(n).then(()=>{this.loaded=!0,r&&this.generateMipmap(n),this.setSampler(n.sampler),this._setSamplerParameters(i)}),this}setSampler(n={}){let r;n instanceof TS?(this.sampler=n,r=n.props):(this.sampler=new TS(this.device,n),r=n);const i=wk(r);return this._setSamplerParameters(i),this}resize(n){const{height:r,width:i,mipmaps:s=!1}=n;return i!==this.width||r!==this.height?this.initialize({width:i,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:s}):this}update(){if(this._video){const{video:n,parameters:r,lastTime:i}=this._video;if(i===n.currentTime||n.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:n,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=n.currentTime}}generateMipmap(n={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ia(this.gl,n,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this}setImageData(n){if(this.props.dimension==="3d"||this.props.dimension==="2d-array")return this.setImageData3D(n);this.trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:i=null,level:s=0,glFormat:o=this.glFormat,offset:a=0,parameters:l={}}=n;let{data:c=null,type:u=this.type,width:f=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:p=!1}=n;c||(c=i),{type:u,dataFormat:h,compressed:p,width:f,height:d}=this._deduceParameters({format:this.props.format,type:u,dataFormat:h,compressed:p,data:c,width:f,height:d});const{gl:g}=this;g.bindTexture(this.target,this.handle);let v=null;if({data:c,dataType:v}=this._getDataType({data:c,compressed:p}),ia(this.gl,l,()=>{switch(v){case"null":g.texImage2D(r,s,o,f,d,0,h,u,c);break;case"typed-array":g.texImage2D(r,s,o,f,d,0,h,u,c,a);break;case"buffer":this.device.gl.bindBuffer(35052,c.handle||c),this.device.gl.texImage2D(r,s,o,f,d,0,h,u,a),this.device.gl.bindBuffer(35052,null);break;case"browser-object":g.texImage2D(r,s,o,f,d,0,h,u,c);break;case"compressed":for(const[_,m]of c.entries())g.compressedTexImage2D(r,_,m.format,m.width,m.height,0,m.data);break;default:Et(!1,"Unknown image data type")}}),c&&c.byteLength)this.trackAllocatedMemory(c.byteLength,"Texture");else{const _=gP(this.props.format);this.trackAllocatedMemory(this.width*this.height*_,"Texture")}return this.loaded=!0,this}setSubImageData({target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,glFormat:u=this.glFormat,type:f=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:p=0,parameters:g={}}){if({type:f,dataFormat:d,compressed:h,width:a,height:l}=this._deduceParameters({format:this.props.format,type:f,dataFormat:d,compressed:h,data:i,width:a,height:l}),Et(this.depth===1,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const v=i;i=v.data,a=v.shape[0],l=v.shape[1]}i instanceof ma&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ia(this.gl,g,()=>{h?this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i):i===null?this.gl.texSubImage2D(n,c,s,o,a,l,d,f,null):ArrayBuffer.isView(i)?this.gl.texSubImage2D(n,c,s,o,a,l,d,f,i,p):typeof WebGLBuffer<"u"&&i instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,i),this.device.gl.texSubImage2D(n,c,s,o,a,l,d,f,p),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(n,c,s,o,a,l,d,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(n={}){return ie.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(n=this.textureUnit){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.target,this.handle),n}unbind(n=this.textureUnit){const{gl:r}=this;return n!==void 0&&(this.textureUnit=n,r.activeTexture(33984+n)),r.bindTexture(this.target,null),n}_getDataType({data:n,compressed:r=!1}){return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof ma?{data:n.handle,dataType:"buffer"}:typeof WebGLBuffer<"u"&&n instanceof WebGLBuffer?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(n){const{format:r,data:i}=n;let{width:s,height:o,dataFormat:a,type:l,compressed:c}=n;const u=m0(r);return a=a||u.dataFormat,l=l||u.type,c=c||u.compressed,{width:s,height:o}=this._deduceImageSize(i,s,o),{dataFormat:a,type:l,compressed:c,width:s,height:o,format:r,data:i}}_deduceImageSize(n,r,i){let s;return typeof ImageData<"u"&&n instanceof ImageData?s={width:n.width,height:n.height}:typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement?s={width:n.naturalWidth,height:n.naturalHeight}:typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement?s={width:n.width,height:n.height}:typeof ImageBitmap<"u"&&n instanceof ImageBitmap?s={width:n.width,height:n.height}:typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?s={width:n.videoWidth,height:n.videoHeight}:n?s={width:r,height:i}:s={width:r>=0?r:1,height:i>=0?i:1},Et(s,"Could not deduced texture size"),Et(r===void 0||s.width===r,"Deduced texture width does not match supplied width"),Et(i===void 0||s.height===i,"Deduced texture height does not match supplied height"),s}async setCubeMapImageData(n){const{gl:r}=this,{width:i,height:s,pixels:o,data:a,format:l=6408,type:c=5121}=n,u=o||a,f=await Promise.all(Vh.FACES.map(d=>{const h=u[d];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),Vh.FACES.forEach((d,h)=>{f[h].length>1&&this.props.mipmaps!==!1&&ie.warn(`${this.id} has mipmap and multiple LODs.`)(),f[h].forEach((p,g)=>{i&&s?r.texImage2D(d,g,l,i,s,0,l,c,p):r.texImage2D(d,g,l,l,c,p)})}),this.unbind()}setImageDataForFace(n){const{face:r,width:i,height:s,pixels:o,data:a,format:l=6408,type:c=5121}=n,{gl:u}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(d=>this.setImageDataForFace(Object.assign({},n,{face:r,data:d,pixels:d}))):this.width||this.height?u.texImage2D(r,0,l,i,s,0,l,c,f):u.texImage2D(r,0,l,l,c,f),this}setImageData3D(n){const{level:r=0,dataFormat:i,format:s,type:o,width:a,height:l,depth:c=1,offset:u=0,data:f,parameters:d={}}=n;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const h=m0(s);if(ia(this.gl,d,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,h.format,a,l,c,0,h.dataFormat,h.type,f),f instanceof ma&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,i,a,l,c,0,s,o,u))}),f&&f.byteLength)this.trackAllocatedMemory(f.byteLength,"Texture");else{const p=gP(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*p,"Texture")}return this.loaded=!0,this}_setSamplerParameters(n){if(!i0(n)){cJ(n),this.gl.bindTexture(this.target,this.handle);for(const[r,i]of Object.entries(n)){const s=Number(r),o=i;switch(s){case 33082:case 33083:this.gl.texParameterf(this.target,s,o);break;default:this.gl.texParameteri(this.target,s,o);break}}this.gl.bindTexture(this.target,null)}}};E(Vh,"FACES",[34069,34070,34071,34072,34073,34074]);let ps=Vh;function lJ(t){switch(t.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;case"1d":case"cube-array":default:throw new Error(t.dimension)}}function cJ(t){ie.log(1,"texture sampler parameters",t)()}class Mh extends l0{constructor(n,r){super(n,r);E(this,"device");E(this,"gl");E(this,"handle");const i=r.handle===null;if(this.device=n,this.gl=n.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),!i){n.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const s=this.gl.bindFramebuffer(36160,this.handle);for(let o=0;o<this.colorAttachments.length;++o){const a=this.colorAttachments[o],l=36064+o;a&&this._attachOne(l,a)}if(this.depthStencilAttachment&&this._attachOne(qG(this.depthStencilAttachment.props.format),this.depthStencilAttachment),r.check!==!1){const o=this.gl.checkFramebufferStatus(36160);if(o!==36053)throw new Error(`Framebuffer ${fJ(o)}`)}this.gl.bindFramebuffer(36160,s)}}get texture(){return this.colorAttachments[0]}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(n){return new ps(this.device,{id:`${this.id}-depth-stencil`,format:n,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(n,r){if(this.handle===null)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight);for(const i of this.colorAttachments)i.texture.resize({width:n,height:r});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:n,height:r}),this}_attachOne(n,r){if(Array.isArray(r)){const[i,s=0,o=0]=r;return this._attachTexture(n,i,s,o),i}if(r instanceof ps)return this._attachTexture(n,r,0,0),r;if(r instanceof cu){const i=r;return this._attachTexture(n,i.texture,i.props.baseMipLevel,i.props.baseArrayLayer),r.texture}throw new Error("attach")}_attachTexture(n,r,i,s){const{gl:o}=this.device;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const a=uJ(i);o.framebufferTexture2D(36160,n,a,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:Et(!1,"Illegal texture type")}o.bindTexture(r.target,null)}}function uJ(t){return t<34069?t+34069:t}function fJ(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class dJ extends ST{constructor(n,r){super(r);E(this,"device");E(this,"presentationSize");E(this,"_framebuffer",null);this.device=n,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Mh(this.device,{handle:null}),this._framebuffer}update(){const n=this.getPixelSize();(n[0]!==this.presentationSize[0]||n[1]!==this.presentationSize[1])&&(this.presentationSize=n,this.resize())}resize(n){if(this.device.gl&&this.canvas){const r=this.getDevicePixelRatio(n==null?void 0:n.useDevicePixels);this.setDevicePixelRatio(r,n);return}}commit(){}}const hJ={spector:ie.get("spector")||ie.get("spectorjs")},pJ="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gJ=1;let _t=null,yP=!1;async function _J(t){if(!globalThis.SPECTOR)try{await N5(pJ)}catch(e){ie.warn(String(e))}}function mJ(t){if(t={...hJ,...t},!(t!=null&&t.spector)||(!_t&&globalThis.SPECTOR&&(ie.probe(gJ,"SPECTOR found and initialized")(),_t=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=_t)),!_t))return null;if(yP||(yP=!0,_t.spyCanvases(),_t==null||_t.onCaptureStarted.add(e=>ie.info("Spector capture started:",e)()),_t==null||_t.onCapture.add(e=>{ie.info("Spector capture complete:",e)(),_t==null||_t.getResultUI(),_t==null||_t.resultView.display(),_t==null||_t.resultView.addCapture(e)})),t!=null&&t.canvas){if(typeof t.spector=="string"&&t.spector!==t.canvas.id)return _t;_t==null||_t.startCapture(t==null?void 0:t.canvas,500),new Promise(e=>setTimeout(e,2e3)).then(e=>{ie.info("Spector capture stopped after 2 seconds")(),_t==null||_t.stopCapture()})}return _t}const yJ="https://unpkg.com/webgl-debug@2.0.1/index.js";function xk(t){return t.luma=t.luma||{},t.luma}async function vJ(){Fa()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await N5(yJ))}function bJ(t,e={}){return t?e.debug?SJ(t,e):wJ(t):null}function wJ(t){const e=xk(t);return e.realContext?e.realContext:t}function SJ(t,e){if(!globalThis.WebGLDebugUtils)return ie.warn("webgl-debug not loaded")(),t;const n=xk(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...ou,...t});const r=globalThis.WebGLDebugUtils.makeDebugContext(t,xJ.bind(null,e),TJ.bind(null,e));for(const o in ou)!(o in r)&&typeof ou[o]=="number"&&(r[o]=ou[o]);class i{}Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.setPrototypeOf(i,r);const s=Object.create(i);return n.realContext=t,n.debugContext=s,s.debug=!0,s}function ow(t,e){e=Array.from(e).map(r=>r===void 0?"undefined":r);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function xJ(t,e,n,r){r=Array.from(r).map(a=>a===void 0?"undefined":a);const i=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r),o=`${i} in gl.${n}(${s})`;ie.error(o)();debugger;if(t.throwOnError)throw new Error(o)}function TJ(t,e,n){let r="";if(ie.level>=1&&(r=ow(e,n),ie.log(1,r)()),t.break&&t.break.length>0&&(r=r||ow(e,n),t.break.every(s=>r.indexOf(s)!==-1)))debugger;for(const i of n)if(i===void 0){if(r=r||ow(e,n),t.throwOnError)throw new Error(`Undefined argument: ${r}`);ie.error(`Undefined argument: ${r}`)();debugger}}function EJ(t){const e=t.split(/\r?\n/),n=[];for(const r of e){if(r.length<=1)continue;const i=r.split(":");if(i.length===2){const[f,d]=i;n.push({message:d.trim(),type:vP(f),lineNum:0,linePos:0});continue}const[s,o,a,...l]=i;let c=parseInt(a,10);isNaN(c)&&(c=0);let u=parseInt(o,10);isNaN(u)&&(u=0),n.push({message:l.join(":").trim(),type:vP(s),lineNum:c,linePos:u})}return n}function vP(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class AJ extends o0{constructor(n,r){super(n,r);E(this,"device");E(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return EJ(n)}getTranslatedSource(){const r=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return r==null?void 0:r.getTranslatedShaderSource(this.handle)}async _compile(n){n=(s=>s.startsWith("#version ")?s:`#version 100
${s}`)(n);const{gl:i}=this.device;if(i.shaderSource(this.handle,n),i.compileShader(this.handle),ie.level===0){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}ie.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),ie.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async s=>await new Promise(o=>setTimeout(o,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}const CJ=256,RJ=1024,PJ=16384,aw=6144,IJ=[1,2,4,8];class MJ extends aS{constructor(n,r){super(n,r);E(this,"device");E(this,"glParameters");this.device=n,Fv(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){gp(this.device.gl)}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const r={...this.glParameters};this.props.framebuffer&&(r.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(r.depthMask=!this.props.depthReadOnly),r.stencilMask=this.props.stencilReadOnly?0:1,r[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(r.viewport=n.viewport.slice(0,4),r.depthRange=[n.viewport[4],n.viewport[5]]):r.viewport=n.viewport),n.scissorRect&&(r.scissorTest=!0,r.scissor=n.scissorRect),n.blendConstant&&(r.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),n[2967]=n.stencilReference),n.colorMask&&(r.colorMask=IJ.map(i=>!!(i&n.colorMask))),this.glParameters=r,Vf(this.device.gl,r)}beginOcclusionQuery(n){const r=this.props.occlusionQuerySet;r==null||r.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let r=0;this.props.clearColor!==!1&&(r|=PJ,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(r|=CJ,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(r|=RJ,n.clearStencil=this.props.clearStencil),r!==0&&ia(this.device.gl,n,()=>{this.device.gl.clear(r)})}clearColorBuffer(n=0,r=[0,0,0,0]){ia(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(r.constructor){case Int32Array:this.device.gl.clearBufferiv(aw,n,r);break;case Uint32Array:this.device.gl.clearBufferuiv(aw,n,r);break;case Float32Array:default:this.device.gl.clearBufferfv(aw,n,r);break}})}}const OJ="Failed to deduce GL constant from typed array";function NJ(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(OJ)}}function ES(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const kJ={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},DJ={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Oh{constructor(...e){E(this,"offset");E(this,"stride");E(this,"type");E(this,"size");E(this,"divisor");E(this,"normalized");E(this,"integer");E(this,"buffer");E(this,"index");e.forEach(n=>this._assign(n)),Object.freeze(this)}static getBytesPerElement(e){return ES(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Et(e.size),ES(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Oh(kJ,...e)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Oh.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Oh.getBytesPerVertex(this)}_assign(e={}){return e=sK("Accessor",e,DJ),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalize!==void 0&&(this.normalized=e.normalize),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this.offset===void 0&&delete this.offset,this.stride===void 0&&delete this.stride,this.type===void 0&&delete this.type,this.size===void 0&&delete this.size,this.divisor===void 0&&delete this.divisor,this.normalized===void 0&&delete this.normalized,this.integer===void 0&&delete this.integer,this.buffer===void 0&&delete this.buffer,this.index===void 0&&delete this.index,this}}function FJ(t){return BJ.includes(t)}const BJ=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],Tk={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function Ek(t){const e=Tk[t];if(!e)throw new Error("uniform");const[n,r,,i]=e;return{format:i,components:r,glType:n}}function LJ(t){const e=Tk[t];if(!e)throw new Error("attribute");const[,n,,r,i]=e;return{attributeType:r,vertexFormat:i,components:n}}function $J(t,e){const n={attributes:[],bindings:[]};n.attributes=UJ(t,e);const r=VJ(t,e);for(const a of r){const l=a.uniforms.map(c=>({name:c.name,format:c.format,byteOffset:c.byteOffset,byteStride:c.byteStride,arrayLength:c.arrayLength}));n.bindings.push({type:"uniform",name:a.name,location:a.location,visibility:(a.vertex?1:0)&(a.fragment?2:0),minBindingSize:a.byteLength,uniforms:l})}const i=jJ(t,e);let s=0;for(const a of i)if(FJ(a.type)){const{viewDimension:l,sampleType:c}=HJ(a.type);n.bindings.push({type:"texture",name:a.name,location:s,viewDimension:l,sampleType:c}),a.textureUnit=s,s+=1}i.length&&(n.uniforms=i);const o=zJ(t,e);return o!=null&&o.length&&(n.varyings=o),n}function UJ(t,e){const n=[],r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i);if(!s)throw new Error("activeInfo");const{name:o,type:a}=s,l=t.getAttribLocation(e,o);if(l>=0){const{attributeType:c}=LJ(a),u=/instance/i.test(o)?"instance":"vertex";n.push({name:o,location:l,stepMode:u,type:c})}}return n.sort((i,s)=>i.location-s.location),n}function zJ(t,e){const n=[],r=t.getProgramParameter(e,35971);for(let i=0;i<r;i++){const s=t.getTransformFeedbackVarying(e,i);if(!s)throw new Error("activeInfo");const{name:o,type:a,size:l}=s,{glType:c,components:u}=Ek(a),f=new Oh({type:c,size:l*u}),d={location:i,name:o,accessor:f};n.push(d)}return n.sort((i,s)=>i.location-s.location),n}function jJ(t,e){const n=[],r=t.getProgramParameter(e,35718);for(let i=0;i<r;i++){const s=t.getActiveUniform(e,i);if(!s)throw new Error("activeInfo");const{name:o,size:a,type:l}=s,{name:c,isArray:u}=XJ(o);let f=t.getUniformLocation(e,c);const d={location:f,name:c,size:a,type:l,isArray:u};if(n.push(d),d.size>1)for(let h=0;h<d.size;h++){const p=`${c}[${h}]`;f=t.getUniformLocation(e,p);const g={...d,name:p,location:f};n.push(g)}}return n}function VJ(t,e){const n=(s,o)=>t.getActiveUniformBlockParameter(e,s,o),r=[],i=t.getProgramParameter(e,35382);for(let s=0;s<i;s++){const o={name:t.getActiveUniformBlockName(e,s)||"",location:n(s,35391),byteLength:n(s,35392),vertex:n(s,35396),fragment:n(s,35398),uniformCount:n(s,35394),uniforms:[]},a=n(s,35395)||[],l=t.getActiveUniforms(e,a,35383),c=t.getActiveUniforms(e,a,35384),u=t.getActiveUniforms(e,a,35387),f=t.getActiveUniforms(e,a,35388);for(let d=0;d<o.uniformCount;++d){const h=t.getActiveUniform(e,a[d]);if(!h)throw new Error("activeInfo");o.uniforms.push({name:h.name,format:Ek(l[d]).format,type:l[d],arrayLength:c[d],byteOffset:u[d],byteStride:f[d]})}r.push(o)}return r.sort((s,o)=>s.location-o.location),r}const WJ={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function HJ(t){const e=WJ[t];if(!e)throw new Error("sampler");const[n,r]=e;return{viewDimension:n,sampleType:r}}function XJ(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function YJ(t,e,n,r){const i=t;let s=r;s===!0&&(s=1),s===!1&&(s=0);const o=typeof s=="number"?[s]:s;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof r!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,r);case 5126:return t.uniform1fv(e,o);case 35664:return t.uniform2fv(e,o);case 35665:return t.uniform3fv(e,o);case 35666:return t.uniform4fv(e,o);case 5124:return t.uniform1iv(e,o);case 35667:return t.uniform2iv(e,o);case 35668:return t.uniform3iv(e,o);case 35669:return t.uniform4iv(e,o);case 35670:return t.uniform1iv(e,o);case 35671:return t.uniform2iv(e,o);case 35672:return t.uniform3iv(e,o);case 35673:return t.uniform4iv(e,o);case 5125:return i.uniform1uiv(e,o,1);case 36294:return i.uniform2uiv(e,o,2);case 36295:return i.uniform3uiv(e,o,3);case 36296:return i.uniform4uiv(e,o,4);case 35674:return t.uniformMatrix2fv(e,!1,o);case 35675:return t.uniformMatrix3fv(e,!1,o);case 35676:return t.uniformMatrix4fv(e,!1,o);case 35685:return i.uniformMatrix2x3fv(e,!1,o);case 35686:return i.uniformMatrix2x4fv(e,!1,o);case 35687:return i.uniformMatrix3x2fv(e,!1,o);case 35688:return i.uniformMatrix3x4fv(e,!1,o);case 35689:return i.uniformMatrix4x2fv(e,!1,o);case 35690:return i.uniformMatrix4x3fv(e,!1,o)}throw new Error("Illegal uniform")}function KJ(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(t)}}function qJ(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"line-loop-webgl":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;case"triangle-fan-webgl":return 4;default:throw new Error(t)}}const bP=4;class ZJ extends uf{constructor(n,r){super(n,r);E(this,"device");E(this,"handle");E(this,"vs");E(this,"fs");E(this,"introspectedLayout");E(this,"uniforms",{});E(this,"bindings",{});E(this,"varyings",null);E(this,"_uniformCount",0);E(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=r.vs,this.fs=r.fs;const{varyings:i,bufferMode:s=35981}=r;switch(i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,s)),this._linkShaders(),ie.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=$J(this.device.gl,this.handle),ie.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=XY(this.introspectedLayout,r.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":ie.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`);break}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(n,r){for(const[i,s]of Object.entries(n)){const o=this.shaderLayout.bindings.find(a=>a.name===i)||this.shaderLayout.bindings.find(a=>a.name===`${i}Uniforms`);if(!o){const a=this.shaderLayout.bindings.map(l=>`"${l.name}"`).join(", ");r!=null&&r.disableWarnings||ie.warn(`Unknown binding "${i}" in render pipeline "${this.id}", expected one of ${a}`)();continue}switch(s||ie.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),o.type){case"uniform":if(!(s instanceof ma)&&!(s.buffer instanceof ma))throw new Error("buffer value");break;case"texture":if(!(s instanceof cu||s instanceof ps||s instanceof Mh))throw new Error("texture value");break;case"sampler":ie.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(o.type)}this.bindings[i]=s}}draw(n){var v;const{renderPass:r,parameters:i=this.props.parameters,topology:s=this.props.topology,vertexArray:o,vertexCount:a,instanceCount:l,isInstanced:c=!1,firstVertex:u=0,transformFeedback:f}=n,d=KJ(s),h=!!o.indexBuffer,p=(v=o.indexBuffer)==null?void 0:v.glIndexType;if(this.linkStatus!=="success")return ie.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||a===0)return ie.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(a===0)return ie.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),o.bindBeforeRender(r),f&&f.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const g=r;return eJ(this.device,i,g.glParameters,()=>{h&&c?this.device.gl.drawElementsInstanced(d,a||0,p,u,l||0):h?this.device.gl.drawElements(d,a||0,p,u):c?this.device.gl.drawArraysInstanced(d,u,a||0,l||0):this.device.gl.drawArrays(d,u,a||0),f&&f.end()}),o.unbindAfterRender(r),!0}setUniformsWebGL(n){const{bindings:r}=O5(n);Object.keys(r).forEach(i=>{ie.warn(`Unsupported value "${JSON.stringify(r[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,n)}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),ie.time(bP,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),ie.timeEnd(bP,`linkProgram for ${this.id}`)(),ie.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}ie.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),ie.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const r=this._getLinkStatus();this._reportLinkStatus(r)}_reportLinkStatus(n){var r;switch(n){case"success":return;default:throw this.vs.compilationStatus==="error"?(this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`)):((r=this.fs)==null?void 0:r.compilationStatus)==="error"?(this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`)):new Error(`Error during ${n}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const n=async s=>await new Promise(o=>setTimeout(o,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const[,r]of Object.entries(this.bindings))r instanceof ps&&(r.update(),n=n&&r.loaded);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let r=0,i=0;for(const s of this.shaderLayout.bindings){const o=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!o)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:a}=s,l=n.getUniformBlockIndex(this.handle,a);if(l===4294967295)throw new Error(`Invalid uniform block name ${a}`);n.uniformBlockBinding(this.handle,i,l),o instanceof ma?n.bindBufferBase(35345,i,o.handle):n.bindBufferRange(35345,i,o.buffer.handle,o.offset||0,o.size||o.buffer.byteLength-o.offset),i+=1;break;case"texture":if(!(o instanceof cu||o instanceof ps||o instanceof Mh))throw new Error("texture");let c;if(o instanceof cu)c=o.texture;else if(o instanceof ps)c=o;else if(o instanceof Mh&&o.colorAttachments[0]instanceof cu)ie.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),c=o.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+r),n.bindTexture(c.target,c.handle),r+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:r,location:i,type:s,textureUnit:o}=n,a=this.uniforms[r]??o;a!==void 0&&YJ(this.device.gl,i,s,a)}}}class QJ extends cS{constructor(n){super(n,{});E(this,"device");E(this,"commands",[]);this.device=n}submitCommands(n=this.commands){for(const r of n)switch(r.name){case"copy-buffer-to-buffer":GJ(this.device,r.options);break;case"copy-buffer-to-texture":JJ(this.device,r.options);break;case"copy-texture-to-buffer":eee(this.device,r.options);break;case"copy-texture-to-texture":tee(this.device,r.options);break}}}function GJ(t,e){const n=e.source,r=e.destination;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,r.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function JJ(t,e){throw new Error("Not implemented")}function eee(t,e){const{source:n,mipLevel:r=0,aspect:i="all",width:s=e.source.width,height:o=e.source.height,depthOrArrayLayers:a=0,origin:l=[0,0],destination:c,byteOffset:u=0,bytesPerRow:f,rowsPerImage:d}=e;if(i!=="all")throw new Error("not supported");if(r!==0||a!==0||f||d)throw new Error("not implemented");const{framebuffer:h,destroyFramebuffer:p}=Ak(n);let g;try{const v=c,_=s||h.width,m=o||h.height,y=m0(h.texture.props.format),b=y.dataFormat,S=y.type;t.gl.bindBuffer(35051,v.handle),g=t.gl.bindFramebuffer(36160,h.handle),t.gl.readPixels(l[0],l[1],_,m,b,S,u)}finally{t.gl.bindBuffer(35051,null),g!==void 0&&t.gl.bindFramebuffer(36160,g),p&&h.destroy()}}function tee(t,e){const{source:n,destinationMipLevel:r=0,origin:i=[0,0],destinationOrigin:s=[0,0],destination:o}=e;let{width:a=e.destination.width,height:l=e.destination.height}=e;const{framebuffer:c,destroyFramebuffer:u}=Ak(n),[f,d]=i,[h,p,g]=s,v=t.gl.bindFramebuffer(36160,c.handle);let _=null,m;if(o instanceof ps)_=o,a=Number.isFinite(a)?a:_.width,l=Number.isFinite(l)?l:_.height,_.bind(0),m=_.target;else throw new Error("invalid destination");switch(m){case 3553:case 34067:t.gl.copyTexSubImage2D(m,r,h,p,f,d,a,l);break;case 35866:case 32879:t.gl.copyTexSubImage3D(m,r,h,p,g,f,d,a,l);break}_&&_.unbind(),t.gl.bindFramebuffer(36160,v),u&&c.destroy()}function Ak(t){if(t instanceof ri){const{width:e,height:n,id:r}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${r}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class nee extends lS{constructor(n,r){super(n,r);E(this,"device");E(this,"commandBuffer");this.device=n,this.commandBuffer=new QJ(n)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,r,i){}}class MT extends uS{constructor(n,r){super(n,r);E(this,"device");E(this,"handle");E(this,"buffer",null);E(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return hW()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const r=n;if(r&&r.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,r?r.handle:null),this.indexBuffer=r,this.device.gl.bindVertexArray(null)}setBuffer(n,r){const i=r;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:o,stride:a,offset:l,normalized:c,integer:u,divisor:f}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),u?this.device.gl.vertexAttribIPointer(n,s,o,a,l):this.device.gl.vertexAttribPointer(n,s,o,c,a,l),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,f||0),this.attributes[n]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,r){this._enable(n,!1),this.attributes[n]=r}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const r=this.attributes[n];ArrayBuffer.isView(r)&&this.device.setConstantAttributeWebGL(n,r)}}_getAccessor(n){const r=this.attributeInfos[n];if(!r)throw new Error(`Unknown attribute location ${n}`);const i=vk(r.bufferDataType);return{size:r.bufferComponents,type:i,stride:r.byteStride,offset:r.byteOffset,normalized:r.normalized,integer:r.integer,divisor:r.stepMode==="instance"?1:0}}_enable(n,r=!0){const s=MT.isConstantAttributeZeroSupported(this.device)||n!==0;(r||s)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),r?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,r){const i=ree(r),s=i.byteLength*n,o=i.length*n;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let a=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),a=a||!iee(i,this.bufferValue),a){const l=ZY(r.constructor,o);QY({target:l,source:i,start:0,count:o}),this.buffer.write(l),this.bufferValue=r}return this.buffer}}function ree(t){return Array.isArray(t)?new Float32Array(t):t}function iee(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class see extends fS{constructor(n,r){super(n,r);E(this,"device");E(this,"gl");E(this,"handle");E(this,"layout");E(this,"buffers",{});E(this,"unusedBuffers",{});E(this,"bindOnUse",!0);E(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,r.buffers&&this.setBuffers(r.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(qJ(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const r in n)this.setBuffer(r,n[r])})}setBuffer(n,r){const i=this._getVaryingIndex(n),{buffer:s,byteLength:o,byteOffset:a}=this._getBufferRange(r);if(i<0){this.unusedBuffers[n]=s,ie.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[i]={buffer:s,byteLength:o,byteOffset:a},this.bindOnUse||this._bindBuffer(i,s,a,o)}getBuffer(n){if(wP(n))return this.buffers[n]||null;const r=this._getVaryingIndex(n);return r>=0?this.buffers[r]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let r;return this._bound?r=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,r=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),r}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof ma)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:r,byteOffset:i=0,byteLength:s=n.buffer.byteLength}=n;return{buffer:r,byteOffset:i,byteLength:s}}_getVaryingIndex(n){if(wP(n))return Number(n);for(const r of this.layout.varyings)if(n===r.name)return r.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:r,byteLength:i,byteOffset:s}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),r,s,i)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,r,i=0,s){const o=r&&r.handle;!o||s===void 0?this.gl.bindBufferBase(35982,n,o):this.gl.bindBufferRange(35982,n,o,i,s)}}function wP(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class oee extends dS{constructor(n,r){super(n,r);E(this,"device");E(this,"handle");E(this,"target",null);E(this,"_queryPending",!1);E(this,"_pollingPromise",null);if(this.device=n,r.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((i,s)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):r++>n?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}}function Ck(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Et(!1),0}}function aee(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Et(!1),0}}function lee(t,e){var v,_;const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408,sourceAttachment:s=36064}=e||{};let{target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e||{};const{framebuffer:u,deleteFramebuffer:f}=Rk(t);Et(u);const{gl:d,handle:h}=u;a=a||u.width,l=l||u.height;const p=s-36064;c=c||((_=(v=u.colorAttachments[p])==null?void 0:v.texture)==null?void 0:_.type)||5121,o=fee(o,c,i,a,l),c=c||NJ(o);const g=d.bindFramebuffer(36160,h);return d.readPixels(n,r,a,l,i,c,o),d.bindFramebuffer(36160,g||null),f&&u.destroy(),o}function cee(t,e){const{target:n,sourceX:r=0,sourceY:i=0,sourceFormat:s=6408,targetByteOffset:o=0}=e||{};let{sourceWidth:a,sourceHeight:l,sourceType:c}=e||{};const{framebuffer:u,deleteFramebuffer:f}=Rk(t);Et(u),a=a||u.width,l=l||u.height;const d=u;c=c||5121;let h=n;if(!h){const g=Ck(s),v=aee(c),_=o+a*l*g*v;h=d.device.createBuffer({byteLength:_})}const p=t.device.createCommandEncoder();return p.copyTextureToBuffer({source:t,width:a,height:l,origin:[r,i],destination:h,byteOffset:o}),p.destroy(),f&&u.destroy(),h}function Rk(t){return t instanceof l0?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:uee(t),deleteFramebuffer:!0}}function uee(t,e){const{device:n,width:r,height:i,id:s}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:r,height:i,colorAttachments:[t]})}function fee(t,e,n,r,i){if(t)return t;e=e||5121;const s=ES(e,{clamped:!1}),o=Ck(n);return new s(r*i*o)}const dee=256,hee=1024,pee=16384,gee="clear: bad arguments";function _ee(t,e){const{framebuffer:n=null,color:r=null,depth:i=null,stencil:s=null}=e||{},o={};n&&(o.framebuffer=n);let a=0;r&&(a|=pee,r!==!0&&(o.clearColor=r)),i&&(a|=dee,i!==!0&&(o.clearDepth=i)),s&&(a|=hee,i!==!0&&(o.clearStencil=i)),Et(a!==0,gee);const l=t.gl;ia(l,o,()=>{l.clear(a)})}const Pd=1,ol=class ol extends cf{constructor(n){var l,c;super({...n,id:n.id||Ba("webgl-device")});E(this,"type","webgl");E(this,"handle");E(this,"features");E(this,"limits");E(this,"info");E(this,"canvasContext");E(this,"lost");E(this,"_resolveContextLost");E(this,"renderPass",null);E(this,"gl");E(this,"debug",!1);E(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});E(this,"_extensions",{});E(this,"_polyfilled",!1);E(this,"spectorJS");E(this,"_constants");const r=(l=n.gl)==null?void 0:l.device;if(r)throw new Error(`WebGL context already attached to device ${r.id}`);const i=((c=n.gl)==null?void 0:c.canvas)||n.canvas;this.canvasContext=new dJ(this,{...n,canvas:i}),this.lost=new Promise(u=>{this._resolveContextLost=u});let s=n.gl||null;if(s||(s=MG(this.canvasContext.canvas,{...n,onContextLost:u=>{var f;return(f=this._resolveContextLost)==null?void 0:f.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!s)throw new Error("WebGL context creation failed");this.handle=s,this.gl=s,this.gl.device=this,this.gl._version=2,n.spector&&(this.spectorJS=mJ({...this.props,canvas:this.handle.canvas})),this.info=OG(this.gl,this._extensions),this.limits=new GG(this.gl),this.features=new QG(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:o=!0,copyState:a=!1}=n;mk(this.gl,{enable:o,copyState:a,log:(...u)=>ie.log(1,...u)()}),n.debug&&(this.gl=bJ(this.gl,{...n,throwOnError:!0}),this.debug=!0,ie.level=Math.max(ie.level,1),ie.warn("WebGL debug mode activated. Performance reduced.")())}static isSupported(){return typeof WebGL2RenderingContext<"u"}static attach(n){if(n instanceof ol)return n;if((n==null?void 0:n.device)instanceof cf)return n.device;if(!mee(n))throw new Error("Invalid WebGL2RenderingContext");return new ol({gl:n})}static async create(n={}){var a;ie.groupCollapsed(Pd,"WebGLDevice created")();const r=[];n.debug&&r.push(vJ()),n.spector&&r.push(_J()),typeof n.canvas=="string"&&r.push(ST.pageLoaded);const i=await Promise.allSettled(r);for(const l of i)l.status==="rejected"&&ie.error(`Failed to initialize debug libraries ${l.reason}`)();if(ie.probe(Pd+1,"DOM is loaded")(),(a=n.gl)!=null&&a.device)return ie.warn("reattaching existing device")(),ol.attach(n.gl);const s=new ol(n),o=`Created ${s.type}${s.debug?" debug":""} context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return ie.probe(Pd,o)(),ie.table(Pd,s.info)(),ie.groupEnd(Pd)(),s}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(n){return IT(this.gl,n,this._extensions)}isTextureFormatFilterable(n){return YG(this.gl,n,this._extensions)}isTextureFormatRenderable(n){return KG(this.gl,n,this._extensions)}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const r=this._getBufferProps(n);return new ma(this,r)}_createTexture(n){return new ps(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new TS(this,n)}createShader(n){return new AJ(this,n)}createFramebuffer(n){return new Mh(this,n)}createVertexArray(n){return new MT(this,n)}createTransformFeedback(n){return new see(this,n)}createQuerySet(n){return new oee(this,n)}createRenderPipeline(n){return new ZJ(this,n)}beginRenderPass(n){return new MJ(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(n){return new nee(this,n)}submit(){var n;(n=this.renderPass)==null||n.end(),this.renderPass=null}readPixelsToArrayWebGL(n,r){return lee(n,r)}readPixelsToBufferWebGL(n,r){return cee(n,r)}setParametersWebGL(n){Vf(this.gl,n)}getParametersWebGL(n){return _k(this.gl,n)}withParametersWebGL(n,r){return ia(this.gl,n,r)}clearWebGL(n){_ee(this,n)}resetWebGL(){ie.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),TG(this.gl)}loseDevice(){var s;let n=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(n=!0,i.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){Fv(this.gl)}popState(){gp(this.gl)}setSpectorMetadata(n,r){n.__SPECTOR_Metadata=r}getGLKey(n,r){r=r||this.gl2||this.gl;const i=Number(n);for(const s in r)if(r[s]===i)return`GL.${s}`;return String(n)}setConstantAttributeWebGL(n,r){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const s=this._constants[n];switch(s&&wee(s,r)&&ie.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=r,r.constructor){case Float32Array:yee(this,n,r);break;case Int32Array:vee(this,n,r);break;case Uint32Array:bee(this,n,r);break;default:Et(!1)}}getExtension(n){return Ea(this.gl,n,this._extensions),this._extensions}};E(ol,"type","webgl");let Nh=ol;function mee(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function yee(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break;default:Et(!1)}}function vee(t,e,n){t.gl.vertexAttribI4iv(e,n)}function bee(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function wee(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}var Pk={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(T,C,O){return setTimeout(y(T,O),C)}function d(T,C,O){return Array.isArray(T)?(h(T,O[C],O),!0):!1}function h(T,C,O){var V;if(T)if(T.forEach)T.forEach(C,O);else if(T.length!==i)for(V=0;V<T.length;)C.call(O,T[V],V,T),V++;else for(V in T)T.hasOwnProperty(V)&&C.call(O,T[V],V,T)}function p(T,C,O){var V="DEPRECATED METHOD: "+C+`
`+O+` AT 
`;return function(){var te=new Error("get-stack-trace"),he=te&&te.stack?te.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Qe=e.console&&(e.console.warn||e.console.log);return Qe&&Qe.call(e.console,V,he),T.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(C){if(C===i||C===null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(C),V=1;V<arguments.length;V++){var te=arguments[V];if(te!==i&&te!==null)for(var he in te)te.hasOwnProperty(he)&&(O[he]=te[he])}return O}:g=Object.assign;var v=p(function(C,O,V){for(var te=Object.keys(O),he=0;he<te.length;)(!V||V&&C[te[he]]===i)&&(C[te[he]]=O[te[he]]),he++;return C},"extend","Use `assign`."),_=p(function(C,O){return v(C,O,!0)},"merge","Use `assign`.");function m(T,C,O){var V=C.prototype,te;te=T.prototype=Object.create(V),te.constructor=T,te._super=V,O&&g(te,O)}function y(T,C){return function(){return T.apply(C,arguments)}}function b(T,C){return typeof T==a?T.apply(C&&C[0]||i,C):T}function S(T,C){return T===i?C:T}function A(T,C,O){h(k(C),function(V){T.addEventListener(V,O,!1)})}function I(T,C,O){h(k(C),function(V){T.removeEventListener(V,O,!1)})}function R(T,C){for(;T;){if(T==C)return!0;T=T.parentNode}return!1}function M(T,C){return T.indexOf(C)>-1}function k(T){return T.trim().split(/\s+/g)}function N(T,C,O){if(T.indexOf&&!O)return T.indexOf(C);for(var V=0;V<T.length;){if(O&&T[V][O]==C||!O&&T[V]===C)return V;V++}return-1}function F(T){return Array.prototype.slice.call(T,0)}function D(T,C,O){for(var V=[],te=[],he=0;he<T.length;){var Qe=C?T[he][C]:T[he];N(te,Qe)<0&&V.push(T[he]),te[he]=Qe,he++}return O&&(C?V=V.sort(function(Sn,Vn){return Sn[C]>Vn[C]}):V=V.sort()),V}function z(T,C){for(var O,V,te=C[0].toUpperCase()+C.slice(1),he=0;he<s.length;){if(O=s[he],V=O?O+te:C,V in T)return V;he++}return i}var Z=1;function ee(){return Z++}function ne(T){var C=T.ownerDocument||T;return C.defaultView||C.parentWindow||e}var X=/mobile|tablet|ip(ad|hone|od)|android/i,Y="ontouchstart"in e,ce=z(e,"PointerEvent")!==i,me=Y&&X.test(navigator.userAgent),G="touch",ge="pen",le="mouse",ae="kinect",oe=25,ue=1,Ee=2,K=4,q=8,de=1,H=2,je=4,Be=8,Fe=16,Xe=H|je,rt=Be|Fe,Ut=Xe|rt,er=["x","y"],Gt=["clientX","clientY"];function At(T,C){var O=this;this.manager=T,this.callback=C,this.element=T.element,this.target=T.options.inputTarget,this.domHandler=function(V){b(T.options.enable,[T])&&O.handler(V)},this.init()}At.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(ne(this.element),this.evWin,this.domHandler)}};function mr(T){var C,O=T.options.inputClass;return O?C=O:ce?C=zn:me?C=jr:Y?C=ld:C=Le,new C(T,tr)}function tr(T,C,O){var V=O.pointers.length,te=O.changedPointers.length,he=C&ue&&V-te===0,Qe=C&(K|q)&&V-te===0;O.isFirst=!!he,O.isFinal=!!Qe,he&&(T.session={}),O.eventType=C,id(T,O),T.emit("hammer.input",O),T.recognize(O),T.session.prevInput=O}function id(T,C){var O=T.session,V=C.pointers,te=V.length;O.firstInput||(O.firstInput=zr(C)),te>1&&!O.firstMultiple?O.firstMultiple=zr(C):te===1&&(O.firstMultiple=!1);var he=O.firstInput,Qe=O.firstMultiple,_n=Qe?Qe.center:he.center,Sn=C.center=Wa(V);C.timeStamp=u(),C.deltaTime=C.timeStamp-he.timeStamp,C.angle=Ha(_n,Sn),C.distance=fi(_n,Sn),Va(O,C),C.offsetDirection=fc(C.deltaX,C.deltaY);var Vn=Ui(C.deltaTime,C.deltaX,C.deltaY);C.overallVelocityX=Vn.x,C.overallVelocityY=Vn.y,C.overallVelocity=c(Vn.x)>c(Vn.y)?Vn.x:Vn.y,C.scale=Qe?ad(Qe.pointers,V):1,C.rotation=Qe?od(Qe.pointers,V):0,C.maxPointers=O.prevInput?C.pointers.length>O.prevInput.maxPointers?C.pointers.length:O.prevInput.maxPointers:C.pointers.length,sd(O,C);var Wi=T.element;R(C.srcEvent.target,Wi)&&(Wi=C.srcEvent.target),C.target=Wi}function Va(T,C){var O=C.center,V=T.offsetDelta||{},te=T.prevDelta||{},he=T.prevInput||{};(C.eventType===ue||he.eventType===K)&&(te=T.prevDelta={x:he.deltaX||0,y:he.deltaY||0},V=T.offsetDelta={x:O.x,y:O.y}),C.deltaX=te.x+(O.x-V.x),C.deltaY=te.y+(O.y-V.y)}function sd(T,C){var O=T.lastInterval||C,V=C.timeStamp-O.timeStamp,te,he,Qe,_n;if(C.eventType!=q&&(V>oe||O.velocity===i)){var Sn=C.deltaX-O.deltaX,Vn=C.deltaY-O.deltaY,Wi=Ui(V,Sn,Vn);he=Wi.x,Qe=Wi.y,te=c(Wi.x)>c(Wi.y)?Wi.x:Wi.y,_n=fc(Sn,Vn),T.lastInterval=C}else te=O.velocity,he=O.velocityX,Qe=O.velocityY,_n=O.direction;C.velocity=te,C.velocityX=he,C.velocityY=Qe,C.direction=_n}function zr(T){for(var C=[],O=0;O<T.pointers.length;)C[O]={clientX:l(T.pointers[O].clientX),clientY:l(T.pointers[O].clientY)},O++;return{timeStamp:u(),pointers:C,center:Wa(C),deltaX:T.deltaX,deltaY:T.deltaY}}function Wa(T){var C=T.length;if(C===1)return{x:l(T[0].clientX),y:l(T[0].clientY)};for(var O=0,V=0,te=0;te<C;)O+=T[te].clientX,V+=T[te].clientY,te++;return{x:l(O/C),y:l(V/C)}}function Ui(T,C,O){return{x:C/T||0,y:O/T||0}}function fc(T,C){return T===C?de:c(T)>=c(C)?T<0?H:je:C<0?Be:Fe}function fi(T,C,O){O||(O=er);var V=C[O[0]]-T[O[0]],te=C[O[1]]-T[O[1]];return Math.sqrt(V*V+te*te)}function Ha(T,C,O){O||(O=er);var V=C[O[0]]-T[O[0]],te=C[O[1]]-T[O[1]];return Math.atan2(te,V)*180/Math.PI}function od(T,C){return Ha(C[1],C[0],Gt)+Ha(T[1],T[0],Gt)}function ad(T,C){return fi(C[0],C[1],Gt)/fi(T[0],T[1],Gt)}var ye={mousedown:ue,mousemove:Ee,mouseup:K},Ue="mousedown",pt="mousemove mouseup";function Le(){this.evEl=Ue,this.evWin=pt,this.pressed=!1,At.apply(this,arguments)}m(Le,At,{handler:function(C){var O=ye[C.type];O&ue&&C.button===0&&(this.pressed=!0),O&Ee&&C.which!==1&&(O=K),this.pressed&&(O&K&&(this.pressed=!1),this.callback(this.manager,O,{pointers:[C],changedPointers:[C],pointerType:le,srcEvent:C}))}});var vt={pointerdown:ue,pointermove:Ee,pointerup:K,pointercancel:q,pointerout:q},Ft={2:G,3:ge,4:le,5:ae},wn="pointerdown",pn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(wn="MSPointerDown",pn="MSPointerMove MSPointerUp MSPointerCancel");function zn(){this.evEl=wn,this.evWin=pn,At.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}m(zn,At,{handler:function(C){var O=this.store,V=!1,te=C.type.toLowerCase().replace("ms",""),he=vt[te],Qe=Ft[C.pointerType]||C.pointerType,_n=Qe==G,Sn=N(O,C.pointerId,"pointerId");he&ue&&(C.button===0||_n)?Sn<0&&(O.push(C),Sn=O.length-1):he&(K|q)&&(V=!0),!(Sn<0)&&(O[Sn]=C,this.callback(this.manager,he,{pointers:O,changedPointers:[C],pointerType:Qe,srcEvent:C}),V&&O.splice(Sn,1))}});var Ms={touchstart:ue,touchmove:Ee,touchend:K,touchcancel:q},nr="touchstart",di="touchstart touchmove touchend touchcancel";function zi(){this.evTarget=nr,this.evWin=di,this.started=!1,At.apply(this,arguments)}m(zi,At,{handler:function(C){var O=Ms[C.type];if(O===ue&&(this.started=!0),!!this.started){var V=eb.call(this,C,O);O&(K|q)&&V[0].length-V[1].length===0&&(this.started=!1),this.callback(this.manager,O,{pointers:V[0],changedPointers:V[1],pointerType:G,srcEvent:C})}}});function eb(T,C){var O=F(T.touches),V=F(T.changedTouches);return C&(K|q)&&(O=D(O.concat(V),"identifier",!0)),[O,V]}var tb={touchstart:ue,touchmove:Ee,touchend:K,touchcancel:q},nb="touchstart touchmove touchend touchcancel";function jr(){this.evTarget=nb,this.targetIds={},At.apply(this,arguments)}m(jr,At,{handler:function(C){var O=tb[C.type],V=Bt.call(this,C,O);V&&this.callback(this.manager,O,{pointers:V[0],changedPointers:V[1],pointerType:G,srcEvent:C})}});function Bt(T,C){var O=F(T.touches),V=this.targetIds;if(C&(ue|Ee)&&O.length===1)return V[O[0].identifier]=!0,[O,O];var te,he,Qe=F(T.changedTouches),_n=[],Sn=this.target;if(he=O.filter(function(Vn){return R(Vn.target,Sn)}),C===ue)for(te=0;te<he.length;)V[he[te].identifier]=!0,te++;for(te=0;te<Qe.length;)V[Qe[te].identifier]&&_n.push(Qe[te]),C&(K|q)&&delete V[Qe[te].identifier],te++;if(_n.length)return[D(he.concat(_n),"identifier",!0),_n]}var jn=2500,Rn=25;function ld(){At.apply(this,arguments);var T=y(this.handler,this);this.touch=new jr(this.manager,T),this.mouse=new Le(this.manager,T),this.primaryTouch=null,this.lastTouches=[]}m(ld,At,{handler:function(C,O,V){var te=V.pointerType==G,he=V.pointerType==le;if(!(he&&V.sourceCapabilities&&V.sourceCapabilities.firesTouchEvents)){if(te)rb.call(this,O,V);else if(he&&ib.call(this,V))return;this.callback(C,O,V)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function rb(T,C){T&ue?(this.primaryTouch=C.changedPointers[0].identifier,dc.call(this,C)):T&(K|q)&&dc.call(this,C)}function dc(T){var C=T.changedPointers[0];if(C.identifier===this.primaryTouch){var O={x:C.clientX,y:C.clientY};this.lastTouches.push(O);var V=this.lastTouches,te=function(){var he=V.indexOf(O);he>-1&&V.splice(he,1)};setTimeout(te,jn)}}function ib(T){for(var C=T.srcEvent.clientX,O=T.srcEvent.clientY,V=0;V<this.lastTouches.length;V++){var te=this.lastTouches[V],he=Math.abs(C-te.x),Qe=Math.abs(O-te.y);if(he<=Rn&&Qe<=Rn)return!0}return!1}var Ig=z(o.style,"touchAction"),hc=Ig!==i,pc="compute",cd="auto",ud="manipulation",ji="none",wo="pan-x",So="pan-y",xo=ob();function Xa(T,C){this.manager=T,this.set(C)}Xa.prototype={set:function(T){T==pc&&(T=this.compute()),hc&&this.manager.element.style&&xo[T]&&(this.manager.element.style[Ig]=T),this.actions=T.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var T=[];return h(this.manager.recognizers,function(C){b(C.options.enable,[C])&&(T=T.concat(C.getTouchAction()))}),sb(T.join(" "))},preventDefaults:function(T){var C=T.srcEvent,O=T.offsetDirection;if(this.manager.session.prevented){C.preventDefault();return}var V=this.actions,te=M(V,ji)&&!xo[ji],he=M(V,So)&&!xo[So],Qe=M(V,wo)&&!xo[wo];if(te){var _n=T.pointers.length===1,Sn=T.distance<2,Vn=T.deltaTime<250;if(_n&&Sn&&Vn)return}if(!(Qe&&he)&&(te||he&&O&Xe||Qe&&O&rt))return this.preventSrc(C)},preventSrc:function(T){this.manager.session.prevented=!0,T.preventDefault()}};function sb(T){if(M(T,ji))return ji;var C=M(T,wo),O=M(T,So);return C&&O?ji:C||O?C?wo:So:M(T,ud)?ud:cd}function ob(){if(!hc)return!1;var T={},C=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(O){T[O]=C?e.CSS.supports("touch-action",O):!0}),T}var Ya=1,en=2,Os=4,Vi=8,hi=Vi,pi=16,Vr=32;function yr(T){this.options=g({},this.defaults,T||{}),this.id=ee(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Ya,this.simultaneous={},this.requireFail=[]}yr.prototype={defaults:{},set:function(T){return g(this.options,T),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(T){if(d(T,"recognizeWith",this))return this;var C=this.simultaneous;return T=To(T,this),C[T.id]||(C[T.id]=T,T.recognizeWith(this)),this},dropRecognizeWith:function(T){return d(T,"dropRecognizeWith",this)?this:(T=To(T,this),delete this.simultaneous[T.id],this)},requireFailure:function(T){if(d(T,"requireFailure",this))return this;var C=this.requireFail;return T=To(T,this),N(C,T)===-1&&(C.push(T),T.requireFailure(this)),this},dropRequireFailure:function(T){if(d(T,"dropRequireFailure",this))return this;T=To(T,this);var C=N(this.requireFail,T);return C>-1&&this.requireFail.splice(C,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(T){return!!this.simultaneous[T.id]},emit:function(T){var C=this,O=this.state;function V(te){C.manager.emit(te,T)}O<Vi&&V(C.options.event+gc(O)),V(C.options.event),T.additionalEvent&&V(T.additionalEvent),O>=Vi&&V(C.options.event+gc(O))},tryEmit:function(T){if(this.canEmit())return this.emit(T);this.state=Vr},canEmit:function(){for(var T=0;T<this.requireFail.length;){if(!(this.requireFail[T].state&(Vr|Ya)))return!1;T++}return!0},recognize:function(T){var C=g({},T);if(!b(this.options.enable,[this,C])){this.reset(),this.state=Vr;return}this.state&(hi|pi|Vr)&&(this.state=Ya),this.state=this.process(C),this.state&(en|Os|Vi|pi)&&this.tryEmit(C)},process:function(T){},getTouchAction:function(){},reset:function(){}};function gc(T){return T&pi?"cancel":T&Vi?"end":T&Os?"move":T&en?"start":""}function _c(T){return T==Fe?"down":T==Be?"up":T==H?"left":T==je?"right":""}function To(T,C){var O=C.manager;return O?O.get(T):T}function vr(){yr.apply(this,arguments)}m(vr,yr,{defaults:{pointers:1},attrTest:function(T){var C=this.options.pointers;return C===0||T.pointers.length===C},process:function(T){var C=this.state,O=T.eventType,V=C&(en|Os),te=this.attrTest(T);return V&&(O&q||!te)?C|pi:V||te?O&K?C|Vi:C&en?C|Os:en:Vr}});function mc(){vr.apply(this,arguments),this.pX=null,this.pY=null}m(mc,vr,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ut},getTouchAction:function(){var T=this.options.direction,C=[];return T&Xe&&C.push(So),T&rt&&C.push(wo),C},directionTest:function(T){var C=this.options,O=!0,V=T.distance,te=T.direction,he=T.deltaX,Qe=T.deltaY;return te&C.direction||(C.direction&Xe?(te=he===0?de:he<0?H:je,O=he!=this.pX,V=Math.abs(T.deltaX)):(te=Qe===0?de:Qe<0?Be:Fe,O=Qe!=this.pY,V=Math.abs(T.deltaY))),T.direction=te,O&&V>C.threshold&&te&C.direction},attrTest:function(T){return vr.prototype.attrTest.call(this,T)&&(this.state&en||!(this.state&en)&&this.directionTest(T))},emit:function(T){this.pX=T.deltaX,this.pY=T.deltaY;var C=_c(T.direction);C&&(T.additionalEvent=this.options.event+C),this._super.emit.call(this,T)}});function Eo(){vr.apply(this,arguments)}m(Eo,vr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ji]},attrTest:function(T){return this._super.attrTest.call(this,T)&&(Math.abs(T.scale-1)>this.options.threshold||this.state&en)},emit:function(T){if(T.scale!==1){var C=T.scale<1?"in":"out";T.additionalEvent=this.options.event+C}this._super.emit.call(this,T)}});function fd(){yr.apply(this,arguments),this._timer=null,this._input=null}m(fd,yr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[cd]},process:function(T){var C=this.options,O=T.pointers.length===C.pointers,V=T.distance<C.threshold,te=T.deltaTime>C.time;if(this._input=T,!V||!O||T.eventType&(K|q)&&!te)this.reset();else if(T.eventType&ue)this.reset(),this._timer=f(function(){this.state=hi,this.tryEmit()},C.time,this);else if(T.eventType&K)return hi;return Vr},reset:function(){clearTimeout(this._timer)},emit:function(T){this.state===hi&&(T&&T.eventType&K?this.manager.emit(this.options.event+"up",T):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function gn(){vr.apply(this,arguments)}m(gn,vr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ji]},attrTest:function(T){return this._super.attrTest.call(this,T)&&(Math.abs(T.rotation)>this.options.threshold||this.state&en)}});function br(){vr.apply(this,arguments)}m(br,vr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Xe|rt,pointers:1},getTouchAction:function(){return mc.prototype.getTouchAction.call(this)},attrTest:function(T){var C=this.options.direction,O;return C&(Xe|rt)?O=T.overallVelocity:C&Xe?O=T.overallVelocityX:C&rt&&(O=T.overallVelocityY),this._super.attrTest.call(this,T)&&C&T.offsetDirection&&T.distance>this.options.threshold&&T.maxPointers==this.options.pointers&&c(O)>this.options.velocity&&T.eventType&K},emit:function(T){var C=_c(T.offsetDirection);C&&this.manager.emit(this.options.event+C,T),this.manager.emit(this.options.event,T)}});function wr(){yr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}m(wr,yr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ud]},process:function(T){var C=this.options,O=T.pointers.length===C.pointers,V=T.distance<C.threshold,te=T.deltaTime<C.time;if(this.reset(),T.eventType&ue&&this.count===0)return this.failTimeout();if(V&&te&&O){if(T.eventType!=K)return this.failTimeout();var he=this.pTime?T.timeStamp-this.pTime<C.interval:!0,Qe=!this.pCenter||fi(this.pCenter,T.center)<C.posThreshold;this.pTime=T.timeStamp,this.pCenter=T.center,!Qe||!he?this.count=1:this.count+=1,this._input=T;var _n=this.count%C.taps;if(_n===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=hi,this.tryEmit()},C.interval,this),en):hi}return Vr},failTimeout:function(){return this._timer=f(function(){this.state=Vr},this.options.interval,this),Vr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==hi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ln(T,C){return C=C||{},C.recognizers=S(C.recognizers,ln.defaults.preset),new dd(T,C)}ln.VERSION="2.0.7",ln.defaults={domEvents:!1,touchAction:pc,enable:!0,inputTarget:null,inputClass:null,preset:[[gn,{enable:!1}],[Eo,{enable:!1},["rotate"]],[br,{direction:Xe}],[mc,{direction:Xe},["swipe"]],[wr],[wr,{event:"doubletap",taps:2},["tap"]],[fd]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ns=1,Ao=2;function dd(T,C){this.options=g({},ln.defaults,C||{}),this.options.inputTarget=this.options.inputTarget||T,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=T,this.input=mr(this),this.touchAction=new Xa(this,this.options.touchAction),TA(this,!0),h(this.options.recognizers,function(O){var V=this.add(new O[0](O[1]));O[2]&&V.recognizeWith(O[2]),O[3]&&V.requireFailure(O[3])},this)}dd.prototype={set:function(T){return g(this.options,T),T.touchAction&&this.touchAction.update(),T.inputTarget&&(this.input.destroy(),this.input.target=T.inputTarget,this.input.init()),this},stop:function(T){this.session.stopped=T?Ao:Ns},recognize:function(T){var C=this.session;if(!C.stopped){this.touchAction.preventDefaults(T);var O,V=this.recognizers,te=C.curRecognizer;(!te||te&&te.state&hi)&&(te=C.curRecognizer=null);for(var he=0;he<V.length;)O=V[he],C.stopped!==Ao&&(!te||O==te||O.canRecognizeWith(te))?O.recognize(T):O.reset(),!te&&O.state&(en|Os|Vi)&&(te=C.curRecognizer=O),he++}},get:function(T){if(T instanceof yr)return T;for(var C=this.recognizers,O=0;O<C.length;O++)if(C[O].options.event==T)return C[O];return null},add:function(T){if(d(T,"add",this))return this;var C=this.get(T.options.event);return C&&this.remove(C),this.recognizers.push(T),T.manager=this,this.touchAction.update(),T},remove:function(T){if(d(T,"remove",this))return this;if(T=this.get(T),T){var C=this.recognizers,O=N(C,T);O!==-1&&(C.splice(O,1),this.touchAction.update())}return this},on:function(T,C){if(T!==i&&C!==i){var O=this.handlers;return h(k(T),function(V){O[V]=O[V]||[],O[V].push(C)}),this}},off:function(T,C){if(T!==i){var O=this.handlers;return h(k(T),function(V){C?O[V]&&O[V].splice(N(O[V],C),1):delete O[V]}),this}},emit:function(T,C){this.options.domEvents&&_U(T,C);var O=this.handlers[T]&&this.handlers[T].slice();if(!(!O||!O.length)){C.type=T,C.preventDefault=function(){C.srcEvent.preventDefault()};for(var V=0;V<O.length;)O[V](C),V++}},destroy:function(){this.element&&TA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function TA(T,C){var O=T.element;if(O.style){var V;h(T.options.cssProps,function(te,he){V=z(O.style,he),C?(T.oldCssProps[V]=O.style[V],O.style[V]=te):O.style[V]=T.oldCssProps[V]||""}),C||(T.oldCssProps={})}}function _U(T,C){var O=n.createEvent("Event");O.initEvent(T,!0,!0),O.gesture=C,C.target.dispatchEvent(O)}g(ln,{INPUT_START:ue,INPUT_MOVE:Ee,INPUT_END:K,INPUT_CANCEL:q,STATE_POSSIBLE:Ya,STATE_BEGAN:en,STATE_CHANGED:Os,STATE_ENDED:Vi,STATE_RECOGNIZED:hi,STATE_CANCELLED:pi,STATE_FAILED:Vr,DIRECTION_NONE:de,DIRECTION_LEFT:H,DIRECTION_RIGHT:je,DIRECTION_UP:Be,DIRECTION_DOWN:Fe,DIRECTION_HORIZONTAL:Xe,DIRECTION_VERTICAL:rt,DIRECTION_ALL:Ut,Manager:dd,Input:At,TouchAction:Xa,TouchInput:jr,MouseInput:Le,PointerEventInput:zn,TouchMouseInput:ld,SingleTouchInput:zi,Recognizer:yr,AttrRecognizer:vr,Tap:wr,Pan:mc,Swipe:br,Pinch:Eo,Rotate:gn,Press:fd,on:A,off:I,each:h,merge:_,extend:v,assign:g,inherit:m,bindFn:y,prefixed:z});var mU=typeof e<"u"?e:typeof self<"u"?self:{};mU.Hammer=ln,typeof i=="function"&&i.amd?i(function(){return ln}):t.exports?t.exports=ln:e[r]=ln})(window,document,"Hammer")})(Pk);var mg=Pk.exports;const See=Un(mg),qi=oO({__proto__:null,default:See},[mg]),Ik=1,Mk=2,AS=4,xee={mousedown:Ik,mousemove:Mk,mouseup:AS};function Tee(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function Eee(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(Tee(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function Aee(t){t.prototype.handler=function(n){let r=xee[n.type];r&Ik&&n.button>=0&&(this.pressed=!0),r&Mk&&n.which===0&&(r=AS),this.pressed&&(r&AS&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}Eee(mg.PointerEventInput);Aee(mg.MouseInput);const Cee=mg.Manager;class Lv{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const Ree=qi?[[qi.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[qi.Rotate,{enable:!1}],[qi.Pinch,{enable:!1}],[qi.Swipe,{enable:!1}],[qi.Pan,{threshold:0,enable:!1}],[qi.Press,{enable:!1}],[qi.Tap,{event:"doubletap",taps:2,enable:!1}],[qi.Tap,{event:"anytap",enable:!1}],[qi.Tap,{enable:!1}]]:null,SP={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Pee={doubletap:["tap"]},Iee={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},OT={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Mee={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},xP={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Oee=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",uu=typeof window<"u"?window:global;let CS=!1;try{const t={get passive(){return CS=!0,!0}};uu.addEventListener("test",null,t),uu.removeEventListener("test",null)}catch{CS=!1}const Nee=Oee.indexOf("firefox")!==-1,{WHEEL_EVENTS:kee}=OT,TP="wheel",EP=4.000244140625,Dee=40,Fee=.25;class Bee extends Lv{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;uu.WheelEvent&&(Nee&&i.deltaMode===uu.WheelEvent.DOM_DELTA_PIXEL&&(s/=uu.devicePixelRatio),i.deltaMode===uu.WheelEvent.DOM_DELTA_LINE&&(s*=Dee)),s!==0&&s%EP===0&&(s=Math.floor(s/EP)),i.shiftKey&&s&&(s=s*Fee),this.callback({type:TP,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(kee),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,CS?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===TP&&(this.options.enable=n)}}const{MOUSE_EVENTS:Lee}=OT,AP="pointermove",CP="pointerover",RP="pointerout",PP="pointerenter",IP="pointerleave";class $ee extends Lv{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(Lee),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===AP&&(this.enableMoveEvent=n),e===CP&&(this.enableOverEvent=n),e===RP&&(this.enableOutEvent=n),e===PP&&(this.enableEnterEvent=n),e===IP&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(CP,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(RP,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(PP,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(IP,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(AP,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:Uee}=OT,MP="keydown",OP="keyup";class zee extends Lv{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:MP,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:OP,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Uee),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===MP&&(this.enableDownEvent=n),e===OP&&(this.enableUpEvent=n)}}const NP="contextmenu";class jee extends Lv{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:NP,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===NP&&(this.options.enable=n)}}const RS=1,y0=2,PS=4,Vee={pointerdown:RS,pointermove:y0,pointerup:PS,mousedown:RS,mousemove:y0,mouseup:PS},Wee=1,Hee=2,Xee=3,Yee=0,Kee=1,qee=2,Zee=1,Qee=2,Gee=4;function Jee(t){const e=Vee[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===PS||e===y0&&!Number.isFinite(n)?(s=i===Wee,o=i===Hee,a=i===Xee):e===y0?(s=!!(n&Zee),o=!!(n&Gee),a=!!(n&Qee)):e===RS&&(s=r===Yee,o=r===Kee,a=r===qee),{leftButton:s,middleButton:o,rightButton:a}}function ete(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const lw={srcElement:"root",priority:0};class tte{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=lw;typeof r=="string"||r&&r.addEventListener?l={...lw,srcElement:r}:r&&(l={...lw,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let f=c.length-1;for(;f>=0&&!(c[f].priority>=u.priority);)f--;c.splice(f+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:f}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...Jee(e),...ete(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const nte={events:null,recognizers:null,recognizerOptions:{},Manager:Cee,touchAction:"none",tabIndex:0};class rte{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=Iee[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...nte,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Ree}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(SP).forEach(i=>{const s=this.manager.get(i);s&&SP[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new Bee(e,this._onOtherEvent,{enable:!1}),this.moveInput=new $ee(e,this._onOtherEvent,{enable:!1}),this.keyInput=new zee(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new jee(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=Pee[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=xP[e]||e;let c=a.get(l);c||(c=new tte(this),a.set(l,c),c.recognizerName=Mee[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=xP[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function No(){}const ite=({isDragging:t})=>t?"grabbing":"grab",kP={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:No,onWebGLInitialized:No,onResize:No,onViewStateChange:No,onInteractionStateChange:No,onBeforeRender:No,onAfterRender:No,onLoad:No,onError:t=>qe.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ite,getTooltip:null,debug:!1,drawPickingColors:!1},Zy=class Zy{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Mv({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=r=>{const{_pickRequest:i}=this;if(r.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(r.leftButton||r.rightButton)return;{const s=r.offsetCenter;if(!s)return;i.x=s.x,i.y=s.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=r},this._onEvent=r=>{const i=_S[r.type],s=r.offsetCenter;if(!i||!s||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:o,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:l}=a,c=l&&(l[i.handler]||l.props[i.handler]),u=this.props[i.handler];let f=!1;c&&(f=c.call(l,a,r)),f||(u==null||u(a,r),this.widgetManager.onEvent(a,r))},this._onPointerDown=r=>{const i=r.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo},this.props={...kP,...e},e=this.props,e.viewState&&e.initialViewState&&qe.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device?this.device=e.device:e.gl&&(e.gl instanceof WebGLRenderingContext&&qe.error("WebGL1 context not supported.")(),this.device=Nh.attach(e.gl));let n=this.device;n||(xu.registerDevices([Nh]),n=xu.createDevice({...e.deviceProps,canvas:this._createCanvas(e)})),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&_f.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l,c,u;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(r=this.layerManager)==null||r.finalize(),this.layerManager=null,(i=this.viewManager)==null||i.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(o=this.deckRenderer)==null||o.finalize(),this.deckRenderer=null,(a=this.deckPicker)==null||a.finalize(),this.deckPicker=null,(l=this.eventManager)==null||l.destroy(),this.eventManager=null,(c=this.widgetManager)==null||c.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((u=this.canvas.parentElement)==null||u.removeChild(this.canvas),this.canvas=null)}setProps(e){var r;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&qe.removed("onLayerHover","onHover")(),"onLayerClick"in e&&qe.removed("onLayerClick","onClick")(),e.initialViewState&&!Ai(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(r=this.animationLoop)==null||r.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return rn(this.viewManager),this.viewManager.views}getViewports(e){return rn(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,r){rn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),rn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var i;if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=s}if(r||r===0){const s=Number.isFinite(r)?`${r}px`:r;this.canvas.style.position=((i=e.style)==null?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var i,s;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,r=e.clientHeight??e.height;(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,(i=this.viewManager)==null||i.setProps({width:n,height:r}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:r}))}_createAnimationLoop(e,n){const{gl:r,onError:i,useDevicePixels:s}=n;return new gQ({device:e,useDevicePixels:s,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,onInitialize:o=>this._setDevice(o.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new _0({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,r,i;const{_pickRequest:e}=this;if(e.event){const{result:s,emptyInfo:o}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=s.length>0;let a=o,l=!1;for(const c of s)a=c,l=((n=c.layer)==null?void 0:n.onHover(c,e.event))||l;l||((i=(r=this.props).onHover)==null||i.call(r,a,e.event),this.widgetManager.onHover(a,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var i,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(i=this.device.canvasContext)==null?void 0:i.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof Nh&&this.props.onWebGLInitialized(this.device.gl);const n=new uk;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new rte(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const o in _S)this.eventManager.on(o,this._onEvent);this.viewManager=new VQ({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new jQ(this.device,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new oG({deck:this,device:this.device}),this.deckRenderer=new cG(this.device),this.deckPicker=new gG(this.device),this.widgetManager=new yG({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new bG),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var o;const{device:r,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:r,gl:i});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(o=this.deckRenderer)==null||o.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:r,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),qe.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=xu.stats.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}};Zy.defaultProps=kP,Zy.VERSION=OX;let _p=Zy;function ste(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return M5(t)}}const ote=I5;function f_(t,e){return{attribute:t,format:e.size>1?`${e.type}x${e.size}`:e.type,byteOffset:e.offset||0}}function pl(t){return t.stride||t.size*t.bytesPerElement}function ate(t,e){return t.type===e.type&&t.size===e.size&&pl(t)===pl(e)&&(t.offset||0)===(e.offset||0)}function IS(t,e){e.offset&&qe.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=pl(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function lte(t,e){const n=IS(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class cte{constructor(e,n,r){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i==="float64";let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a="float32":!i&&n.isIndexed?a="uint32":a=i||"float32";let l=ste(i||a);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,normalized:a.includes("norm"),size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*pl(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),_f.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const r={};if(this.state.constant){const i=this.value;if(n){const s=IS(this.getAccessor(),n),o=s.offset/i.BYTES_PER_ELEMENT,a=s.size||this.size;r[e]=i.subarray(o,o+a)}else r[e]=i}else r[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?r[`${e}64Low`]=r[e]:r[`${e}64Low`]=new Float32Array(this.size)),r}_getBufferLayout(e=this.id,n=null){const r=this.getAccessor(),i=[],s={name:this.id,byteStride:pl(r),attributes:i};if(this.doublePrecision){const o=lte(r,n||{});i.push(f_(e,{...r,...o.high}),f_(`${e}64Low`,{...r,...o.low}))}else if(n){const o=IS(r,n);i.push(f_(e,{...r,...o}))}else i.push(f_(e,r));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof qt?r={buffer:e}:r=e;const i={...this.settings,...r};if(ArrayBuffer.isView(r.value)){if(!r.type)if(this.doublePrecision&&r.value instanceof Float64Array)i.type="float32";else{const o=ote(r.value);i.type=i.normalized?o.replace("int","norm"):o}i.bytesPerElement=r.value.BYTES_PER_ELEMENT,i.stride=pl(i)}if(n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s;let{buffer:o}=this;const a=pl(i),l=(i.vertexOffset||0)*a;if(this.doublePrecision&&s instanceof Float64Array&&(s=qb(s,i)),this.settings.isIndexed){const u=this.settings.defaultType;s.constructor!==u&&(s=new u(s))}const c=s.byteLength+l+a*2;(!o||o.byteLength<c)&&(o=this._createBuffer(c)),o.write(s,l)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?qb(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),r*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=_f.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{byteOffset:o}=this;let{buffer:a}=this;return(!a||a.byteLength<s.byteLength+o)&&(a=this._createBuffer(s.byteLength+o),n&&i&&a.write(i instanceof Float64Array?qb(i,this):i,o)),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&qe.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}_createBuffer(e){var i;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:r}=this.settings;return this._buffer=this.device.createBuffer({...(i=this._buffer)==null?void 0:i.props,id:this.id,usage:n?qt.INDEX:qt.VERTEX,indexType:n?r:void 0,byteLength:e}),this._buffer}}const DP=[],FP=[];function $v(t,e=0,n=1/0){let r=DP;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(FP.length=t.length,r=FP):r=DP,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function Ok(t){return t&&t[Symbol.asyncIterator]}function Nk(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(f,{index:d,target:h})=>{if(!s){const _=d*l+c;for(let m=0;m<n;m++)h[m]=t[_+m];return h}const p=s[d],g=s[d+1]||u;let v;if(o){v=new Array(g-p);for(let _=p;_<g;_++){const m=_*l+c;h=new Array(n);for(let y=0;y<n;y++)h[y]=t[m+y];v[_-p]=h}}else if(l===n)v=t.subarray(p*n+c,g*n+c);else{v=new t.constructor((g-p)*n);let _=0;for(let m=p;m<g;m++){const y=m*l+c;for(let b=0;b<n;b++)v[_++]=t[y+b]}}return v}}const ute=[],im=[[0,1/0]];function fte(t,e){if(t===im||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}const dte={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function kk(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...dte[n],...e,...t,type:n}}class Dk extends cte{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:im}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!ate(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return kk(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=fte(this.state.updateRanges,[r,i])}else this.state.updateRanges=im}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=ute}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==im),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,d=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:d})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;rn(ArrayBuffer.isView(o.value),`invalid ${i.accessor}`);const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=Nk(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const r in e)Object.assign(n,super.getValue(r,e[r]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,r=super._getBufferLayout(),{stepMode:i}=this.settings;if(i==="dynamic"?r.stepMode=e?e.isInstanced?"instance":"vertex":"instance":r.stepMode=i??"vertex",!n)return r;for(const s in n){const o=super._getBufferLayout(s,n[s]);r.attributes.push(...o.attributes)}return r}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:f}=e,{accessor:d,transform:h}=a,p=l.binaryAccessor||(typeof d=="function"?d:s[d]);rn(typeof p=="function",`accessor "${d}" is not a function`);let g=e.getVertexOffset(r);const{iterable:v,objectInfo:_}=$v(n,r,i);for(const m of v){_.index++;let y=p(m,_);if(h&&(y=h.call(this,y)),f){const b=(_.index<f.length-1?f[_.index+1]:o)-f[_.index];if(y&&Array.isArray(y[0])){let S=g;for(const A of y)e._normalizeValue(A,c,S),S+=u}else y&&y.length>u?c.set(y,g):(e._normalizeValue(y,_.target,0),BQ({target:c,source:_.target,start:g,count:b}));g+=b*u}else e._normalizeValue(y,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function cw(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let f=0;f<i;f++)n[r+c]=u[f]||0,c++}}function hte({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!i||!s)return cw({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,f)=>r(u+a,f)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const f=i[u]*n,d=s[u]*n;cw({source:t.subarray(o,f),target:e,start:a,end:d,size:n,getData:l}),o=f,a=d}return a<e.length&&cw({source:[],target:e,start:a,size:n,getData:l}),e}function pte(t){const{device:e,settings:n,value:r}=t,i=new Dk(e,n);return i.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),i}function Fk(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function Bk(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function Lk(t){t.push(t.shift())}function gte(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;let a=0;const{shaderAttributes:l}=t.settings;if(l)for(const c of Object.values(l))a=Math.max(a,c.vertexOffset??0);return(r.noAlloc?i.length:(e+a)*s)*o}function $k({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function Uk({device:t,buffer:e,attribute:n,fromLength:r,toLength:i,fromStartIndices:s,getData:o=a=>a}){const a=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*a,c=n.byteOffset,u=n.settings.bytesPerElement<4?c/n.settings.bytesPerElement*4:c,f=n.startIndices,d=s&&f,h=n.isConstant;if(!d&&e&&r>=i)return e;const p=n.value instanceof Float64Array?Float32Array:n.value.constructor,g=h?n.value:new p(n.getBuffer().readSyncWebGL(c,i*p.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!h){const y=o;o=(b,S)=>n.normalizeConstant(y(b,S))}const v=h?(y,b)=>o(g,b):(y,b)=>o(g.subarray(y+c,y+c+l),b),_=e?new Float32Array(e.readSyncWebGL(u,r*4).buffer):new Float32Array(0),m=new Float32Array(i);return hte({source:_,target:m,sourceStartIndices:s,targetStartIndices:f,size:l,getData:v}),(!e||e.byteLength<m.byteLength+u)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:m.byteLength+u,usage:35050})),e.write(m,u),e}class zk{constructor({device:e,attribute:n,timeline:r}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Dv(r),this.attribute=n,this.attributeInTransition=pte(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,r=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=gte(this.attribute,n),this.transition.start({...e,duration:r})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class _te extends zk{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="interpolation",this.transform=vte(e,n)}start(e,n){const r=this.currentLength,i=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:o}=this;Lk(s),s[0]=Uk({device:this.device,buffer:s[0],attribute:o,fromLength:r,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),s[1]=$k({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:a}=this,l=a.model;let c=Math.floor(this.currentLength/o.size);jk(o)&&(c/=2),l.setVertexCount(c),o.isConstant?(l.setAttributes({aFrom:s[0]}),l.setConstantAttributes({aTo:o.value})):l.setAttributes({aFrom:s[0],aTo:o.getBuffer()}),a.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:r}=this.transition;let i=r/e;n&&(i=n(i));const{model:s}=this.transform;s.setUniforms({time:i}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const mte=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`,yte=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function jk(t){return t.doublePrecision&&t.value instanceof Float64Array}function vte(t,e){const n=e.size,r=Fk(n),i=Bk(n),s=e.getBufferLayout();return jk(e)?new pp(t,{vs:yte,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*n}]}],modules:[rq],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new pp(t,{vs:mte,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:s.attributes[0].format}],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}class bte extends zk{constructor({device:e,attribute:n,timeline:r}){super({device:e,attribute:n,timeline:r}),this.type="spring",this.texture=Tte(e),this.framebuffer=Ete(e,this.texture),this.transform=xte(e,n)}start(e,n){const r=this.currentLength,i=this.currentStartIndices;super.start(e,n);const{buffers:s,attribute:o}=this;for(let l=0;l<2;l++)s[l]=Uk({device:this.device,buffer:s[l],attribute:o,fromLength:r,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});s[2]=$k({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:a}=this.transform;a.setVertexCount(Math.floor(this.currentLength/o.size)),o.isConstant?a.setConstantAttributes({aTo:o.value}):a.setAttributes({aTo:o.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this,s=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]}),n.model.setUniforms({stiffness:s.stiffness,damping:s.damping}),n.run({framebuffer:r,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),Lk(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(r)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const wte=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,Ste=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function xte(t,e){const n=Fk(e.size),r=Bk(e.size);return new pp(t,{vs:wte,fs:Ste,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function Tte(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function Ete(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const Ate={interpolation:_te,spring:bte};class Cte{constructor(e,{id:n,timeline:r}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){i&&this._removeTransition(e);const o=Ate[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,device:this.device}):(qe.error(`unsupported transition type '${r.type}'`)(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const BP="attributeManager.invalidate",Rte="attributeManager.updateStart",Pte="attributeManager.updateEnd",Ite="attribute.updateStart",Mte="attribute.allocate",Ote="attribute.updateEnd";class Nte{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){this.mergeBoundsMemoized=_g(iQ),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Cte(e,{id:`${n}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Dn(BP,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Dn(BP,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;Dn(Rte,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],f=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&qe.removed(`props.${c}`,`data.attributes.${c}`)(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof f=="string"?o[f]:void 0,e.startIndices)||typeof f=="string"&&!o[f]&&u.setConstantValue(s[f])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Dn(Pte,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])==null?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const r in e){const i=e[r],s={...i,id:r,size:i.isIndexed&&1||i.size||1,...n};this.attributes[r]=new Dk(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Dn(Ite,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Dn(Mte,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Dn(Ote,n,r))}}class kte extends Dv{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=u0(n,r,o)}}const LP=1e-5;function $P(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function Dte(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=$P(t[o],e[o],n[o],r,i);return s}return $P(t,e,n,r,i)}function UP(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class Fte extends Dv{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=Dte(s,o,n,r,i);const l=UP(a,n),c=UP(a,o);l<LP&&c<LP&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const Bte={interpolation:kte,spring:Fte};class Lte{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=kk(i),!i)return;const o=Bte[i.type];if(!o){qe.error(`unsupported transition type '${i.type}'`)();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function $te(t){const e=t[_a];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function Ute(t,e){const n=Vk({newProps:t,oldProps:e,propTypes:t[_a],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=jte(t,e);let i=!1;return r||(i=Vte(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Wte(t,e),transitionsChanged:zte(t,e)}}function zte(t,e){if(!t.transitions)return!1;const n={},r=t[_a];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&MS(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function Vk({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${i} changed shallowly`;if(typeof e!="object"||e===null)return`${i} changed shallowly`;for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return`${i}.${s} added`;const o=MS(t[s],e[s],r[s]);if(o)return`${i}.${s} ${o}`}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return`${i}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const o=MS(t[s],e[s],r[s]);if(o)return`${i}.${s} ${o}`}}return!1}function MS(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function jte(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function Vte(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&zP(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&zP(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function Wte(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function zP(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},Vk({oldProps:i,newProps:r,triggerName:n})}const Hte="count(): argument not an object",Xte="count(): argument not a container";function Yte(t){if(!qte(t))throw new Error(Hte);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Kte(t))return Object.keys(t).length;throw new Error(Xte)}function Kte(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function qte(t){return t!==null&&typeof t=="object"}function jP(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const Zte={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},OS={};function Qte(t,e,n,r){if(n instanceof ri)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const s=e.createTexture({...n,sampler:{...Zte,...i,...r}});return OS[s.id]=t,s}function Gte(t,e){!e||!(e instanceof ri)||OS[e.id]===t&&(e.delete(),delete OS[e.id])}const Jte={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||NS(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Ai(t,e,1)}},accessor:{validate(t,e){const n=v0(t);return n==="function"||n===v0(e.value)},equal(t,e,n){return typeof e=="function"?!0:Ai(t,e,1)}},array:{validate(t,e){return e.optional&&!t||NS(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ai(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ai(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:r}=n.props;return r?r(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.device?null:Qte(n.id,r.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{Gte(n.id,t)}}};function ene(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=tne(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function tne(t,e){switch(v0(e)){case"object":return Id(t,e);case"array":return Id(t,{type:"array",value:e,compare:!1});case"boolean":return Id(t,{type:"boolean",value:e});case"number":return Id(t,{type:"number",value:e});case"function":return Id(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Id(t,e){return"type"in e?{name:t,...Jte[e.type],...e}:"value"in e?{name:t,type:v0(e.value),...e}:{name:t,type:"object",value:e}}function NS(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function v0(t){return NS(t)?"array":t===null?"null":typeof t}function nne(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=kS(t.constructor,n),i=Object.create(r);i[g0]=t,i[zl]={},i[ra]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const rne="_mergedDefaultProps";function kS(t,e){let n=rne;if(e)for(const i of e){const s=i.constructor;s&&(n+=`:${s.extensionName||s.name}`)}const r=Wk(t,n);return r||(t[n]=ine(t,e||[]))}function ine(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=kS(r),s=Wk(t,"defaultProps")||{},o=ene(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[_a],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[Gb],o.deprecatedProps);for(const u of e){const f=kS(u.constructor);f&&(Object.assign(a,f),Object.assign(l,f[_a]),Object.assign(c,f[Gb]))}return sne(a,t),ane(a,l),one(a,c),a[_a]=l,a[Gb]=c,e.length===0&&!NT(t,"_propTypes")&&(t._propTypes=l),a}function sne(t,e){const n=cne(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function one(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i=`${this.id}: ${n}`;for(const s of e[n])NT(this,s)||(this[s]=r);qe.deprecated(i,e[n].join("/"))()}})}function ane(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=lne(o))}t[Au]=n,t[zl]={},Object.defineProperties(t,r)}function lne(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||Ok(e)?this[zl][t]=e:this[ra][t]=e},get(){if(this[ra]){if(t in this[ra])return this[ra][t]||this[Au][t];if(t in this[zl]){const e=this[g0]&&this[g0].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Au][t]}}return this[Au][t]}}}function NT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wk(t,e){return NT(t,e)&&t[e]}function cne(t){const e=t.componentName;return e||qe.warn(`${t.name}.componentName not specified`)(),e||t.name}let une=0;const Qy=class Qy{constructor(...e){this.props=nne(this,e),this.id=this.props.id,this.count=une++}clone(e){const{props:n}=this,r={};for(const i in n[Au])i in n[ra]?r[i]=n[ra][i]:i in n[zl]&&(r[i]=n[zl][i]);return new this.constructor({...n,...r,...e})}};Qy.componentName="Component",Qy.defaultProps={};let DS=Qy;const fne=Object.freeze({});class dne{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||fne}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[g0]||this.component;const n=e[ra]||{},r=e[zl]||e,i=e[Au]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(Ok(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[_a];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class hne extends dne{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,`loading ${e} of ${this.layer}`)}}const pne="layer.changeFlag",gne="layer.initialize",_ne="layer.update",mne="layer.finalize",yne="layer.matched",VP=2**24-1,vne=Object.freeze([]),bne=_g(({oldViewport:t,viewport:e})=>t.equals(e));let Zi=new Uint8ClampedArray(0);const wne={data:{type:"data",value:vne,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;i=i||n.getLoadOptions(),r=r||n.props.loaders,s&&(i={...i,fetch:{...i==null?void 0:i.fetch,signal:s}});let a=o.contains(t);return!a&&!i&&(o.add({resourceId:t,data:t0(t,r),persistent:!1}),a=!0),a?o.subscribe({resourceId:t,onChange:l=>{var c;return(c=n.internalState)==null?void 0:c.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):t0(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:it.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Gy=class Gy extends DS{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Dc.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){rn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=ck(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=ok(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return rn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){rn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return uQ(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===it.DEFAULT||e===it.LNGLAT||e===it.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){rn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Yte(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=jP(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=jP(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i,s,o;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(i=(r=this.props).onError)!=null&&i.call(r,e)||(o=(s=this.context)==null?void 0:s.onError)==null||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!bne({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const r in e)e[r].layoutChanged()&&(n=!0);for(const r of this.getModels())this._setModelAttributes(r,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Zi.length/4);if(this.internalState.usesPickingColorCache=!0,r<n){n>VP&&qe.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Zi=_f.allocate(Zi,n,{size:4,copy:!0,maxCount:Math.max(n,VP)});const i=Math.floor(Zi.length/4),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Zi[o*4+0]=s[0],Zi[o*4+1]=s[1],Zi[o*4+2]=s[2]}e.value=Zi.subarray(0,n*4)}_setModelAttributes(e,n,r=!1){var a;if(!Object.keys(n).length)return;if(r){const l=this.getAttributeManager();e.setBufferLayout(l.getBufferLayouts(e)),n=l.getAttributes()}const i=((a=e.userData)==null?void 0:a.excludeAttributes)||{},s={},o={};for(const l in n){if(i[l])continue;const c=n[l].getValue();for(const u in c){const f=c[u];f instanceof qt?n[l].settings.isIndexed?e.setIndexBuffer(f):s[u]=f:f&&(o[u]=f)}}e.setAttributes(s),e.setConstantAttributes(o)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(o-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Zi.buffer&&(r.value=Zi.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){rn(!this.internalState),rn(Number.isFinite(this.props.coordinateSystem)),Dn(gne,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new hne({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(qe.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Lte(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Dn(yne,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Dn(_ne,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.device)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Dn(mne,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,moduleParameters:n=null,uniforms:r={},parameters:i={}}){this._updateAttributeTransition();const s=this.props,o=this.context;this.props=this.internalState.propsInTransition||s;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{if(n){const{isActive:u,isAttribute:f}=n.picking;this.setModuleParameters(n),this.setShaderModuleProps({picking:{isActive:u,isAttribute:f}})}const{getPolygonOffset:l}=this.props,c=l&&l(r)||[0,0];o.device.setParametersWebGL({polygonOffset:c});for(const u of this.getModels())u.setParameters(i);o.device.withParametersWebGL(i,()=>{const u={renderPass:e,moduleParameters:n,uniforms:r,parameters:i,context:o};for(const f of this.props.extensions)f.draw.call(this,u,f);this.draw(u)})}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Dn(pne,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var i;const r=Ute(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)==null?void 0:i[s]);return this.setChangeFlags(r)}validateProps(){$te(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.highlightColor=r(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Nte(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.highlightedObjectColor=null),Array.isArray(l)&&(c.highlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.highlightedObjectColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setShaderModuleProps({picking:c})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};Gy.defaultProps=wne,Gy.layerName="Layer";let ao=Gy;const Sne="compositeLayer.renderLayers",xA=class xA extends ao{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var I;const{opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:d,positionFormat:h,modelMatrix:p,extensions:g,fetch:v,operation:_,_subLayerProps:m}=this.props,y={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:d,positionFormat:h,modelMatrix:p,extensions:g,fetch:v,operation:_},b=m&&e.id&&m[e.id],S=b&&b.updateTriggers,A=e.id||"sublayer";if(b){const R=this.props[_a],M=e.type?e.type._propTypes:{};for(const k in b){const N=M[k]||R[k];N&&N.type==="accessor"&&(b[k]=this.getSubLayerAccessor(b[k]))}}Object.assign(y,e,b),y.id=`${this.props.id}-${A}`,y.updateTriggers={all:(I=this.props.updateTriggers)==null?void 0:I.all,...e.updateTriggers,...S};for(const R of g){const M=R.getSubLayerProps.call(this,R);M&&Object.assign(y,M,{updateTriggers:Object.assign(y.updateTriggers,M.updateTriggers)})}return y}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=mf(s,Boolean),this.internalState.subLayers=r}Dn(Sne,this,i,r);for(const s of r)s.parent=this}};xA.layerName="CompositeLayer";let b0=xA;class Hk{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:n={}}=e;this.typedArrayManager=_f,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(rn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.vertexPositions=s)),this.geometryBuffer=r.vertexPositions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?Nk(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=$v(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((f,d)=>{const h=f&&this.normalizeGeometry(f);c[d]=h,r[d+1]=r[d]+(h?this.getGeometrySize(h):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof qt){const f=this.positionSize*4;i=i||o.byteLength/f}else if(o.buffer){const f=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/f}else if(o.value){const f=o.value,d=o.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/d}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((f,d)=>{const h=c[d]||f;u.vertexStart=r[d],u.indexStart=n[d];const p=d<r.length-1?r[d+1]:i;u.geometrySize=p-r[d],u.geometryIndex=d,this.updateGeometryAttributes(h,u)},a,l),this.vertexCount=n[n.length-1]}}const uw=512,xne=Math.PI/180;function Xk({map:t,gl:e,deck:n}){if(t.__deck)return t.__deck;const r=n==null?void 0:n.props._customRender,i=n==null?void 0:n.props.onLoad,s=Kk({...n==null?void 0:n.props,_customRender:()=>{t.triggerRepaint(),r==null||r("")}});let o;return(!n||n.props.gl===e)&&(Object.assign(s,{gl:e,width:null,height:null,touchAction:"unset",viewState:mp(t)}),n!=null&&n.isInitialized?WP(n,t):s.onLoad=()=>{i==null||i(),WP(o,t)}),n?(o=n,n.setProps(s),n.userData.isExternal=!0):(o=new _p(s),t.on("remove",()=>{Yk(t)})),o.userData.mapboxLayers=new Set,t.__deck=o,t.on("render",()=>{o.isInitialized&&Pne(o,t)}),o}function WP(t,e){const n=()=>{t.isInitialized?Ine(t,e):e.off("move",n)};e.on("move",n)}function Yk(t){var e;(e=t.__deck)==null||e.finalize(),t.__deck=null}function Kk(t){return{...t,parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774,...t.parameters},views:t.views||[new _0({id:"mapbox"})]}}function Tne(t,e){t.userData.mapboxLayers.add(e),kT(t)}function Ene(t,e){t.userData.mapboxLayers.delete(e),kT(t)}function Ane(t,e){kT(t)}function Cne(t,e,n){let{currentViewport:r}=t.userData,i=!1;r||(r=qk(t,e,!0),t.userData.currentViewport=r,i=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[r],layerFilter:({layer:s})=>n.id===s.id||s.props.operation.includes("terrain"),clearStack:i,clearCanvas:!1})}function mp(t){var i;const{lng:e,lat:n}=t.getCenter(),r={longitude:(e+540)%360-180,latitude:n,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()};return(i=t.getTerrain)!=null&&i.call(t)&&Rne(t,r),r}function Rne(t,e){if(t.getFreeCameraOptions){const{position:n}=t.getFreeCameraOptions();if(!n||n.z===void 0)return;const r=t.transform.height,{longitude:i,latitude:s,pitch:o}=e,a=n.x*uw,l=(1-n.y)*uw,c=n.z*uw,u=dp([i,s]),f=a-u[0],d=l-u[1],h=Math.sqrt(f*f+d*d),p=o*xne,g=1.5*r,v=p<.001?g*Math.cos(p)/c:g*Math.sin(p)/h;e.zoom=Math.log2(v);const _=g*Math.cos(p)/v,m=c-_;e.position=[0,0,m/rm(s)]}else typeof t.transform.elevation=="number"&&(e.position=[0,0,t.transform.elevation])}function qk(t,e,n=!0){return new hp({id:"mapbox",x:0,y:0,width:t.width,height:t.height,...mp(e),nearZMultiplier:n?.02:.1,nearZ:e.transform._nearZ/e.transform.height,farZ:e.transform._farZ/e.transform.height})}function Pne(t,e){const{mapboxLayers:n,isExternal:r}=t.userData;if(r){const i=Array.from(n,u=>u.id),o=mf(t.props.layers,Boolean).some(u=>u&&!i.includes(u.id));let a=t.getViewports();const l=a.findIndex(u=>u.id==="mapbox"),c=a.length>1||l<0;(o||c)&&(l>=0&&(a=a.slice(),a[l]=qk(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:a,layerFilter:u=>(!t.props.layerFilter||t.props.layerFilter(u))&&(u.viewport.id!=="mapbox"||!i.includes(u.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}function Ine(t,e){t.setProps({viewState:mp(e)}),t.needsRedraw({clearRedrawFlags:!0})}function kT(t){if(t.userData.isExternal)return;const e=[];t.userData.mapboxLayers.forEach(n=>{const r=n.props.type,i=new r(n.props);e.push(i)}),t.setProps({layers:e})}class Mne{constructor(e){if(!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.map=null,this.deck=null,this.props=e}onAdd(e,n){this.map=e,this.deck=Xk({map:e,gl:n,deck:this.props.deck}),Tne(this.deck,this)}onRemove(){this.deck&&Ene(this.deck,this)}setProps(e){Object.assign(this.props,e,{id:this.id}),this.deck&&Ane(this.deck)}render(){Cne(this.deck,this.map,this)}}const fw="__UNDEFINED__";function d_(t,e,n,r){if(!t||!e||!t.style||!t.style._loaded)return;const i=mf(r,Boolean);if(n!==r){const a=mf(n,Boolean),l=new Set(a.map(c=>c.id));for(const c of i)l.delete(c.id);for(const c of l)t.getLayer(c)&&t.removeLayer(c)}for(const a of i){const l=t.getLayer(a.id);l?l.implementation.setProps(a.props):t.addLayer(new Mne({id:a.id,deck:e}),a.props.beforeId)}const s=t.style._order,o={};for(const a of i){let{beforeId:l}=a.props;(!l||!s.includes(l))&&(l=fw),o[l]=o[l]||[],o[l].push(a.id)}for(const a in o){const l=o[a];let c=a===fw?s.length:s.indexOf(a),u=a===fw?void 0:a;for(let f=l.length-1;f>=0;f--){const d=l[f],h=s.indexOf(d);h!==c-1&&(t.moveLayer(d,u),h>c&&c++),c--,u=d}}}class One{constructor(e){this._handleStyleChange=()=>{d_(this._map,this._deck,this._props.layers,this._props.layers)},this._updateContainerSize=()=>{if(this._map&&this._container){const{clientWidth:i,clientHeight:s}=this._map.getContainer();Object.assign(this._container.style,{width:`${i}px`,height:`${s}px`})}},this._updateViewState=()=>{const i=this._deck;i&&(i.setProps({viewState:mp(this._map)}),i.isInitialized&&i.redraw())},this._handleMouseEvent=i=>{const s=this._deck;if(!s||!s.isInitialized)return;const o={type:i.type,offsetCenter:i.point,srcEvent:i},a=this._lastMouseDownPoint;switch(!i.point&&a&&(o.deltaX=i.originalEvent.clientX-a.clientX,o.deltaY=i.originalEvent.clientY-a.clientY,o.offsetCenter={x:a.x+o.deltaX,y:a.y+o.deltaY}),o.type){case"mousedown":s._onPointerDown(o),this._lastMouseDownPoint={...i.point,clientX:i.originalEvent.clientX,clientY:i.originalEvent.clientY};break;case"dragstart":o.type="panstart",s._onEvent(o);break;case"drag":o.type="panmove",s._onEvent(o);break;case"dragend":o.type="panend",s._onEvent(o);break;case"click":o.tapCount=1,s._onEvent(o);break;case"dblclick":o.type="click",o.tapCount=2,s._onEvent(o);break;case"mousemove":o.type="pointermove",s._onPointerMove(o);break;case"mouseout":o.type="pointerleave",s._onPointerMove(o);break;default:return}};const{interleaved:n=!1,...r}=e;this._interleaved=n,this._props=r}setProps(e){this._interleaved&&e.layers&&d_(this._map,this._deck,this._props.layers,e.layers),Object.assign(this._props,e),this._deck&&this._deck.setProps(this._interleaved?Kk(this._props):this._props)}onAdd(e){return this._map=e,this._interleaved?this._onAddInterleaved(e):this._onAddOverlaid(e)}_onAddOverlaid(e){const n=document.createElement("div");return Object.assign(n.style,{position:"absolute",left:0,top:0,textAlign:"initial",pointerEvents:"none"}),this._container=n,this._deck=new _p({...this._props,parent:n,viewState:mp(e)}),e.on("resize",this._updateContainerSize),e.on("render",this._updateViewState),e.on("mousedown",this._handleMouseEvent),e.on("dragstart",this._handleMouseEvent),e.on("drag",this._handleMouseEvent),e.on("dragend",this._handleMouseEvent),e.on("mousemove",this._handleMouseEvent),e.on("mouseout",this._handleMouseEvent),e.on("click",this._handleMouseEvent),e.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),n}_onAddInterleaved(e){const n=e.painter.context.gl;return n instanceof WebGLRenderingContext&&qe.warn("Incompatible basemap library. See: https://deck.gl/docs/api-reference/mapbox/overview#compatibility")(),this._deck=Xk({map:e,gl:n,deck:new _p({...this._props,gl:n})}),e.on("styledata",this._handleStyleChange),d_(e,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){const e=this._map;e&&(this._interleaved?this._onRemoveInterleaved(e):this._onRemoveOverlaid(e)),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(e){var n;e.off("resize",this._updateContainerSize),e.off("render",this._updateViewState),e.off("mousedown",this._handleMouseEvent),e.off("dragstart",this._handleMouseEvent),e.off("drag",this._handleMouseEvent),e.off("dragend",this._handleMouseEvent),e.off("mousemove",this._handleMouseEvent),e.off("mouseout",this._handleMouseEvent),e.off("click",this._handleMouseEvent),e.off("dblclick",this._handleMouseEvent),(n=this._deck)==null||n.finalize()}_onRemoveInterleaved(e){e.off("styledata",this._handleStyleChange),d_(e,this._deck,this._props.layers,[]),Yk(e)}getDefaultPosition(){return"top-left"}pickObject(e){return rn(this._deck),this._deck.pickObject(e)}pickMultipleObjects(e){return rn(this._deck),this._deck.pickMultipleObjects(e)}pickObjects(e){return rn(this._deck),this._deck.pickObjects(e)}finalize(){this._map&&this._map.removeControl(this)}getCanvas(){return this._map?this._interleaved?this._map.getCanvas():this._deck.getCanvas():null}}const Nne="modulepreload",kne=function(t){return"/"+t},HP={},Dne=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=kne(l),l in HP)return;HP[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const p=s[h];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Nne,c||(d.as="script",d.crossOrigin=""),d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Zk=w.createContext(null),Fne=t=>{const[e,n]=w.useState({}),r=w.useCallback((s,o="default")=>{n(a=>{if(o==="current")throw new Error("'current' cannot be used as map id");if(a[o])throw new Error(`Multiple maps with the same id: ${o}`);return{...a,[o]:s}})},[]),i=w.useCallback((s="default")=>{n(o=>{if(o[s]){const a={...o};return delete a[s],a}return o})},[]);return w.createElement(Zk.Provider,{value:{maps:e,onMapMount:r,onMapUnmount:i}},t.children)};function Bne(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Hs(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Hs(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Hs(t[i],e[i]))return!1;return!0}return!1}function Lne(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function XP(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Hs(n,r)||e.setProjection(n)}function YP(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function KP(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const $ne=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qP(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of $ne)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}var ZP={};const QP={version:8,sources:{},layers:[]},GP={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},dw={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},JP={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Une=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],zne=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class yf{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[JP[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[GP[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[dw[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=yf.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=QP}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||jne()||null,container:e,style:qP(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),XP(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in GP)o.on(u,this._onPointerEvent);for(const u in dw)o.on(u,this._onCameraEvent);for(const u in JP)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),yf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=Lne(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=KP(i,{...YP(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||KP(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of Une)if(s in e&&!Hs(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=QP,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(qP(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Hs(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Hs(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Hs(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of zne){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;Hs(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in dw&&(typeof n=="object"&&(n.viewState=YP(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{XP(this._renderTransform,n),e.transform=n}}}yf.savedMaps=[];function jne(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||ZP.MapboxAccessToken}catch{}try{t=t||ZP.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Vne=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Wne(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of Hne(e))!(r in n)&&!Vne.includes(r)&&(n[r]=e[r].bind(e));return n}function Hne(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const Xne=typeof document<"u"?w.useLayoutEffect:w.useEffect,Yne=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Kne(t,e){for(const r of Yne)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const Uv=w.createContext(null);function qne(t,e,n){const r=w.useContext(Zk),[i,s]=w.useState(null),o=w.useRef(),{current:a}=w.useRef({mapLib:null,map:null});w.useEffect(()=>{const u=t.mapLib;let f=!0,d;return Promise.resolve(u||n).then(h=>{if(!f)return;if(!h)throw new Error("Invalid mapLib");const p="Map"in h?h:h.default;if(!p.Map)throw new Error("Invalid mapLib");if(Kne(p,t),!p.supported||p.supported(t))t.reuseMaps&&(d=yf.reuse(t,o.current)),d||(d=new yf(p.Map,t,o.current)),a.map=Wne(d),a.mapLib=p,s(d),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(h=>{const{onError:p}=t;p?p({type:"error",target:null,originalEvent:null,error:h}):console.error(h)}),()=>{f=!1,d&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?d.recycle():d.destroy())}},[]),Xne(()=>{i&&i.setProps(t)}),w.useImperativeHandle(e,()=>a.map,[i]);const l=w.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return w.createElement("div",{id:t.id,ref:o,style:l},i&&w.createElement(Uv.Provider,{value:a},w.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const Zne=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function rc(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!Zne.test(r)?n[r]=`${i}px`:n[r]=i}}function Qne(t,e){const{map:n,mapLib:r}=w.useContext(Uv),i=w.useRef({props:t});i.current.props=t;const s=w.useMemo(()=>{let g=!1;w.Children.forEach(t.children,m=>{m&&(g=!0)});const v={...t,element:g?document.createElement("div"):null},_=new r.Marker(v);return _.setLngLat([t.longitude,t.latitude]),_.getElement().addEventListener("click",m=>{var y,b;(b=(y=i.current.props).onClick)===null||b===void 0||b.call(y,{type:"click",target:_,originalEvent:m})}),_.on("dragstart",m=>{var y,b;const S=m;S.lngLat=s.getLngLat(),(b=(y=i.current.props).onDragStart)===null||b===void 0||b.call(y,S)}),_.on("drag",m=>{var y,b;const S=m;S.lngLat=s.getLngLat(),(b=(y=i.current.props).onDrag)===null||b===void 0||b.call(y,S)}),_.on("dragend",m=>{var y,b;const S=m;S.lngLat=s.getLngLat(),(b=(y=i.current.props).onDragEnd)===null||b===void 0||b.call(y,S)}),_},[]);w.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:f=null,rotation:d=0,rotationAlignment:h="auto",pitchAlignment:p="auto"}=t;return w.useEffect(()=>{rc(s.getElement(),c)},[c]),w.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!Bne(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==d&&s.setRotation(d),s.getRotationAlignment()!==h&&s.setRotationAlignment(h),s.getPitchAlignment()!==p&&s.setPitchAlignment(p),s.getPopup()!==f&&s.setPopup(f),Da.createPortal(t.children,s.getElement())}w.memo(w.forwardRef(Qne));function eI(t){return new Set(t?t.trim().split(/\s+/):[])}function Gne(t,e){const{map:n,mapLib:r}=w.useContext(Uv),i=w.useMemo(()=>document.createElement("div"),[]),s=w.useRef({props:t});s.current.props=t;const o=w.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,f;(f=(u=s.current.props).onOpen)===null||f===void 0||f.call(u,c)}),l},[]);if(w.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),w.useEffect(()=>{rc(o.getElement(),t.style)},[t.style]),w.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Hs(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=eI(o.options.className),l=eI(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return Da.createPortal(t.children,i)}w.memo(w.forwardRef(Gne));function Wf(t,e,n,r){const i=w.useContext(Uv),s=w.useMemo(()=>t(i),[]);return w.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function Jne(t){const e=Wf(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return w.useEffect(()=>{rc(e._container,t.style)},[t.style]),null}w.memo(Jne);function ere(t){const e=Wf(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return w.useEffect(()=>{rc(e._controlContainer,t.style)},[t.style]),null}w.memo(ere);function tre(t,e){const n=w.useRef({props:t}),r=Wf(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,w.useImperativeHandle(e,()=>r,[]),w.useEffect(()=>{rc(r._container,t.style)},[t.style]),null}w.memo(w.forwardRef(tre));function nre(t){const e=Wf(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return w.useEffect(()=>{rc(e._container,t.style)},[t.style]),null}w.memo(nre);function rre(t){const e=Wf(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=w.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),w.useEffect(()=>{rc(e._container,i)},[i]),null}w.memo(rre);const ire=Dne(()=>import("./maplibre-gl-BMQGfdGD.js").then(t=>t.m),[]),sre=w.forwardRef(function(e,n){return qne(e,n,ire)}),Qk=t=>(Wf(()=>new One(t)).setProps(t),null),FS=({children:t,style:e,...n})=>x.jsx(sre,{attributionControl:!1,mapStyle:"/maps/style.json",style:{top:0,left:0,width:"100%",height:"100%",position:"absolute",...e},...n,children:t}),ore=({left:t,right:e,mapStyle:n,viewState:r={}})=>{const[i,s]=kC(),[o,a]=kC(),[l,c]=w.useState(r),[u,f]=w.useState("left");return x.jsxs(uW,{direction:"horizontal",className:"z-[100]",children:[x.jsx(XC,{children:x.jsx("div",{ref:i,className:"relative size-full",children:x.jsx(FS,{id:"left-map",...l,...u==="left"&&{onMove:d=>c(d.viewState)},mapStyle:n,padding:{top:0,right:0,left:s.width||0,bottom:0},onMoveStart:()=>f("left"),children:t})})}),x.jsx(fW,{withHandle:!0}),x.jsx(XC,{children:x.jsx("div",{ref:o,className:"relative size-full",children:x.jsx(FS,{id:"right-map",...l,...u==="right"&&{onMove:d=>c(d.viewState)},mapStyle:n,onMoveStart:()=>f("right"),padding:{top:0,left:0,bottom:0,right:a.width||0},children:e})})})]})};let j;const Gk=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Gk.decode();let nh=null;function Cu(){return(nh===null||nh.byteLength===0)&&(nh=new Uint8Array(j.memory.buffer)),nh}function Xr(t,e){return t=t>>>0,Gk.decode(Cu().subarray(t,t+e))}const Xs=new Array(128).fill(void 0);Xs.push(void 0,null,!0,!1);let kh=Xs.length;function be(t){kh===Xs.length&&Xs.push(Xs.length+1);const e=kh;return kh=Xs[e],Xs[e]=t,e}function fe(t){return Xs[t]}function are(t){t<132||(Xs[t]=kh,kh=t)}function Mt(t){const e=fe(t);return are(t),e}let Ci=0;const sm=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},lre=typeof sm.encodeInto=="function"?function(t,e){return sm.encodeInto(t,e)}:function(t,e){const n=sm.encode(t);return e.set(n),{read:t.length,written:n.length}};function rh(t,e,n){if(n===void 0){const a=sm.encode(t),l=e(a.length,1)>>>0;return Cu().subarray(l,l+a.length).set(a),Ci=a.length,l}let r=t.length,i=e(r,1)>>>0;const s=Cu();let o=0;for(;o<r;o++){const a=t.charCodeAt(o);if(a>127)break;s[i+o]=a}if(o!==r){o!==0&&(t=t.slice(o)),i=n(i,r,r=o+t.length*3,1)>>>0;const a=Cu().subarray(i+o,i+r),l=lre(t,a);o+=l.written}return Ci=o,i}function hw(t){return t==null}let ih=null;function pe(){return(ih===null||ih.byteLength===0)&&(ih=new Int32Array(j.memory.buffer)),ih}function BS(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const i=t.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=t.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(t)){const i=t.length;let s="[";i>0&&(s+=BS(t[0]));for(let o=1;o<i;o++)s+=", "+BS(t[o]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function cre(t,e,n,r){const i={a:t,b:e,cnt:1,dtor:n},s=(...o)=>{i.cnt++;const a=i.a;i.a=0;try{return r(a,i.b,...o)}finally{--i.cnt===0?j.__wbindgen_export_2.get(i.dtor)(a,i.b):i.a=a}};return s.original=i,s}function ure(t,e,n){j._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h896648893be04d51(t,e,be(n))}function LS(t,e){const n=e(t.length*1,1)>>>0;return Cu().set(t,n/1),Ci=t.length,n}function fre(t){try{const i=j.__wbindgen_add_to_stack_pointer(-16),s=LS(t,j.__wbindgen_malloc),o=Ci;j.readParquet(i,s,o);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return _re.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}function Jk(t,e){return t=t>>>0,Cu().subarray(t/1,t/1+e)}let sh=null;function tI(){return(sh===null||sh.byteLength===0)&&(sh=new BigInt64Array(j.memory.buffer)),sh}let oh=null;function dre(){return(oh===null||oh.byteLength===0)&&(oh=new BigUint64Array(j.memory.buffer)),oh}function hre(t,e){return t=t>>>0,dre().subarray(t/8,t/8+e)}function cn(t,e){try{return t.apply(this,e)}catch(n){j.__wbindgen_exn_store(be(n))}}function pre(t,e,n,r){j.wasm_bindgen__convert__closures__invoke2_mut__h02232cd008ae4dfe(t,e,be(n),be(r))}class w0{static __wrap(e){e=e>>>0;const n=Object.create(w0.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_arrowschema_free(e)}copy(){const e=j.arrowschema_copy(this.__wbg_ptr);return w0.__wrap(e)}}class DT{static __wrap(e){e=e>>>0;const n=Object.create(DT.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_columnchunkmetadata_free(e)}filePath(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_filePath(r,this.__wbg_ptr);var e=pe()[r/4+0],n=pe()[r/4+1];let i;return e!==0&&(i=Xr(e,n).slice(),j.__wbindgen_free(e,n*1)),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}fileOffset(){return j.columnchunkmetadata_fileOffset(this.__wbg_ptr)}pathInSchema(){let e,n;try{const s=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_pathInSchema(s,this.__wbg_ptr);var r=pe()[s/4+0],i=pe()[s/4+1];return e=r,n=i,Xr(r,i)}finally{j.__wbindgen_add_to_stack_pointer(16),j.__wbindgen_free(e,n,1)}}statistics_exist(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_statistics_exist(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return e!==0}finally{j.__wbindgen_add_to_stack_pointer(16)}}getStatisticsMinValue(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_getStatisticsMinValue(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return Mt(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}getStatisticsMaxValue(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_getStatisticsMaxValue(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return Mt(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}getStatisticsNullCount(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_getStatisticsNullCount(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return Mt(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}numValues(){return j.columnchunkmetadata_numValues(this.__wbg_ptr)}compressedSize(){return j.columnchunkmetadata_compressedSize(this.__wbg_ptr)}uncompressedSize(){return j.columnchunkmetadata_uncompressedSize(this.__wbg_ptr)}dataPageOffset(){return j.columnchunkmetadata_dataPageOffset(this.__wbg_ptr)}hasIndexPage(){return j.columnchunkmetadata_hasIndexPage(this.__wbg_ptr)!==0}indexPageOffset(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_indexPageOffset(r,this.__wbg_ptr);var e=pe()[r/4+0],n=tI()[r/8+1];return e===0?void 0:n}finally{j.__wbindgen_add_to_stack_pointer(16)}}dictionaryPageOffset(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_dictionaryPageOffset(r,this.__wbg_ptr);var e=pe()[r/4+0],n=tI()[r/8+1];return e===0?void 0:n}finally{j.__wbindgen_add_to_stack_pointer(16)}}numColumnEncodings(){return j.columnchunkmetadata_numColumnEncodings(this.__wbg_ptr)>>>0}byteRange(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.columnchunkmetadata_byteRange(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=hre(e,n).slice();return j.__wbindgen_free(e,n*8),r}finally{j.__wbindgen_add_to_stack_pointer(16)}}}let gre=class eD{static __wrap(e){e=e>>>0;const n=Object.create(eD.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_datatype_free(e)}};class S0{static __wrap(e){e=e>>>0;const n=Object.create(S0.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_ffirecordbatch_free(e)}arrayAddr(){return j.ffirecordbatch_arrayAddr(this.__wbg_ptr)}schemaAddr(){return j.ffirecordbatch_schemaAddr(this.__wbg_ptr)}}class x0{static __wrap(e){e=e>>>0;const n=Object.create(x0.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_ffitable_free(e)}numBatches(){return j.ffitable_numBatches(this.__wbg_ptr)>>>0}schemaAddr(){return j.ffitable_schemaAddr(this.__wbg_ptr)}arrayAddr(e){return j.ffitable_arrayAddr(this.__wbg_ptr,e)}drop(){const e=this.__destroy_into_raw();j.ffitable_drop(e)}}class T0{static __wrap(e){e=e>>>0;const n=Object.create(T0.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_filemetadata_free(e)}copy(){const e=j.filemetadata_copy(this.__wbg_ptr);return T0.__wrap(e)}version(){return j.filemetadata_version(this.__wbg_ptr)}numRows(){return j.filemetadata_numRows(this.__wbg_ptr)>>>0}createdBy(){try{const r=j.__wbindgen_add_to_stack_pointer(-16);j.filemetadata_createdBy(r,this.__wbg_ptr);var e=pe()[r/4+0],n=pe()[r/4+1];let i;return e!==0&&(i=Xr(e,n).slice(),j.__wbindgen_free(e,n*1)),i}finally{j.__wbindgen_add_to_stack_pointer(16)}}numRowGroups(){return j.filemetadata_numRowGroups(this.__wbg_ptr)>>>0}rowGroup(e){const n=j.filemetadata_rowGroup(this.__wbg_ptr,e);return LT.__wrap(n)}schema(){const e=j.filemetadata_schema(this.__wbg_ptr);return $T.__wrap(e)}keyValueMetadata(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.filemetadata_keyValueMetadata(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return Mt(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}arrowSchema(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.filemetadata_arrowSchema(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return w0.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}}class FT{static __wrap(e){e=e>>>0;const n=Object.create(FT.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_intounderlyingsource_free(e)}pull(e){const n=j.intounderlyingsource_pull(this.__wbg_ptr,be(e));return Mt(n)}cancel(){const e=this.__destroy_into_raw();j.intounderlyingsource_cancel(e)}}class BT{static __wrap(e){e=e>>>0;const n=Object.create(BT.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_queuingstrategy_free(e)}get highWaterMark(){return j.queuingstrategy_highWaterMark(this.__wbg_ptr)}}let tD=class nD{static __wrap(e){e=e>>>0;const n=Object.create(nD.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_recordbatch_free(e)}get numRows(){return j.recordbatch_numRows(this.__wbg_ptr)>>>0}get numColumns(){return j.recordbatch_numColumns(this.__wbg_ptr)>>>0}get schema(){const e=j.recordbatch_schema(this.__wbg_ptr);return rD.__wrap(e)}column(e){const n=j.recordbatch_column(this.__wbg_ptr,e);return n===0?void 0:nI.__wrap(n)}column_by_name(e){const n=rh(e,j.__wbindgen_malloc,j.__wbindgen_realloc),r=Ci,i=j.recordbatch_column_by_name(this.__wbg_ptr,n,r);return i===0?void 0:nI.__wrap(i)}toFFI(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.recordbatch_toFFI(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return S0.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}intoFFI(){try{const i=this.__destroy_into_raw(),s=j.__wbindgen_add_to_stack_pointer(-16);j.recordbatch_intoFFI(s,i);var e=pe()[s/4+0],n=pe()[s/4+1],r=pe()[s/4+2];if(r)throw Mt(n);return S0.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}intoIPCStream(){try{const o=this.__destroy_into_raw(),a=j.__wbindgen_add_to_stack_pointer(-16);j.recordbatch_intoIPCStream(a,o);var e=pe()[a/4+0],n=pe()[a/4+1],r=pe()[a/4+2],i=pe()[a/4+3];if(i)throw Mt(r);var s=Jk(e,n).slice();return j.__wbindgen_free(e,n*1),s}finally{j.__wbindgen_add_to_stack_pointer(16)}}};class LT{static __wrap(e){e=e>>>0;const n=Object.create(LT.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_rowgroupmetadata_free(e)}numRows(){return j.rowgroupmetadata_numRows(this.__wbg_ptr)>>>0}numColumns(){return j.rowgroupmetadata_numColumns(this.__wbg_ptr)>>>0}column(e){const n=j.rowgroupmetadata_column(this.__wbg_ptr,e);return DT.__wrap(n)}totalByteSize(){return j.rowgroupmetadata_totalByteSize(this.__wbg_ptr)>>>0}compressedSize(){return j.rowgroupmetadata_compressedSize(this.__wbg_ptr)>>>0}}let rD=class iD{static __wrap(e){e=e>>>0;const n=Object.create(iD.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_schema_free(e)}};class $T{static __wrap(e){e=e>>>0;const n=Object.create($T.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_schemadescriptor_free(e)}name(){let e,n;try{const s=j.__wbindgen_add_to_stack_pointer(-16);j.schemadescriptor_name(s,this.__wbg_ptr);var r=pe()[s/4+0],i=pe()[s/4+1];return e=r,n=i,Xr(r,i)}finally{j.__wbindgen_add_to_stack_pointer(16),j.__wbindgen_free(e,n,1)}}numColumns(){return j.schemadescriptor_numColumns(this.__wbg_ptr)>>>0}numFields(){return j.schemadescriptor_numFields(this.__wbg_ptr)>>>0}}let _re=class om{static __wrap(e){e=e>>>0;const n=Object.create(om.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_table_free(e)}get schema(){const e=j.table_schema(this.__wbg_ptr);return rD.__wrap(e)}recordBatch(e){const n=j.table_recordBatch(this.__wbg_ptr,e);return n===0?void 0:tD.__wrap(n)}get numBatches(){return j.table_numBatches(this.__wbg_ptr)>>>0}toFFI(){try{const i=j.__wbindgen_add_to_stack_pointer(-16);j.table_toFFI(i,this.__wbg_ptr);var e=pe()[i/4+0],n=pe()[i/4+1],r=pe()[i/4+2];if(r)throw Mt(n);return x0.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}intoFFI(){try{const i=this.__destroy_into_raw(),s=j.__wbindgen_add_to_stack_pointer(-16);j.table_intoFFI(s,i);var e=pe()[s/4+0],n=pe()[s/4+1],r=pe()[s/4+2];if(r)throw Mt(n);return x0.__wrap(e)}finally{j.__wbindgen_add_to_stack_pointer(16)}}intoIPCStream(){try{const o=this.__destroy_into_raw(),a=j.__wbindgen_add_to_stack_pointer(-16);j.table_intoIPCStream(a,o);var e=pe()[a/4+0],n=pe()[a/4+1],r=pe()[a/4+2],i=pe()[a/4+3];if(i)throw Mt(r);var s=Jk(e,n).slice();return j.__wbindgen_free(e,n*1),s}finally{j.__wbindgen_add_to_stack_pointer(16)}}static fromIPCFile(e){try{const s=j.__wbindgen_add_to_stack_pointer(-16),o=LS(e,j.__wbindgen_malloc),a=Ci;j.table_fromIPCFile(s,o,a);var n=pe()[s/4+0],r=pe()[s/4+1],i=pe()[s/4+2];if(i)throw Mt(r);return om.__wrap(n)}finally{j.__wbindgen_add_to_stack_pointer(16)}}static fromIPCStream(e){try{const s=j.__wbindgen_add_to_stack_pointer(-16),o=LS(e,j.__wbindgen_malloc),a=Ci;j.table_fromIPCStream(s,o,a);var n=pe()[s/4+0],r=pe()[s/4+1],i=pe()[s/4+2];if(i)throw Mt(r);return om.__wrap(n)}finally{j.__wbindgen_add_to_stack_pointer(16)}}},nI=class sD{static __wrap(e){e=e>>>0;const n=Object.create(sD.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();j.__wbg_vector_free(e)}data_type(){const e=j.vector_data_type(this.__wbg_ptr);return gre.__wrap(e)}};async function mre(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function yre(){const t={};return t.wbg={},t.wbg.__wbg_filemetadata_new=function(e){const n=T0.__wrap(e);return be(n)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(Xr(e,n));return be(r)},t.wbg.__wbindgen_object_drop_ref=function(e){Mt(e)},t.wbg.__wbindgen_string_new=function(e,n){const r=Xr(e,n);return be(r)},t.wbg.__wbindgen_bigint_from_i64=function(e){return be(e)},t.wbg.__wbindgen_number_new=function(e){return be(e)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=fe(e);return be(n)},t.wbg.__wbg_fetch_b5d6bebed1e6c2d2=function(e){const n=fetch(fe(e));return be(n)},t.wbg.__wbg_newwithsource_620c192b0682807b=function(e,n){const r=new ReadableStream(FT.__wrap(e),BT.__wrap(n));return be(r)},t.wbg.__wbg_close_e9110ca16e2567db=function(e){fe(e).close()},t.wbg.__wbg_enqueue_d71a1a518e21f5c3=function(e,n){fe(e).enqueue(fe(n))},t.wbg.__wbg_byobRequest_08c18cee35def1f4=function(e){const n=fe(e).byobRequest;return hw(n)?0:be(n)},t.wbg.__wbg_close_da7e6fb9d9851e5a=function(e){fe(e).close()},t.wbg.__wbg_view_231340b0dd8a2484=function(e){const n=fe(e).view;return hw(n)?0:be(n)},t.wbg.__wbg_respond_8fadc5f5c9d95422=function(e,n){fe(e).respond(n>>>0)},t.wbg.__wbg_buffer_4e79326814bdd393=function(e){const n=fe(e).buffer;return be(n)},t.wbg.__wbg_byteOffset_b69b0a07afccce19=function(e){return fe(e).byteOffset},t.wbg.__wbg_byteLength_5299848ed3264181=function(e){return fe(e).byteLength},t.wbg.__wbindgen_string_get=function(e,n){const r=fe(n),i=typeof r=="string"?r:void 0;var s=hw(i)?0:rh(i,j.__wbindgen_malloc,j.__wbindgen_realloc),o=Ci;pe()[e/4+1]=o,pe()[e/4+0]=s},t.wbg.__wbg_set_bd72c078edfa51ad=function(e,n,r){fe(e)[Mt(n)]=Mt(r)},t.wbg.__wbg_String_4370c5505c674d30=function(e,n){const r=String(fe(n)),i=rh(r,j.__wbindgen_malloc,j.__wbindgen_realloc),s=Ci;pe()[e/4+1]=s,pe()[e/4+0]=i},t.wbg.__wbindgen_cb_drop=function(e){const n=Mt(e).original;return n.cnt--==1?(n.a=0,!0):!1},t.wbg.__wbg_recordbatch_new=function(e){const n=tD.__wrap(e);return be(n)},t.wbg.__wbg_randomFillSync_dc1e9a60c158336d=function(){return cn(function(e,n){fe(e).randomFillSync(Mt(n))},arguments)},t.wbg.__wbg_getRandomValues_37fa2ca9e4e07fab=function(){return cn(function(e,n){fe(e).getRandomValues(fe(n))},arguments)},t.wbg.__wbg_crypto_c48a774b022d20ac=function(e){const n=fe(e).crypto;return be(n)},t.wbg.__wbindgen_is_object=function(e){const n=fe(e);return typeof n=="object"&&n!==null},t.wbg.__wbg_process_298734cf255a885d=function(e){const n=fe(e).process;return be(n)},t.wbg.__wbg_versions_e2e78e134e3e5d01=function(e){const n=fe(e).versions;return be(n)},t.wbg.__wbg_node_1cd7a5d853dbea79=function(e){const n=fe(e).node;return be(n)},t.wbg.__wbindgen_is_string=function(e){return typeof fe(e)=="string"},t.wbg.__wbg_require_8f08ceecec0f4fee=function(){return cn(function(){const e=module.require;return be(e)},arguments)},t.wbg.__wbg_msCrypto_bcb970640f50a1e8=function(e){const n=fe(e).msCrypto;return be(n)},t.wbg.__wbg_signal_4bd18fb489af2d4c=function(e){const n=fe(e).signal;return be(n)},t.wbg.__wbg_new_55c9955722952374=function(){return cn(function(){const e=new AbortController;return be(e)},arguments)},t.wbg.__wbg_abort_654b796176d117aa=function(e){fe(e).abort()},t.wbg.__wbg_new_1eead62f64ca15ce=function(){return cn(function(){const e=new Headers;return be(e)},arguments)},t.wbg.__wbg_append_fda9e3432e3e88da=function(){return cn(function(e,n,r,i,s){fe(e).append(Xr(n,r),Xr(i,s))},arguments)},t.wbg.__wbg_fetch_8eaf01857a5bb21f=function(e,n){const r=fe(e).fetch(fe(n));return be(r)},t.wbg.__wbg_instanceof_Response_fc4327dbfcdf5ced=function(e){let n;try{n=fe(e)instanceof Response}catch{n=!1}return n},t.wbg.__wbg_url_8503de97f69da463=function(e,n){const r=fe(n).url,i=rh(r,j.__wbindgen_malloc,j.__wbindgen_realloc),s=Ci;pe()[e/4+1]=s,pe()[e/4+0]=i},t.wbg.__wbg_status_ac85a3142a84caa2=function(e){return fe(e).status},t.wbg.__wbg_headers_b70de86b8e989bc0=function(e){const n=fe(e).headers;return be(n)},t.wbg.__wbg_arrayBuffer_288fb3538806e85c=function(){return cn(function(e){const n=fe(e).arrayBuffer();return be(n)},arguments)},t.wbg.__wbg_newwithstrandinit_cad5cd6038c7ff5d=function(){return cn(function(e,n,r){const i=new Request(Xr(e,n),fe(r));return be(i)},arguments)},t.wbg.__wbindgen_is_function=function(e){return typeof fe(e)=="function"},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,n){const r=new Function(Xr(e,n));return be(r)},t.wbg.__wbg_new_56693dbed0c32988=function(){return be(new Map)},t.wbg.__wbg_next_526fc47e980da008=function(e){const n=fe(e).next;return be(n)},t.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return cn(function(e){const n=fe(e).next();return be(n)},arguments)},t.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return fe(e).done},t.wbg.__wbg_value_1695675138684bd5=function(e){const n=fe(e).value;return be(n)},t.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return be(Symbol.iterator)},t.wbg.__wbg_get_97b561fb56f034b5=function(){return cn(function(e,n){const r=Reflect.get(fe(e),fe(n));return be(r)},arguments)},t.wbg.__wbg_call_cb65541d95d71282=function(){return cn(function(e,n){const r=fe(e).call(fe(n));return be(r)},arguments)},t.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return be(e)},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return cn(function(){const e=self.self;return be(e)},arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return cn(function(){const e=window.window;return be(e)},arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return cn(function(){const e=globalThis.globalThis;return be(e)},arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return cn(function(){const e=global.global;return be(e)},arguments)},t.wbg.__wbindgen_is_undefined=function(e){return fe(e)===void 0},t.wbg.__wbg_new_d258248ed531ff54=function(e,n){const r=new Error(Xr(e,n));return be(r)},t.wbg.__wbg_call_01734de55d61e11d=function(){return cn(function(e,n,r){const i=fe(e).call(fe(n),fe(r));return be(i)},arguments)},t.wbg.__wbg_set_bedc3d02d0f05eb0=function(e,n,r){const i=fe(e).set(fe(n),fe(r));return be(i)},t.wbg.__wbg_new_43f1b47c28813cbd=function(e,n){try{var r={a:e,b:n},i=(o,a)=>{const l=r.a;r.a=0;try{return pre(l,r.b,o,a)}finally{r.a=l}};const s=new Promise(i);return be(s)}finally{r.a=r.b=0}},t.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){const n=Promise.resolve(fe(e));return be(n)},t.wbg.__wbg_then_f7e06ee3c11698eb=function(e,n){const r=fe(e).then(fe(n));return be(r)},t.wbg.__wbg_then_b2267541e2a73865=function(e,n,r){const i=fe(e).then(fe(n),fe(r));return be(i)},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const n=fe(e).buffer;return be(n)},t.wbg.__wbg_newwithbyteoffsetandlength_6da8e527659b86aa=function(e,n,r){const i=new Uint8Array(fe(e),n>>>0,r>>>0);return be(i)},t.wbg.__wbg_new_8125e318e6245eed=function(e){const n=new Uint8Array(fe(e));return be(n)},t.wbg.__wbg_set_5cf90238115182c3=function(e,n,r){fe(e).set(fe(n),r>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return fe(e).length},t.wbg.__wbg_newwithlength_e5d69174d6984cd7=function(e){const n=new Uint8Array(e>>>0);return be(n)},t.wbg.__wbg_subarray_13db269f57aa838d=function(e,n,r){const i=fe(e).subarray(n>>>0,r>>>0);return be(i)},t.wbg.__wbg_stringify_e25465938f3f611f=function(){return cn(function(e){const n=JSON.stringify(fe(e));return be(n)},arguments)},t.wbg.__wbg_has_c5fcd020291e56b8=function(){return cn(function(e,n){return Reflect.has(fe(e),fe(n))},arguments)},t.wbg.__wbg_set_092e06b0f9d71865=function(){return cn(function(e,n,r){return Reflect.set(fe(e),fe(n),fe(r))},arguments)},t.wbg.__wbindgen_debug_string=function(e,n){const r=BS(fe(n)),i=rh(r,j.__wbindgen_malloc,j.__wbindgen_realloc),s=Ci;pe()[e/4+1]=s,pe()[e/4+0]=i},t.wbg.__wbindgen_throw=function(e,n){throw new Error(Xr(e,n))},t.wbg.__wbindgen_memory=function(){const e=j.memory;return be(e)},t.wbg.__wbindgen_function_table=function(){const e=j.__wbindgen_export_2;return be(e)},t.wbg.__wbindgen_closure_wrapper1527=function(e,n,r){const i=cre(e,n,304,ure);return be(i)},t}function vre(t,e){return j=t.exports,oD.__wbindgen_wasm_module=e,sh=null,oh=null,ih=null,nh=null,j}async function oD(t){if(j!==void 0)return j;typeof t>"u"&&(t=new URL("/assets/arrow2_bg-4Y7xYo54.wasm",import.meta.url));const e=yre();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await mre(await t,e);return vre(n,r)}const bre=({children:t})=>{const[e,n]=w.useState(!1);return w.useEffect(()=>{(async()=>{await oD(),n(!0)})()},[]),e?x.jsx(x.Fragment,{children:t}):null};function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Te.apply(this,arguments)}function Ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function wre(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function aD(...t){return e=>t.forEach(n=>wre(n,e))}function pr(...t){return w.useCallback(aD(...t),t)}function La(t,e=[]){let n=[];function r(s,o){const a=w.createContext(o),l=n.length;n=[...n,o];function c(f){const{scope:d,children:h,...p}=f,g=(d==null?void 0:d[t][l])||a,v=w.useMemo(()=>p,Object.values(p));return w.createElement(g.Provider,{value:v},h)}function u(f,d){const h=(d==null?void 0:d[t][l])||a,p=w.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Sre(i,...e)]}function Sre(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const vf=w.forwardRef((t,e)=>{const{children:n,...r}=t,i=w.Children.toArray(n),s=i.find(xre);if(s){const o=s.props.children,a=i.map(l=>l===s?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:l);return w.createElement($S,Te({},r,{ref:e}),w.isValidElement(o)?w.cloneElement(o,void 0,a):null)}return w.createElement($S,Te({},r,{ref:e}),n)});vf.displayName="Slot";const $S=w.forwardRef((t,e)=>{const{children:n,...r}=t;return w.isValidElement(n)?w.cloneElement(n,{...Tre(r,n.props),ref:e?aD(e,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});$S.displayName="SlotClone";const lD=({children:t})=>w.createElement(w.Fragment,null,t);function xre(t){return w.isValidElement(t)&&t.type===lD}function Tre(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Ere=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$t=Ere.reduce((t,e)=>{const n=w.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?vf:e;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(a,Te({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Are(t,e){t&&Da.flushSync(()=>t.dispatchEvent(e))}function lo(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Cre(t,e=globalThis==null?void 0:globalThis.document){const n=lo(t);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const US="dismissableLayer.update",Rre="dismissableLayer.pointerDownOutside",Pre="dismissableLayer.focusOutside";let rI;const Ire=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cD=w.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=w.useContext(Ire),[f,d]=w.useState(null),h=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=w.useState({}),g=pr(e,R=>d(R)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),m=v.indexOf(_),y=f?v.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=y>=m,A=Mre(R=>{const M=R.target,k=[...u.branches].some(N=>N.contains(M));!S||k||(s==null||s(R),a==null||a(R),R.defaultPrevented||l==null||l())},h),I=Ore(R=>{const M=R.target;[...u.branches].some(N=>N.contains(M))||(o==null||o(R),a==null||a(R),R.defaultPrevented||l==null||l())},h);return Cre(R=>{y===u.layers.size-1&&(i==null||i(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},h),w.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rI=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),iI(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=rI)}},[f,h,r,u]),w.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),iI())},[f,u]),w.useEffect(()=>{const R=()=>p({});return document.addEventListener(US,R),()=>document.removeEventListener(US,R)},[]),w.createElement($t.div,Te({},c,{ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Ot(t.onFocusCapture,I.onFocusCapture),onBlurCapture:Ot(t.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Ot(t.onPointerDownCapture,A.onPointerDownCapture)}))});function Mre(t,e=globalThis==null?void 0:globalThis.document){const n=lo(t),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){uD(Rre,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Ore(t,e=globalThis==null?void 0:globalThis.document){const n=lo(t),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&uD(Pre,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iI(){const t=new CustomEvent(US);document.dispatchEvent(t)}function uD(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Are(i,s):i.dispatchEvent(s)}const bf=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},Nre=mx.useId||(()=>{});let kre=0;function Ru(t){const[e,n]=w.useState(Nre());return bf(()=>{t||n(r=>r??String(kre++))},[t]),t||(e?`radix-${e}`:"")}const Dre=["top","right","bottom","left"],Aa=Math.min,Pr=Math.max,E0=Math.round,h_=Math.floor,Ca=t=>({x:t,y:t}),Fre={left:"right",right:"left",bottom:"top",top:"bottom"},Bre={start:"end",end:"start"};function zS(t,e,n){return Pr(t,Aa(e,n))}function co(t,e){return typeof t=="function"?t(e):t}function uo(t){return t.split("-")[0]}function Hf(t){return t.split("-")[1]}function UT(t){return t==="x"?"y":"x"}function zT(t){return t==="y"?"height":"width"}function Xf(t){return["top","bottom"].includes(uo(t))?"y":"x"}function jT(t){return UT(Xf(t))}function Lre(t,e,n){n===void 0&&(n=!1);const r=Hf(t),i=jT(t),s=zT(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=A0(o)),[o,A0(o)]}function $re(t){const e=A0(t);return[jS(t),e,jS(e)]}function jS(t){return t.replace(/start|end/g,e=>Bre[e])}function Ure(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function zre(t,e,n,r){const i=Hf(t);let s=Ure(uo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(jS)))),s}function A0(t){return t.replace(/left|right|bottom|top/g,e=>Fre[e])}function jre(t){return{top:0,right:0,bottom:0,left:0,...t}}function fD(t){return typeof t!="number"?jre(t):{top:t,right:t,bottom:t,left:t}}function C0(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function sI(t,e,n){let{reference:r,floating:i}=t;const s=Xf(e),o=jT(e),a=zT(o),l=uo(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Hf(e)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1);break}return h}const Vre=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=sI(c,r,l),d=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:v,fn:_}=a[g],{x:m,y,data:b,reset:S}=await _({x:u,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=m??u,f=y??f,h={...h,[v]:{...h[v],...b}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:f}=sI(c,d,l)),g=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}};async function yp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=co(e,t),p=fD(h),v=a[d?f==="floating"?"reference":"floating":f],_=C0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),m=f==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},S=C0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:y,strategy:l}):m);return{top:(_.top-S.top+p.top)/b.y,bottom:(S.bottom-_.bottom+p.bottom)/b.y,left:(_.left-S.left+p.left)/b.x,right:(S.right-_.right+p.right)/b.x}}const Wre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=co(t,e)||{};if(c==null)return{};const f=fD(u),d={x:n,y:r},h=jT(i),p=zT(h),g=await o.getDimensions(c),v=h==="y",_=v?"top":"left",m=v?"bottom":"right",y=v?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=A?A[y]:0;(!I||!await(o.isElement==null?void 0:o.isElement(A)))&&(I=a.floating[y]||s.floating[p]);const R=b/2-S/2,M=I/2-g[p]/2-1,k=Aa(f[_],M),N=Aa(f[m],M),F=k,D=I-g[p]-N,z=I/2-g[p]/2+R,Z=zS(F,z,D),ee=!l.arrow&&Hf(i)!=null&&z!==Z&&s.reference[p]/2-(z<F?k:N)-g[p]/2<0,ne=ee?z<F?z-F:z-D:0;return{[h]:d[h]+ne,data:{[h]:Z,centerOffset:z-Z-ne,...ee&&{alignmentOffset:ne}},reset:ee}}}),Hre=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...v}=co(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=uo(i),m=uo(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=d||(m||!g?[A0(a)]:$re(a));!d&&p!=="none"&&b.push(...zre(a,g,p,y));const S=[a,...b],A=await yp(e,v),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(A[_]),f){const F=Lre(i,o,y);I.push(A[F[0]],A[F[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(F=>F<=0)){var M,k;const F=(((M=s.flip)==null?void 0:M.index)||0)+1,D=S[F];if(D)return{data:{index:F,overflows:R},reset:{placement:D}};let z=(k=R.filter(Z=>Z.overflows[0]<=0).sort((Z,ee)=>Z.overflows[1]-ee.overflows[1])[0])==null?void 0:k.placement;if(!z)switch(h){case"bestFit":{var N;const Z=(N=R.map(ee=>[ee.placement,ee.overflows.filter(ne=>ne>0).reduce((ne,X)=>ne+X,0)]).sort((ee,ne)=>ee[1]-ne[1])[0])==null?void 0:N[0];Z&&(z=Z);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function oI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function aI(t){return Dre.some(e=>t[e]>=0)}const Xre=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=co(t,e);switch(r){case"referenceHidden":{const s=await yp(e,{...i,elementContext:"reference"}),o=oI(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aI(o)}}}case"escaped":{const s=await yp(e,{...i,altBoundary:!0}),o=oI(s,n.floating);return{data:{escapedOffsets:o,escaped:aI(o)}}}default:return{}}}}};async function Yre(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=uo(n),a=Hf(n),l=Xf(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=co(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:d*c}:{x:d*c,y:h*u}}const Kre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Yre(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},qre=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:_,y:m}=v;return{x:_,y:m}}},...l}=co(t,e),c={x:n,y:r},u=await yp(e,l),f=Xf(uo(i)),d=UT(f);let h=c[d],p=c[f];if(s){const v=d==="y"?"top":"left",_=d==="y"?"bottom":"right",m=h+u[v],y=h-u[_];h=zS(m,h,y)}if(o){const v=f==="y"?"top":"left",_=f==="y"?"bottom":"right",m=p+u[v],y=p-u[_];p=zS(m,p,y)}const g=a.fn({...e,[d]:h,[f]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},Zre=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=co(t,e),u={x:n,y:r},f=Xf(i),d=UT(f);let h=u[d],p=u[f];const g=co(a,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const y=d==="y"?"height":"width",b=s.reference[d]-s.floating[y]+v.mainAxis,S=s.reference[d]+s.reference[y]-v.mainAxis;h<b?h=b:h>S&&(h=S)}if(c){var _,m;const y=d==="y"?"width":"height",b=["top","left"].includes(uo(i)),S=s.reference[f]-s.floating[y]+(b&&((_=o.offset)==null?void 0:_[f])||0)+(b?0:v.crossAxis),A=s.reference[f]+s.reference[y]+(b?0:((m=o.offset)==null?void 0:m[f])||0)-(b?v.crossAxis:0);p<S?p=S:p>A&&(p=A)}return{[d]:h,[f]:p}}}},Qre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=co(t,e),l=await yp(e,a),c=uo(n),u=Hf(n),f=Xf(n)==="y",{width:d,height:h}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,p=u==="end"?"top":"bottom");const v=h-l[p],_=d-l[g],m=!e.middlewareData.shift;let y=v,b=_;if(f){const A=d-l.left-l.right;b=u||m?Aa(_,A):A}else{const A=h-l.top-l.bottom;y=u||m?Aa(v,A):A}if(m&&!u){const A=Pr(l.left,0),I=Pr(l.right,0),R=Pr(l.top,0),M=Pr(l.bottom,0);f?b=d-2*(A!==0||I!==0?A+I:Pr(l.left,l.right)):y=h-2*(R!==0||M!==0?R+M:Pr(l.top,l.bottom))}await o({...e,availableWidth:b,availableHeight:y});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Ra(t){return dD(t)?(t.nodeName||"").toLowerCase():"#document"}function Fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function mo(t){var e;return(e=(dD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dD(t){return t instanceof Node||t instanceof Fr(t).Node}function fo(t){return t instanceof Element||t instanceof Fr(t).Element}function Ss(t){return t instanceof HTMLElement||t instanceof Fr(t).HTMLElement}function lI(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fr(t).ShadowRoot}function yg(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=li(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Gre(t){return["table","td","th"].includes(Ra(t))}function VT(t){const e=WT(),n=li(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Jre(t){let e=wf(t);for(;Ss(e)&&!zv(e);){if(VT(e))return e;e=wf(e)}return null}function WT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zv(t){return["html","body","#document"].includes(Ra(t))}function li(t){return Fr(t).getComputedStyle(t)}function jv(t){return fo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wf(t){if(Ra(t)==="html")return t;const e=t.assignedSlot||t.parentNode||lI(t)&&t.host||mo(t);return lI(e)?e.host:e}function hD(t){const e=wf(t);return zv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ss(e)&&yg(e)?e:hD(e)}function vp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=hD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Fr(i);return s?e.concat(o,o.visualViewport||[],yg(i)?i:[],o.frameElement&&n?vp(o.frameElement):[]):e.concat(i,vp(i,[],n))}function pD(t){const e=li(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ss(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=E0(n)!==s||E0(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function HT(t){return fo(t)?t:t.contextElement}function Pu(t){const e=HT(t);if(!Ss(e))return Ca(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=pD(e);let o=(s?E0(n.width):n.width)/r,a=(s?E0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const eie=Ca(0);function gD(t){const e=Fr(t);return!WT()||!e.visualViewport?eie:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function tie(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fr(t)?!1:e}function Vl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=HT(t);let o=Ca(1);e&&(r?fo(r)&&(o=Pu(r)):o=Pu(t));const a=tie(s,n,r)?gD(s):Ca(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const d=Fr(s),h=r&&fo(r)?Fr(r):r;let p=d,g=p.frameElement;for(;g&&r&&h!==p;){const v=Pu(g),_=g.getBoundingClientRect(),m=li(g),y=_.left+(g.clientLeft+parseFloat(m.paddingLeft))*v.x,b=_.top+(g.clientTop+parseFloat(m.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,f*=v.y,l+=y,c+=b,p=Fr(g),g=p.frameElement}}return C0({width:u,height:f,x:l,y:c})}const nie=[":popover-open",":modal"];function _D(t){return nie.some(e=>{try{return t.matches(e)}catch{return!1}})}function rie(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=mo(r),a=e?_D(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ca(1);const u=Ca(0),f=Ss(r);if((f||!f&&!s)&&((Ra(r)!=="body"||yg(o))&&(l=jv(r)),Ss(r))){const d=Vl(r);c=Pu(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function iie(t){return Array.from(t.getClientRects())}function mD(t){return Vl(mo(t)).left+jv(t).scrollLeft}function sie(t){const e=mo(t),n=jv(t),r=t.ownerDocument.body,i=Pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mD(t);const a=-n.scrollTop;return li(r).direction==="rtl"&&(o+=Pr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function oie(t,e){const n=Fr(t),r=mo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=WT();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function aie(t,e){const n=Vl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ss(t)?Pu(t):Ca(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function cI(t,e,n){let r;if(e==="viewport")r=oie(t,n);else if(e==="document")r=sie(mo(t));else if(fo(e))r=aie(e,n);else{const i=gD(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return C0(r)}function yD(t,e){const n=wf(t);return n===e||!fo(n)||zv(n)?!1:li(n).position==="fixed"||yD(n,e)}function lie(t,e){const n=e.get(t);if(n)return n;let r=vp(t,[],!1).filter(a=>fo(a)&&Ra(a)!=="body"),i=null;const s=li(t).position==="fixed";let o=s?wf(t):t;for(;fo(o)&&!zv(o);){const a=li(o),l=VT(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||yg(o)&&!l&&yD(t,o))?r=r.filter(u=>u!==o):i=a,o=wf(o)}return e.set(t,r),r}function cie(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?lie(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=cI(e,u,i);return c.top=Pr(f.top,c.top),c.right=Aa(f.right,c.right),c.bottom=Aa(f.bottom,c.bottom),c.left=Pr(f.left,c.left),c},cI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function uie(t){const{width:e,height:n}=pD(t);return{width:e,height:n}}function fie(t,e,n){const r=Ss(e),i=mo(e),s=n==="fixed",o=Vl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ca(0);if(r||!r&&!s)if((Ra(e)!=="body"||yg(i))&&(a=jv(e)),r){const f=Vl(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=mD(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function uI(t,e){return!Ss(t)||li(t).position==="fixed"?null:e?e(t):t.offsetParent}function vD(t,e){const n=Fr(t);if(!Ss(t)||_D(t))return n;let r=uI(t,e);for(;r&&Gre(r)&&li(r).position==="static";)r=uI(r,e);return r&&(Ra(r)==="html"||Ra(r)==="body"&&li(r).position==="static"&&!VT(r))?n:r||Jre(t)||n}const die=async function(t){const e=this.getOffsetParent||vD,n=this.getDimensions;return{reference:fie(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function hie(t){return li(t).direction==="rtl"}const pie={convertOffsetParentRelativeRectToViewportRelativeRect:rie,getDocumentElement:mo,getClippingRect:cie,getOffsetParent:vD,getElementRects:die,getClientRects:iie,getDimensions:uie,getScale:Pu,isElement:fo,isRTL:hie};function gie(t,e){let n=null,r;const i=mo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:d}=t.getBoundingClientRect();if(a||e(),!f||!d)return;const h=h_(u),p=h_(i.clientWidth-(c+f)),g=h_(i.clientHeight-(u+d)),v=h_(c),m={rootMargin:-h+"px "+-p+"px "+-g+"px "+-v+"px",threshold:Pr(0,Aa(1,l))||1};let y=!0;function b(S){const A=S[0].intersectionRatio;if(A!==l){if(!y)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(b,{...m,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,m)}n.observe(t)}return o(!0),s}function _ie(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=HT(t),u=i||s?[...c?vp(c):[],...vp(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const f=c&&a?gie(c,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(_=>{let[m]=_;m&&m.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=h)==null||y.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,g=l?Vl(t):null;l&&v();function v(){const _=Vl(t);g&&(_.x!==g.x||_.y!==g.y||_.width!==g.width||_.height!==g.height)&&n(),g=_,p=requestAnimationFrame(v)}return n(),()=>{var _;u.forEach(m=>{i&&m.removeEventListener("scroll",n),s&&m.removeEventListener("resize",n)}),f==null||f(),(_=h)==null||_.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const mie=qre,yie=Hre,vie=Qre,bie=Xre,fI=Wre,wie=Zre,Sie=(t,e,n)=>{const r=new Map,i={platform:pie,...n},s={...i.platform,_c:r};return Vre(t,e,{...i,platform:s})},xie=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fI({element:r.current,padding:i}).fn(n):{}:r?fI({element:r,padding:i}).fn(n):{}}}};var am=typeof document<"u"?w.useLayoutEffect:w.useEffect;function R0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!R0(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!R0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function bD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dI(t,e){const n=bD(t);return Math.round(e*n)/n}function hI(t){const e=w.useRef(t);return am(()=>{e.current=t}),e}function Tie(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=w.useState(r);R0(d,r)||h(r);const[p,g]=w.useState(null),[v,_]=w.useState(null),m=w.useCallback(ne=>{ne!==A.current&&(A.current=ne,g(ne))},[]),y=w.useCallback(ne=>{ne!==I.current&&(I.current=ne,_(ne))},[]),b=s||p,S=o||v,A=w.useRef(null),I=w.useRef(null),R=w.useRef(u),M=l!=null,k=hI(l),N=hI(i),F=w.useCallback(()=>{if(!A.current||!I.current)return;const ne={placement:e,strategy:n,middleware:d};N.current&&(ne.platform=N.current),Sie(A.current,I.current,ne).then(X=>{const Y={...X,isPositioned:!0};D.current&&!R0(R.current,Y)&&(R.current=Y,Da.flushSync(()=>{f(Y)}))})},[d,e,n,N]);am(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(ne=>({...ne,isPositioned:!1})))},[c]);const D=w.useRef(!1);am(()=>(D.current=!0,()=>{D.current=!1}),[]),am(()=>{if(b&&(A.current=b),S&&(I.current=S),b&&S){if(k.current)return k.current(b,S,F);F()}},[b,S,F,k,M]);const z=w.useMemo(()=>({reference:A,floating:I,setReference:m,setFloating:y}),[m,y]),Z=w.useMemo(()=>({reference:b,floating:S}),[b,S]),ee=w.useMemo(()=>{const ne={position:n,left:0,top:0};if(!Z.floating)return ne;const X=dI(Z.floating,u.x),Y=dI(Z.floating,u.y);return a?{...ne,transform:"translate("+X+"px, "+Y+"px)",...bD(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:Y}},[n,a,Z.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:F,refs:z,elements:Z,floatingStyles:ee}),[u,F,z,Z,ee])}function wD(t){const[e,n]=w.useState(void 0);return bf(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const SD="Popper",[xD,TD]=La(SD),[Eie,ED]=xD(SD),Aie=t=>{const{__scopePopper:e,children:n}=t,[r,i]=w.useState(null);return w.createElement(Eie,{scope:e,anchor:r,onAnchorChange:i},n)},Cie="PopperAnchor",Rie=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=ED(Cie,n),o=w.useRef(null),a=pr(e,o);return w.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:w.createElement($t.div,Te({},i,{ref:a}))}),AD="PopperContent",[Pie,dRe]=xD(AD),Iie=w.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:d=0,align:h="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:v=!0,collisionBoundary:_=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:A,...I}=t,R=ED(AD,u),[M,k]=w.useState(null),N=pr(e,Fe=>k(Fe)),[F,D]=w.useState(null),z=wD(F),Z=(n=z==null?void 0:z.width)!==null&&n!==void 0?n:0,ee=(r=z==null?void 0:z.height)!==null&&r!==void 0?r:0,ne=f+(h!=="center"?"-"+h:""),X=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},Y=Array.isArray(_)?_:[_],ce=Y.length>0,me={padding:X,boundary:Y.filter(Mie),altBoundary:ce},{refs:G,floatingStyles:ge,placement:le,isPositioned:ae,middlewareData:oe}=Tie({strategy:"fixed",placement:ne,whileElementsMounted:(...Fe)=>_ie(...Fe,{animationFrame:S==="always"}),elements:{reference:R.anchor},middleware:[Kre({mainAxis:d+ee,alignmentAxis:p}),v&&mie({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?wie():void 0,...me}),v&&yie({...me}),vie({...me,apply:({elements:Fe,rects:Xe,availableWidth:rt,availableHeight:Ut})=>{const{width:er,height:Gt}=Xe.reference,At=Fe.floating.style;At.setProperty("--radix-popper-available-width",`${rt}px`),At.setProperty("--radix-popper-available-height",`${Ut}px`),At.setProperty("--radix-popper-anchor-width",`${er}px`),At.setProperty("--radix-popper-anchor-height",`${Gt}px`)}}),F&&xie({element:F,padding:g}),Oie({arrowWidth:Z,arrowHeight:ee}),b&&bie({strategy:"referenceHidden",...me})]}),[ue,Ee]=CD(le),K=lo(A);bf(()=>{ae&&(K==null||K())},[ae,K]);const q=(i=oe.arrow)===null||i===void 0?void 0:i.x,de=(s=oe.arrow)===null||s===void 0?void 0:s.y,H=((o=oe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[je,Be]=w.useState();return bf(()=>{M&&Be(window.getComputedStyle(M).zIndex)},[M]),w.createElement("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:ae?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(a=oe.transformOrigin)===null||a===void 0?void 0:a.x,(l=oe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},w.createElement(Pie,{scope:u,placedSide:ue,onArrowChange:D,arrowX:q,arrowY:de,shouldHideArrow:H},w.createElement($t.div,Te({"data-side":ue,"data-align":Ee},I,{ref:N,style:{...I.style,animation:ae?void 0:"none",opacity:(c=oe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Mie(t){return t!==null}const Oie=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,d=f?0:t.arrowWidth,h=f?0:t.arrowHeight,[p,g]=CD(a),v={start:"0%",center:"50%",end:"100%"}[g],_=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+d/2,m=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let y="",b="";return p==="bottom"?(y=f?v:`${_}px`,b=`${-h}px`):p==="top"?(y=f?v:`${_}px`,b=`${l.floating.height+h}px`):p==="right"?(y=`${-h}px`,b=f?v:`${m}px`):p==="left"&&(y=`${l.floating.width+h}px`,b=f?v:`${m}px`),{data:{x:y,y:b}}}});function CD(t){const[e,n="center"]=t.split("-");return[e,n]}const Nie=Aie,kie=Rie,Die=Iie,Fie=w.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?Hj.createPortal(w.createElement($t.div,Te({},i,{ref:e})),r):null});function Bie(t,e){return w.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const Yf=t=>{const{present:e,children:n}=t,r=Lie(e),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=pr(r.ref,i.ref);return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};Yf.displayName="Presence";function Lie(t){const[e,n]=w.useState(),r=w.useRef({}),i=w.useRef(t),s=w.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Bie(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=p_(r.current);s.current=a==="mounted"?c:"none"},[a]),bf(()=>{const c=r.current,u=i.current;if(u!==t){const d=s.current,h=p_(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),bf(()=>{if(e){const c=f=>{const h=p_(r.current).includes(f.animationName);f.target===e&&h&&Da.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=p_(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function p_(t){return(t==null?void 0:t.animationName)||"none"}function $a({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=$ie({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=lo(n),l=w.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[s,t,i,a]);return[o,l]}function $ie({defaultProp:t,onChange:e}){const n=w.useState(t),[r]=n,i=w.useRef(r),s=lo(e);return w.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const Uie=w.forwardRef((t,e)=>w.createElement($t.span,Te({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),zie=Uie,[Vv,hRe]=La("Tooltip",[TD]),XT=TD(),jie="TooltipProvider",Vie=700,VS="tooltip.open",[Wie,YT]=Vv(jie),Hie=t=>{const{__scopeTooltip:e,delayDuration:n=Vie,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,[o,a]=w.useState(!0),l=w.useRef(!1),c=w.useRef(0);return w.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),w.createElement(Wie,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:w.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:w.useCallback(u=>{l.current=u},[]),disableHoverableContent:i},s)},KT="Tooltip",[Xie,Wv]=Vv(KT),Yie=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=YT(KT,t.__scopeTooltip),c=XT(e),[u,f]=w.useState(null),d=Ru(),h=w.useRef(0),p=o??l.disableHoverableContent,g=a??l.delayDuration,v=w.useRef(!1),[_=!1,m]=$a({prop:r,defaultProp:i,onChange:I=>{I?(l.onOpen(),document.dispatchEvent(new CustomEvent(VS))):l.onClose(),s==null||s(I)}}),y=w.useMemo(()=>_?v.current?"delayed-open":"instant-open":"closed",[_]),b=w.useCallback(()=>{window.clearTimeout(h.current),v.current=!1,m(!0)},[m]),S=w.useCallback(()=>{window.clearTimeout(h.current),m(!1)},[m]),A=w.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,m(!0)},g)},[g,m]);return w.useEffect(()=>()=>window.clearTimeout(h.current),[]),w.createElement(Nie,c,w.createElement(Xie,{scope:e,contentId:d,open:_,stateAttribute:y,trigger:u,onTriggerChange:f,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayed?A():b()},[l.isOpenDelayed,A,b]),onTriggerLeave:w.useCallback(()=>{p?S():window.clearTimeout(h.current)},[S,p]),onOpen:b,onClose:S,disableHoverableContent:p},n))},pI="TooltipTrigger",Kie=w.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Wv(pI,n),s=YT(pI,n),o=XT(n),a=w.useRef(null),l=pr(e,a,i.onTriggerChange),c=w.useRef(!1),u=w.useRef(!1),f=w.useCallback(()=>c.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),w.createElement(kie,Te({asChild:!0},o),w.createElement($t.button,Te({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Ot(t.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ot(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ot(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ot(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:Ot(t.onBlur,i.onClose),onClick:Ot(t.onClick,i.onClose)})))}),qie="TooltipPortal",[pRe,Zie]=Vv(qie,{forceMount:void 0}),bp="TooltipContent",Qie=w.forwardRef((t,e)=>{const n=Zie(bp,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Wv(bp,t.__scopeTooltip);return w.createElement(Yf,{present:r||o.open},o.disableHoverableContent?w.createElement(RD,Te({side:i},s,{ref:e})):w.createElement(Gie,Te({side:i},s,{ref:e})))}),Gie=w.forwardRef((t,e)=>{const n=Wv(bp,t.__scopeTooltip),r=YT(bp,t.__scopeTooltip),i=w.useRef(null),s=pr(e,i),[o,a]=w.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,d=w.useCallback(()=>{a(null),f(!1)},[f]),h=w.useCallback((p,g)=>{const v=p.currentTarget,_={x:p.clientX,y:p.clientY},m=ese(_,v.getBoundingClientRect()),y=tse(_,m),b=nse(g.getBoundingClientRect()),S=ise([...y,...b]);a(S),f(!0)},[f]);return w.useEffect(()=>()=>d(),[d]),w.useEffect(()=>{if(l&&u){const p=v=>h(v,u),g=v=>h(v,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[l,u,h,d]),w.useEffect(()=>{if(o){const p=g=>{const v=g.target,_={x:g.clientX,y:g.clientY},m=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),y=!rse(_,o);m?d():y&&(d(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,d]),w.createElement(RD,Te({},t,{ref:s}))}),[Jie,gRe]=Vv(KT,{isInside:!1}),RD=w.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=Wv(bp,n),c=XT(n),{onClose:u}=l;return w.useEffect(()=>(document.addEventListener(VS,u),()=>document.removeEventListener(VS,u)),[u]),w.useEffect(()=>{if(l.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),w.createElement(cD,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},w.createElement(Die,Te({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),w.createElement(lD,null,r),w.createElement(Jie,{scope:n,isInside:!0},w.createElement(zie,{id:l.contentId,role:"tooltip"},i||r))))});function ese(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function tse(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function nse(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function rse(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function ise(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),sse(e)}function sse(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}const ose=Hie,ase=Yie,lse=Kie,PD=Qie,cse=ose,qT=ase,ZT=lse,Hv=w.forwardRef(({className:t,sideOffset:e=4,...n},r)=>x.jsx(PD,{ref:r,sideOffset:e,className:an("fade-in-0 zoom-in-95 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 animate-in overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-popover-foreground text-sm shadow-md data-[state=closed]:animate-out",t),...n}));Hv.displayName=PD.displayName;const ID={longitude:107.5315,latitude:-6.79924,zoom:8};var use={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const gI=t=>{let e;const n=new Set,r=(u,f)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const h=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,h))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(use?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},fse=t=>t?gI(t):gI;var MD={exports:{}},OD={},ND={exports:{}},kD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sf=w;function dse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hse=typeof Object.is=="function"?Object.is:dse,pse=Sf.useState,gse=Sf.useEffect,_se=Sf.useLayoutEffect,mse=Sf.useDebugValue;function yse(t,e){var n=e(),r=pse({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return _se(function(){i.value=n,i.getSnapshot=e,pw(i)&&s({inst:i})},[t,n,e]),gse(function(){return pw(i)&&s({inst:i}),t(function(){pw(i)&&s({inst:i})})},[t]),mse(n),n}function pw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hse(t,n)}catch{return!0}}function vse(t,e){return e()}var bse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vse:yse;kD.useSyncExternalStore=Sf.useSyncExternalStore!==void 0?Sf.useSyncExternalStore:bse;ND.exports=kD;var wse=ND.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv=w,Sse=wse;function xse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tse=typeof Object.is=="function"?Object.is:xse,Ese=Sse.useSyncExternalStore,Ase=Xv.useRef,Cse=Xv.useEffect,Rse=Xv.useMemo,Pse=Xv.useDebugValue;OD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Ase(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Rse(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Tse(u,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(u=h,f=g)}var c=!1,u,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,i]);var a=Ese(t,s[0],s[1]);return Cse(function(){o.hasValue=!0,o.value=a},[a]),Pse(a),a};MD.exports=OD;var Ise=MD.exports;const Mse=Un(Ise);var DD={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Ose}=J,{useSyncExternalStoreWithSelector:Nse}=Mse;let _I=!1;const kse=t=>t;function Dse(t,e=kse,n){(DD?"production":void 0)!=="production"&&n&&!_I&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),_I=!0);const r=Nse(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Ose(r),r}const mI=t=>{(DD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?fse(t):t,n=(r,i)=>Dse(e,r,i);return Object.assign(n,e),n},Fse=t=>t?mI(t):mI,Zt=Fse()(t=>({active:{analysis:"grid",fill:"FoodExpend"},settings:{region:!0,tooltip:!1,baseMap:"default"},changeActiveAnalysis:e=>t({active:e==="grid"?{analysis:"grid",fill:"FoodExpend"}:{analysis:"cluster",clusters:"Geographic"}})}));function Bse(t){const[e,n]=w.useState(!1);return w.useEffect(()=>{const r=s=>n(s.matches),i=matchMedia(t);return i.addEventListener("change",r),n(i.matches),()=>i.removeEventListener("change",r)},[t]),e}const Lse="(min-width: 768px)",$se=()=>Bse(Lse),gw="focusScope.autoFocusOnMount",_w="focusScope.autoFocusOnUnmount",yI={bubbles:!1,cancelable:!0},Use=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=w.useState(null),c=lo(i),u=lo(s),f=w.useRef(null),d=pr(e,g=>l(g)),h=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(y){if(h.paused||!a)return;const b=y.target;a.contains(b)?f.current=b:Fo(f.current,{select:!0})},v=function(y){if(h.paused||!a)return;const b=y.relatedTarget;b!==null&&(a.contains(b)||Fo(f.current,{select:!0}))},_=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&Fo(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const m=new MutationObserver(_);return a&&m.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),m.disconnect()}}},[r,a,h.paused]),w.useEffect(()=>{if(a){bI.add(h);const g=document.activeElement;if(!a.contains(g)){const _=new CustomEvent(gw,yI);a.addEventListener(gw,c),a.dispatchEvent(_),_.defaultPrevented||(zse(Xse(FD(a)),{select:!0}),document.activeElement===g&&Fo(a))}return()=>{a.removeEventListener(gw,c),setTimeout(()=>{const _=new CustomEvent(_w,yI);a.addEventListener(_w,u),a.dispatchEvent(_),_.defaultPrevented||Fo(g??document.body,{select:!0}),a.removeEventListener(_w,u),bI.remove(h)},0)}}},[a,c,u,h]);const p=w.useCallback(g=>{if(!n&&!r||h.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,_=document.activeElement;if(v&&_){const m=g.currentTarget,[y,b]=jse(m);y&&b?!g.shiftKey&&_===b?(g.preventDefault(),n&&Fo(y,{select:!0})):g.shiftKey&&_===y&&(g.preventDefault(),n&&Fo(b,{select:!0})):_===m&&g.preventDefault()}},[n,r,h.paused]);return w.createElement($t.div,Te({tabIndex:-1},o,{ref:d,onKeyDown:p}))});function zse(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Fo(r,{select:e}),document.activeElement!==n)return}function jse(t){const e=FD(t),n=vI(e,t),r=vI(e.reverse(),t);return[n,r]}function FD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vI(t,e){for(const n of t)if(!Vse(n,{upTo:e}))return n}function Vse(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Wse(t){return t instanceof HTMLInputElement&&"select"in t}function Fo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Wse(t)&&e&&t.select()}}const bI=Hse();function Hse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=wI(t,e),t.unshift(e)},remove(e){var n;t=wI(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function wI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Xse(t){return t.filter(e=>e.tagName!=="A")}let mw=0;function Yse(){w.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:SI()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:SI()),mw++,()=>{mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),mw--}},[])}function SI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var cs=function(){return cs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cs.apply(this,arguments)};function BD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $e(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function xI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kse(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function We(t){return this instanceof We?(this.v=t,this):new We(t)}function gs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||a(d,h)})})}function a(d,h){try{l(r[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof We?Promise.resolve(d.value.v).then(c,u):f(s[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function lm(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:We(t[i](o)),done:!1}:s?s(o):o}:s}}function Iu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xI=="function"?xI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var cm="right-scroll-bar-position",um="width-before-scroll-bar",qse="with-scroll-bars-hidden",Zse="--removed-body-scroll-bar-size";function yw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Qse(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Gse=typeof window<"u"?w.useLayoutEffect:w.useEffect,TI=new WeakMap;function Jse(t,e){var n=Qse(e||null,function(r){return t.forEach(function(i){return yw(i,r)})});return Gse(function(){var r=TI.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||yw(a,null)}),s.forEach(function(a){i.has(a)||yw(a,o)})}TI.set(n,t)},[t]),n}function eoe(t){return t}function toe(t,e){e===void 0&&(e=eoe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function noe(t){t===void 0&&(t={});var e=toe(null);return e.options=cs({async:!0,ssr:!1},t),e}var LD=function(t){var e=t.sideCar,n=BD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,cs({},n))};LD.isSideCarExport=!0;function roe(t,e){return t.useMedium(e),LD}var $D=noe(),vw=function(){},Yv=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:vw,onWheelCapture:vw,onTouchMoveCapture:vw}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,d=t.sideCar,h=t.noIsolation,p=t.inert,g=t.allowPinchZoom,v=t.as,_=v===void 0?"div":v,m=BD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=d,b=Jse([n,e]),S=cs(cs({},m),i);return w.createElement(w.Fragment,null,u&&w.createElement(y,{sideCar:$D,removeScrollBar:c,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?w.cloneElement(w.Children.only(a),cs(cs({},S),{ref:b})):w.createElement(_,cs({},S,{className:l,ref:b}),a))});Yv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yv.classNames={fullWidth:um,zeroRight:cm};var ioe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function soe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ioe();return e&&t.setAttribute("nonce",e),t}function ooe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function aoe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var loe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=soe())&&(ooe(e,n),aoe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},coe=function(){var t=loe();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},UD=function(){var t=coe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},uoe={left:0,top:0,right:0,gap:0},bw=function(t){return parseInt(t||"",10)||0},foe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[bw(n),bw(r),bw(i)]},doe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return uoe;var e=foe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hoe=UD(),Mu="data-scroll-locked",poe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qse,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Mu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(um,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cm," .").concat(cm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(um," .").concat(um,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mu,`] {
    `).concat(Zse,": ").concat(a,`px;
  }
`)},EI=function(){var t=parseInt(document.body.getAttribute(Mu)||"0",10);return isFinite(t)?t:0},goe=function(){w.useEffect(function(){return document.body.setAttribute(Mu,(EI()+1).toString()),function(){var t=EI()-1;t<=0?document.body.removeAttribute(Mu):document.body.setAttribute(Mu,t.toString())}},[])},_oe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;goe();var s=w.useMemo(function(){return doe(i)},[i]);return w.createElement(hoe,{styles:poe(s,!e,i,n?"":"!important")})},WS=!1;if(typeof window<"u")try{var g_=Object.defineProperty({},"passive",{get:function(){return WS=!0,!0}});window.addEventListener("test",g_,g_),window.removeEventListener("test",g_,g_)}catch{WS=!1}var Rc=WS?{passive:!1}:!1,moe=function(t){return t.tagName==="TEXTAREA"},zD=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!moe(t)&&n[e]==="visible")},yoe=function(t){return zD(t,"overflowY")},voe=function(t){return zD(t,"overflowX")},AI=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=jD(t,n);if(r){var i=VD(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},boe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},woe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},jD=function(t,e){return t==="v"?yoe(e):voe(e)},VD=function(t,e){return t==="v"?boe(e):woe(e)},Soe=function(t,e){return t==="h"&&e==="rtl"?-1:1},xoe=function(t,e,n,r,i){var s=Soe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,f=0,d=0;do{var h=VD(t,a),p=h[0],g=h[1],v=h[2],_=g-v-s*p;(p||_)&&jD(t,a)&&(f+=_,d+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&f===0||!i&&o>f)||!u&&(i&&d===0||!i&&-o>d))&&(c=!0),c},__=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},CI=function(t){return[t.deltaX,t.deltaY]},RI=function(t){return t&&"current"in t?t.current:t},Toe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Eoe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Aoe=0,Pc=[];function Coe(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(Aoe++)[0],s=w.useState(function(){return UD()})[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Kse([t.lockRef.current],(t.shards||[]).map(RI),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(g,v){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var _=__(g),m=n.current,y="deltaX"in g?g.deltaX:m[0]-_[0],b="deltaY"in g?g.deltaY:m[1]-_[1],S,A=g.target,I=Math.abs(y)>Math.abs(b)?"h":"v";if("touches"in g&&I==="h"&&A.type==="range")return!1;var R=AI(I,A);if(!R)return!0;if(R?S=I:(S=I==="v"?"h":"v",R=AI(I,A)),!R)return!1;if(!r.current&&"changedTouches"in g&&(y||b)&&(r.current=S),!S)return!0;var M=r.current||S;return xoe(M,v,g,M==="h"?y:b,!0)},[]),l=w.useCallback(function(g){var v=g;if(!(!Pc.length||Pc[Pc.length-1]!==s)){var _="deltaY"in v?CI(v):__(v),m=e.current.filter(function(S){return S.name===v.type&&S.target===v.target&&Toe(S.delta,_)})[0];if(m&&m.should){v.cancelable&&v.preventDefault();return}if(!m){var y=(o.current.shards||[]).map(RI).filter(Boolean).filter(function(S){return S.contains(v.target)}),b=y.length>0?a(v,y[0]):!o.current.noIsolation;b&&v.cancelable&&v.preventDefault()}}},[]),c=w.useCallback(function(g,v,_,m){var y={name:g,delta:v,target:_,should:m};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(b){return b!==y})},1)},[]),u=w.useCallback(function(g){n.current=__(g),r.current=void 0},[]),f=w.useCallback(function(g){c(g.type,CI(g),g.target,a(g,t.lockRef.current))},[]),d=w.useCallback(function(g){c(g.type,__(g),g.target,a(g,t.lockRef.current))},[]);w.useEffect(function(){return Pc.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Rc),document.addEventListener("touchmove",l,Rc),document.addEventListener("touchstart",u,Rc),function(){Pc=Pc.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Rc),document.removeEventListener("touchmove",l,Rc),document.removeEventListener("touchstart",u,Rc)}},[]);var h=t.removeScrollBar,p=t.inert;return w.createElement(w.Fragment,null,p?w.createElement(s,{styles:Eoe(i)}):null,h?w.createElement(_oe,{gapMode:"margin"}):null)}const Roe=roe($D,Coe);var WD=w.forwardRef(function(t,e){return w.createElement(Yv,cs({},t,{ref:e,sideCar:Roe}))});WD.classNames=Yv.classNames;const Poe=WD;var Ioe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ic=new WeakMap,m_=new WeakMap,y_={},ww=0,HD=function(t){return t&&(t.host||HD(t.parentNode))},Moe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=HD(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ooe=function(t,e,n,r){var i=Moe(e,Array.isArray(t)?t:[t]);y_[n]||(y_[n]=new WeakMap);var s=y_[n],o=[],a=new Set,l=new Set(i),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(a.has(d))u(d);else try{var h=d.getAttribute(r),p=h!==null&&h!=="false",g=(Ic.get(d)||0)+1,v=(s.get(d)||0)+1;Ic.set(d,g),s.set(d,v),o.push(d),g===1&&p&&m_.set(d,!0),v===1&&d.setAttribute(n,"true"),p||d.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",d,_)}})};return u(e),a.clear(),ww++,function(){o.forEach(function(f){var d=Ic.get(f)-1,h=s.get(f)-1;Ic.set(f,d),s.set(f,h),d||(m_.has(f)||f.removeAttribute(r),m_.delete(f)),h||f.removeAttribute(n)}),ww--,ww||(Ic=new WeakMap,Ic=new WeakMap,m_=new WeakMap,y_={})}},Noe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||Ioe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Ooe(r,i,n,"aria-hidden")):function(){return null}};const XD="Dialog",[YD,_Re]=La(XD),[koe,Bi]=YD(XD),Doe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=w.useRef(null),l=w.useRef(null),[c=!1,u]=$a({prop:r,defaultProp:i,onChange:s});return w.createElement(koe,{scope:e,triggerRef:a,contentRef:l,contentId:Ru(),titleId:Ru(),descriptionId:Ru(),open:c,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(f=>!f),[u]),modal:o},n)},Foe="DialogTrigger",Boe=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Bi(Foe,n),s=pr(e,i.triggerRef);return w.createElement($t.button,Te({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":QT(i.open)},r,{ref:s,onClick:Ot(t.onClick,i.onOpenToggle)}))}),KD="DialogPortal",[Loe,qD]=YD(KD,{forceMount:void 0}),$oe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Bi(KD,e);return w.createElement(Loe,{scope:e,forceMount:n},w.Children.map(r,o=>w.createElement(Yf,{present:n||s.open},w.createElement(Fie,{asChild:!0,container:i},o))))},HS="DialogOverlay",Uoe=w.forwardRef((t,e)=>{const n=qD(HS,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Bi(HS,t.__scopeDialog);return s.modal?w.createElement(Yf,{present:r||s.open},w.createElement(zoe,Te({},i,{ref:e}))):null}),zoe=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Bi(HS,n);return w.createElement(Poe,{as:vf,allowPinchZoom:!0,shards:[i.contentRef]},w.createElement($t.div,Te({"data-state":QT(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),wp="DialogContent",joe=w.forwardRef((t,e)=>{const n=qD(wp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Bi(wp,t.__scopeDialog);return w.createElement(Yf,{present:r||s.open},s.modal?w.createElement(Voe,Te({},i,{ref:e})):w.createElement(Woe,Te({},i,{ref:e})))}),Voe=w.forwardRef((t,e)=>{const n=Bi(wp,t.__scopeDialog),r=w.useRef(null),i=pr(e,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return Noe(s)},[]),w.createElement(ZD,Te({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ot(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Ot(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ot(t.onFocusOutside,s=>s.preventDefault())}))}),Woe=w.forwardRef((t,e)=>{const n=Bi(wp,t.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return w.createElement(ZD,Te({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),ZD=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Bi(wp,n),l=w.useRef(null),c=pr(e,l);return Yse(),w.createElement(w.Fragment,null,w.createElement(Use,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},w.createElement(cD,Te({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":QT(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),Hoe="DialogTitle",Xoe=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Bi(Hoe,n);return w.createElement($t.h2,Te({id:i.titleId},r,{ref:e}))}),Yoe="DialogDescription",Koe=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Bi(Yoe,n);return w.createElement($t.p,Te({id:i.descriptionId},r,{ref:e}))}),qoe="DialogClose",Zoe=w.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Bi(qoe,n);return w.createElement($t.button,Te({type:"button"},r,{ref:e,onClick:Ot(t.onClick,()=>i.onOpenChange(!1))}))});function QT(t){return t?"open":"closed"}const Qoe=Doe,Goe=Boe,Joe=$oe,eae=Uoe,tae=joe,nae=Xoe,rae=Koe,iae=Zoe;function sae(t){if(!t||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const QD=J.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),Kv=()=>{const t=J.useContext(QD);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};sae("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const oae=typeof window<"u"?w.useLayoutEffect:w.useEffect;function XS(...t){return(...e)=>{for(let n of t)typeof n=="function"&&n(...e)}}function aae(){return GT(/^Mac/)}function lae(){return GT(/^iPhone/)}function cae(){return GT(/^iPad/)||aae()&&navigator.maxTouchPoints>1}function GD(){return lae()||cae()}function GT(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Sw=typeof document<"u"&&window.visualViewport;function PI(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function JD(t){for(PI(t)&&(t=t.parentElement);t&&!PI(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const uae=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let v_=0,xw;function fae(t={}){let{isDisabled:e}=t;oae(()=>{if(!e)return v_++,v_===1&&(GD()?xw=hae():xw=dae()),()=>{v_--,v_===0&&xw()}},[e])}function dae(){return XS(eF(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`))}function hae(){let t,e=0,n=f=>{t=JD(f.target),!(t===document.documentElement&&t===document.body)&&(e=f.changedTouches[0].pageY)},r=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let d=f.changedTouches[0].pageY,h=t.scrollTop,p=t.scrollHeight-t.clientHeight;p!==0&&((h<=0&&d>e||h>=p&&d<e)&&f.preventDefault(),e=d)},i=f=>{let d=f.target;YS(d)&&d!==document.activeElement&&(f.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},s=f=>{let d=f.target;YS(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",Sw&&(Sw.height<window.innerHeight?requestAnimationFrame(()=>{II(d)}):Sw.addEventListener("resize",()=>II(d),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},a=window.pageXOffset,l=window.pageYOffset,c=XS(eF(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=XS(Md(document,"touchstart",n,{passive:!1,capture:!0}),Md(document,"touchmove",r,{passive:!1,capture:!0}),Md(document,"touchend",i,{passive:!1,capture:!0}),Md(document,"focus",s,!0),Md(window,"scroll",o));return()=>{c(),u(),window.scrollTo(a,l)}}function eF(t,e,n){let r=t.style[e];return t.style[e]=n,()=>{t.style[e]=r}}function Md(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}function II(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let n=JD(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom;s>o&&(n.scrollTop+=i-r)}t=n.parentElement}}function YS(t){return t instanceof HTMLInputElement&&!uae.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function pae(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function gae(...t){return e=>t.forEach(n=>pae(n,e))}function tF(...t){return w.useCallback(gae(...t),t)}let Od=null;function _ae({isOpen:t,modal:e,nested:n,hasBeenOpened:r,preventScrollRestoration:i,noBodyStyles:s}){const[o,a]=J.useState(()=>typeof window<"u"?window.location.href:""),l=J.useRef(0),c=J.useCallback(()=>{if(Od===null&&t&&!s){Od={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const h=d-window.innerHeight;h&&l.current>=d&&(document.body.style.top=`${-(l.current+h)}px`)}),300)}},[t]),u=J.useCallback(()=>{if(Od!==null&&!s){const f=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Od),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){a(window.location.href);return}window.scrollTo(d,f)}),Od=null}},[o]);return J.useEffect(()=>{function f(){l.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),J.useEffect(()=>{n||!r||(t?(!window.matchMedia("(display-mode: standalone)").matches&&c(),e||window.setTimeout(()=>{u()},500)):u())},[t,r,o,e,n,c,u]),{restorePositionSetting:u}}const nF=new WeakMap;function Pt(t,e,n=!1){if(!t||!(t instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([i,s])=>{if(i.startsWith("--")){t.style.setProperty(i,s);return}r[i]=t.style[i],t.style[i]=s}),!n&&nF.set(t,r)}function b_(t,e){if(!t||!(t instanceof HTMLElement))return;let n=nF.get(t);n&&(e?t.style[e]=n[e]:Object.entries(n).forEach(([r,i])=>{t.style[r]=i}))}const nn=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function w_(t,e){if(!t)return null;const n=window.getComputedStyle(t),r=n.transform||n.webkitTransform||n.mozTransform;let i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[nn(e)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[nn(e)?5:4]):null)}function mae(t){return 8*(Math.log(t+1)-2)}const bt={DURATION:.5,EASE:[.32,.72,0,1]},rF=.4;function iF(t){const e=J.useRef(t);return J.useEffect(()=>{e.current=t}),J.useMemo(()=>(...n)=>e.current==null?void 0:e.current.call(e,...n),[])}function yae({defaultProp:t,onChange:e}){const n=J.useState(t),[r]=n,i=J.useRef(r),s=iF(e);return J.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function vae({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=yae({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=iF(n),l=J.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[s,t,i,a]);return[o,l]}function bae({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:n,drawerRef:r,overlayRef:i,fadeFromIndex:s,onSnapPointChange:o,direction:a="bottom"}){const[l,c]=vae({prop:t,defaultProp:n==null?void 0:n[0],onChange:e}),u=J.useMemo(()=>l===(n==null?void 0:n[n.length-1])||null,[n,l]),f=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===l||!n,d=J.useMemo(()=>n==null?void 0:n.findIndex(y=>y===l),[n,l]),h=J.useMemo(()=>{var y;return(y=n==null?void 0:n.map(b=>{const S=typeof window<"u",A=typeof b=="string";let I=0;if(A&&(I=parseInt(b,10)),nn(a)){const M=A?I:S?b*window.innerHeight:0;return S?a==="bottom"?window.innerHeight-M:-window.innerHeight+M:M}const R=A?I:S?b*window.innerWidth:0;return S?a==="right"?window.innerWidth-R:-window.innerWidth+R:R}))!=null?y:[]},[n]),p=J.useMemo(()=>d!==null?h==null?void 0:h[d]:null,[h,d]),g=J.useCallback(y=>{var b;const S=(b=h==null?void 0:h.findIndex(A=>A===y))!=null?b:null;o(S),Pt(r.current,{transition:`transform ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,transform:nn(a)?`translate3d(0, ${y}px, 0)`:`translate3d(${y}px, 0, 0)`}),h&&S!==h.length-1&&S!==s?Pt(i.current,{transition:`opacity ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,opacity:"0"}):Pt(i.current,{transition:`opacity ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,opacity:"1"}),c(S!==null?n==null?void 0:n[S]:null)},[r.current,n,h,s,i,c]);J.useEffect(()=>{if(l||t){var y;const b=(y=n==null?void 0:n.findIndex(S=>S===t||S===l))!=null?y:-1;h&&b!==-1&&typeof h[b]=="number"&&g(h[b])}},[l,t,n,h,g]);function v({draggedDistance:y,closeDrawer:b,velocity:S,dismissible:A}){if(s===void 0)return;const I=a==="bottom"||a==="right"?(p??0)-y:(p??0)+y,R=d===s-1,M=d===0,k=y>0;if(R&&Pt(i.current,{transition:`opacity ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`}),S>2&&!k){A?b():g(h[0]);return}if(S>2&&k&&h&&n){g(h[n.length-1]);return}const N=h==null?void 0:h.reduce((D,z)=>typeof D!="number"||typeof z!="number"?D:Math.abs(z-I)<Math.abs(D-I)?z:D),F=nn(a)?window.innerHeight:window.innerWidth;if(S>rF&&Math.abs(y)<F*.4){const D=k?1:-1;if(D>0&&u){g(h[n.length-1]);return}if(M&&D<0&&A&&b(),d===null)return;g(h[d+D]);return}g(N)}function _({draggedDistance:y}){if(p===null)return;const b=a==="bottom"||a==="right"?p-y:p+y;(a==="bottom"||a==="right")&&b<h[h.length-1]||(a==="top"||a==="left")&&b>h[h.length-1]||Pt(r.current,{transform:nn(a)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`})}function m(y,b){if(!n||typeof d!="number"||!h||s===void 0)return null;const S=d===s-1;if(d>=s&&b)return 0;if(S&&!b)return 1;if(!f&&!S)return null;const I=S?d+1:d-1,R=S?h[I]-h[I-1]:h[I+1]-h[I],M=y/Math.abs(R);return S?1-M:M}return{isLastSnapPoint:u,activeSnapPoint:l,shouldFade:f,getPercentageDragged:m,setActiveSnapPoint:c,activeSnapPointIndex:d,onRelease:v,onDrag:_,snapPointsOffset:h}}const wae=.25,Sae=100,MI=8,Za=16,OI=26,Tw="vaul-dragging";function sF({open:t,onOpenChange:e,children:n,shouldScaleBackground:r,onDrag:i,onRelease:s,snapPoints:o,nested:a=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=wae,scrollLockTimeout:u=Sae,dismissible:f=!0,handleOnly:d=!1,fadeFromIndex:h=o&&o.length-1,activeSnapPoint:p,setActiveSnapPoint:g,fixed:v,modal:_=!0,onClose:m,noBodyStyles:y,direction:b="bottom",preventScrollRestoration:S=!0,disablePreventScroll:A=!1}){var I;const[R=!1,M]=J.useState(!1),[k,N]=J.useState(!1),[F,D]=J.useState(!1),[z,Z]=J.useState(!1),[ee,ne]=J.useState(!1),[X,Y]=J.useState(!1),ce=J.useRef(null),me=J.useRef(null),G=J.useRef(null),ge=J.useRef(null),le=J.useRef(null),ae=J.useRef(!1),oe=J.useRef(null),ue=J.useRef(0),Ee=J.useRef(!1),K=J.useRef(0),q=J.useRef(null),de=J.useRef(((I=q.current)==null?void 0:I.getBoundingClientRect().height)||0),H=J.useRef(0),je=J.useCallback(ye=>{o&&ye===Ut.length-1&&(me.current=new Date)},[]),{activeSnapPoint:Be,activeSnapPointIndex:Fe,setActiveSnapPoint:Xe,onRelease:rt,snapPointsOffset:Ut,onDrag:er,shouldFade:Gt,getPercentageDragged:At}=bae({snapPoints:o,activeSnapPointProp:p,setActiveSnapPointProp:g,drawerRef:q,fadeFromIndex:h,overlayRef:ce,onSnapPointChange:je,direction:b});fae({isDisabled:!R||ee||!_||X||!k||A});const{restorePositionSetting:mr}=_ae({isOpen:R,modal:_,nested:a,hasBeenOpened:k,preventScrollRestoration:S,noBodyStyles:y});function tr(){return(window.innerWidth-OI)/window.innerWidth}function id(ye){var Ue;!f&&!o||q.current&&!q.current.contains(ye.target)||(de.current=((Ue=q.current)==null?void 0:Ue.getBoundingClientRect().height)||0,ne(!0),G.current=new Date,GD()&&window.addEventListener("touchend",()=>ae.current=!1,{once:!0}),ye.target.setPointerCapture(ye.pointerId),ue.current=nn(b)?ye.clientY:ye.clientX)}function Va(ye,Ue){var pt;let Le=ye;const vt=(pt=window.getSelection())==null?void 0:pt.toString(),Ft=q.current?w_(q.current,b):null,wn=new Date;if(Le.hasAttribute("data-vaul-no-drag")||Le.closest("[data-vaul-no-drag]"))return!1;if(b==="right"||b==="left")return!0;if(me.current&&wn.getTime()-me.current.getTime()<500)return!1;if(Ft!==null&&(b==="bottom"?Ft>0:Ft<0))return!0;if(vt&&vt.length>0)return!1;if(le.current&&wn.getTime()-le.current.getTime()<u&&Ft===0||Ue)return le.current=wn,!1;for(;Le;){if(Le.scrollHeight>Le.clientHeight){if(Le.scrollTop!==0)return le.current=new Date,!1;if(Le.getAttribute("role")==="dialog")return!0}Le=Le.parentNode}return!0}function sd(ye){if(q.current&&ee){const Ue=b==="bottom"||b==="right"?1:-1,pt=(ue.current-(nn(b)?ye.clientY:ye.clientX))*Ue,Le=pt>0,vt=o&&!f&&!Le;if(vt&&Fe===0)return;const Ft=Math.abs(pt),wn=document.querySelector("[vaul-drawer-wrapper]");let pn=Ft/de.current;const zn=At(Ft,Le);if(zn!==null&&(pn=zn),vt&&pn>=1||!ae.current&&!Va(ye.target,Le))return;if(q.current.classList.add(Tw),ae.current=!0,Pt(q.current,{transition:"none"}),Pt(ce.current,{transition:"none"}),o&&er({draggedDistance:pt}),Le&&!o){const nr=mae(pt),di=Math.min(nr*-1,0)*Ue;Pt(q.current,{transform:nn(b)?`translate3d(0, ${di}px, 0)`:`translate3d(${di}px, 0, 0)`});return}const Ms=1-pn;if((Gt||h&&Fe===h-1)&&(i==null||i(ye,pn),Pt(ce.current,{opacity:`${Ms}`,transition:"none"},!0)),wn&&ce.current&&r){const nr=Math.min(tr()+pn*(1-tr()),1),di=8-pn*8,zi=Math.max(0,14-pn*14);Pt(wn,{borderRadius:`${di}px`,transform:nn(b)?`scale(${nr}) translate3d(0, ${zi}px, 0)`:`scale(${nr}) translate3d(${zi}px, 0, 0)`,transition:"none"},!0)}if(!o){const nr=Ft*Ue;Pt(q.current,{transform:nn(b)?`translate3d(0, ${nr}px, 0)`:`translate3d(${nr}px, 0, 0)`})}}}J.useEffect(()=>()=>{fi(!1),mr()},[]),J.useEffect(()=>{var ye;function Ue(){if(!q.current)return;const pt=document.activeElement;if(YS(pt)||Ee.current){var Le;const vt=((Le=window.visualViewport)==null?void 0:Le.height)||0;let Ft=window.innerHeight-vt;const wn=q.current.getBoundingClientRect().height||0;H.current||(H.current=wn);const pn=q.current.getBoundingClientRect().top;if(Math.abs(K.current-Ft)>60&&(Ee.current=!Ee.current),o&&o.length>0&&Ut&&Fe){const zn=Ut[Fe]||0;Ft+=zn}if(K.current=Ft,wn>vt||Ee.current){const zn=q.current.getBoundingClientRect().height;let Ms=zn;zn>vt&&(Ms=vt-OI),v?q.current.style.height=`${zn-Math.max(Ft,0)}px`:q.current.style.height=`${Math.max(Ms,vt-pn)}px`}else q.current.style.height=`${H.current}px`;o&&o.length>0&&!Ee.current?q.current.style.bottom="0px":q.current.style.bottom=`${Math.max(Ft,0)}px`}}return(ye=window.visualViewport)==null||ye.addEventListener("resize",Ue),()=>{var pt;return(pt=window.visualViewport)==null?void 0:pt.removeEventListener("resize",Ue)}},[Fe,o,Ut]);function zr(){q.current&&(Ui(),m==null||m(),Pt(q.current,{transform:nn(b)?`translate3d(0, ${b==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${b==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`}),Pt(ce.current,{opacity:"0",transition:`opacity ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`}),fi(!1),setTimeout(()=>{D(!1),M(!1)},300),setTimeout(()=>{o&&Xe(o[0])},bt.DURATION*1e3))}J.useEffect(()=>{if(!R&&r){const ye=setTimeout(()=>{b_(document.body)},200);return()=>clearTimeout(ye)}},[R,r]),J.useLayoutEffect(()=>{t?(M(!0),N(!0)):zr()},[t]),J.useEffect(()=>{z&&(e==null||e(R))},[R]),J.useEffect(()=>{Z(!0)},[]);function Wa(){if(!q.current)return;const ye=document.querySelector("[vaul-drawer-wrapper]"),Ue=w_(q.current,b);Pt(q.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`}),Pt(ce.current,{transition:`opacity ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,opacity:"1"}),r&&Ue&&Ue>0&&R&&Pt(ye,{borderRadius:`${MI}px`,overflow:"hidden",...nn(b)?{transform:`scale(${tr()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${tr()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${bt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${bt.EASE.join(",")})`},!0)}function Ui(){!ee||!q.current||(q.current.classList.remove(Tw),ae.current=!1,ne(!1),ge.current=new Date)}function fc(ye){if(!ee||!q.current)return;q.current.classList.remove(Tw),ae.current=!1,ne(!1),ge.current=new Date;const Ue=w_(q.current,b);if(!Va(ye.target,!1)||!Ue||Number.isNaN(Ue)||G.current===null)return;const pt=ge.current.getTime()-G.current.getTime(),Le=ue.current-(nn(b)?ye.clientY:ye.clientX),vt=Math.abs(Le)/pt;if(vt>.05&&(Y(!0),setTimeout(()=>{Y(!1)},200)),o){rt({draggedDistance:Le*(b==="bottom"||b==="right"?1:-1),closeDrawer:zr,velocity:vt,dismissible:f}),s==null||s(ye,!0);return}if(b==="bottom"||b==="right"?Le>0:Le<0){Wa(),s==null||s(ye,!0);return}if(vt>rF){zr(),s==null||s(ye,!1);return}var Ft;const wn=Math.min((Ft=q.current.getBoundingClientRect().height)!=null?Ft:0,window.innerHeight);if(Ue>=wn*c){zr(),s==null||s(ye,!1);return}s==null||s(ye,!0),Wa()}J.useEffect(()=>{R&&(Pt(document.documentElement,{scrollBehavior:"auto"}),me.current=new Date,fi(!0))},[R]),J.useEffect(()=>{if(q.current&&F){var ye;const Ue=q==null||(ye=q.current)==null?void 0:ye.querySelectorAll("*");Ue==null||Ue.forEach(pt=>{const Le=pt;(Le.scrollHeight>Le.clientHeight||Le.scrollWidth>Le.clientWidth)&&Le.classList.add("vaul-scrollable")})}},[F]);function fi(ye){const Ue=document.querySelector("[vaul-drawer-wrapper]");!Ue||!r||(ye?(l&&(y||(Pt(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),Pt(document.body,{background:"black"},!0))),Pt(Ue,{borderRadius:`${MI}px`,overflow:"hidden",...nn(b)?{transform:`scale(${tr()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${tr()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${bt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${bt.EASE.join(",")})`})):(b_(Ue,"overflow"),b_(Ue,"transform"),b_(Ue,"borderRadius"),Pt(Ue,{transitionProperty:"transform, border-radius",transitionDuration:`${bt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${bt.EASE.join(",")})`})))}function Ha(ye){const Ue=ye?(window.innerWidth-Za)/window.innerWidth:1,pt=ye?-Za:0;oe.current&&window.clearTimeout(oe.current),Pt(q.current,{transition:`transform ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,transform:`scale(${Ue}) translate3d(0, ${pt}px, 0)`}),!ye&&q.current&&(oe.current=setTimeout(()=>{const Le=w_(q.current,b);Pt(q.current,{transition:"none",transform:nn(b)?`translate3d(0, ${Le}px, 0)`:`translate3d(${Le}px, 0, 0)`})},500))}function od(ye,Ue){if(Ue<0)return;const pt=nn(b)?window.innerHeight:window.innerWidth,Le=(pt-Za)/pt,vt=Le+Ue*(1-Le),Ft=-Za+Ue*Za;Pt(q.current,{transform:nn(b)?`scale(${vt}) translate3d(0, ${Ft}px, 0)`:`scale(${vt}) translate3d(${Ft}px, 0, 0)`,transition:"none"})}function ad(ye,Ue){const pt=nn(b)?window.innerHeight:window.innerWidth,Le=Ue?(pt-Za)/pt:1,vt=Ue?-Za:0;Ue&&Pt(q.current,{transition:`transform ${bt.DURATION}s cubic-bezier(${bt.EASE.join(",")})`,transform:nn(b)?`scale(${Le}) translate3d(0, ${vt}px, 0)`:`scale(${Le}) translate3d(${vt}px, 0, 0)`})}return J.createElement(Qoe,{modal:_,onOpenChange:ye=>{if(t!==void 0){e==null||e(ye);return}ye?(N(!0),M(ye)):zr()},open:R},J.createElement(QD.Provider,{value:{visible:F,activeSnapPoint:Be,snapPoints:o,setActiveSnapPoint:Xe,drawerRef:q,overlayRef:ce,scaleBackground:fi,onOpenChange:e,onPress:id,setVisible:D,onRelease:fc,onDrag:sd,dismissible:f,handleOnly:d,isOpen:R,isDragging:ee,shouldFade:Gt,closeDrawer:zr,onNestedDrag:od,onNestedOpenChange:Ha,onNestedRelease:ad,keyboardIsOpen:Ee,openProp:t,modal:_,snapPointsOffset:Ut,direction:b}},n))}const xae=250,Tae=120,oF=J.forwardRef(function({preventCycle:t=!1,children:e,...n},r){const{visible:i,closeDrawer:s,isDragging:o,snapPoints:a,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:f,onPress:d,onDrag:h}=Kv(),p=J.useRef(null),g=J.useRef(!1);function v(){if(g.current){y();return}window.setTimeout(()=>{_()},Tae)}function _(){if(o||t||g.current){y();return}if(y(),(!a||a.length===0)&&u){s();return}if(l===a[a.length-1]&&u){s();return}const S=a.findIndex(I=>I===l);if(S===-1)return;const A=a[S+1];c(A)}function m(){p.current=window.setTimeout(()=>{g.current=!0},xae)}function y(){window.clearTimeout(p.current),g.current=!1}return J.createElement("div",{onClick:v,onDoubleClick:()=>{g.current=!0,s()},onPointerCancel:y,onPointerDown:b=>{f&&d(b),m()},onPointerMove:b=>{f&&h(b)},ref:r,"vaul-drawer-visible":i?"true":"false","vaul-handle":"","aria-hidden":"true",...n},J.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},e))});oF.displayName="Drawer.Handle";const aF=J.forwardRef(function({children:t,...e},n){const{overlayRef:r,snapPoints:i,onRelease:s,shouldFade:o,isOpen:a,visible:l}=Kv(),c=tF(n,r),u=i&&i.length>0;return J.createElement(eae,{onMouseUp:s,ref:c,"vaul-drawer-visible":l?"true":"false","vaul-overlay":"","vaul-snap-points":a&&u?"true":"false","vaul-snap-points-overlay":a&&o?"true":"false",...e})});aF.displayName="Drawer.Overlay";const lF=J.forwardRef(function({onOpenAutoFocus:t,onPointerDownOutside:e,onAnimationEnd:n,style:r,...i},s){const{drawerRef:o,onPress:a,onRelease:l,onDrag:c,dismissible:u,keyboardIsOpen:f,snapPointsOffset:d,visible:h,closeDrawer:p,modal:g,openProp:v,onOpenChange:_,setVisible:m,handleOnly:y,direction:b}=Kv(),S=tF(s,o),A=J.useRef(null),I=J.useRef(!1),R=(M,k,N=0)=>{if(I.current)return!0;const F=Math.abs(M.y),D=Math.abs(M.x),z=D>F,Z=["bottom","right"].includes(k)?1:-1;if(k==="left"||k==="right"){if(!(M.x*Z<0)&&D>=0&&D<=N)return z}else if(!(M.y*Z<0)&&F>=0&&F<=N)return!z;return I.current=!0,!0};return J.useEffect(()=>{m(!0)},[]),J.createElement(tae,{"vaul-drawer":"","vaul-drawer-direction":b,"vaul-drawer-visible":h?"true":"false",...i,ref:S,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...r}:r,onOpenAutoFocus:M=>{if(t)t(M);else{var k;M.preventDefault(),(k=o.current)==null||k.focus()}},onPointerDown:M=>{y||(i.onPointerDown==null||i.onPointerDown.call(i,M),A.current={x:M.clientX,y:M.clientY},a(M))},onPointerDownOutside:M=>{if(e==null||e(M),!g||M.defaultPrevented){M.preventDefault();return}f.current&&(f.current=!1),M.preventDefault(),_==null||_(!1),!(!u||v!==void 0)&&p()},onFocusOutside:M=>{if(!g){M.preventDefault();return}},onEscapeKeyDown:M=>{if(!g){M.preventDefault();return}},onPointerMove:M=>{if(y||(i.onPointerMove==null||i.onPointerMove.call(i,M),!A.current))return;const k=M.clientY-A.current.y,N=M.clientX-A.current.x,F=M.pointerType==="touch"?10:2;R({x:N,y:k},b,F)?c(M):(Math.abs(N)>F||Math.abs(k)>F)&&(A.current=null)},onPointerUp:M=>{i.onPointerUp==null||i.onPointerUp.call(i,M),A.current=null,I.current=!1,l(M)}})});lF.displayName="Drawer.Content";function Eae({onDrag:t,onOpenChange:e,...n}){const{onNestedDrag:r,onNestedOpenChange:i,onNestedRelease:s}=Kv();if(!r)throw new Error("Drawer.NestedRoot must be placed in another drawer");return J.createElement(sF,{nested:!0,onClose:()=>{i(!1)},onDrag:(o,a)=>{r(o,a),t==null||t(o,a)},onOpenChange:o=>{o&&i(o),e==null||e(o)},onRelease:s,...n})}const Li={Root:sF,NestedRoot:Eae,Content:lF,Handle:oF,Overlay:aF,Trigger:Goe,Portal:Joe,Close:iae,Title:nae,Description:rae},cF=({shouldScaleBackground:t=!0,...e})=>x.jsx(Li.Root,{shouldScaleBackground:t,...e});cF.displayName="Drawer";const NI=Li.Trigger,Aae=Li.Portal,Cae=Li.NestedRoot,uF=w.forwardRef(({className:t,...e},n)=>x.jsx(Li.Overlay,{ref:n,className:an("fixed inset-0 z-50 bg-black/80",t),...e}));uF.displayName=Li.Overlay.displayName;const KS=w.forwardRef(({className:t,children:e,...n},r)=>x.jsxs(Aae,{children:[x.jsx(uF,{}),x.jsxs(Li.Content,{ref:r,className:an("fixed inset-x-0 bottom-0 z-[100] mt-24 flex h-auto max-h-[90%] flex-col rounded-t-[10px] border bg-background",t),...n,children:[x.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),x.jsx("div",{className:"flex-1 overflow-auto",children:e})]})]}));KS.displayName="DrawerContent";const Rae=w.forwardRef(({className:t,...e},n)=>x.jsx(Li.Title,{ref:n,className:an("font-semibold text-lg leading-none tracking-tight",t),...e}));Rae.displayName=Li.Title.displayName;const Pae=w.forwardRef(({className:t,...e},n)=>x.jsx(Li.Description,{ref:n,className:an("text-muted-foreground text-sm",t),...e}));Pae.displayName=Li.Description.displayName;function Iae(t){const e=t+"CollectionProvider",[n,r]=La(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:g}=h,v=J.useRef(null),_=J.useRef(new Map).current;return J.createElement(i,{scope:p,itemMap:_,collectionRef:v},g)},a=t+"CollectionSlot",l=J.forwardRef((h,p)=>{const{scope:g,children:v}=h,_=s(a,g),m=pr(p,_.collectionRef);return J.createElement(vf,{ref:m},v)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",f=J.forwardRef((h,p)=>{const{scope:g,children:v,..._}=h,m=J.useRef(null),y=pr(p,m),b=s(c,g);return J.useEffect(()=>(b.itemMap.set(m,{ref:m,..._}),()=>void b.itemMap.delete(m))),J.createElement(vf,{[u]:"",ref:y},v)});function d(h){const p=s(t+"CollectionConsumer",h);return J.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((b,S)=>_.indexOf(b.ref.current)-_.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},d,r]}const Mae=w.createContext(void 0);function JT(t){const e=w.useContext(Mae);return t||e||"ltr"}const Ew="rovingFocusGroup.onEntryFocus",Oae={bubbles:!1,cancelable:!0},eE="RovingFocusGroup",[qS,fF,Nae]=Iae(eE),[kae,qv]=La(eE,[Nae]),[Dae,Fae]=kae(eE),Bae=w.forwardRef((t,e)=>w.createElement(qS.Provider,{scope:t.__scopeRovingFocusGroup},w.createElement(qS.Slot,{scope:t.__scopeRovingFocusGroup},w.createElement(Lae,Te({},t,{ref:e}))))),Lae=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,f=w.useRef(null),d=pr(e,f),h=JT(s),[p=null,g]=$a({prop:o,defaultProp:a,onChange:l}),[v,_]=w.useState(!1),m=lo(c),y=fF(n),b=w.useRef(!1),[S,A]=w.useState(0);return w.useEffect(()=>{const I=f.current;if(I)return I.addEventListener(Ew,m),()=>I.removeEventListener(Ew,m)},[m]),w.createElement(Dae,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:w.useCallback(I=>g(I),[g]),onItemShiftTab:w.useCallback(()=>_(!0),[]),onFocusableItemAdd:w.useCallback(()=>A(I=>I+1),[]),onFocusableItemRemove:w.useCallback(()=>A(I=>I-1),[])},w.createElement($t.div,Te({tabIndex:v||S===0?-1:0,"data-orientation":r},u,{ref:d,style:{outline:"none",...t.style},onMouseDown:Ot(t.onMouseDown,()=>{b.current=!0}),onFocus:Ot(t.onFocus,I=>{const R=!b.current;if(I.target===I.currentTarget&&R&&!v){const M=new CustomEvent(Ew,Oae);if(I.currentTarget.dispatchEvent(M),!M.defaultPrevented){const k=y().filter(Z=>Z.focusable),N=k.find(Z=>Z.active),F=k.find(Z=>Z.id===p),z=[N,F,...k].filter(Boolean).map(Z=>Z.ref.current);dF(z)}}b.current=!1}),onBlur:Ot(t.onBlur,()=>_(!1))})))}),$ae="RovingFocusGroupItem",Uae=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Ru(),l=s||a,c=Fae($ae,n),u=c.currentTabStopId===l,f=fF(n),{onFocusableItemAdd:d,onFocusableItemRemove:h}=c;return w.useEffect(()=>{if(r)return d(),()=>h()},[r,d,h]),w.createElement(qS.ItemSlot,{scope:n,id:l,focusable:r,active:i},w.createElement($t.span,Te({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:Ot(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:Ot(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ot(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=Vae(p,c.orientation,c.dir);if(g!==void 0){p.preventDefault();let _=f().filter(m=>m.focusable).map(m=>m.ref.current);if(g==="last")_.reverse();else if(g==="prev"||g==="next"){g==="prev"&&_.reverse();const m=_.indexOf(p.currentTarget);_=c.loop?Wae(_,m+1):_.slice(m+1)}setTimeout(()=>dF(_))}})})))}),zae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jae(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Vae(t,e,n){const r=jae(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zae[r]}function dF(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Wae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const hF=Bae,pF=Uae,gF="Tabs",[Hae,mRe]=La(gF,[qv]),_F=qv(),[Xae,tE]=Hae(gF),Yae=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=JT(a),[f,d]=$a({prop:r,onChange:i,defaultProp:s});return w.createElement(Xae,{scope:n,baseId:Ru(),value:f,onValueChange:d,orientation:o,dir:u,activationMode:l},w.createElement($t.div,Te({dir:u,"data-orientation":o},c,{ref:e})))}),Kae="TabsList",qae=w.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=tE(Kae,n),o=_F(n);return w.createElement(hF,Te({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),w.createElement($t.div,Te({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),Zae="TabsTrigger",Qae=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=tE(Zae,n),a=_F(n),l=mF(o.baseId,r),c=yF(o.baseId,r),u=r===o.value;return w.createElement(pF,Te({asChild:!0},a,{focusable:!i,active:u}),w.createElement($t.button,Te({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:Ot(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Ot(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Ot(t.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!i&&f&&o.onValueChange(r)})})))}),Gae="TabsContent",Jae=w.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=tE(Gae,n),l=mF(a.baseId,r),c=yF(a.baseId,r),u=r===a.value,f=w.useRef(u);return w.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),w.createElement(Yf,{present:i||u},({present:d})=>w.createElement($t.div,Te({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0}}),d&&s))});function mF(t,e){return`${t}-trigger-${e}`}function yF(t,e){return`${t}-content-${e}`}const ele=Yae,vF=qae,bF=Qae,wF=Jae,tle=ele,SF=w.forwardRef(({className:t,...e},n)=>x.jsx(vF,{ref:n,className:an("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));SF.displayName=vF.displayName;const xF=w.forwardRef(({className:t,...e},n)=>x.jsx(bF,{ref:n,className:an("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 font-medium text-sm ring-offset-background transition-all disabled:pointer-events-none data-[state=active]:bg-background data-[state=active]:text-foreground disabled:opacity-50 data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));xF.displayName=bF.displayName;const ZS=w.forwardRef(({className:t,...e},n)=>x.jsx(wF,{ref:n,className:an("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ZS.displayName=wF.displayName;const Sp={"Zona 1":[51,0,0],"Zona 2":[128,0,0],"Zona 3":[102,0,0],"Zona 4":[153,0,0],"Zona 5":[204,0,0],"Zona 6":[255,51,51],"Zona 7":[255,102,102]},ya={"Cluster 1":new Uint8Array([247,122,82]),"Cluster 2":new Uint8Array([33,201,255]),"Cluster 3":new Uint8Array([242,208,59])},Gs={"Cluster 1":new Uint8Array([247,122,82]),"Cluster 2":new Uint8Array([187,164,255]),"Cluster 3":new Uint8Array([0,218,214]),"Cluster 4":new Uint8Array([242,208,59])},nle=w.forwardRef((t,e)=>w.createElement($t.label,Te({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),TF=nle;function EF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=EF(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function rle(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=EF(t))&&(r&&(r+=" "),r+=e);return r}const kI=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,DI=rle,nE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return DI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const d=kI(u)||kI(f);return i[c][d]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:d,...h}=u;return Object.entries(h).every(p=>{let[g,v]=p;return Array.isArray(v)?v.includes({...s,...a}[g]):{...s,...a}[g]===v})?[...c,f,d]:c},[]);return DI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},ile=nE("font-medium text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),An=w.forwardRef(({className:t,...e},n)=>x.jsx(TF,{ref:n,className:an(ile(),t),...e}));An.displayName=TF.displayName;const AF=w.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...s}=t,[o=!1,a]=$a({prop:n,onChange:i,defaultProp:r});return w.createElement($t.button,Te({type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0},s,{ref:e,onClick:Ot(t.onClick,()=>{t.disabled||a(!o)})}))}),CF=AF,RF=nE("inline-flex items-center justify-center rounded-md font-medium text-sm ring-offset-background transition-colors disabled:pointer-events-none data-[state=on]:bg-accent hover:bg-muted data-[state=on]:text-accent-foreground hover:text-muted-foreground disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),sle=w.forwardRef(({className:t,variant:e,size:n,...r},i)=>x.jsx(CF,{ref:i,className:an(RF({variant:e,size:n,className:t})),...r}));sle.displayName=CF.displayName;const Zv="ToggleGroup",[PF,yRe]=La(Zv,[qv]),IF=qv(),ole=J.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return J.createElement(ale,Te({},i,{ref:e}))}if(n==="multiple"){const i=r;return J.createElement(lle,Te({},i,{ref:e}))}throw new Error(`Missing prop \`type\` expected on \`${Zv}\``)}),[MF,OF]=PF(Zv),ale=J.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=$a({prop:n,defaultProp:r,onChange:i});return J.createElement(MF,{scope:t.__scopeToggleGroup,type:"single",value:o?[o]:[],onItemActivate:a,onItemDeactivate:J.useCallback(()=>a(""),[a])},J.createElement(NF,Te({},s,{ref:e})))}),lle=J.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],a]=$a({prop:n,defaultProp:r,onChange:i}),l=J.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=J.useCallback(u=>a((f=[])=>f.filter(d=>d!==u)),[a]);return J.createElement(MF,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c},J.createElement(NF,Te({},s,{ref:e})))}),[cle,ule]=PF(Zv),NF=J.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=t,c=IF(n),u=JT(o),f={role:"group",dir:u,...l};return J.createElement(cle,{scope:n,rovingFocus:i,disabled:r},i?J.createElement(hF,Te({asChild:!0},c,{orientation:s,dir:u,loop:a}),J.createElement($t.div,Te({},f,{ref:e}))):J.createElement($t.div,Te({},f,{ref:e})))}),QS="ToggleGroupItem",fle=J.forwardRef((t,e)=>{const n=OF(QS,t.__scopeToggleGroup),r=ule(QS,t.__scopeToggleGroup),i=IF(t.__scopeToggleGroup),s=n.value.includes(t.value),o=r.disabled||t.disabled,a={...t,pressed:s,disabled:o},l=J.useRef(null);return r.rovingFocus?J.createElement(pF,Te({asChild:!0},i,{focusable:!o,active:s,ref:l}),J.createElement(FI,Te({},a,{ref:e}))):J.createElement(FI,Te({},a,{ref:e}))}),FI=J.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,s=OF(QS,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=s.type==="single"?o:void 0;return J.createElement(AF,Te({},a,i,{ref:e,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}}))}),kF=ole,DF=fle,FF=w.createContext({size:"default",variant:"default"}),xp=w.forwardRef(({className:t,variant:e,size:n,children:r,...i},s)=>x.jsx(kF,{ref:s,className:an("flex items-center justify-center gap-1",t),...i,children:x.jsx(FF.Provider,{value:{variant:e,size:n},children:r})}));xp.displayName=kF.displayName;const BF=w.forwardRef(({className:t,children:e,variant:n,size:r,...i},s)=>{const o=w.useContext(FF);return x.jsx(DF,{ref:s,className:an(RF({variant:o.variant||n,size:o.size||r}),t),...i,children:e})});BF.displayName=DF.displayName;var LF={exports:{}},dle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hle=dle,ple=hle;function $F(){}function UF(){}UF.resetWarningCache=$F;var gle=function(){function t(r,i,s,o,a,l){if(l!==ple){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:UF,resetWarningCache:$F};return n.PropTypes=n,n};LF.exports=gle();var _le=LF.exports;const W=Un(_le);var mle=Object.defineProperty,yle=(t,e)=>{for(var n in e)mle(t,n,{get:e[n],enumerable:!0})},ki={};yle(ki,{assign:()=>wle,colors:()=>va,createStringInterpolator:()=>cE,skipAnimation:()=>YF,to:()=>XF,willAdvance:()=>uE});var rE=bg(),ze=t=>vg(t,rE),iE=bg();ze.write=t=>vg(t,iE);var Qv=bg();ze.onStart=t=>vg(t,Qv);var sE=bg();ze.onFrame=t=>vg(t,sE);var oE=bg();ze.onFinish=t=>vg(t,oE);var Ou=[];ze.setTimeout=(t,e)=>{const n=ze.now()+e,r=()=>{const s=Ou.findIndex(o=>o.cancel==r);~s&&Ou.splice(s,1),oa-=~s?1:0},i={time:n,handler:t,cancel:r};return Ou.splice(zF(n),0,i),oa+=1,jF(),i};var zF=t=>~(~Ou.findIndex(e=>e.time>t)||~Ou.length);ze.cancel=t=>{Qv.delete(t),sE.delete(t),oE.delete(t),rE.delete(t),iE.delete(t)};ze.sync=t=>{GS=!0,ze.batchedUpdates(t),GS=!1};ze.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,ze.onStart(n)}return r.handler=t,r.cancel=()=>{Qv.delete(n),e=null},r};var aE=typeof window<"u"?window.requestAnimationFrame:()=>{};ze.use=t=>aE=t;ze.now=typeof performance<"u"?()=>performance.now():Date.now;ze.batchedUpdates=t=>t();ze.catch=console.error;ze.frameLoop="always";ze.advance=()=>{ze.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):WF()};var sa=-1,oa=0,GS=!1;function vg(t,e){GS?(e.delete(t),t(0)):(e.add(t),jF())}function jF(){sa<0&&(sa=0,ze.frameLoop!=="demand"&&aE(VF))}function vle(){sa=-1}function VF(){~sa&&(aE(VF),ze.batchedUpdates(WF))}function WF(){const t=sa;sa=ze.now();const e=zF(sa);if(e&&(HF(Ou.splice(0,e),n=>n.handler()),oa-=e),!oa){vle();return}Qv.flush(),rE.flush(t?Math.min(64,sa-t):16.667),sE.flush(),iE.flush(),oE.flush()}function bg(){let t=new Set,e=t;return{add(n){oa+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return oa-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,oa-=e.size,HF(e,r=>r(n)&&t.add(r)),oa+=t.size,e=t)}}}function HF(t,e){t.forEach(n=>{try{e(n)}catch(r){ze.catch(r)}})}function JS(){}var ble=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),se={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ls(t,e){if(se.arr(t)){if(!se.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var et=(t,e)=>t.forEach(e);function xs(t,e,n){if(se.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Nr=t=>se.und(t)?[]:se.arr(t)?t:[t];function Dh(t,e){if(t.size){const n=Array.from(t);t.clear(),et(n,e)}}var ah=(t,...e)=>Dh(t,n=>n(...e)),lE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cE,XF,va=null,YF=!1,uE=JS,wle=t=>{t.to&&(XF=t.to),t.now&&(ze.now=t.now),t.colors!==void 0&&(va=t.colors),t.skipAnimation!=null&&(YF=t.skipAnimation),t.createStringInterpolator&&(cE=t.createStringInterpolator),t.requestAnimationFrame&&ze.use(t.requestAnimationFrame),t.batchedUpdates&&(ze.batchedUpdates=t.batchedUpdates),t.willAdvance&&(uE=t.willAdvance),t.frameLoop&&(ze.frameLoop=t.frameLoop)},Fh=new Set,ti=[],Aw=[],P0=0,Gv={get idle(){return!Fh.size&&!ti.length},start(t){P0>t.priority?(Fh.add(t),ze.onStart(Sle)):(KF(t),ze(e3))},advance:e3,sort(t){if(P0)ze.onFrame(()=>Gv.sort(t));else{const e=ti.indexOf(t);~e&&(ti.splice(e,1),qF(t))}},clear(){ti=[],Fh.clear()}};function Sle(){Fh.forEach(KF),Fh.clear(),ze(e3)}function KF(t){ti.includes(t)||qF(t)}function qF(t){ti.splice(xle(ti,e=>e.priority>t.priority),0,t)}function e3(t){const e=Aw;for(let n=0;n<ti.length;n++){const r=ti[n];P0=r.priority,r.idle||(uE(r),r.advance(t),r.idle||e.push(r))}return P0=0,Aw=ti,Aw.length=0,ti=e,ti.length>0}function xle(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Tle=(t,e,n)=>Math.min(Math.max(n,t),e),Ele={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ri="[-+]?\\d*\\.?\\d+",I0=Ri+"%";function Jv(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Ale=new RegExp("rgb"+Jv(Ri,Ri,Ri)),Cle=new RegExp("rgba"+Jv(Ri,Ri,Ri,Ri)),Rle=new RegExp("hsl"+Jv(Ri,I0,I0)),Ple=new RegExp("hsla"+Jv(Ri,I0,I0,Ri)),Ile=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Mle=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ole=/^#([0-9a-fA-F]{6})$/,Nle=/^#([0-9a-fA-F]{8})$/;function kle(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Ole.exec(t))?parseInt(e[1]+"ff",16)>>>0:va&&va[t]!==void 0?va[t]:(e=Ale.exec(t))?(Mc(e[1])<<24|Mc(e[2])<<16|Mc(e[3])<<8|255)>>>0:(e=Cle.exec(t))?(Mc(e[1])<<24|Mc(e[2])<<16|Mc(e[3])<<8|$I(e[4]))>>>0:(e=Ile.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Nle.exec(t))?parseInt(e[1],16)>>>0:(e=Mle.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Rle.exec(t))?(BI(LI(e[1]),S_(e[2]),S_(e[3]))|255)>>>0:(e=Ple.exec(t))?(BI(LI(e[1]),S_(e[2]),S_(e[3]))|$I(e[4]))>>>0:null}function Cw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function BI(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=Cw(i,r,t+1/3),o=Cw(i,r,t),a=Cw(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Mc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function LI(t){return(parseFloat(t)%360+360)%360/360}function $I(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function S_(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function UI(t){let e=kle(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Tp=(t,e,n)=>{if(se.fun(t))return t;if(se.arr(t))return Tp({range:t,output:e,extrapolate:n});if(se.str(t.output[0]))return cE(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=Fle(c,s);return Dle(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function Dle(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Fle(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Ble=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Tle(0,1,i/t)},M0=1.70158,x_=M0*1.525,zI=M0+1,jI=2*Math.PI/3,VI=2*Math.PI/4.5,T_=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Lle={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>zI*t*t*t-M0*t*t,easeOutBack:t=>1+zI*Math.pow(t-1,3)+M0*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((x_+1)*2*t-x_)/2:(Math.pow(2*t-2,2)*((x_+1)*(t*2-2)+x_)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*jI),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*jI)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*VI))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*VI)/2+1,easeInBounce:t=>1-T_(1-t),easeOutBounce:T_,easeInOutBounce:t=>t<.5?(1-T_(1-2*t))/2:(1+T_(2*t-1))/2,steps:Ble},Ep=Symbol.for("FluidValue.get"),xf=Symbol.for("FluidValue.observers"),Qr=t=>!!(t&&t[Ep]),ar=t=>t&&t[Ep]?t[Ep]():t,WI=t=>t[xf]||null;function $le(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ap(t,e){const n=t[xf];n&&n.forEach(r=>{$le(r,e)})}var ZF=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Ule(this,t)}},Ule=(t,e)=>QF(t,Ep,e);function Kf(t,e){if(t[Ep]){let n=t[xf];n||QF(t,xf,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Cp(t,e){const n=t[xf];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[xf]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var QF=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),fm=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,zle=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,HI=new RegExp(`(${fm.source})(%|[a-z]+)`,"i"),jle=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,e1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,GF=t=>{const[e,n]=Vle(t);if(!e||lE())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&e1.test(n))return GF(n);if(n)return n}return t},Vle=t=>{const e=e1.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},Rw,Wle=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,JF=t=>{Rw||(Rw=va?new RegExp(`(${Object.keys(va).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ar(s).replace(e1,GF).replace(zle,UI).replace(Rw,UI)),n=e.map(s=>s.match(fm).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Tp({...t,output:s}));return s=>{var l;const o=!HI.test(e[0])&&((l=e.find(c=>HI.test(c)))==null?void 0:l.replace(fm,""));let a=0;return e[0].replace(fm,()=>`${i[a++](s)}${o||""}`).replace(jle,Wle)}},fE="react-spring: ",e7=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${fE}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Hle=e7(console.warn);function Xle(){Hle(`${fE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Yle=e7(console.warn);function Kle(){Yle(`${fE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function t1(t){return se.str(t)&&(t[0]=="#"||/\d/.test(t)||!lE()&&e1.test(t)||t in(va||{}))}var dE=lE()?w.useEffect:w.useLayoutEffect,qle=()=>{const t=w.useRef(!1);return dE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function t7(){const t=w.useState()[1],e=qle();return()=>{e.current&&t(Math.random())}}function Zle(t,e){const[n]=w.useState(()=>({inputs:e,result:t()})),r=w.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&Qle(e,s.inputs)||(s={inputs:e,result:t()}):s=n,w.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Qle(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var n7=t=>w.useEffect(t,Gle),Gle=[];function XI(t){const e=w.useRef();return w.useEffect(()=>{e.current=t}),e.current}var Rp=Symbol.for("Animated:node"),Jle=t=>!!t&&t[Rp]===t,ns=t=>t&&t[Rp],hE=(t,e)=>ble(t,Rp,e),n1=t=>t&&t[Rp]&&t[Rp].getPayload(),r7=class{constructor(){hE(this,this)}getPayload(){return this.payload||[]}},wg=class extends r7{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,se.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new wg(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return se.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,se.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Pp=class extends wg{constructor(t){super(0),this._string=null,this._toString=Tp({output:[t,t]})}static create(t){return new Pp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(se.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Tp({output:[this.getValue(),t]})),this._value=0,super.reset()}},O0={dependencies:null},r1=class extends r7{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return xs(this.source,(n,r)=>{Jle(n)?e[r]=n.getValue(t):Qr(n)?e[r]=ar(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&et(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return xs(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){O0.dependencies&&Qr(t)&&O0.dependencies.add(t);const e=n1(t);e&&et(e,n=>this.add(n))}},i7=class extends r1{constructor(t){super(t)}static create(t){return new i7(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(ece)),!0)}};function ece(t){return(t1(t)?Pp:wg).create(t)}function t3(t){const e=ns(t);return e?e.constructor:se.arr(t)?i7:t1(t)?Pp:wg}var YI=(t,e)=>{const n=!se.fun(t)||t.prototype&&t.prototype.isReactComponent;return w.forwardRef((r,i)=>{const s=w.useRef(null),o=n&&w.useCallback(p=>{s.current=rce(i,p)},[i]),[a,l]=nce(r,e),c=t7(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},f=new tce(u,l),d=w.useRef();dE(()=>(d.current=f,et(l,p=>Kf(p,f)),()=>{d.current&&(et(d.current.deps,p=>Cp(p,d.current)),ze.cancel(d.current.update))})),w.useEffect(u,[]),n7(()=>()=>{const p=d.current;et(p.deps,g=>Cp(g,p))});const h=e.getComponentProps(a.getValue());return w.createElement(t,{...h,ref:o})})},tce=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ze.write(this.update)}};function nce(t,e){const n=new Set;return O0.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new r1(t),O0.dependencies=null,[t,n]}function rce(t,e){return t&&(se.fun(t)?t(e):t.current=e),e}var KI=Symbol.for("AnimatedComponent"),ice=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new r1(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=qI(o)||"Anonymous";return se.str(o)?o=s[o]||(s[o]=YI(o,i)):o=o[KI]||(o[KI]=YI(o,i)),o.displayName=`Animated(${a})`,o};return xs(t,(o,a)=>{se.arr(t)&&(a=qI(o)),s[a]=s(o)}),{animated:s}},qI=t=>se.str(t)?t:t&&se.str(t.displayName)?t.displayName:se.fun(t)&&t.name||null;function il(t,...e){return se.fun(t)?t(...e):t}var Bh=(t,e)=>t===!0||!!(e&&t&&(se.fun(t)?t(e):Nr(t).includes(e))),s7=(t,e)=>se.obj(t)?e&&t[e]:t,o7=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,sce=t=>t,pE=(t,e=sce)=>{let n=oce;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);se.und(s)||(r[i]=s)}return r},oce=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ace={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function lce(t){const e={};let n=0;if(xs(t,(r,i)=>{ace[i]||(e[i]=r,n++)}),n)return e}function a7(t){const e=lce(t);if(e){const n={to:e};return xs(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Ip(t){return t=ar(t),se.arr(t)?t.map(Ip):t1(t)?ki.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function cce(t){for(const e in t)return!0;return!1}function n3(t){return se.fun(t)||se.arr(t)&&se.obj(t[0])}function uce(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function fce(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var gE={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},r3={...gE.default,mass:1,damping:1,easing:Lle.linear,clamp:!1},dce=class{constructor(){this.velocity=0,Object.assign(this,r3)}};function hce(t,e,n){n&&(n={...n},ZI(n,e),e={...n,...e}),ZI(t,e),Object.assign(t,e);for(const o in r3)t[o]==null&&(t[o]=r3[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return se.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function ZI(t,e){if(!se.und(e.decay))t.duration=void 0;else{const n=!se.und(e.tension)||!se.und(e.friction);(n||!se.und(e.frequency)||!se.und(e.damping)||!se.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var QI=[],pce=class{constructor(){this.changed=!1,this.values=QI,this.toValues=null,this.fromValues=QI,this.config=new dce,this.immediate=!1}};function l7(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=Bh(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{se.und(n.pause)||(i.paused=Bh(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||Bh(p,e)),l=il(n.delay||0,e),p?(i.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){i.resumeQueue.add(d),i.timeouts.delete(c),c.cancel(),l=c.time-ze.now()}function d(){l>0&&!ki.skipAnimation?(i.delayed=!0,c=ze.setTimeout(h,l),i.pauseQueue.add(f),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var _E=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Nu(t.get()):e.every(n=>n.noop)?c7(t.get()):wi(t.get(),e.every(n=>n.finished)),c7=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),wi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Nu=t=>({value:t,cancelled:!0,finished:!1});function u7(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=pE(e,(v,_)=>_==="onRest"?void 0:v);let u,f;const d=new Promise((v,_)=>(u=v,f=_)),h=v=>{const _=i<=(n.cancelId||0)&&Nu(r)||i!==n.asyncId&&wi(r,!1);if(_)throw v.result=_,f(v),v},p=(v,_)=>{const m=new GI,y=new JI;return(async()=>{if(ki.skipAnimation)throw Mp(n),y.result=wi(r,!1),f(y),y;h(m);const b=se.obj(v)?{...v}:{..._,to:v};b.parentId=i,xs(c,(A,I)=>{se.und(b[I])&&(b[I]=A)});const S=await r.start(b);return h(m),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),S})()};let g;if(ki.skipAnimation)return Mp(n),wi(r,!1);try{let v;se.arr(t)?v=(async _=>{for(const m of _)await p(m)})(t):v=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([v.then(u),d]),g=wi(r.get(),!0,!1)}catch(v){if(v instanceof GI)g=v.result;else if(v instanceof JI)g=v.result;else throw v}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return se.fun(o)&&ze.batchedUpdates(()=>{o(g,r,r.item)}),g})()}function Mp(t,e){Dh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var GI=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},JI=class extends Error{constructor(){super("SkipAnimationSignal")}},i3=t=>t instanceof mE,gce=1,mE=class extends ZF{constructor(){super(...arguments),this.id=gce++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ns(this);return t&&t.getValue()}to(...t){return ki.to(this,t)}interpolate(...t){return Xle(),ki.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ap(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Gv.sort(this),Ap(this,{type:"priority",parent:this,priority:t})}},Wl=Symbol.for("SpringPhase"),f7=1,s3=2,o3=4,Pw=t=>(t[Wl]&f7)>0,ko=t=>(t[Wl]&s3)>0,Nd=t=>(t[Wl]&o3)>0,e4=(t,e)=>e?t[Wl]|=s3|f7:t[Wl]&=~s3,t4=(t,e)=>e?t[Wl]|=o3:t[Wl]&=~o3,_ce=class extends mE{constructor(t,e){if(super(),this.animation=new pce,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!se.und(t)||!se.und(e)){const n=se.obj(t)?{...t}:{...e,from:t};se.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ko(this)||this._state.asyncTo)||Nd(this)}get goal(){return ar(this.animation.to)}get velocity(){const t=ns(this);return t instanceof wg?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Pw(this)}get isAnimating(){return ko(this)}get isPaused(){return Nd(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=n1(r.to);!o&&Qr(r.to)&&(i=Nr(ar(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const f=c.constructor==Pp?1:o?o[u].lastPosition:i[u];let d=r.immediate,h=f;if(!d){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const g=r.fromValues[u],v=c.v0!=null?c.v0:c.v0=se.arr(s.velocity)?s.velocity[u]:s.velocity;let _;const m=s.precision||(g==f?.005:Math.min(1,Math.abs(f-g)*.001));if(se.und(s.duration))if(s.decay){const y=s.decay===!0?.998:s.decay,b=Math.exp(-(1-y)*p);h=g+v/(1-y)*(1-b),d=Math.abs(c.lastPosition-h)<=m,_=v*b}else{_=c.lastVelocity==null?v:c.lastVelocity;const y=s.restVelocity||m/10,b=s.clamp?0:s.bounce,S=!se.und(b),A=g==f?c.v0>0:g<f;let I,R=!1;const M=1,k=Math.ceil(t/M);for(let N=0;N<k&&(I=Math.abs(_)>y,!(!I&&(d=Math.abs(f-h)<=m,d)));++N){S&&(R=h==f||h>f==A,R&&(_=-_*b,h=f));const F=-s.tension*1e-6*(h-f),D=-s.friction*.001*_,z=(F+D)/s.mass;_=_+z*M,h=h+_*M}}else{let y=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),y=(s.progress||0)+p/this._memoizedDuration,y=y>1?1:y<0?0:y,c.durationProgress=y),h=g+s.easing(y)*(f-g),_=(h-c.lastPosition)/t,d=y==1}c.lastVelocity=_,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[u].done&&(d=!1),d?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=ns(this),l=a.getValue();if(e){const c=ar(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ze.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ko(this)){const{to:t,config:e}=this.animation;ze.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return se.und(t)?(n=this.queue||[],this.queue=[]):n=[se.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>_E(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Mp(this._state,t&&this._lastCallId),ze.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=se.obj(n)?n[e]:n,(n==null||n3(n))&&(n=void 0),r=se.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return Pw(this)||(t.reverse&&([n,r]=[r,n]),r=ar(r),se.und(r)?ns(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,pE(t,(o,a)=>/^on/.test(a)?s7(o,n):o)),r4(this,t,"onProps"),Dd(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return l7(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Nd(this)||(t4(this,!0),ah(s.pauseQueue),Dd(this,"onPause",wi(this,kd(this,this.animation.to)),this))},resume:()=>{Nd(this)&&(t4(this,!1),ko(this)&&this._resume(),ah(s.resumeQueue),Dd(this,"onResume",wi(this,kd(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=d7(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Nu(this));const r=!se.und(t.to),i=!se.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Nu(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:f=c}=t;i&&!r&&(!e.default||se.und(u))&&(u=f),e.reverse&&([u,f]=[f,u]);const d=!Ls(f,c);d&&(a.from=f),f=ar(f);const h=!Ls(u,l);h&&this._focus(u);const p=n3(e.to),{config:g}=a,{decay:v,velocity:_}=g;(r||i)&&(g.velocity=0),e.config&&!p&&hce(g,il(e.config,s),e.config!==o.config?il(o.config,s):void 0);let m=ns(this);if(!m||se.und(u))return n(wi(this,!0));const y=se.und(e.reset)?i&&!e.default:!se.und(f)&&Bh(e.reset,s),b=y?f:this.get(),S=Ip(u),A=se.num(S)||se.arr(S)||t1(S),I=!p&&(!A||Bh(o.immediate||e.immediate,s));if(h){const N=t3(u);if(N!==m.constructor)if(I)m=this._set(S);else throw Error(`Cannot animate between ${m.constructor.name} and ${N.name}, as the "to" prop suggests`)}const R=m.constructor;let M=Qr(u),k=!1;if(!M){const N=y||!Pw(this)&&d;(h||N)&&(k=Ls(Ip(b),S),M=!k),(!Ls(a.immediate,I)&&!I||!Ls(g.decay,v)||!Ls(g.velocity,_))&&(M=!0)}if(k&&ko(this)&&(a.changed&&!y?M=!0:M||this._stop(l)),!p&&((M||Qr(l))&&(a.values=m.getPayload(),a.toValues=Qr(u)?null:R==Pp?[1]:Nr(S)),a.immediate!=I&&(a.immediate=I,!I&&!y&&this._set(l)),M)){const{onRest:N}=a;et(yce,D=>r4(this,e,D));const F=wi(this,kd(this,l));ah(this._pendingCalls,F),this._pendingCalls.add(n),a.changed&&ze.batchedUpdates(()=>{var D;a.changed=!y,N==null||N(F,this),y?il(o.onRest,F):(D=a.onStart)==null||D.call(a,F,this)})}y&&this._set(b),p?n(u7(e.to,e,this._state,this)):M?this._start():ko(this)&&!h?this._pendingCalls.add(n):n(c7(b))}_focus(t){const e=this.animation;t!==e.to&&(WI(this)&&this._detach(),e.to=t,WI(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Qr(e)&&(Kf(e,this),i3(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Qr(t)&&Cp(t,this)}_set(t,e=!0){const n=ar(t);if(!se.und(n)){const r=ns(this);if(!r||!Ls(n,r.getValue())){const i=t3(n);!r||r.constructor!=i?hE(this,i.create(n)):r.setValue(n),r&&ze.batchedUpdates(()=>{this._onChange(n,e)})}}return ns(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Dd(this,"onStart",wi(this,kd(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),il(this.animation.onChange,t,this)),il(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ns(this).reset(ar(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ko(this)||(e4(this,!0),Nd(this)||this._resume())}_resume(){ki.skipAnimation?this.finish():Gv.start(this)}_stop(t,e){if(ko(this)){e4(this,!1);const n=this.animation;et(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ap(this,{type:"idle",parent:this});const r=e?Nu(this.get()):wi(this.get(),kd(this,t??n.to));ah(this._pendingCalls,r),n.changed&&(n.changed=!1,Dd(this,"onRest",r,this))}}};function kd(t,e){const n=Ip(e),r=Ip(t.get());return Ls(r,n)}function d7(t,e=t.loop,n=t.to){const r=il(e);if(r){const i=r!==!0&&a7(r),s=(i||t).reverse,o=!i||i.reset;return Op({...t,loop:e,default:!1,pause:void 0,to:!s||n3(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function Op(t){const{to:e,from:n}=t=a7(t),r=new Set;return se.obj(e)&&n4(e,r),se.obj(n)&&n4(n,r),t.keys=r.size?Array.from(r):null,t}function mce(t){const e=Op(t);return se.und(e.default)&&(e.default=pE(e)),e}function n4(t,e){xs(t,(n,r)=>n!=null&&e.add(r))}var yce=["onStart","onRest","onChange","onPause","onResume"];function r4(t,e,n){t.animation[n]=e[n]!==o7(e,n)?s7(e[n],t.key):void 0}function Dd(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var vce=["onStart","onChange","onRest"],bce=1,wce=class{constructor(t,e){this.id=bce++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];se.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Op(t)),this}start(t){let{queue:e}=this;return t?e=Nr(t).map(Op):this.queue=[],this._flush?this._flush(this,e):(m7(this,e),a3(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;et(Nr(e),r=>n[r].stop(!!t))}else Mp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(se.und(t))this.start({pause:!0});else{const e=this.springs;et(Nr(t),n=>e[n].pause())}return this}resume(t){if(se.und(t))this.start({pause:!1});else{const e=this.springs;et(Nr(t),n=>e[n].resume())}return this}each(t){xs(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Dh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&Dh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Dh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ze.onFrame(this._onFrame)}};function a3(t,e){return Promise.all(e.map(n=>h7(t,n))).then(n=>_E(t,n))}async function h7(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=se.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=se.arr(i)||se.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):et(vce,g=>{const v=e[g];if(se.fun(v)){const _=t._events[g];e[g]=({finished:m,cancelled:y})=>{const b=_.get(v);b?(m||(b.finished=!1),y&&(b.cancelled=!0)):_.set(v,{value:null,finished:m||!1,cancelled:y||!1})},c&&(c[g]=e[g])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,ah(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const d=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),h=e.cancel===!0||o7(e,"cancel")===!0;(u||h&&f.asyncId)&&d.push(l7(++t._lastAsyncId,{props:e,state:f,actions:{pause:JS,resume:JS,start(g,v){h?(Mp(f,t._lastAsyncId),v(Nu(t))):(g.onRest=a,v(u7(u,g,f,t)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const p=_E(t,await Promise.all(d));if(o&&p.finished&&!(n&&p.noop)){const g=d7(e,o,i);if(g)return m7(t,[g]),h7(t,g,!0)}return l&&ze.batchedUpdates(()=>l(p,t,t.item)),p}function i4(t,e){const n={...t.springs};return e&&et(Nr(e),r=>{se.und(r.keys)&&(r=Op(r)),se.obj(r.to)||(r={...r,to:void 0}),_7(n,r,i=>g7(i))}),p7(t,n),n}function p7(t,e){xs(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Kf(n,t))})}function g7(t,e){const n=new _ce;return n.key=t,e&&Kf(n,e),n}function _7(t,e,n){e.keys&&et(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function m7(t,e){et(e,n=>{_7(t.springs,n,r=>g7(r,t))})}var i1=({children:t,...e})=>{const n=w.useContext(N0),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=Zle(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=N0;return w.createElement(s,{value:e},t)},N0=Sce(i1,{});i1.Provider=N0.Provider;i1.Consumer=N0.Consumer;function Sce(t,e){return Object.assign(t,w.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var xce=()=>{const t=[],e=function(r){Kle();const i=[];return et(t,(s,o)=>{if(se.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return et(t,r=>r.pause(...arguments)),this},e.resume=function(){return et(t,r=>r.resume(...arguments)),this},e.set=function(r){et(t,(i,s)=>{const o=se.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return et(t,(s,o)=>{if(se.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return et(t,r=>r.stop(...arguments)),this},e.update=function(r){return et(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return se.fun(r)?r(s,i):r};return e._getProps=n,e};function y7(t,e,n){const r=se.fun(e)&&e;r&&!n&&(n=[]);const i=w.useMemo(()=>r||arguments.length==3?xce():void 0,[]),s=w.useRef(0),o=t7(),a=w.useMemo(()=>({ctrls:[],queue:[],flush(_,m){const y=i4(_,m);return s.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!_.springs[S])?a3(_,m):new Promise(S=>{p7(_,y),a.queue.push(()=>{S(a3(_,m))}),o()})}}),[]),l=w.useRef([...a.ctrls]),c=[],u=XI(t)||0;w.useMemo(()=>{et(l.current.slice(t,u),_=>{uce(_,i),_.stop(!0)}),l.current.length=t,f(u,t)},[t]),w.useMemo(()=>{f(0,Math.min(u,t))},n);function f(_,m){for(let y=_;y<m;y++){const b=l.current[y]||(l.current[y]=new wce(null,a.flush)),S=r?r(y,b):e[y];S&&(c[y]=mce(S))}}const d=l.current.map((_,m)=>i4(_,c[m])),h=w.useContext(i1),p=XI(h),g=h!==p&&cce(h);dE(()=>{s.current++,a.ctrls=l.current;const{queue:_}=a;_.length&&(a.queue=[],et(_,m=>m())),et(l.current,(m,y)=>{i==null||i.add(m),g&&m.start({default:h});const b=c[y];b&&(fce(m,b.ref),m.ref?m.queue.push(b):m.start(b))})}),n7(()=>()=>{et(a.ctrls,_=>_.stop(!0))});const v=d.map(_=>({..._}));return i?[v,i]:v}function qf(t,e){const n=se.fun(t),[[r],i]=y7(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var v7=class extends mE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Tp(...e);const n=this._get(),r=t3(n);hE(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ls(e,n)||(ns(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&s4(this._active)&&Iw(this)}_get(){const t=se.arr(this.source)?this.source.map(ar):Nr(ar(this.source));return this.calc(...t)}_start(){this.idle&&!s4(this._active)&&(this.idle=!1,et(n1(this),t=>{t.done=!1}),ki.skipAnimation?(ze.batchedUpdates(()=>this.advance()),Iw(this)):Gv.start(this))}_attach(){let t=1;et(Nr(this.source),e=>{Qr(e)&&Kf(e,this),i3(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){et(Nr(this.source),t=>{Qr(t)&&Cp(t,this)}),this._active.clear(),Iw(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Nr(this.source).reduce((e,n)=>Math.max(e,(i3(n)?n.priority:0)+1),0))}};function Tce(t){return t.idle!==!1}function s4(t){return!t.size||Array.from(t).every(Tce)}function Iw(t){t.idle||(t.idle=!0,et(n1(t),e=>{e.done=!0}),Ap(t,{type:"idle",parent:t}))}var b7=(t,...e)=>new v7(t,e);ki.assign({createStringInterpolator:JF,to:(t,e)=>new v7(t,e)});var w7=/^--/;function Ece(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!w7.test(t)&&!(Lh.hasOwnProperty(t)&&Lh[t])?e+"px":(""+e).trim()}var o4={};function Ace(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(f=>n||t.hasAttribute(f)?f:o4[f]||(o4[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));i!==void 0&&(t.textContent=i);for(const f in r)if(r.hasOwnProperty(f)){const d=Ece(f,r[f]);w7.test(f)?t.style.setProperty(f,d):t.style[f]=d}u.forEach((f,d)=>{t.setAttribute(f,c[d])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Lh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cce=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Rce=["Webkit","Ms","Moz","O"];Lh=Object.keys(Lh).reduce((t,e)=>(Rce.forEach(n=>t[Cce(n,e)]=t[e]),t),Lh);var Pce=/^(matrix|translate|scale|rotate|skew)/,Ice=/^(translate)/,Mce=/^(rotate|skew)/,Mw=(t,e)=>se.num(t)&&t!==0?t+e:t,dm=(t,e)=>se.arr(t)?t.every(n=>dm(n,e)):se.num(t)?t===e:parseFloat(t)===e,Oce=class extends r1{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Mw(a,"px")).join(",")})`,dm(o,0)])),xs(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(Pce.test(a)){if(delete r[a],se.und(o))return;const l=Ice.test(a)?"px":Mce.test(a)?"deg":"";i.push(Nr(o)),s.push(a==="rotate3d"?([c,u,f,d])=>[`rotate3d(${c},${u},${f},${Mw(d,l)})`,dm(d,0)]:c=>[`${a}(${c.map(u=>Mw(u,l)).join(",")})`,dm(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Nce(i,s)),super(r)}},Nce=class extends ZF{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return et(this.inputs,(n,r)=>{const i=ar(n[0]),[s,o]=this.transforms[r](se.arr(i)?i:n.map(ar));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&et(this.inputs,e=>et(e,n=>Qr(n)&&Kf(n,this)))}observerRemoved(t){t==0&&et(this.inputs,e=>et(e,n=>Qr(n)&&Cp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ap(this,t)}},kce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ki.assign({batchedUpdates:Da.unstable_batchedUpdates,createStringInterpolator:JF,colors:Ele});var Dce=ice(kce,{applyAnimatedValues:Ace,createAnimatedStyle:t=>new Oce(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),ic=Dce.animated;function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hl.apply(this,arguments)}var Fce={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},a4=function(t,e){return"translate("+t+"px, "+e+"px)"},S7=w.memo(function(t){var e,n=t.position,r=t.anchor,i=t.children,s=Gn(),o=cc(),a=o.animate,l=o.config,c=o9(),u=c[0],f=c[1],d=w.useRef(!1),h=void 0,p=!1,g=f.width>0&&f.height>0,v=Math.round(n[0]),_=Math.round(n[1]);g&&(r==="top"?(v-=f.width/2,_-=f.height+14):r==="right"?(v+=14,_-=f.height/2):r==="bottom"?(v-=f.width/2,_+=14):r==="left"?(v-=f.width+14,_-=f.height/2):r==="center"&&(v-=f.width/2,_-=f.height/2),h={transform:a4(v,_)},d.current||(p=!0),d.current=[v,_]);var m=qf({to:h,config:l,immediate:!a||p}),y=Hl({},Fce,s.tooltip.wrapper,{transform:(e=m.transform)!=null?e:a4(v,_),opacity:m.transform?1:0});return x.jsx(ic.div,{ref:u,style:y,children:i})});S7.displayName="TooltipWrapper";var x7=w.memo(function(t){var e=t.size,n=e===void 0?12:e,r=t.color,i=t.style;return x.jsx("span",{style:Hl({display:"block",width:n,height:n,background:r},i===void 0?{}:i)})});w.memo(function(t){var e,n=t.id,r=t.value,i=t.format,s=t.enableChip,o=s!==void 0&&s,a=t.color,l=t.renderContent,c=Gn(),u=a9(i);if(typeof l=="function")e=l();else{var f=r;u!==void 0&&f!==void 0&&(f=u(f)),e=x.jsxs("div",{style:c.tooltip.basic,children:[o&&x.jsx(x7,{color:a,style:c.tooltip.chip}),f!==void 0?x.jsxs("span",{children:[n,": ",x.jsx("strong",{children:""+f})]}):n]})}return x.jsx("div",{style:c.tooltip.container,children:e})});var Bce={width:"100%",borderCollapse:"collapse"},T7=w.memo(function(t){var e,n=t.title,r=t.rows,i=r===void 0?[]:r,s=t.renderContent,o=Gn();return i.length?(e=typeof s=="function"?s():x.jsxs("div",{children:[n&&n,x.jsx("table",{style:Hl({},Bce,o.tooltip.table),children:x.jsx("tbody",{children:i.map(function(a,l){return x.jsx("tr",{children:a.map(function(c,u){return x.jsx("td",{style:o.tooltip.tableCell,children:c},u)})},l)})})})]}),x.jsx("div",{style:o.tooltip.container,children:e})):null});T7.displayName="TableTooltip";var l3=w.memo(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,s=Gn(),o=cc(),a=o.animate,l=o.config,c=w.useMemo(function(){return Hl({},s.crosshair.line,{pointerEvents:"none"})},[s.crosshair.line]),u=qf({x1:e,x2:n,y1:r,y2:i,config:l,immediate:!a});return x.jsx(ic.line,Hl({},u,{fill:"none",style:c}))});l3.displayName="CrosshairLine";var Lce=w.memo(function(t){var e,n,r=t.width,i=t.height,s=t.type,o=t.x,a=t.y;return s==="cross"?(e={x0:o,x1:o,y0:0,y1:i},n={x0:0,x1:r,y0:a,y1:a}):s==="top-left"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:0,x1:o,y0:a,y1:a}):s==="top"?e={x0:o,x1:o,y0:0,y1:a}:s==="top-right"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:o,x1:r,y0:a,y1:a}):s==="right"?n={x0:o,x1:r,y0:a,y1:a}:s==="bottom-right"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:o,x1:r,y0:a,y1:a}):s==="bottom"?e={x0:o,x1:o,y0:a,y1:i}:s==="bottom-left"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:0,x1:o,y0:a,y1:a}):s==="left"?n={x0:0,x1:o,y0:a,y1:a}:s==="x"?e={x0:o,x1:o,y0:0,y1:i}:s==="y"&&(n={x0:0,x1:r,y0:a,y1:a}),x.jsxs(x.Fragment,{children:[e&&x.jsx(l3,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}),n&&x.jsx(l3,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1})]})});Lce.displayName="Crosshair";var E7=w.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),c3={isVisible:!1,position:[null,null],content:null,anchor:null},A7=w.createContext(c3),$ce=function(t){var e=w.useState(c3),n=e[0],r=e[1],i=w.useCallback(function(a,l,c){var u=l[0],f=l[1];c===void 0&&(c="top"),r({isVisible:!0,position:[u,f],anchor:c,content:a})},[r]),s=w.useCallback(function(a,l,c){c===void 0&&(c="top");var u=t.current.getBoundingClientRect(),f=t.current.offsetWidth,d=f===u.width?1:f/u.width,h="touches"in l?l.touches[0]:l,p=h.clientX,g=h.clientY,v=(p-u.left)*d,_=(g-u.top)*d;c!=="left"&&c!=="right"||(c=v<u.width/2?"right":"left"),r({isVisible:!0,position:[v,_],anchor:c,content:a})},[t,r]),o=w.useCallback(function(){r(c3)},[r]);return{actions:w.useMemo(function(){return{showTooltipAt:i,showTooltipFromEvent:s,hideTooltip:o}},[i,s,o]),state:n}},Uce=function(){var t=w.useContext(E7);if(t===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return t},zce=function(){var t=w.useContext(A7);if(t===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return t},jce=function(t){return t.isVisible},Vce=function(){var t=zce();return jce(t)?x.jsx(S7,{position:t.position,anchor:t.anchor,children:t.content}):null},Wce=function(t){var e=t.container,n=t.children,r=$ce(e),i=r.actions,s=r.state;return x.jsx(E7.Provider,{value:i,children:x.jsx(A7.Provider,{value:s,children:n})})};function Hce(){this.__data__=[],this.size=0}var Xce=Hce;function Yce(t,e){return t===e||t!==t&&e!==e}var Sg=Yce,Kce=Sg;function qce(t,e){for(var n=t.length;n--;)if(Kce(t[n][0],e))return n;return-1}var s1=qce,Zce=s1,Qce=Array.prototype,Gce=Qce.splice;function Jce(t){var e=this.__data__,n=Zce(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Gce.call(e,n,1),--this.size,!0}var eue=Jce,tue=s1;function nue(t){var e=this.__data__,n=tue(e,t);return n<0?void 0:e[n][1]}var rue=nue,iue=s1;function sue(t){return iue(this.__data__,t)>-1}var oue=sue,aue=s1;function lue(t,e){var n=this.__data__,r=aue(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var cue=lue,uue=Xce,fue=eue,due=rue,hue=oue,pue=cue;function Zf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zf.prototype.clear=uue;Zf.prototype.delete=fue;Zf.prototype.get=due;Zf.prototype.has=hue;Zf.prototype.set=pue;var o1=Zf,gue=o1;function _ue(){this.__data__=new gue,this.size=0}var mue=_ue;function yue(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var vue=yue;function bue(t){return this.__data__.get(t)}var wue=bue;function Sue(t){return this.__data__.has(t)}var xue=Sue,Tue=typeof Og=="object"&&Og&&Og.Object===Object&&Og,C7=Tue,Eue=C7,Aue=typeof self=="object"&&self&&self.Object===Object&&self,Cue=Eue||Aue||Function("return this")(),Rs=Cue,Rue=Rs,Pue=Rue.Symbol,xg=Pue,l4=xg,R7=Object.prototype,Iue=R7.hasOwnProperty,Mue=R7.toString,Fd=l4?l4.toStringTag:void 0;function Oue(t){var e=Iue.call(t,Fd),n=t[Fd];try{t[Fd]=void 0;var r=!0}catch{}var i=Mue.call(t);return r&&(e?t[Fd]=n:delete t[Fd]),i}var Nue=Oue,kue=Object.prototype,Due=kue.toString;function Fue(t){return Due.call(t)}var Bue=Fue,c4=xg,Lue=Nue,$ue=Bue,Uue="[object Null]",zue="[object Undefined]",u4=c4?c4.toStringTag:void 0;function jue(t){return t==null?t===void 0?zue:Uue:u4&&u4 in Object(t)?Lue(t):$ue(t)}var sc=jue;function Vue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ua=Vue,Wue=sc,Hue=Ua,Xue="[object AsyncFunction]",Yue="[object Function]",Kue="[object GeneratorFunction]",que="[object Proxy]";function Zue(t){if(!Hue(t))return!1;var e=Wue(t);return e==Yue||e==Kue||e==Xue||e==que}var a1=Zue;const P7=Un(a1);var Que=Rs,Gue=Que["__core-js_shared__"],Jue=Gue,Ow=Jue,f4=function(){var t=/[^.]+$/.exec(Ow&&Ow.keys&&Ow.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function efe(t){return!!f4&&f4 in t}var tfe=efe,nfe=Function.prototype,rfe=nfe.toString;function ife(t){if(t!=null){try{return rfe.call(t)}catch{}try{return t+""}catch{}}return""}var I7=ife,sfe=a1,ofe=tfe,afe=Ua,lfe=I7,cfe=/[\\^$.*+?()[\]{}|]/g,ufe=/^\[object .+?Constructor\]$/,ffe=Function.prototype,dfe=Object.prototype,hfe=ffe.toString,pfe=dfe.hasOwnProperty,gfe=RegExp("^"+hfe.call(pfe).replace(cfe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _fe(t){if(!afe(t)||ofe(t))return!1;var e=sfe(t)?gfe:ufe;return e.test(lfe(t))}var mfe=_fe;function yfe(t,e){return t==null?void 0:t[e]}var vfe=yfe,bfe=mfe,wfe=vfe;function Sfe(t,e){var n=wfe(t,e);return bfe(n)?n:void 0}var oc=Sfe,xfe=oc,Tfe=Rs,Efe=xfe(Tfe,"Map"),yE=Efe,Afe=oc,Cfe=Afe(Object,"create"),l1=Cfe,d4=l1;function Rfe(){this.__data__=d4?d4(null):{},this.size=0}var Pfe=Rfe;function Ife(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Mfe=Ife,Ofe=l1,Nfe="__lodash_hash_undefined__",kfe=Object.prototype,Dfe=kfe.hasOwnProperty;function Ffe(t){var e=this.__data__;if(Ofe){var n=e[t];return n===Nfe?void 0:n}return Dfe.call(e,t)?e[t]:void 0}var Bfe=Ffe,Lfe=l1,$fe=Object.prototype,Ufe=$fe.hasOwnProperty;function zfe(t){var e=this.__data__;return Lfe?e[t]!==void 0:Ufe.call(e,t)}var jfe=zfe,Vfe=l1,Wfe="__lodash_hash_undefined__";function Hfe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Vfe&&e===void 0?Wfe:e,this}var Xfe=Hfe,Yfe=Pfe,Kfe=Mfe,qfe=Bfe,Zfe=jfe,Qfe=Xfe;function Qf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qf.prototype.clear=Yfe;Qf.prototype.delete=Kfe;Qf.prototype.get=qfe;Qf.prototype.has=Zfe;Qf.prototype.set=Qfe;var Gfe=Qf,h4=Gfe,Jfe=o1,ede=yE;function tde(){this.size=0,this.__data__={hash:new h4,map:new(ede||Jfe),string:new h4}}var nde=tde;function rde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ide=rde,sde=ide;function ode(t,e){var n=t.__data__;return sde(e)?n[typeof e=="string"?"string":"hash"]:n.map}var c1=ode,ade=c1;function lde(t){var e=ade(this,t).delete(t);return this.size-=e?1:0,e}var cde=lde,ude=c1;function fde(t){return ude(this,t).get(t)}var dde=fde,hde=c1;function pde(t){return hde(this,t).has(t)}var gde=pde,_de=c1;function mde(t,e){var n=_de(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var yde=mde,vde=nde,bde=cde,wde=dde,Sde=gde,xde=yde;function Gf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gf.prototype.clear=vde;Gf.prototype.delete=bde;Gf.prototype.get=wde;Gf.prototype.has=Sde;Gf.prototype.set=xde;var vE=Gf,Tde=o1,Ede=yE,Ade=vE,Cde=200;function Rde(t,e){var n=this.__data__;if(n instanceof Tde){var r=n.__data__;if(!Ede||r.length<Cde-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ade(r)}return n.set(t,e),this.size=n.size,this}var Pde=Rde,Ide=o1,Mde=mue,Ode=vue,Nde=wue,kde=xue,Dde=Pde;function Jf(t){var e=this.__data__=new Ide(t);this.size=e.size}Jf.prototype.clear=Mde;Jf.prototype.delete=Ode;Jf.prototype.get=Nde;Jf.prototype.has=kde;Jf.prototype.set=Dde;var M7=Jf,Fde=oc,Bde=function(){try{var t=Fde(Object,"defineProperty");return t({},"",{}),t}catch{}}(),O7=Bde,p4=O7;function Lde(t,e,n){e=="__proto__"&&p4?p4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var bE=Lde,$de=bE,Ude=Sg;function zde(t,e,n){(n!==void 0&&!Ude(t[e],n)||n===void 0&&!(e in t))&&$de(t,e,n)}var N7=zde;function jde(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var Vde=jde,Wde=Vde,Hde=Wde(),Xde=Hde,k0={exports:{}};k0.exports;(function(t,e){var n=Rs,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,d=a?a(f):new c.constructor(f);return c.copy(d),d}t.exports=l})(k0,k0.exports);var Yde=k0.exports,Kde=Rs,qde=Kde.Uint8Array,k7=qde,g4=k7;function Zde(t){var e=new t.constructor(t.byteLength);return new g4(e).set(new g4(t)),e}var Qde=Zde,Gde=Qde;function Jde(t,e){var n=e?Gde(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ehe=Jde;function the(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var nhe=the,rhe=Ua,_4=Object.create,ihe=function(){function t(){}return function(e){if(!rhe(e))return{};if(_4)return _4(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),she=ihe;function ohe(t,e){return function(n){return t(e(n))}}var D7=ohe,ahe=D7,lhe=ahe(Object.getPrototypeOf,Object),F7=lhe,che=Object.prototype;function uhe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||che;return t===n}var wE=uhe,fhe=she,dhe=F7,hhe=wE;function phe(t){return typeof t.constructor=="function"&&!hhe(t)?fhe(dhe(t)):{}}var ghe=phe;function _he(t){return t!=null&&typeof t=="object"}var za=_he,mhe=sc,yhe=za,vhe="[object Arguments]";function bhe(t){return yhe(t)&&mhe(t)==vhe}var whe=bhe,m4=whe,She=za,B7=Object.prototype,xhe=B7.hasOwnProperty,The=B7.propertyIsEnumerable,Ehe=m4(function(){return arguments}())?m4:function(t){return She(t)&&xhe.call(t,"callee")&&!The.call(t,"callee")},u1=Ehe,Ahe=Array.isArray,Ps=Ahe,Che=9007199254740991;function Rhe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Che}var SE=Rhe,Phe=a1,Ihe=SE;function Mhe(t){return t!=null&&Ihe(t.length)&&!Phe(t)}var f1=Mhe,Ohe=f1,Nhe=za;function khe(t){return Nhe(t)&&Ohe(t)}var L7=khe,D0={exports:{}};function Dhe(){return!1}var Fhe=Dhe;D0.exports;(function(t,e){var n=Rs,r=Fhe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(D0,D0.exports);var xE=D0.exports,Bhe=sc,Lhe=F7,$he=za,Uhe="[object Object]",zhe=Function.prototype,jhe=Object.prototype,$7=zhe.toString,Vhe=jhe.hasOwnProperty,Whe=$7.call(Object);function Hhe(t){if(!$he(t)||Bhe(t)!=Uhe)return!1;var e=Lhe(t);if(e===null)return!0;var n=Vhe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&$7.call(n)==Whe}var U7=Hhe;const TE=Un(U7);var Xhe=sc,Yhe=SE,Khe=za,qhe="[object Arguments]",Zhe="[object Array]",Qhe="[object Boolean]",Ghe="[object Date]",Jhe="[object Error]",epe="[object Function]",tpe="[object Map]",npe="[object Number]",rpe="[object Object]",ipe="[object RegExp]",spe="[object Set]",ope="[object String]",ape="[object WeakMap]",lpe="[object ArrayBuffer]",cpe="[object DataView]",upe="[object Float32Array]",fpe="[object Float64Array]",dpe="[object Int8Array]",hpe="[object Int16Array]",ppe="[object Int32Array]",gpe="[object Uint8Array]",_pe="[object Uint8ClampedArray]",mpe="[object Uint16Array]",ype="[object Uint32Array]",It={};It[upe]=It[fpe]=It[dpe]=It[hpe]=It[ppe]=It[gpe]=It[_pe]=It[mpe]=It[ype]=!0;It[qhe]=It[Zhe]=It[lpe]=It[Qhe]=It[cpe]=It[Ghe]=It[Jhe]=It[epe]=It[tpe]=It[npe]=It[rpe]=It[ipe]=It[spe]=It[ope]=It[ape]=!1;function vpe(t){return Khe(t)&&Yhe(t.length)&&!!It[Xhe(t)]}var bpe=vpe;function wpe(t){return function(e){return t(e)}}var z7=wpe,F0={exports:{}};F0.exports;(function(t,e){var n=C7,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(F0,F0.exports);var Spe=F0.exports,xpe=bpe,Tpe=z7,y4=Spe,v4=y4&&y4.isTypedArray,Epe=v4?Tpe(v4):xpe,EE=Epe;function Ape(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var j7=Ape,Cpe=bE,Rpe=Sg,Ppe=Object.prototype,Ipe=Ppe.hasOwnProperty;function Mpe(t,e,n){var r=t[e];(!(Ipe.call(t,e)&&Rpe(r,n))||n===void 0&&!(e in t))&&Cpe(t,e,n)}var V7=Mpe,Ope=V7,Npe=bE;function kpe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?Npe(n,a,l):Ope(n,a,l)}return n}var Dpe=kpe;function Fpe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Bpe=Fpe,Lpe=9007199254740991,$pe=/^(?:0|[1-9]\d*)$/;function Upe(t,e){var n=typeof t;return e=e??Lpe,!!e&&(n=="number"||n!="symbol"&&$pe.test(t))&&t>-1&&t%1==0&&t<e}var d1=Upe,zpe=Bpe,jpe=u1,Vpe=Ps,Wpe=xE,Hpe=d1,Xpe=EE,Ype=Object.prototype,Kpe=Ype.hasOwnProperty;function qpe(t,e){var n=Vpe(t),r=!n&&jpe(t),i=!n&&!r&&Wpe(t),s=!n&&!r&&!i&&Xpe(t),o=n||r||i||s,a=o?zpe(t.length,String):[],l=a.length;for(var c in t)(e||Kpe.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Hpe(c,l)))&&a.push(c);return a}var W7=qpe;function Zpe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Qpe=Zpe,Gpe=Ua,Jpe=wE,ege=Qpe,tge=Object.prototype,nge=tge.hasOwnProperty;function rge(t){if(!Gpe(t))return ege(t);var e=Jpe(t),n=[];for(var r in t)r=="constructor"&&(e||!nge.call(t,r))||n.push(r);return n}var ige=rge,sge=W7,oge=ige,age=f1;function lge(t){return age(t)?sge(t,!0):oge(t)}var H7=lge,cge=Dpe,uge=H7;function fge(t){return cge(t,uge(t))}var dge=fge,b4=N7,hge=Yde,pge=ehe,gge=nhe,_ge=ghe,w4=u1,S4=Ps,mge=L7,yge=xE,vge=a1,bge=Ua,wge=U7,Sge=EE,x4=j7,xge=dge;function Tge(t,e,n,r,i,s,o){var a=x4(t,n),l=x4(e,n),c=o.get(l);if(c){b4(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,f=u===void 0;if(f){var d=S4(l),h=!d&&yge(l),p=!d&&!h&&Sge(l);u=l,d||h||p?S4(a)?u=a:mge(a)?u=gge(a):h?(f=!1,u=hge(l,!0)):p?(f=!1,u=pge(l,!0)):u=[]:wge(l)||w4(l)?(u=a,w4(a)?u=xge(a):(!bge(a)||vge(a))&&(u=_ge(l))):f=!1}f&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),b4(t,n,u)}var Ege=Tge,Age=M7,Cge=N7,Rge=Xde,Pge=Ege,Ige=Ua,Mge=H7,Oge=j7;function X7(t,e,n,r,i){t!==e&&Rge(e,function(s,o){if(i||(i=new Age),Ige(s))Pge(t,e,o,n,X7,r,i);else{var a=r?r(Oge(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Cge(t,o,a)}},Mge)}var Nge=X7;function kge(t){return t}var Y7=kge;function Dge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Fge=Dge,Bge=Fge,T4=Math.max;function Lge(t,e,n){return e=T4(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=T4(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),Bge(t,this,a)}}var K7=Lge;function $ge(t){return function(){return t}}var Uge=$ge,zge=Uge,E4=O7,jge=Y7,Vge=E4?function(t,e){return E4(t,"toString",{configurable:!0,enumerable:!1,value:zge(e),writable:!0})}:jge,Wge=Vge,Hge=800,Xge=16,Yge=Date.now;function Kge(t){var e=0,n=0;return function(){var r=Yge(),i=Xge-(r-n);if(n=r,i>0){if(++e>=Hge)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qge=Kge,Zge=Wge,Qge=qge,Gge=Qge(Zge),q7=Gge,Jge=Y7,e_e=K7,t_e=q7;function n_e(t,e){return t_e(e_e(t,e,Jge),t+"")}var Z7=n_e,r_e=Sg,i_e=f1,s_e=d1,o_e=Ua;function a_e(t,e,n){if(!o_e(n))return!1;var r=typeof e;return(r=="number"?i_e(n)&&s_e(e,n.length):r=="string"&&e in n)?r_e(n[e],t):!1}var l_e=a_e,c_e=Z7,u_e=l_e;function f_e(t){return c_e(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&u_e(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var d_e=f_e,h_e=Nge,p_e=d_e,g_e=p_e(function(t,e,n){h_e(t,e,n)}),__e=g_e;const m_e=Un(__e);var y_e=sc,v_e=za,b_e="[object Symbol]";function w_e(t){return typeof t=="symbol"||v_e(t)&&y_e(t)==b_e}var AE=w_e,S_e=Ps,x_e=AE,T_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E_e=/^\w*$/;function A_e(t,e){if(S_e(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||x_e(t)?!0:E_e.test(t)||!T_e.test(t)||e!=null&&t in Object(e)}var C_e=A_e,Q7=vE,R_e="Expected a function";function CE(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(R_e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(CE.Cache||Q7),n}CE.Cache=Q7;var P_e=CE,I_e=P_e,M_e=500;function O_e(t){var e=I_e(t,function(r){return n.size===M_e&&n.clear(),r}),n=e.cache;return e}var N_e=O_e,k_e=N_e,D_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F_e=/\\(\\)?/g,B_e=k_e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(D_e,function(n,r,i,s){e.push(i?s.replace(F_e,"$1"):r||n)}),e}),L_e=B_e;function $_e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var G7=$_e,A4=xg,U_e=G7,z_e=Ps,j_e=AE,V_e=1/0,C4=A4?A4.prototype:void 0,R4=C4?C4.toString:void 0;function J7(t){if(typeof t=="string")return t;if(z_e(t))return U_e(t,J7)+"";if(j_e(t))return R4?R4.call(t):"";var e=t+"";return e=="0"&&1/t==-V_e?"-0":e}var W_e=J7,H_e=W_e;function X_e(t){return t==null?"":H_e(t)}var Y_e=X_e,K_e=Ps,q_e=C_e,Z_e=L_e,Q_e=Y_e;function G_e(t,e){return K_e(t)?t:q_e(t,e)?[t]:Z_e(Q_e(t))}var h1=G_e,J_e=AE,eme=1/0;function tme(t){if(typeof t=="string"||J_e(t))return t;var e=t+"";return e=="0"&&1/t==-eme?"-0":e}var RE=tme,nme=h1,rme=RE;function ime(t,e){e=nme(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[rme(e[n++])];return n&&n==r?t:void 0}var eB=ime,sme=eB;function ome(t,e,n){var r=t==null?void 0:sme(t,e);return r===void 0?n:r}var ame=ome;const ho=Un(ame);var lme=V7,cme=h1,ume=d1,P4=Ua,fme=RE;function dme(t,e,n,r){if(!P4(t))return t;e=cme(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=fme(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=r?r(u,l,a):void 0,c===void 0&&(c=P4(u)?u:ume(e[i+1])?[]:{})}lme(a,l,c),a=a[l]}return t}var tB=dme,hme=tB;function pme(t,e,n){return t==null?t:hme(t,e,n)}var gme=pme;const lh=Un(gme);function p1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function PE(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ed(){}var Xl=.7,Tf=1/Xl,ku="\\s*([+-]?\\d+)\\s*",Np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ys="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_me=/^#([0-9a-f]{3,8})$/,mme=new RegExp(`^rgb\\(${ku},${ku},${ku}\\)$`),yme=new RegExp(`^rgb\\(${ys},${ys},${ys}\\)$`),vme=new RegExp(`^rgba\\(${ku},${ku},${ku},${Np}\\)$`),bme=new RegExp(`^rgba\\(${ys},${ys},${ys},${Np}\\)$`),wme=new RegExp(`^hsl\\(${Np},${ys},${ys}\\)$`),Sme=new RegExp(`^hsla\\(${Np},${ys},${ys},${Np}\\)$`),I4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p1(ed,kp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:M4,formatHex:M4,formatHex8:xme,formatHsl:Tme,formatRgb:O4,toString:O4});function M4(){return this.rgb().formatHex()}function xme(){return this.rgb().formatHex8()}function Tme(){return rB(this).formatHsl()}function O4(){return this.rgb().formatRgb()}function kp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_me.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?N4(e):n===3?new Bn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?E_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?E_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mme.exec(t))?new Bn(e[1],e[2],e[3],1):(e=yme.exec(t))?new Bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vme.exec(t))?E_(e[1],e[2],e[3],e[4]):(e=bme.exec(t))?E_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wme.exec(t))?F4(e[1],e[2]/100,e[3]/100,1):(e=Sme.exec(t))?F4(e[1],e[2]/100,e[3]/100,e[4]):I4.hasOwnProperty(t)?N4(I4[t]):t==="transparent"?new Bn(NaN,NaN,NaN,0):null}function N4(t){return new Bn(t>>16&255,t>>8&255,t&255,1)}function E_(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bn(t,e,n,r)}function nB(t){return t instanceof ed||(t=kp(t)),t?(t=t.rgb(),new Bn(t.r,t.g,t.b,t.opacity)):new Bn}function Ef(t,e,n,r){return arguments.length===1?nB(t):new Bn(t,e,n,r??1)}function Bn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}p1(Bn,Ef,PE(ed,{brighter(t){return t=t==null?Tf:Math.pow(Tf,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xl:Math.pow(Xl,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bn(Nl(this.r),Nl(this.g),Nl(this.b),B0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k4,formatHex:k4,formatHex8:Eme,formatRgb:D4,toString:D4}));function k4(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}`}function Eme(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}${gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function D4(){const t=B0(this.opacity);return`${t===1?"rgb(":"rgba("}${Nl(this.r)}, ${Nl(this.g)}, ${Nl(this.b)}${t===1?")":`, ${t})`}`}function B0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gl(t){return t=Nl(t),(t<16?"0":"")+t.toString(16)}function F4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xi(t,e,n,r)}function rB(t){if(t instanceof xi)return new xi(t.h,t.s,t.l,t.opacity);if(t instanceof ed||(t=kp(t)),!t)return new xi;if(t instanceof xi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new xi(o,a,l,t.opacity)}function Ame(t,e,n,r){return arguments.length===1?rB(t):new xi(t,e,n,r??1)}function xi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}p1(xi,Ame,PE(ed,{brighter(t){return t=t==null?Tf:Math.pow(Tf,t),new xi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xl:Math.pow(Xl,t),new xi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bn(Nw(t>=240?t-240:t+120,i,r),Nw(t,i,r),Nw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xi(B4(this.h),A_(this.s),A_(this.l),B0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=B0(this.opacity);return`${t===1?"hsl(":"hsla("}${B4(this.h)}, ${A_(this.s)*100}%, ${A_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function B4(t){return t=(t||0)%360,t<0?t+360:t}function A_(t){return Math.max(0,Math.min(1,t||0))}function Nw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Cme=Math.PI/180,Rme=180/Math.PI;var iB=-.14861,IE=1.78277,ME=-.29227,g1=-.90649,Dp=1.97294,L4=Dp*g1,$4=Dp*IE,U4=IE*ME-g1*iB;function Pme(t){if(t instanceof kl)return new kl(t.h,t.s,t.l,t.opacity);t instanceof Bn||(t=nB(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(U4*r+L4*e-$4*n)/(U4+L4-$4),s=r-i,o=(Dp*(n-i)-ME*s)/g1,a=Math.sqrt(o*o+s*s)/(Dp*i*(1-i)),l=a?Math.atan2(o,s)*Rme-120:NaN;return new kl(l<0?l+360:l,a,i,t.opacity)}function Ts(t,e,n,r){return arguments.length===1?Pme(t):new kl(t,e,n,r??1)}function kl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}p1(kl,Ts,PE(ed,{brighter(t){return t=t==null?Tf:Math.pow(Tf,t),new kl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xl:Math.pow(Xl,t),new kl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Cme,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Bn(255*(e+n*(iB*r+IE*i)),255*(e+n*(ME*r+g1*i)),255*(e+n*(Dp*r)),this.opacity)}}));function Ime(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function Mme(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return Ime((n-r/e)*e,o,i,s,a)}}const _1=t=>()=>t;function sB(t,e){return function(n){return t+n*e}}function Ome(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Nme(t,e){var n=e-t;return n?sB(t,n>180||n<-180?n-360*Math.round(n/360):n):_1(isNaN(t)?e:t)}function kme(t){return(t=+t)==1?Du:function(e,n){return n-e?Ome(e,n,t):_1(isNaN(e)?n:e)}}function Du(t,e){var n=e-t;return n?sB(t,n):_1(isNaN(t)?e:t)}const z4=function t(e){var n=kme(e);function r(i,s){var o=n((i=Ef(i)).r,(s=Ef(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Du(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Dme(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ef(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var Fme=Dme(Mme);function Bme(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Lme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $me(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=OE(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Ume(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function L0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zme(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=OE(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var u3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kw=new RegExp(u3.source,"g");function jme(t){return function(){return t}}function Vme(t){return function(e){return t(e)+""}}function oB(t,e){var n=u3.lastIndex=kw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=u3.exec(t))&&(i=kw.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:L0(r,i)})),n=kw.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Vme(l[0].x):jme(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function OE(t,e){var n=typeof e,r;return e==null||n==="boolean"?_1(e):(n==="number"?L0:n==="string"?(r=kp(e))?(e=r,z4):oB:e instanceof kp?z4:e instanceof Date?Ume:Lme(e)?Bme:Array.isArray(e)?$me:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zme:L0)(t,e)}function Wme(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function aB(t){return function e(n){n=+n;function r(i,s){var o=t((i=Ts(i)).h,(s=Ts(s)).h),a=Du(i.s,s.s),l=Du(i.l,s.l),c=Du(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}aB(Nme);var NE=aB(Du),Hme=sc,Xme=Ps,Yme=za,Kme="[object String]";function qme(t){return typeof t=="string"||!Xme(t)&&Yme(t)&&Hme(t)==Kme}var Zme=qme;const Qme=Un(Zme);function Gme(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Jme=Gme;const Se=Un(Jme);function hm(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function e0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lB(t){let e,n,r;t.length!==2?(e=hm,n=(a,l)=>hm(t(a),l),r=(a,l)=>t(a)-l):(e=t===hm||t===e0e?t:t0e,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function t0e(){return 0}function n0e(t){return t===null?NaN:+t}const r0e=lB(hm),i0e=r0e.right;lB(n0e).center;class j4 extends Map{constructor(e,n=a0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(V4(this,e))}has(e){return super.has(V4(this,e))}set(e,n){return super.set(s0e(this,e),n)}delete(e){return super.delete(o0e(this,e))}}function V4({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function s0e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function o0e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function a0e(t){return t!==null&&typeof t=="object"?t.valueOf():t}const l0e=Math.sqrt(50),c0e=Math.sqrt(10),u0e=Math.sqrt(2);function $0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=l0e?10:s>=c0e?5:s>=u0e?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?$0(t,e,n*2):[a,l,c]}function f0e(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?$0(e,t,n):$0(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function f3(t,e,n){return e=+e,t=+t,n=+n,$0(t,e,n)[2]}function d0e(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?f3(e,t,n):f3(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function cB(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const W4=Symbol("implicit");function fu(){var t=new j4,e=[],n=[],r=W4;function i(s){let o=t.get(s);if(o===void 0){if(r!==W4)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new j4;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return fu(e,n).unknown(r)},cB.apply(i,arguments),i}function h0e(t){return function(){return t}}function p0e(t){return+t}var H4=[0,1];function du(t){return t}function d3(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:h0e(isNaN(e)?NaN:.5)}function g0e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function _0e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=d3(i,r),s=n(o,s)):(r=d3(r,i),s=n(s,o)),function(a){return s(r(a))}}function m0e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=d3(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=i0e(t,a,1,r)-1;return s[l](i[l](a))}}function y0e(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function v0e(){var t=H4,e=H4,n=OE,r,i,s,o=du,a,l,c;function u(){var d=Math.min(t.length,e.length);return o!==du&&(o=g0e(t[0],t[d-1])),a=d>2?m0e:_0e,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(i((c||(c=a(e,t.map(r),L0)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,p0e),u()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Wme,u()},f.clamp=function(d){return arguments.length?(o=d?!0:du,u()):o!==du},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,u()}}function b0e(){return v0e()(du,du)}function w0e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function U0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Af(t){return t=U0(Math.abs(t)),t?t[1]:NaN}function S0e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function x0e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var T0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function z0(t){if(!(e=T0e.exec(t)))throw new Error("invalid format: "+t);var e;return new kE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}z0.prototype=kE.prototype;function kE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}kE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function E0e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var uB;function A0e(t,e){var n=U0(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(uB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+U0(t,Math.max(0,e+s-1))[0]}function X4(t,e){var n=U0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Y4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:w0e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>X4(t*100,e),r:X4,s:A0e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function K4(t){return t}var q4=Array.prototype.map,Z4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C0e(t){var e=t.grouping===void 0||t.thousands===void 0?K4:S0e(q4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?K4:x0e(q4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=z0(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,_=f.width,m=f.comma,y=f.precision,b=f.trim,S=f.type;S==="n"?(m=!0,S="g"):Y4[S]||(y===void 0&&(y=12),b=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var A=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",I=g==="$"?r:/[%p]/.test(S)?o:"",R=Y4[S],M=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function k(N){var F=A,D=I,z,Z,ee;if(S==="c")D=R(N)+D,N="";else{N=+N;var ne=N<0||1/N<0;if(N=isNaN(N)?l:R(Math.abs(N),y),b&&(N=E0e(N)),ne&&+N==0&&p!=="+"&&(ne=!1),F=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+F,D=(S==="s"?Z4[8+uB/3]:"")+D+(ne&&p==="("?")":""),M){for(z=-1,Z=N.length;++z<Z;)if(ee=N.charCodeAt(z),48>ee||ee>57){D=(ee===46?i+N.slice(z+1):N.slice(z))+D,N=N.slice(0,z);break}}}m&&!v&&(N=e(N,1/0));var X=F.length+N.length+D.length,Y=X<_?new Array(_-X+1).join(d):"";switch(m&&v&&(N=e(Y+N,Y.length?_-D.length:1/0),Y=""),h){case"<":N=F+N+D+Y;break;case"=":N=F+Y+N+D;break;case"^":N=Y.slice(0,X=Y.length>>1)+F+N+D+Y.slice(X);break;default:N=Y+F+N+D;break}return s(N)}return k.toString=function(){return f+""},k}function u(f,d){var h=c((f=z0(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Af(d)/3)))*3,g=Math.pow(10,-p),v=Z4[8+p/3];return function(_){return h(g*_)+v}}return{format:c,formatPrefix:u}}var C_,fB,dB;R0e({thousands:",",grouping:[3],currency:["$",""]});function R0e(t){return C_=C0e(t),fB=C_.format,dB=C_.formatPrefix,C_}function P0e(t){return Math.max(0,-Af(Math.abs(t)))}function I0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Af(e)/3)))*3-Af(Math.abs(t)))}function M0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Af(e)-Af(t))+1}function O0e(t,e,n,r){var i=d0e(t,e,n),s;switch(r=z0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=I0e(i,o))&&(r.precision=s),dB(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=M0e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=P0e(i))&&(r.precision=s-(r.type==="%")*2);break}}return fB(r)}function N0e(t){var e=t.domain;return t.ticks=function(n){var r=e();return f0e(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return O0e(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=f3(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function hB(){var t=b0e();return t.copy=function(){return y0e(t,hB())},cB.apply(t,arguments),N0e(t)}function He(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const pB=He("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gB=He("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),_B=He("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),mB=He("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),yB=He("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),vB=He("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),bB=He("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),wB=He("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),DE=He("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),k0e=He("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),wt=t=>Fme(t[t.length-1]);var m1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(He);const D0e=wt(m1);var y1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(He);const F0e=wt(y1);var v1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(He);const B0e=wt(v1);var b1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(He);const L0e=wt(b1);var w1=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(He);const $0e=wt(w1);var S1=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(He);const U0e=wt(S1);var x1=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(He);const z0e=wt(x1);var T1=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(He);const j0e=wt(T1);var E1=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(He);const V0e=wt(E1);var A1=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(He);const W0e=wt(A1);var C1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(He);const H0e=wt(C1);var R1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(He);const X0e=wt(R1);var P1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(He);const Y0e=wt(P1);var I1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(He);const K0e=wt(I1);var M1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(He);const q0e=wt(M1);var O1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(He);const Z0e=wt(O1);var N1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(He);const Q0e=wt(N1);var k1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(He);const G0e=wt(k1);var D1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(He);const J0e=wt(D1);var F1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(He);const eye=wt(F1);var B1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(He);const tye=wt(B1);var L1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(He);const nye=wt(L1);var $1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(He);const rye=wt($1);var U1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(He);const iye=wt(U1);var z1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(He);const sye=wt(z1);var j1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(He);const oye=wt(j1);var V1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(He);const aye=wt(V1);function lye(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const cye=NE(Ts(300,.5,0),Ts(-240,.5,1));var uye=NE(Ts(-100,.75,.35),Ts(80,1.5,.8)),fye=NE(Ts(260,.75,.35),Ts(80,1.5,.8)),R_=Ts();function dye(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return R_.h=360*t-100,R_.s=1.5-1.5*e,R_.l=.8-.9*e,R_+""}var P_=Ef(),hye=Math.PI/3,pye=Math.PI*2/3;function gye(t){var e;return t=(.5-t)*Math.PI,P_.r=255*(e=Math.sin(t))*e,P_.g=255*(e=Math.sin(t+hye))*e,P_.b=255*(e=Math.sin(t+pye))*e,P_+""}function _ye(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function W1(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const mye=W1(He("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var yye=W1(He("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vye=W1(He("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),bye=W1(He("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),wye="__lodash_hash_undefined__";function Sye(t){return this.__data__.set(t,wye),this}var xye=Sye;function Tye(t){return this.__data__.has(t)}var Eye=Tye,Aye=vE,Cye=xye,Rye=Eye;function j0(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Aye;++e<n;)this.add(t[e])}j0.prototype.add=j0.prototype.push=Cye;j0.prototype.has=Rye;var SB=j0;function Pye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var Iye=Pye;function Mye(t){return t!==t}var Oye=Mye;function Nye(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var kye=Nye,Dye=Iye,Fye=Oye,Bye=kye;function Lye(t,e,n){return e===e?Bye(t,e,n):Dye(t,Fye,n)}var $ye=Lye,Uye=$ye;function zye(t,e){var n=t==null?0:t.length;return!!n&&Uye(t,e,0)>-1}var jye=zye;function Vye(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Wye=Vye;function Hye(t,e){return t.has(e)}var xB=Hye,Xye=SB,Yye=jye,Kye=Wye,qye=G7,Zye=z7,Qye=xB,Gye=200;function Jye(t,e,n,r){var i=-1,s=Yye,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=qye(e,Zye(n))),r?(s=Kye,o=!1):e.length>=Gye&&(s=Qye,o=!1,e=new Xye(e));e:for(;++i<a;){var u=t[i],f=n==null?u:n(u);if(u=r||u!==0?u:0,o&&f===f){for(var d=c;d--;)if(e[d]===f)continue e;l.push(u)}else s(e,f,r)||l.push(u)}return l}var eve=Jye,tve=eve,nve=Z7,rve=L7,ive=nve(function(t,e){return rve(t)?tve(t,e):[]}),sve=ive;const TB=Un(sve);function ir(t){return function(){return t}}const Q4=Math.abs,On=Math.atan2,Qa=Math.cos,ove=Math.max,Dw=Math.min,Qi=Math.sin,hu=Math.sqrt,Nn=1e-12,Fp=Math.PI,V0=Fp/2,ave=2*Fp;function lve(t){return t>1?0:t<-1?Fp:Math.acos(t)}function G4(t){return t>=1?V0:t<=-1?-V0:Math.asin(t)}const h3=Math.PI,p3=2*h3,nl=1e-6,cve=p3-nl;function EB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function uve(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return EB;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class fve{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?EB:uve(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,f=a-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>nl)if(!(Math.abs(f*l-c*u)>nl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+c*c,v=h*h+p*p,_=Math.sqrt(g),m=Math.sqrt(d),y=s*Math.tan((h3-Math.acos((g+d-v)/(2*_*m)))/2),b=y/m,S=y/_;Math.abs(b-1)>nl&&this._append`L${e+b*u},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>u*p)},${this._x1=e+S*l},${this._y1=n+S*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>nl||Math.abs(this._y1-u)>nl)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%p3+p3),d>cve?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>nl&&this._append`A${r},${r},0,${+(d>=h3)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function AB(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new fve(e)}function dve(t){return t.innerRadius}function hve(t){return t.outerRadius}function pve(t){return t.startAngle}function gve(t){return t.endAngle}function _ve(t){return t&&t.padAngle}function mve(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,f=a-s,d=f*l-u*c;if(!(d*d<Nn))return d=(u*(e-s)-f*(t-i))/d,[t+d*l,e+d*c]}function I_(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/hu(a*a+l*l),u=c*l,f=-c*a,d=t+u,h=e+f,p=n+u,g=r+f,v=(d+p)/2,_=(h+g)/2,m=p-d,y=g-h,b=m*m+y*y,S=i-s,A=d*g-p*h,I=(y<0?-1:1)*hu(ove(0,S*S*b-A*A)),R=(A*y-m*I)/b,M=(-A*m-y*I)/b,k=(A*y+m*I)/b,N=(-A*m+y*I)/b,F=R-v,D=M-_,z=k-v,Z=N-_;return F*F+D*D>z*z+Z*Z&&(R=k,M=N),{cx:R,cy:M,x01:-u,y01:-f,x11:R*(i/S-1),y11:M*(i/S-1)}}function yve(){var t=dve,e=hve,n=ir(0),r=null,i=pve,s=gve,o=_ve,a=null,l=AB(c);function c(){var u,f,d=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-V0,g=s.apply(this,arguments)-V0,v=Q4(g-p),_=g>p;if(a||(a=u=l()),h<d&&(f=h,h=d,d=f),!(h>Nn))a.moveTo(0,0);else if(v>ave-Nn)a.moveTo(h*Qa(p),h*Qi(p)),a.arc(0,0,h,p,g,!_),d>Nn&&(a.moveTo(d*Qa(g),d*Qi(g)),a.arc(0,0,d,g,p,_));else{var m=p,y=g,b=p,S=g,A=v,I=v,R=o.apply(this,arguments)/2,M=R>Nn&&(r?+r.apply(this,arguments):hu(d*d+h*h)),k=Dw(Q4(h-d)/2,+n.apply(this,arguments)),N=k,F=k,D,z;if(M>Nn){var Z=G4(M/d*Qi(R)),ee=G4(M/h*Qi(R));(A-=Z*2)>Nn?(Z*=_?1:-1,b+=Z,S-=Z):(A=0,b=S=(p+g)/2),(I-=ee*2)>Nn?(ee*=_?1:-1,m+=ee,y-=ee):(I=0,m=y=(p+g)/2)}var ne=h*Qa(m),X=h*Qi(m),Y=d*Qa(S),ce=d*Qi(S);if(k>Nn){var me=h*Qa(y),G=h*Qi(y),ge=d*Qa(b),le=d*Qi(b),ae;if(v<Fp)if(ae=mve(ne,X,ge,le,me,G,Y,ce)){var oe=ne-ae[0],ue=X-ae[1],Ee=me-ae[0],K=G-ae[1],q=1/Qi(lve((oe*Ee+ue*K)/(hu(oe*oe+ue*ue)*hu(Ee*Ee+K*K)))/2),de=hu(ae[0]*ae[0]+ae[1]*ae[1]);N=Dw(k,(d-de)/(q-1)),F=Dw(k,(h-de)/(q+1))}else N=F=0}I>Nn?F>Nn?(D=I_(ge,le,ne,X,h,F,_),z=I_(me,G,Y,ce,h,F,_),a.moveTo(D.cx+D.x01,D.cy+D.y01),F<k?a.arc(D.cx,D.cy,F,On(D.y01,D.x01),On(z.y01,z.x01),!_):(a.arc(D.cx,D.cy,F,On(D.y01,D.x01),On(D.y11,D.x11),!_),a.arc(0,0,h,On(D.cy+D.y11,D.cx+D.x11),On(z.cy+z.y11,z.cx+z.x11),!_),a.arc(z.cx,z.cy,F,On(z.y11,z.x11),On(z.y01,z.x01),!_))):(a.moveTo(ne,X),a.arc(0,0,h,m,y,!_)):a.moveTo(ne,X),!(d>Nn)||!(A>Nn)?a.lineTo(Y,ce):N>Nn?(D=I_(Y,ce,me,G,d,-N,_),z=I_(ne,X,ge,le,d,-N,_),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<k?a.arc(D.cx,D.cy,N,On(D.y01,D.x01),On(z.y01,z.x01),!_):(a.arc(D.cx,D.cy,N,On(D.y01,D.x01),On(D.y11,D.x11),!_),a.arc(0,0,d,On(D.cy+D.y11,D.cx+D.x11),On(z.cy+z.y11,z.cx+z.x11),_),a.arc(z.cx,z.cy,N,On(z.y11,z.x11),On(z.y01,z.x01),!_))):a.arc(0,0,d,S,b,_)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Fp/2;return[Qa(f)*u,Qi(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ir(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ir(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:ir(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ir(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ir(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:ir(+u),c):s},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:ir(+u),c):o},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function vve(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CB(t){this._context=t}CB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function FE(t){return new CB(t)}function bve(t){return t[0]}function wve(t){return t[1]}function Sve(t,e){var n=ir(!0),r=null,i=FE,s=null,o=AB(a);t=typeof t=="function"?t:t===void 0?bve:ir(t),e=typeof e=="function"?e:e===void 0?wve:ir(e);function a(l){var c,u=(l=vve(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,c,l),+e(f,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:ir(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:ir(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ir(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}var xve=PB(FE);function RB(t){this._curve=t}RB.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function PB(t){function e(n){return new RB(t(n))}return e._curve=t,e}function Tve(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(PB(n)):e()._curve},t}function IB(){return Tve(Sve().curve(xve))}function Pa(){}function W0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function H1(t){this._context=t}H1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:W0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:W0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Eve(t){return new H1(t)}function MB(t){this._context=t}MB.prototype={areaStart:Pa,areaEnd:Pa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:W0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ave(t){return new MB(t)}function OB(t){this._context=t}OB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:W0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cve(t){return new OB(t)}function NB(t,e){this._basis=new H1(t),this._beta=e}NB.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Rve=function t(e){function n(r){return e===1?new H1(r):new NB(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function H0(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function BE(t,e){this._context=t,this._k=(1-e)/6}BE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:H0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:H0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Pve=function t(e){function n(r){return new BE(r,e)}return n.tension=function(r){return t(+r)},n}(0);function LE(t,e){this._context=t,this._k=(1-e)/6}LE.prototype={areaStart:Pa,areaEnd:Pa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:H0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ive=function t(e){function n(r){return new LE(r,e)}return n.tension=function(r){return t(+r)},n}(0);function $E(t,e){this._context=t,this._k=(1-e)/6}$E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:H0(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Mve=function t(e){function n(r){return new $E(r,e)}return n.tension=function(r){return t(+r)},n}(0);function UE(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Nn){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Nn){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function kB(t,e){this._context=t,this._alpha=e}kB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:UE(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ove=function t(e){function n(r){return e?new kB(r,e):new BE(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function DB(t,e){this._context=t,this._alpha=e}DB.prototype={areaStart:Pa,areaEnd:Pa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:UE(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Nve=function t(e){function n(r){return e?new DB(r,e):new LE(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function FB(t,e){this._context=t,this._alpha=e}FB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:UE(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const kve=function t(e){function n(r){return e?new FB(r,e):new $E(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function BB(t){this._context=t}BB.prototype={areaStart:Pa,areaEnd:Pa,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function LB(t){return new BB(t)}function J4(t){return t<0?-1:1}function e6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(J4(s)+J4(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function t6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Fw(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function X0(t){this._context=t}X0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fw(this,this._t0,t6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Fw(this,t6(this,n=e6(this,t,e)),n);break;default:Fw(this,this._t0,n=e6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $B(t){this._context=new UB(t)}($B.prototype=Object.create(X0.prototype)).point=function(t,e){X0.prototype.point.call(this,e,t)};function UB(t){this._context=t}UB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Dve(t){return new X0(t)}function Fve(t){return new $B(t)}function zB(t){this._context=t}zB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=n6(t),i=n6(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function n6(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Bve(t){return new zB(t)}function X1(t,e){this._context=t,this._t=e}X1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Lve(t){return new X1(t,.5)}function $ve(t){return new X1(t,0)}function Uve(t){return new X1(t,1)}function zve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Y0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function jve(t){return t=Y0(Math.abs(t)),t?t[1]:NaN}function Vve(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Wve(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function g3(t){if(!(e=Hve.exec(t)))throw new Error("invalid format: "+t);var e;return new zE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}g3.prototype=zE.prototype;function zE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}zE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xve(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var jB;function Yve(t,e){var n=Y0(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(jB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Y0(t,Math.max(0,e+s-1))[0]}function r6(t,e){var n=Y0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const i6={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:zve,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return r6(t*100,e)},r:r6,s:Yve,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function s6(t){return t}var o6=Array.prototype.map,a6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kve(t){var e=t.grouping===void 0||t.thousands===void 0?s6:Vve(o6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?s6:Wve(o6.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=g3(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,_=f.width,m=f.comma,y=f.precision,b=f.trim,S=f.type;S==="n"?(m=!0,S="g"):i6[S]||(y===void 0&&(y=12),b=!0,S="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var A=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",I=g==="$"?r:/[%p]/.test(S)?o:"",R=i6[S],M=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function k(N){var F=A,D=I,z,Z,ee;if(S==="c")D=R(N)+D,N="";else{N=+N;var ne=N<0||1/N<0;if(N=isNaN(N)?l:R(Math.abs(N),y),b&&(N=Xve(N)),ne&&+N==0&&p!=="+"&&(ne=!1),F=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+F,D=(S==="s"?a6[8+jB/3]:"")+D+(ne&&p==="("?")":""),M){for(z=-1,Z=N.length;++z<Z;)if(ee=N.charCodeAt(z),48>ee||ee>57){D=(ee===46?i+N.slice(z+1):N.slice(z))+D,N=N.slice(0,z);break}}}m&&!v&&(N=e(N,1/0));var X=F.length+N.length+D.length,Y=X<_?new Array(_-X+1).join(d):"";switch(m&&v&&(N=e(Y+N,Y.length?_-D.length:1/0),Y=""),h){case"<":N=F+N+D+Y;break;case"=":N=F+Y+N+D;break;case"^":N=Y.slice(0,X=Y.length>>1)+F+N+D+Y.slice(X);break;default:N=Y+F+N+D;break}return s(N)}return k.toString=function(){return f+""},k}function u(f,d){var h=c((f=g3(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(jve(d)/3)))*3,g=Math.pow(10,-p),v=a6[8+p/3];return function(_){return h(g*_)+v}}return{format:c,formatPrefix:u}}var M_,VB;qve({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function qve(t){return M_=Kve(t),VB=M_.format,M_.formatPrefix,M_}var Bw=new Date,Lw=new Date;function yo(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return yo(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return Bw.setTime(+s),Lw.setTime(+o),t(Bw),t(Lw),Math.floor(n(Bw,Lw))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}const Zve=1e3,jE=Zve*60,Qve=jE*60,VE=Qve*24,WB=VE*7;var WE=yo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*jE)/VE,t=>t.getDate()-1);WE.range;function ac(t){return yo(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*jE)/WB})}var HB=ac(0),K0=ac(1),Gve=ac(2),Jve=ac(3),Cf=ac(4),e1e=ac(5),t1e=ac(6);HB.range;K0.range;Gve.range;Jve.range;Cf.range;e1e.range;t1e.range;var Yl=yo(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Yl.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:yo(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};Yl.range;var HE=yo(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/VE},function(t){return t.getUTCDate()-1});HE.range;function lc(t){return yo(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/WB})}var XB=lc(0),q0=lc(1),n1e=lc(2),r1e=lc(3),Rf=lc(4),i1e=lc(5),s1e=lc(6);XB.range;q0.range;n1e.range;r1e.range;Rf.range;i1e.range;s1e.range;var Kl=yo(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Kl.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:yo(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};Kl.range;function $w(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Uw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function o1e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Ld(i),u=$d(i),f=Ld(s),d=$d(s),h=Ld(o),p=$d(o),g=Ld(a),v=$d(a),_=Ld(l),m=$d(l),y={a:ne,A:X,b:Y,B:ce,c:null,d:h6,e:h6,f:P1e,g:$1e,G:z1e,H:A1e,I:C1e,j:R1e,L:YB,m:I1e,M:M1e,p:me,q:G,Q:_6,s:m6,S:O1e,u:N1e,U:k1e,V:D1e,w:F1e,W:B1e,x:null,X:null,y:L1e,Y:U1e,Z:j1e,"%":g6},b={a:ge,A:le,b:ae,B:oe,c:null,d:p6,e:p6,f:X1e,g:nbe,G:ibe,H:V1e,I:W1e,j:H1e,L:qB,m:Y1e,M:K1e,p:ue,q:Ee,Q:_6,s:m6,S:q1e,u:Z1e,U:Q1e,V:G1e,w:J1e,W:ebe,x:null,X:null,y:tbe,Y:rbe,Z:sbe,"%":g6},S={a:k,A:N,b:F,B:D,c:z,d:f6,e:f6,f:S1e,g:u6,G:c6,H:d6,I:d6,j:y1e,L:w1e,m:m1e,M:v1e,p:M,q:_1e,Q:T1e,s:E1e,S:b1e,u:f1e,U:d1e,V:h1e,w:u1e,W:p1e,x:Z,X:ee,y:u6,Y:c6,Z:g1e,"%":x1e};y.x=A(n,y),y.X=A(r,y),y.c=A(e,y),b.x=A(n,b),b.X=A(r,b),b.c=A(e,b);function A(K,q){return function(de){var H=[],je=-1,Be=0,Fe=K.length,Xe,rt,Ut;for(de instanceof Date||(de=new Date(+de));++je<Fe;)K.charCodeAt(je)===37&&(H.push(K.slice(Be,je)),(rt=l6[Xe=K.charAt(++je)])!=null?Xe=K.charAt(++je):rt=Xe==="e"?" ":"0",(Ut=q[Xe])&&(Xe=Ut(de,rt)),H.push(Xe),Be=je+1);return H.push(K.slice(Be,je)),H.join("")}}function I(K,q){return function(de){var H=Bd(1900,void 0,1),je=R(H,K,de+="",0),Be,Fe;if(je!=de.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(q&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(Be=Uw(Bd(H.y,0,1)),Fe=Be.getUTCDay(),Be=Fe>4||Fe===0?q0.ceil(Be):q0(Be),Be=HE.offset(Be,(H.V-1)*7),H.y=Be.getUTCFullYear(),H.m=Be.getUTCMonth(),H.d=Be.getUTCDate()+(H.w+6)%7):(Be=$w(Bd(H.y,0,1)),Fe=Be.getDay(),Be=Fe>4||Fe===0?K0.ceil(Be):K0(Be),Be=WE.offset(Be,(H.V-1)*7),H.y=Be.getFullYear(),H.m=Be.getMonth(),H.d=Be.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Fe="Z"in H?Uw(Bd(H.y,0,1)).getUTCDay():$w(Bd(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Fe+5)%7:H.w+H.U*7-(Fe+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,Uw(H)):$w(H)}}function R(K,q,de,H){for(var je=0,Be=q.length,Fe=de.length,Xe,rt;je<Be;){if(H>=Fe)return-1;if(Xe=q.charCodeAt(je++),Xe===37){if(Xe=q.charAt(je++),rt=S[Xe in l6?q.charAt(je++):Xe],!rt||(H=rt(K,de,H))<0)return-1}else if(Xe!=de.charCodeAt(H++))return-1}return H}function M(K,q,de){var H=c.exec(q.slice(de));return H?(K.p=u.get(H[0].toLowerCase()),de+H[0].length):-1}function k(K,q,de){var H=h.exec(q.slice(de));return H?(K.w=p.get(H[0].toLowerCase()),de+H[0].length):-1}function N(K,q,de){var H=f.exec(q.slice(de));return H?(K.w=d.get(H[0].toLowerCase()),de+H[0].length):-1}function F(K,q,de){var H=_.exec(q.slice(de));return H?(K.m=m.get(H[0].toLowerCase()),de+H[0].length):-1}function D(K,q,de){var H=g.exec(q.slice(de));return H?(K.m=v.get(H[0].toLowerCase()),de+H[0].length):-1}function z(K,q,de){return R(K,e,q,de)}function Z(K,q,de){return R(K,n,q,de)}function ee(K,q,de){return R(K,r,q,de)}function ne(K){return o[K.getDay()]}function X(K){return s[K.getDay()]}function Y(K){return l[K.getMonth()]}function ce(K){return a[K.getMonth()]}function me(K){return i[+(K.getHours()>=12)]}function G(K){return 1+~~(K.getMonth()/3)}function ge(K){return o[K.getUTCDay()]}function le(K){return s[K.getUTCDay()]}function ae(K){return l[K.getUTCMonth()]}function oe(K){return a[K.getUTCMonth()]}function ue(K){return i[+(K.getUTCHours()>=12)]}function Ee(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var q=A(K+="",y);return q.toString=function(){return K},q},parse:function(K){var q=I(K+="",!1);return q.toString=function(){return K},q},utcFormat:function(K){var q=A(K+="",b);return q.toString=function(){return K},q},utcParse:function(K){var q=I(K+="",!0);return q.toString=function(){return K},q}}}var l6={"-":"",_:" ",0:"0"},bn=/^\s*\d+/,a1e=/^%/,l1e=/[\\^$*+?|[\]().{}]/g;function st(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function c1e(t){return t.replace(l1e,"\\$&")}function Ld(t){return new RegExp("^(?:"+t.map(c1e).join("|")+")","i")}function $d(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function u1e(t,e,n){var r=bn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function f1e(t,e,n){var r=bn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function d1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function h1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function p1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function c6(t,e,n){var r=bn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function u6(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g1e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _1e(t,e,n){var r=bn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function m1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function f6(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function y1e(t,e,n){var r=bn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function d6(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function v1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function b1e(t,e,n){var r=bn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function w1e(t,e,n){var r=bn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function S1e(t,e,n){var r=bn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function x1e(t,e,n){var r=a1e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function T1e(t,e,n){var r=bn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function E1e(t,e,n){var r=bn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function h6(t,e){return st(t.getDate(),e,2)}function A1e(t,e){return st(t.getHours(),e,2)}function C1e(t,e){return st(t.getHours()%12||12,e,2)}function R1e(t,e){return st(1+WE.count(Yl(t),t),e,3)}function YB(t,e){return st(t.getMilliseconds(),e,3)}function P1e(t,e){return YB(t,e)+"000"}function I1e(t,e){return st(t.getMonth()+1,e,2)}function M1e(t,e){return st(t.getMinutes(),e,2)}function O1e(t,e){return st(t.getSeconds(),e,2)}function N1e(t){var e=t.getDay();return e===0?7:e}function k1e(t,e){return st(HB.count(Yl(t)-1,t),e,2)}function KB(t){var e=t.getDay();return e>=4||e===0?Cf(t):Cf.ceil(t)}function D1e(t,e){return t=KB(t),st(Cf.count(Yl(t),t)+(Yl(t).getDay()===4),e,2)}function F1e(t){return t.getDay()}function B1e(t,e){return st(K0.count(Yl(t)-1,t),e,2)}function L1e(t,e){return st(t.getFullYear()%100,e,2)}function $1e(t,e){return t=KB(t),st(t.getFullYear()%100,e,2)}function U1e(t,e){return st(t.getFullYear()%1e4,e,4)}function z1e(t,e){var n=t.getDay();return t=n>=4||n===0?Cf(t):Cf.ceil(t),st(t.getFullYear()%1e4,e,4)}function j1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function p6(t,e){return st(t.getUTCDate(),e,2)}function V1e(t,e){return st(t.getUTCHours(),e,2)}function W1e(t,e){return st(t.getUTCHours()%12||12,e,2)}function H1e(t,e){return st(1+HE.count(Kl(t),t),e,3)}function qB(t,e){return st(t.getUTCMilliseconds(),e,3)}function X1e(t,e){return qB(t,e)+"000"}function Y1e(t,e){return st(t.getUTCMonth()+1,e,2)}function K1e(t,e){return st(t.getUTCMinutes(),e,2)}function q1e(t,e){return st(t.getUTCSeconds(),e,2)}function Z1e(t){var e=t.getUTCDay();return e===0?7:e}function Q1e(t,e){return st(XB.count(Kl(t)-1,t),e,2)}function ZB(t){var e=t.getUTCDay();return e>=4||e===0?Rf(t):Rf.ceil(t)}function G1e(t,e){return t=ZB(t),st(Rf.count(Kl(t),t)+(Kl(t).getUTCDay()===4),e,2)}function J1e(t){return t.getUTCDay()}function ebe(t,e){return st(q0.count(Kl(t)-1,t),e,2)}function tbe(t,e){return st(t.getUTCFullYear()%100,e,2)}function nbe(t,e){return t=ZB(t),st(t.getUTCFullYear()%100,e,2)}function rbe(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function ibe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Rf(t):Rf.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function sbe(){return"+0000"}function g6(){return"%"}function _6(t){return+t}function m6(t){return Math.floor(+t/1e3)}var Oc,QB;obe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function obe(t){return Oc=o1e(t),QB=Oc.format,Oc.parse,Oc.utcFormat,Oc.utcParse,Oc}var abe=eB,lbe=tB,cbe=h1;function ube(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=abe(t,o);n(a,o)&&lbe(s,cbe(o,t),a)}return s}var fbe=ube;function dbe(t,e){return t!=null&&e in Object(t)}var hbe=dbe,pbe=h1,gbe=u1,_be=Ps,mbe=d1,ybe=SE,vbe=RE;function bbe(t,e,n){e=pbe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=vbe(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&ybe(i)&&mbe(o,i)&&(_be(t)||gbe(t)))}var wbe=bbe,Sbe=hbe,xbe=wbe;function Tbe(t,e){return t!=null&&xbe(t,e,Sbe)}var Ebe=Tbe,Abe=fbe,Cbe=Ebe;function Rbe(t,e){return Abe(t,e,function(n,r){return Cbe(t,r)})}var Pbe=Rbe;function Ibe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var GB=Ibe,y6=xg,Mbe=u1,Obe=Ps,v6=y6?y6.isConcatSpreadable:void 0;function Nbe(t){return Obe(t)||Mbe(t)||!!(v6&&t&&t[v6])}var kbe=Nbe,Dbe=GB,Fbe=kbe;function JB(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Fbe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?JB(a,e-1,n,r,i):Dbe(i,a):r||(i[i.length]=a)}return i}var Bbe=JB,Lbe=Bbe;function $be(t){var e=t==null?0:t.length;return e?Lbe(t,1):[]}var Ube=$be,zbe=Ube,jbe=K7,Vbe=q7;function Wbe(t){return Vbe(jbe(t,void 0,zbe),t+"")}var Hbe=Wbe,Xbe=Pbe,Ybe=Hbe,Kbe=Ybe(function(t,e){return t==null?{}:Xbe(t,e)}),qbe=Kbe;const Zbe=Un(qbe);function Qbe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Gbe=Qbe,Jbe=SB,ewe=Gbe,twe=xB,nwe=1,rwe=2;function iwe(t,e,n,r,i,s){var o=n&nwe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var f=-1,d=!0,h=n&rwe?new Jbe:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var p=t[f],g=e[f];if(r)var v=o?r(g,p,f,e,t,s):r(p,g,f,t,e,s);if(v!==void 0){if(v)continue;d=!1;break}if(h){if(!ewe(e,function(_,m){if(!twe(h,m)&&(p===_||i(p,_,n,r,s)))return h.push(m)})){d=!1;break}}else if(!(p===g||i(p,g,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var e9=iwe;function swe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var owe=swe;function awe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var lwe=awe,b6=xg,w6=k7,cwe=Sg,uwe=e9,fwe=owe,dwe=lwe,hwe=1,pwe=2,gwe="[object Boolean]",_we="[object Date]",mwe="[object Error]",ywe="[object Map]",vwe="[object Number]",bwe="[object RegExp]",wwe="[object Set]",Swe="[object String]",xwe="[object Symbol]",Twe="[object ArrayBuffer]",Ewe="[object DataView]",S6=b6?b6.prototype:void 0,zw=S6?S6.valueOf:void 0;function Awe(t,e,n,r,i,s,o){switch(n){case Ewe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Twe:return!(t.byteLength!=e.byteLength||!s(new w6(t),new w6(e)));case gwe:case _we:case vwe:return cwe(+t,+e);case mwe:return t.name==e.name&&t.message==e.message;case bwe:case Swe:return t==e+"";case ywe:var a=fwe;case wwe:var l=r&hwe;if(a||(a=dwe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=pwe,o.set(t,e);var u=uwe(a(t),a(e),r,i,s,o);return o.delete(t),u;case xwe:if(zw)return zw.call(t)==zw.call(e)}return!1}var Cwe=Awe,Rwe=GB,Pwe=Ps;function Iwe(t,e,n){var r=e(t);return Pwe(t)?r:Rwe(r,n(t))}var Mwe=Iwe;function Owe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var Nwe=Owe;function kwe(){return[]}var Dwe=kwe,Fwe=Nwe,Bwe=Dwe,Lwe=Object.prototype,$we=Lwe.propertyIsEnumerable,x6=Object.getOwnPropertySymbols,Uwe=x6?function(t){return t==null?[]:(t=Object(t),Fwe(x6(t),function(e){return $we.call(t,e)}))}:Bwe,zwe=Uwe,jwe=D7,Vwe=jwe(Object.keys,Object),Wwe=Vwe,Hwe=wE,Xwe=Wwe,Ywe=Object.prototype,Kwe=Ywe.hasOwnProperty;function qwe(t){if(!Hwe(t))return Xwe(t);var e=[];for(var n in Object(t))Kwe.call(t,n)&&n!="constructor"&&e.push(n);return e}var Zwe=qwe,Qwe=W7,Gwe=Zwe,Jwe=f1;function e2e(t){return Jwe(t)?Qwe(t):Gwe(t)}var t2e=e2e,n2e=Mwe,r2e=zwe,i2e=t2e;function s2e(t){return n2e(t,i2e,r2e)}var o2e=s2e,T6=o2e,a2e=1,l2e=Object.prototype,c2e=l2e.hasOwnProperty;function u2e(t,e,n,r,i,s){var o=n&a2e,a=T6(t),l=a.length,c=T6(e),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var d=a[f];if(!(o?d in e:c2e.call(e,d)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=o;++f<l;){d=a[f];var _=t[d],m=e[d];if(r)var y=o?r(m,_,d,e,t,s):r(_,m,d,t,e,s);if(!(y===void 0?_===m||i(_,m,n,r,s):y)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(g=!1)}return s.delete(t),s.delete(e),g}var f2e=u2e,d2e=oc,h2e=Rs,p2e=d2e(h2e,"DataView"),g2e=p2e,_2e=oc,m2e=Rs,y2e=_2e(m2e,"Promise"),v2e=y2e,b2e=oc,w2e=Rs,S2e=b2e(w2e,"Set"),x2e=S2e,T2e=oc,E2e=Rs,A2e=T2e(E2e,"WeakMap"),C2e=A2e,_3=g2e,m3=yE,y3=v2e,v3=x2e,b3=C2e,t9=sc,td=I7,E6="[object Map]",R2e="[object Object]",A6="[object Promise]",C6="[object Set]",R6="[object WeakMap]",P6="[object DataView]",P2e=td(_3),I2e=td(m3),M2e=td(y3),O2e=td(v3),N2e=td(b3),rl=t9;(_3&&rl(new _3(new ArrayBuffer(1)))!=P6||m3&&rl(new m3)!=E6||y3&&rl(y3.resolve())!=A6||v3&&rl(new v3)!=C6||b3&&rl(new b3)!=R6)&&(rl=function(t){var e=t9(t),n=e==R2e?t.constructor:void 0,r=n?td(n):"";if(r)switch(r){case P2e:return P6;case I2e:return E6;case M2e:return A6;case O2e:return C6;case N2e:return R6}return e});var k2e=rl,jw=M7,D2e=e9,F2e=Cwe,B2e=f2e,I6=k2e,M6=Ps,O6=xE,L2e=EE,$2e=1,N6="[object Arguments]",k6="[object Array]",O_="[object Object]",U2e=Object.prototype,D6=U2e.hasOwnProperty;function z2e(t,e,n,r,i,s){var o=M6(t),a=M6(e),l=o?k6:I6(t),c=a?k6:I6(e);l=l==N6?O_:l,c=c==N6?O_:c;var u=l==O_,f=c==O_,d=l==c;if(d&&O6(t)){if(!O6(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new jw),o||L2e(t)?D2e(t,e,n,r,i,s):F2e(t,e,l,n,r,i,s);if(!(n&$2e)){var h=u&&D6.call(t,"__wrapped__"),p=f&&D6.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,v=p?e.value():e;return s||(s=new jw),i(g,v,n,r,s)}}return d?(s||(s=new jw),B2e(t,e,n,r,i,s)):!1}var j2e=z2e,V2e=j2e,F6=za;function n9(t,e,n,r,i){return t===e?!0:t==null||e==null||!F6(t)&&!F6(e)?t!==t&&e!==e:V2e(t,e,n,r,n9,i)}var W2e=n9,H2e=W2e;function X2e(t,e){return H2e(t,e)}var Y2e=X2e;const K2e=Un(Y2e);var q2e={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"transparent",outlineOpacity:1},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}};function Oi(){return Oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oi.apply(this,arguments)}function XE(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Z2e=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],Q2e=function(t,e){return Oi({},e,t)},G2e=function(t,e){var n=m_e({},t,e);return Z2e.forEach(function(r){lh(n,r,Q2e(ho(n,r),n.text))}),n},r9=w.createContext(),i9=function(t){var e=t.children,n=t.animate,r=n===void 0||n,i=t.config,s=i===void 0?"default":i,o=w.useMemo(function(){var a=Qme(s)?gE[s]:s;return{animate:r,config:a}},[r,s]);return x.jsx(r9.Provider,{value:o,children:e})},B6={animate:W.bool,motionConfig:W.oneOfType([W.oneOf(Object.keys(gE)),W.shape({mass:W.number,tension:W.number,friction:W.number,clamp:W.bool,precision:W.number,velocity:W.number,duration:W.number,easing:W.func})])};i9.propTypes={children:W.node.isRequired,animate:B6.animate,config:B6.motionConfig};var cc=function(){return w.useContext(r9)},s9=function(t){var e=cc(),n=e.animate,r=e.config,i=function(a){var l=w.useRef();return w.useEffect(function(){l.current=a},[a]),l.current}(t),s=w.useMemo(function(){return oB(i,t)},[i,t]),o=qf({from:{value:0},to:{value:1},reset:!0,config:r,immediate:!n}).value;return b7(o,s)},J2e={nivo:["#d76445","#f47560","#e8c1a0","#97e3d5","#61cdbb","#00b0a7"],BrBG:Se(m1),PRGn:Se(y1),PiYG:Se(v1),PuOr:Se(b1),RdBu:Se(w1),RdGy:Se(S1),RdYlBu:Se(x1),RdYlGn:Se(T1),spectral:Se(E1),blues:Se(L1),greens:Se($1),greys:Se(U1),oranges:Se(V1),purples:Se(z1),reds:Se(j1),BuGn:Se(A1),BuPu:Se(C1),GnBu:Se(R1),OrRd:Se(P1),PuBuGn:Se(I1),PuBu:Se(M1),PuRd:Se(O1),RdPu:Se(N1),YlGnBu:Se(k1),YlGn:Se(D1),YlOrBr:Se(F1),YlOrRd:Se(B1)},eSe=Object.keys(J2e);Se(m1),Se(y1),Se(v1),Se(b1),Se(w1),Se(S1),Se(x1),Se(T1),Se(E1),Se(L1),Se($1),Se(U1),Se(V1),Se(z1),Se(j1),Se(A1),Se(C1),Se(R1),Se(P1),Se(I1),Se(M1),Se(O1),Se(N1),Se(k1),Se(D1),Se(F1),Se(B1);W.oneOfType([W.oneOf(eSe),W.func,W.arrayOf(W.string)]);var w3={basis:Eve,basisClosed:Ave,basisOpen:Cve,bundle:Rve,cardinal:Pve,cardinalClosed:Ive,cardinalOpen:Mve,catmullRom:Ove,catmullRomClosed:Nve,catmullRomOpen:kve,linear:FE,linearClosed:LB,monotoneX:Dve,monotoneY:Fve,natural:Bve,step:Lve,stepAfter:Uve,stepBefore:$ve},YE=Object.keys(w3);YE.filter(function(t){return t.endsWith("Closed")});TB(YE,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");TB(YE,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");var tSe=function(t){if(!w3[t])throw new TypeError("'"+t+"', is not a valid curve interpolator identifier.");return w3[t]};W.shape({top:W.number,right:W.number,bottom:W.number,left:W.number}).isRequired;var nSe=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];W.oneOf(nSe);var rSe=function(t){return w.useMemo(function(){return tSe(t)},[t])};fu(DE);var iSe={top:0,right:0,bottom:0,left:0},sSe=function(t,e,n){return n===void 0&&(n={}),w.useMemo(function(){var r=Oi({},iSe,n);return{margin:r,innerWidth:t-r.left-r.right,innerHeight:e-r.top-r.bottom,outerWidth:t,outerHeight:e}},[t,e,n.top,n.right,n.bottom,n.left])},o9=function(){var t=w.useRef(null),e=w.useState({left:0,top:0,width:0,height:0}),n=e[0],r=e[1],i=w.useState(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(s){var o=s[0];return r(o.contentRect)})})[0];return w.useEffect(function(){return t.current&&i!==null&&i.observe(t.current),function(){i!==null&&i.disconnect()}},[]),[t,n]},oSe=function(t){return w.useMemo(function(){return G2e(q2e,t)},[t])},aSe=function(t){return typeof t=="function"?t:typeof t=="string"?t.indexOf("time:")===0?QB(t.slice("5")):VB(t):function(e){return""+e}},a9=function(t){return w.useMemo(function(){return aSe(t)},[t])},l9=w.createContext(),lSe={},c9=function(t){var e=t.theme,n=e===void 0?lSe:e,r=t.children,i=oSe(n);return x.jsx(l9.Provider,{value:i,children:r})};c9.propTypes={children:W.node.isRequired,theme:W.object};var Gn=function(){return w.useContext(l9)},cSe=["outlineWidth","outlineColor","outlineOpacity"],u9=function(t){return t.outlineWidth,t.outlineColor,t.outlineOpacity,XE(t,cSe)},f9=function(t){var e=t.children,n=t.condition,r=t.wrapper;return n?w.cloneElement(r,{},e):e};f9.propTypes={children:W.node.isRequired,condition:W.bool.isRequired,wrapper:W.element.isRequired};var uSe={position:"relative"},d9=function(t){var e=t.children,n=t.theme,r=t.renderWrapper,i=r===void 0||r,s=t.isInteractive,o=s===void 0||s,a=t.animate,l=t.motionConfig,c=w.useRef(null);return x.jsx(c9,{theme:n,children:x.jsx(i9,{animate:a,config:l,children:x.jsx(Wce,{container:c,children:x.jsxs(f9,{condition:i,wrapper:x.jsx("div",{style:uSe,ref:c}),children:[e,o&&x.jsx(Vce,{})]})})})})};d9.propTypes={children:W.element.isRequired,isInteractive:W.bool,renderWrapper:W.bool,theme:W.object,animate:W.bool,motionConfig:W.string};W.func.isRequired,W.bool,W.bool,W.object.isRequired,W.bool.isRequired,W.string;var h9=function(t){var e=t.children,n=o9(),r=n[0],i=n[1],s=i.width>0&&i.height>0;return x.jsx("div",{ref:r,style:{width:"100%",height:"100%"},children:s&&e({width:i.width,height:i.height})})};h9.propTypes={children:W.func.isRequired};var fSe=["id","colors"],p9=function(t){var e=t.id,n=t.colors,r=XE(t,fSe);return x.jsx("linearGradient",Oi({id:e,x1:0,x2:0,y1:0,y2:1},r,{children:n.map(function(i){var s=i.offset,o=i.color,a=i.opacity;return x.jsx("stop",{offset:s+"%",stopColor:o,stopOpacity:a!==void 0?a:1},s)})}))};p9.propTypes={id:W.string.isRequired,colors:W.arrayOf(W.shape({offset:W.number.isRequired,color:W.string.isRequired,opacity:W.number})).isRequired,gradientTransform:W.string};var g9={linearGradient:p9},Ud={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},S3=w.memo(function(t){var e=t.id,n=t.background,r=n===void 0?Ud.background:n,i=t.color,s=i===void 0?Ud.color:i,o=t.size,a=o===void 0?Ud.size:o,l=t.padding,c=l===void 0?Ud.padding:l,u=t.stagger,f=u===void 0?Ud.stagger:u,d=a+c,h=a/2,p=c/2;return f===!0&&(d=2*a+2*c),x.jsxs("pattern",{id:e,width:d,height:d,patternUnits:"userSpaceOnUse",children:[x.jsx("rect",{width:d,height:d,fill:r}),x.jsx("circle",{cx:p+h,cy:p+h,r:h,fill:s}),f&&x.jsx("circle",{cx:1.5*c+a+h,cy:1.5*c+a+h,r:h,fill:s})]})});S3.displayName="PatternDots",S3.propTypes={id:W.string.isRequired,color:W.string.isRequired,background:W.string.isRequired,size:W.number.isRequired,padding:W.number.isRequired,stagger:W.bool.isRequired};var x3=function(t){return t*Math.PI/180},L6=function(t){return 180*t/Math.PI},Y1=function(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}},zd={spacing:5,rotation:0,background:"#000000",color:"#ffffff",lineWidth:2},T3=w.memo(function(t){var e=t.id,n=t.spacing,r=n===void 0?zd.spacing:n,i=t.rotation,s=i===void 0?zd.rotation:i,o=t.background,a=o===void 0?zd.background:o,l=t.color,c=l===void 0?zd.color:l,u=t.lineWidth,f=u===void 0?zd.lineWidth:u,d=Math.round(s)%360,h=Math.abs(r);d>180?d-=360:d>90?d-=180:d<-180?d+=360:d<-90&&(d+=180);var p,g=h,v=h;return d===0?p=`
                M 0 0 L `+g+` 0
                M 0 `+v+" L "+g+" "+v+`
            `:d===90?p=`
                M 0 0 L 0 `+v+`
                M `+g+" 0 L "+g+" "+v+`
            `:(g=Math.abs(h/Math.sin(x3(d))),v=h/Math.sin(x3(90-d)),p=d>0?`
                    M 0 `+-v+" L "+2*g+" "+v+`
                    M `+-g+" "+-v+" L "+g+" "+v+`
                    M `+-g+" 0 L "+g+" "+2*v+`
                `:`
                    M `+-g+" "+v+" L "+g+" "+-v+`
                    M `+-g+" "+2*v+" L "+2*g+" "+-v+`
                    M 0 `+2*v+" L "+2*g+` 0
                `),x.jsxs("pattern",{id:e,width:g,height:v,patternUnits:"userSpaceOnUse",children:[x.jsx("rect",{width:g,height:v,fill:a,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),x.jsx("path",{d:p,strokeWidth:f,stroke:c,strokeLinecap:"square"})]})});T3.displayName="PatternLines",T3.propTypes={id:W.string.isRequired,spacing:W.number.isRequired,rotation:W.number.isRequired,background:W.string.isRequired,color:W.string.isRequired,lineWidth:W.number.isRequired};var jd={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},E3=w.memo(function(t){var e=t.id,n=t.color,r=n===void 0?jd.color:n,i=t.background,s=i===void 0?jd.background:i,o=t.size,a=o===void 0?jd.size:o,l=t.padding,c=l===void 0?jd.padding:l,u=t.stagger,f=u===void 0?jd.stagger:u,d=a+c,h=c/2;return f===!0&&(d=2*a+2*c),x.jsxs("pattern",{id:e,width:d,height:d,patternUnits:"userSpaceOnUse",children:[x.jsx("rect",{width:d,height:d,fill:s}),x.jsx("rect",{x:h,y:h,width:a,height:a,fill:r}),f&&x.jsx("rect",{x:1.5*c+a,y:1.5*c+a,width:a,height:a,fill:r})]})});E3.displayName="PatternSquares",E3.propTypes={id:W.string.isRequired,color:W.string.isRequired,background:W.string.isRequired,size:W.number.isRequired,padding:W.number.isRequired,stagger:W.bool.isRequired};var _9={patternDots:S3,patternLines:T3,patternSquares:E3},dSe=["type"],A3=Oi({},g9,_9),m9=function(t){var e=t.defs;return!e||e.length<1?null:x.jsx("defs",{"aria-hidden":!0,children:e.map(function(n){var r=n.type,i=XE(n,dSe);return A3[r]?w.createElement(A3[r],Oi({key:i.id},i)):null})})};m9.propTypes={defs:W.arrayOf(W.shape({type:W.oneOf(Object.keys(A3)).isRequired,id:W.string.isRequired}))};var hSe=w.memo(m9),y9=function(t){var e=t.width,n=t.height,r=t.margin,i=t.defs,s=t.children,o=t.role,a=t.ariaLabel,l=t.ariaLabelledBy,c=t.ariaDescribedBy,u=t.isFocusable,f=Gn();return x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:n,role:o,"aria-label":a,"aria-labelledby":l,"aria-describedby":c,focusable:u,tabIndex:u?0:void 0,children:[x.jsx(hSe,{defs:i}),x.jsx("rect",{width:e,height:n,fill:f.background}),x.jsx("g",{transform:"translate("+r.left+","+r.top+")",children:s})]})};y9.propTypes={width:W.number.isRequired,height:W.number.isRequired,margin:W.shape({top:W.number.isRequired,left:W.number.isRequired}).isRequired,defs:W.array,children:W.oneOfType([W.arrayOf(W.node),W.node]).isRequired,role:W.string,isFocusable:W.bool,ariaLabel:W.string,ariaLabelledBy:W.string,ariaDescribedBy:W.string};var v9=function(t){var e=t.size,n=t.color,r=t.borderWidth,i=t.borderColor;return x.jsx("circle",{r:e/2,fill:n,stroke:i,strokeWidth:r,style:{pointerEvents:"none"}})};v9.propTypes={size:W.number.isRequired,color:W.string.isRequired,borderWidth:W.number.isRequired,borderColor:W.string.isRequired};var pSe=w.memo(v9),b9=function(t){var e=t.x,n=t.y,r=t.symbol,i=r===void 0?pSe:r,s=t.size,o=t.datum,a=t.color,l=t.borderWidth,c=t.borderColor,u=t.label,f=t.labelTextAnchor,d=f===void 0?"middle":f,h=t.labelYOffset,p=h===void 0?-12:h,g=Gn(),v=cc(),_=v.animate,m=v.config,y=qf({transform:"translate("+e+", "+n+")",config:m,immediate:!_});return x.jsxs(ic.g,{transform:y.transform,style:{pointerEvents:"none"},children:[w.createElement(i,{size:s,color:a,datum:o,borderWidth:l,borderColor:c}),u&&x.jsx("text",{textAnchor:d,y:p,style:u9(g.dots.text),children:u})]})};b9.propTypes={x:W.number.isRequired,y:W.number.isRequired,datum:W.object.isRequired,size:W.number.isRequired,color:W.string.isRequired,borderWidth:W.number.isRequired,borderColor:W.string.isRequired,symbol:W.oneOfType([W.func,W.object]),label:W.oneOfType([W.string,W.number]),labelTextAnchor:W.oneOf(["start","middle","end"]),labelYOffset:W.number};var gSe=w.memo(b9),w9=function(t){var e=t.width,n=t.height,r=t.axis,i=t.scale,s=t.value,o=t.lineStyle,a=t.textStyle,l=t.legend,c=t.legendPosition,u=c===void 0?"top-right":c,f=t.legendOffsetX,d=f===void 0?14:f,h=t.legendOffsetY,p=h===void 0?14:h,g=t.legendOrientation,v=g===void 0?"horizontal":g,_=Gn(),m=0,y=0,b=0,S=0;r==="y"?(b=i(s),y=e):(m=i(s),S=n);var A=null;if(l){var I=function(R){var M=R.axis,k=R.width,N=R.height,F=R.position,D=R.offsetX,z=R.offsetY,Z=R.orientation,ee=0,ne=0,X=Z==="vertical"?-90:0,Y="start";if(M==="x")switch(F){case"top-left":ee=-D,ne=z,Y="end";break;case"top":ne=-z,Y=Z==="horizontal"?"middle":"start";break;case"top-right":ee=D,ne=z,Y=Z==="horizontal"?"start":"end";break;case"right":ee=D,ne=N/2,Y=Z==="horizontal"?"start":"middle";break;case"bottom-right":ee=D,ne=N-z,Y="start";break;case"bottom":ne=N+z,Y=Z==="horizontal"?"middle":"end";break;case"bottom-left":ne=N-z,ee=-D,Y=Z==="horizontal"?"end":"start";break;case"left":ee=-D,ne=N/2,Y=Z==="horizontal"?"end":"middle"}else switch(F){case"top-left":ee=D,ne=-z,Y="start";break;case"top":ee=k/2,ne=-z,Y=Z==="horizontal"?"middle":"start";break;case"top-right":ee=k-D,ne=-z,Y=Z==="horizontal"?"end":"start";break;case"right":ee=k+D,Y=Z==="horizontal"?"start":"middle";break;case"bottom-right":ee=k-D,ne=z,Y="end";break;case"bottom":ee=k/2,ne=z,Y=Z==="horizontal"?"middle":"end";break;case"bottom-left":ee=D,ne=z,Y=Z==="horizontal"?"start":"end";break;case"left":ee=-D,Y=Z==="horizontal"?"end":"middle"}return{x:ee,y:ne,rotation:X,textAnchor:Y}}({axis:r,width:e,height:n,position:u,offsetX:d,offsetY:p,orientation:v});A=x.jsx("text",{transform:"translate("+I.x+", "+I.y+") rotate("+I.rotation+")",textAnchor:I.textAnchor,dominantBaseline:"central",style:a,children:l})}return x.jsxs("g",{transform:"translate("+m+", "+b+")",children:[x.jsx("line",{x1:0,x2:y,y1:0,y2:S,stroke:_.markers.lineColor,strokeWidth:_.markers.lineStrokeWidth,style:o}),A]})};w9.propTypes={width:W.number.isRequired,height:W.number.isRequired,axis:W.oneOf(["x","y"]).isRequired,scale:W.func.isRequired,value:W.oneOfType([W.number,W.string,W.instanceOf(Date)]).isRequired,lineStyle:W.object,textStyle:W.object,legend:W.string,legendPosition:W.oneOf(["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"]),legendOffsetX:W.number.isRequired,legendOffsetY:W.number.isRequired,legendOrientation:W.oneOf(["horizontal","vertical"]).isRequired};var _Se=w.memo(w9),S9=function(t){var e=t.markers,n=t.width,r=t.height,i=t.xScale,s=t.yScale;return e&&e.length!==0?e.map(function(o,a){return x.jsx(_Se,Oi({},o,{width:n,height:r,scale:o.axis==="y"?s:i}),a)}):null};S9.propTypes={width:W.number.isRequired,height:W.number.isRequired,xScale:W.func.isRequired,yScale:W.func.isRequired,markers:W.arrayOf(W.shape({axis:W.oneOf(["x","y"]).isRequired,value:W.oneOfType([W.number,W.string,W.instanceOf(Date)]).isRequired,lineStyle:W.object,textStyle:W.object}))};w.memo(S9);var mSe=function(t){return P7(t)?t:function(e){return ho(e,t)}},x9=function(t){return w.useMemo(function(){return mSe(t)},[t])},ySe=Object.keys(g9),vSe=Object.keys(_9),bSe=function(t,e,n){if(t==="*")return!0;if(P7(t))return t(e);if(TE(t)){var r=n?ho(e,n):e;return K2e(Zbe(r,Object.keys(t)),t)}return!1},wSe=function(t,e,n,r){var i=r===void 0?{}:r,s=i.dataKey,o=i.colorKey,a=o===void 0?"color":o,l=i.targetKey,c=l===void 0?"fill":l,u=[],f={};return t.length&&e.length&&(u=[].concat(t),e.forEach(function(d){for(var h=function(){var g=n[p],v=g.id,_=g.match;if(bSe(_,d,s)){var m=t.find(function(k){return k.id===v});if(m){if(vSe.includes(m.type))if(m.background==="inherit"||m.color==="inherit"){var y=ho(d,a),b=m.background,S=m.color,A=v;m.background==="inherit"&&(A=A+".bg."+y,b=y),m.color==="inherit"&&(A=A+".fg."+y,S=y),lh(d,c,"url(#"+A+")"),f[A]||(u.push(Oi({},m,{id:A,background:b,color:S})),f[A]=1)}else lh(d,c,"url(#"+v+")");else if(ySe.includes(m.type))if(m.colors.map(function(k){return k.color}).includes("inherit")){var I=ho(d,a),R=v,M=Oi({},m,{colors:m.colors.map(function(k,N){return k.color!=="inherit"?k:(R=R+"."+N+"."+I,Oi({},k,{color:k.color==="inherit"?I:k.color}))})});M.id=R,lh(d,c,"url(#"+R+")"),f[R]||(u.push(M),f[R]=1)}else lh(d,c,"url(#"+v+")")}return"break"}},p=0;p<n.length&&h()!=="break";p++);})),u};function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z0.apply(this,arguments)}function $6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SSe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return $6(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?$6(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T9={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:pB,accent:gB,dark2:_B,paired:mB,pastel1:yB,pastel2:vB,set1:bB,set2:wB,set3:DE,tableau10:k0e},xSe=Object.keys(T9),E9={brown_blueGreen:m1,purpleRed_green:y1,pink_yellowGreen:v1,purple_orange:b1,red_blue:w1,red_grey:S1,red_yellow_blue:x1,red_yellow_green:T1,spectral:E1},TSe=Object.keys(E9),ESe={brown_blueGreen:D0e,purpleRed_green:F0e,pink_yellowGreen:B0e,purple_orange:L0e,red_blue:$0e,red_grey:U0e,red_yellow_blue:z0e,red_yellow_green:j0e,spectral:V0e},A9={blues:L1,greens:$1,greys:U1,oranges:V1,purples:z1,reds:j1,blue_green:A1,blue_purple:C1,green_blue:R1,orange_red:P1,purple_blue_green:I1,purple_blue:M1,purple_red:O1,red_purple:N1,yellow_green_blue:k1,yellow_green:D1,yellow_orange_brown:F1,yellow_orange_red:B1},ASe=Object.keys(A9),CSe={blues:nye,greens:rye,greys:iye,oranges:aye,purples:sye,reds:oye,turbo:_ye,viridis:mye,inferno:vye,magma:yye,plasma:bye,cividis:lye,warm:uye,cool:fye,cubehelixDefault:cye,blue_green:W0e,blue_purple:H0e,green_blue:X0e,orange_red:Y0e,purple_blue_green:K0e,purple_blue:q0e,purple_red:Z0e,red_purple:Q0e,yellow_green_blue:G0e,yellow_green:J0e,yellow_orange_brown:eye,yellow_orange_red:tye},Vw=Z0({},T9,E9,A9),RSe=function(t){return xSe.includes(t)},PSe=function(t){return TSe.includes(t)},ISe=function(t){return ASe.includes(t)},MSe={rainbow:dye,sinebow:gye};Z0({},ESe,CSe,MSe);var C3=function(t,e){if(typeof t=="function")return t;if(TE(t)){if(function(l){return l.theme!==void 0}(t)){if(e===void 0)throw new Error("Unable to use color from theme as no theme was provided");var n=ho(e,t.theme);if(n===void 0)throw new Error("Color from theme is undefined at path: '"+t.theme+"'");return function(){return n}}if(function(l){return l.from!==void 0}(t)){var r=function(l){return ho(l,t.from)};if(Array.isArray(t.modifiers)){for(var i,s=[],o=function(){var l=i.value,c=l[0],u=l[1];if(c==="brighter")s.push(function(f){return f.brighter(u)});else if(c==="darker")s.push(function(f){return f.darker(u)});else{if(c!=="opacity")throw new Error("Invalid color modifier: '"+c+"', must be one of: 'brighter', 'darker', 'opacity'");s.push(function(f){return f.opacity=u,f})}},a=SSe(t.modifiers);!(i=a()).done;)o();return s.length===0?r:function(l){return s.reduce(function(c,u){return u(c)},Ef(r(l))).toString()}}return r}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return t}},OSe=function(t,e){return w.useMemo(function(){return C3(t,e)},[t,e])};W.oneOfType([W.string,W.func,W.shape({theme:W.string.isRequired}),W.shape({from:W.string.isRequired,modifiers:W.arrayOf(W.array)})]);var NSe=function(t,e){if(typeof t=="function")return t;var n=typeof e=="function"?e:function(f){return ho(f,e)};if(Array.isArray(t)){var r=fu(t),i=function(f){return r(n(f))};return i.scale=r,i}if(TE(t)){if(function(f){return f.datum!==void 0}(t))return function(f){return ho(f,t.datum)};if(function(f){return f.scheme!==void 0}(t)){if(RSe(t.scheme)){var s=fu(Vw[t.scheme]),o=function(f){return s(n(f))};return o.scale=s,o}if(PSe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>11))throw new Error("Invalid size '"+t.size+"' for diverging color scheme '"+t.scheme+"', must be between 3~11");var a=fu(Vw[t.scheme][t.size||11]),l=function(f){return a(n(f))};return l.scale=a,l}if(ISe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>9))throw new Error("Invalid size '"+t.size+"' for sequential color scheme '"+t.scheme+"', must be between 3~9");var c=fu(Vw[t.scheme][t.size||9]),u=function(f){return c(n(f))};return u.scale=c,u}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return t}},kSe=function(t,e){return w.useMemo(function(){return NSe(t,e)},[t,e])},DSe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return x.jsx("circle",{r:r/2,cx:e+r/2,cy:n+r/2,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})},FSe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return x.jsx("g",{transform:"translate("+e+","+n+")",children:x.jsx("path",{d:`
                    M`+r/2+` 0
                    L`+.8*r+" "+r/2+`
                    L`+r/2+" "+r+`
                    L`+.2*r+" "+r/2+`
                    L`+r/2+` 0
                `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})},BSe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return x.jsx("rect",{x:e,y:n,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,width:r,height:r,style:{pointerEvents:"none"}})},LSe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return x.jsx("g",{transform:"translate("+e+","+n+")",children:x.jsx("path",{d:`
                M`+r/2+` 0
                L`+r+" "+r+`
                L0 `+r+`
                L`+r/2+` 0
            `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})};function _l(){return _l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_l.apply(this,arguments)}var $Se={top:0,right:0,bottom:0,left:0},C9=function(t){var e,n=t.direction,r=t.itemsSpacing,i=t.padding,s=t.itemCount,o=t.itemWidth,a=t.itemHeight;if(typeof i!="number"&&(typeof(e=i)!="object"||Array.isArray(e)||e===null))throw new Error("Invalid property padding, must be one of: number, object");var l=typeof i=="number"?{top:i,right:i,bottom:i,left:i}:_l({},$Se,i),c=l.left+l.right,u=l.top+l.bottom,f=o+c,d=a+u,h=(s-1)*r;return n==="row"?f=o*s+h+c:n==="column"&&(d=a*s+h+u),{width:f,height:d,padding:l}},USe=function(t){var e=t.anchor,n=t.translateX,r=t.translateY,i=t.containerWidth,s=t.containerHeight,o=t.width,a=t.height,l=n,c=r;switch(e){case"top":l+=(i-o)/2;break;case"top-right":l+=i-o;break;case"right":l+=i-o,c+=(s-a)/2;break;case"bottom-right":l+=i-o,c+=s-a;break;case"bottom":l+=(i-o)/2,c+=s-a;break;case"bottom-left":c+=s-a;break;case"left":c+=(s-a)/2;break;case"center":l+=(i-o)/2,c+=(s-a)/2}return{x:l,y:c}},zSe=function(t){var e,n,r,i,s,o,a=t.direction,l=t.justify,c=t.symbolSize,u=t.symbolSpacing,f=t.width,d=t.height;switch(a){case"left-to-right":e=0,n=(d-c)/2,i=d/2,o="central",l?(r=f,s="end"):(r=c+u,s="start");break;case"right-to-left":e=f-c,n=(d-c)/2,i=d/2,o="central",l?(r=0,s="start"):(r=f-c-u,s="end");break;case"top-to-bottom":e=(f-c)/2,n=0,r=f/2,s="middle",l?(i=d,o="alphabetic"):(i=c+u,o="text-before-edge");break;case"bottom-to-top":e=(f-c)/2,n=d-c,r=f/2,s="middle",l?(i=0,o="text-before-edge"):(i=d-c-u,o="alphabetic")}return{symbolX:e,symbolY:n,labelX:r,labelY:i,labelAnchor:s,labelAlignment:o}},jSe={circle:DSe,diamond:FSe,square:BSe,triangle:LSe},VSe=function(t){var e,n,r,i,s,o,a,l,c,u,f,d=t.x,h=t.y,p=t.width,g=t.height,v=t.data,_=t.direction,m=_===void 0?"left-to-right":_,y=t.justify,b=y!==void 0&&y,S=t.textColor,A=t.background,I=A===void 0?"transparent":A,R=t.opacity,M=R===void 0?1:R,k=t.symbolShape,N=k===void 0?"square":k,F=t.symbolSize,D=F===void 0?16:F,z=t.symbolSpacing,Z=z===void 0?8:z,ee=t.symbolBorderWidth,ne=ee===void 0?0:ee,X=t.symbolBorderColor,Y=X===void 0?"transparent":X,ce=t.onClick,me=t.onMouseEnter,G=t.onMouseLeave,ge=t.toggleSerie,le=t.effects,ae=w.useState({}),oe=ae[0],ue=ae[1],Ee=Gn(),K=w.useCallback(function(Gt){if(le){var At=le.filter(function(mr){return mr.on==="hover"}).reduce(function(mr,tr){return _l({},mr,tr.style)},{});ue(At)}me==null||me(v,Gt)},[me,v,le]),q=w.useCallback(function(Gt){if(le){var At=le.filter(function(mr){return mr.on!=="hover"}).reduce(function(mr,tr){return _l({},mr,tr.style)},{});ue(At)}G==null||G(v,Gt)},[G,v,le]),de=zSe({direction:m,justify:b,symbolSize:(e=oe.symbolSize)!=null?e:D,symbolSpacing:Z,width:p,height:g}),H=de.symbolX,je=de.symbolY,Be=de.labelX,Fe=de.labelY,Xe=de.labelAnchor,rt=de.labelAlignment,Ut=[ce,me,G,ge].some(function(Gt){return Gt!==void 0}),er=typeof N=="function"?N:jSe[N];return x.jsxs("g",{transform:"translate("+d+","+h+")",style:{opacity:(n=oe.itemOpacity)!=null?n:M},children:[x.jsx("rect",{width:p,height:g,fill:(r=oe.itemBackground)!=null?r:I,style:{cursor:Ut?"pointer":"auto"},onClick:function(Gt){ce==null||ce(v,Gt),ge==null||ge(v.id)},onMouseEnter:K,onMouseLeave:q}),w.createElement(er,_l({id:v.id,x:H,y:je,size:(i=oe.symbolSize)!=null?i:D,fill:(s=(o=v.fill)!=null?o:v.color)!=null?s:"black",borderWidth:(a=oe.symbolBorderWidth)!=null?a:ne,borderColor:(l=oe.symbolBorderColor)!=null?l:Y},v.hidden?Ee.legends.hidden.symbol:void 0)),x.jsx("text",{textAnchor:Xe,style:_l({},u9(Ee.legends.text),{fill:(c=(u=(f=oe.itemTextColor)!=null?f:S)!=null?u:Ee.legends.text.fill)!=null?c:"black",dominantBaseline:rt,pointerEvents:"none",userSelect:"none"},v.hidden?Ee.legends.hidden.text:void 0),x:Be,y:Fe,children:v.label})]})},WSe=function(t){var e=t.data,n=t.x,r=t.y,i=t.direction,s=t.padding,o=s===void 0?0:s,a=t.justify,l=t.effects,c=t.itemWidth,u=t.itemHeight,f=t.itemDirection,d=f===void 0?"left-to-right":f,h=t.itemsSpacing,p=h===void 0?0:h,g=t.itemTextColor,v=t.itemBackground,_=v===void 0?"transparent":v,m=t.itemOpacity,y=m===void 0?1:m,b=t.symbolShape,S=t.symbolSize,A=t.symbolSpacing,I=t.symbolBorderWidth,R=t.symbolBorderColor,M=t.onClick,k=t.onMouseEnter,N=t.onMouseLeave,F=t.toggleSerie,D=C9({itemCount:e.length,itemWidth:c,itemHeight:u,itemsSpacing:p,direction:i,padding:o}).padding,z=i==="row"?c+p:0,Z=i==="column"?u+p:0;return x.jsx("g",{transform:"translate("+n+","+r+")",children:e.map(function(ee,ne){return x.jsx(VSe,{data:ee,x:ne*z+D.left,y:ne*Z+D.top,width:c,height:u,direction:d,justify:a,effects:l,textColor:g,background:_,opacity:y,symbolShape:b,symbolSize:S,symbolSpacing:A,symbolBorderWidth:I,symbolBorderColor:R,onClick:M,onMouseEnter:k,onMouseLeave:N,toggleSerie:F},ne)})})},HSe=function(t){var e=t.data,n=t.containerWidth,r=t.containerHeight,i=t.translateX,s=i===void 0?0:i,o=t.translateY,a=o===void 0?0:o,l=t.anchor,c=t.direction,u=t.padding,f=u===void 0?0:u,d=t.justify,h=t.itemsSpacing,p=h===void 0?0:h,g=t.itemWidth,v=t.itemHeight,_=t.itemDirection,m=t.itemTextColor,y=t.itemBackground,b=t.itemOpacity,S=t.symbolShape,A=t.symbolSize,I=t.symbolSpacing,R=t.symbolBorderWidth,M=t.symbolBorderColor,k=t.onClick,N=t.onMouseEnter,F=t.onMouseLeave,D=t.toggleSerie,z=t.effects,Z=C9({itemCount:e.length,itemsSpacing:p,itemWidth:g,itemHeight:v,direction:c,padding:f}),ee=Z.width,ne=Z.height,X=USe({anchor:l,translateX:s,translateY:a,containerWidth:n,containerHeight:r,width:ee,height:ne}),Y=X.x,ce=X.y;return x.jsx(WSe,{data:e,x:Y,y:ce,direction:c,padding:f,justify:d,effects:z,itemsSpacing:p,itemWidth:g,itemHeight:v,itemDirection:_,itemTextColor:m,itemBackground:y,itemOpacity:b,symbolShape:S,symbolSize:A,symbolSpacing:I,symbolBorderWidth:R,symbolBorderColor:M,onClick:k,onMouseEnter:N,onMouseLeave:F,toggleSerie:typeof D=="boolean"?void 0:D})};function Br(){return Br=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Br.apply(this,arguments)}function KE(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var XSe=function(t){var e,n=t.data,r=t.item,i=t.colorByKey,s=t.fillByKey,o=t.radiusScale,a=t.rotation,l=t.angleStep,c=t.curveFactory,u=t.borderWidth,f=t.borderColor,d=t.fillOpacity,h=t.blendMode,p=Gn(),g=OSe(f,p),v=w.useMemo(function(){return IB().radius(function(I){return o(I)}).angle(function(I,R){return a+R*l}).curve(c)},[o,a,l,c]),_=cc(),m=_.animate,y=_.config,b=s9(v(n.map(function(I){return I[r]}))),S=qf({fill:i[r],stroke:g({key:r,color:i[r]}),config:y,immediate:!m}),A=(e=s[r])!=null?e:S.fill;return x.jsx(ic.path,{d:b,fill:A,fillOpacity:d,stroke:S.stroke,strokeWidth:u,style:{mixBlendMode:h}},r)},YSe=function(t){var e=t.radius,n=t.angles,r=t.indices,i=t.label,s=t.labelOffset,o=cc(),a=o.animate,l=o.config,c=r.map(function(f,d){var h,p,g=Y1(n[d],e+s),v=(h=n[d],(p=L6(h)+90)<=10||p>=350||p>=170&&p<=190?"middle":p>180?"end":"start");return Br({id:f,angle:L6(n[d]),anchor:v},g)}),u=y7(c.length,c.map(function(f){return{transform:"translate("+f.x+", "+f.y+")",config:l,immediate:!a}}));return x.jsx(x.Fragment,{children:u.map(function(f,d){var h=c[d];return w.createElement(i,{key:h.id,id:h.id,anchor:h.anchor,angle:h.angle,x:h.x,y:h.y,animated:f})})})},KSe=["shape"],qSe=w.memo(function(t){var e=t.radius,n=Gn(),r=cc(),i=r.animate,s=r.config,o=qf({radius:e,config:s,immediate:!i});return x.jsx(ic.circle,Br({fill:"none",r:b7(o.radius,function(a){return Math.max(a,0)})},n.grid.line))}),ZSe=function(t){var e=t.radius,n=t.rotation,r=t.angleStep,i=t.dataLength,s=Gn(),o=w.useMemo(function(){return IB().angle(function(c){return n+c*r}).radius(e).curve(LB)},[n,r,e]),a=Array.from({length:i},function(c,u){return u}),l=s9(o(a));return x.jsx(ic.path,Br({fill:"none",d:l},s.grid.line))},QSe=function(t){var e=t.shape,n=KE(t,KSe);return e==="circular"?x.jsx(qSe,{radius:n.radius}):x.jsx(ZSe,Br({},n))},GSe=function(t){var e=t.indices,n=t.levels,r=t.shape,i=t.radius,s=t.rotation,o=t.angleStep,a=t.label,l=t.labelOffset,c=Gn(),u=w.useMemo(function(){return{radii:Array.from({length:n}).map(function(h,p){return i/n*(p+1)}).reverse(),angles:Array.from({length:e.length}).map(function(h,p){return s+p*o-Math.PI/2})}},[e,n,i,s,o]),f=u.radii,d=u.angles;return x.jsxs(x.Fragment,{children:[d.map(function(h,p){var g=Y1(h,i);return x.jsx("line",Br({x1:0,y1:0,x2:g.x,y2:g.y},c.grid.line),"axis."+p)}),f.map(function(h,p){return x.jsx(QSe,{shape:r,radius:h,rotation:s,angleStep:o,dataLength:e.length},"level."+p)}),x.jsx(YSe,{radius:i,angles:d,indices:e,labelOffset:l,label:a})]})},JSe=function(t){var e=t.datum,n=t.keys,r=t.index,i=t.formatValue,s=t.colorByKey,o=t.radius,a=t.startAngle,l=t.endAngle,c=t.arcGenerator,u=t.tooltip,f=w.useState(!1),d=f[0],h=f[1],p=Gn(),g=Uce(),v=g.showTooltipFromEvent,_=g.hideTooltip,m=w.useMemo(function(){var M=n.map(function(k){return{color:s[k],id:k,value:e[k],formattedValue:i(e[k],k)}});return M.sort(function(k,N){return k.value-N.value}),M.reverse(),M},[e,n,i,s]),y=w.useCallback(function(M){h(!0),v(w.createElement(u,{index:r,data:m}),M)},[v,u,r,m]),b=w.useCallback(function(){h(!1),_()},[_,h]),S=w.useMemo(function(){var M=Y1(a+.5*(l-a)-Math.PI/2,o);return{path:c({startAngle:a,endAngle:l}),tipX:M.x,tipY:M.y}},[a,l,o,c]),A=S.path,I=S.tipX,R=S.tipY;return x.jsxs(x.Fragment,{children:[d&&x.jsx("line",{x1:0,y1:0,x2:I,y2:R,style:p.crosshair.line}),x.jsx("path",{d:A,fill:"#F00",fillOpacity:0,onMouseEnter:y,onMouseMove:y,onMouseLeave:b})]})},e3e=function(t){var e=t.data,n=t.keys,r=t.getIndex,i=t.formatValue,s=t.colorByKey,o=t.radius,a=t.rotation,l=t.angleStep,c=t.tooltip,u=yve().outerRadius(o).innerRadius(0),f=a-.5*l;return x.jsx(x.Fragment,{children:e.map(function(d){var h=r(d),p=f;return f+=l,x.jsx(JSe,{datum:d,keys:n,index:h,formatValue:i,colorByKey:s,startAngle:p,endAngle:p+l,radius:o,arcGenerator:u,tooltip:c},h)})})},t3e=function(t){var e=t.data,n=t.keys,r=t.getIndex,i=t.colorByKey,s=t.radiusScale,o=t.rotation,a=t.angleStep,l=t.symbol,c=t.size,u=c===void 0?6:c,f=t.color,d=f===void 0?{from:"color"}:f,h=t.borderWidth,p=h===void 0?0:h,g=t.borderColor,v=g===void 0?{from:"color"}:g,_=t.enableLabel,m=_!==void 0&&_,y=t.label,b=y===void 0?"value":y,S=t.formatValue,A=t.labelYOffset,I=Gn(),R=C3(d,I),M=C3(v,I),k=x9(b),N=w.useMemo(function(){return e.reduce(function(F,D,z){var Z=r(D);return n.forEach(function(ee){var ne=D[ee],X={index:Z,key:ee,value:ne,formattedValue:S(ne,ee),color:i[ee]};F.push({key:ee+"."+Z,label:m?k(X):void 0,style:Br({fill:R(X),stroke:M(X)},Y1(o+a*z-Math.PI/2,s(D[ee]))),data:X})}),F},[])},[e,n,r,i,m,k,S,R,M,o,a,s]);return x.jsx(x.Fragment,{children:N.map(function(F){return x.jsx(gSe,{x:F.style.x,y:F.style.y,symbol:l,size:u,color:F.style.fill,borderWidth:p,borderColor:F.style.stroke,label:F.label,labelYOffset:A,datum:F.data},F.key)})})},ot={layers:["grid","layers","slices","dots","legends"],maxValue:"auto",rotation:0,curve:"linearClosed",borderWidth:2,borderColor:{from:"color"},gridLevels:5,gridShape:"circular",gridLabelOffset:16,gridLabel:function(t){var e=t.id,n=t.anchor,r=t.animated,i=Gn();return x.jsx(ic.g,{transform:r.transform,children:x.jsx("text",{style:i.axis.ticks.text,dominantBaseline:"central",textAnchor:n,children:e})})},enableDots:!0,dotSize:6,dotColor:{from:"color"},dotBorderWidth:0,dotBorderColor:{from:"color"},enableDotLabel:!1,dotLabel:"formattedValue",dotLabelYOffset:-12,colors:{scheme:"nivo"},fillOpacity:.25,blendMode:"normal",isInteractive:!0,sliceTooltip:function(t){var e=t.index,n=t.data,r=w.useMemo(function(){return n.map(function(i){return[x.jsx(x7,{color:i.color},i.id),i.id,i.formattedValue]})},[n]);return x.jsx(T7,{title:x.jsx("strong",{children:e}),rows:r})},legends:[],role:"img",animate:!0,motionConfig:"gentle",defs:[],fill:[]},n3e=["data"],r3e=["isInteractive","animate","motionConfig","theme","renderWrapper"],i3e=function(t){var e=t.data,n=t.keys,r=t.indexBy,i=t.layers,s=i===void 0?ot.layers:i,o=t.rotation,a=o===void 0?ot.rotation:o,l=t.maxValue,c=l===void 0?ot.maxValue:l,u=t.valueFormat,f=t.curve,d=f===void 0?ot.curve:f,h=t.margin,p=t.width,g=t.height,v=t.borderWidth,_=v===void 0?ot.borderWidth:v,m=t.borderColor,y=m===void 0?ot.borderColor:m,b=t.gridLevels,S=b===void 0?ot.gridLevels:b,A=t.gridShape,I=A===void 0?ot.gridShape:A,R=t.gridLabel,M=R===void 0?ot.gridLabel:R,k=t.gridLabelOffset,N=k===void 0?ot.gridLabelOffset:k,F=t.enableDots,D=F===void 0?ot.enableDots:F,z=t.dotSymbol,Z=t.dotSize,ee=Z===void 0?ot.dotSize:Z,ne=t.dotColor,X=ne===void 0?ot.dotColor:ne,Y=t.dotBorderWidth,ce=Y===void 0?ot.dotBorderWidth:Y,me=t.dotBorderColor,G=me===void 0?ot.dotBorderColor:me,ge=t.enableDotLabel,le=ge===void 0?ot.enableDotLabel:ge,ae=t.dotLabel,oe=ae===void 0?ot.dotLabel:ae,ue=t.dotLabelYOffset,Ee=ue===void 0?ot.dotLabelYOffset:ue,K=t.colors,q=K===void 0?ot.colors:K,de=t.fillOpacity,H=de===void 0?ot.fillOpacity:de,je=t.blendMode,Be=je===void 0?ot.blendMode:je,Fe=t.isInteractive,Xe=Fe===void 0?ot.isInteractive:Fe,rt=t.sliceTooltip,Ut=rt===void 0?ot.sliceTooltip:rt,er=t.legends,Gt=er===void 0?ot.legends:er,At=t.role,mr=t.ariaLabel,tr=t.ariaLabelledBy,id=t.ariaDescribedBy,Va=t.defs,sd=Va===void 0?ot.defs:Va,zr=t.fill,Wa=zr===void 0?ot.fill:zr,Ui=sSe(p,g,h),fc=Ui.margin,fi=Ui.innerWidth,Ha=Ui.innerHeight,od=Ui.outerWidth,ad=Ui.outerHeight,ye=function(Bt){var jn=Bt.data,Rn=Bt.keys,ld=Bt.indexBy,rb=Bt.rotationDegrees,dc=Bt.maxValue,ib=Bt.valueFormat,Ig=Bt.curve,hc=Bt.width,pc=Bt.height,cd=Bt.colors,ud=cd===void 0?ot.colors:cd,ji=Bt.legends,wo=Bt.defs,So=Bt.fill,xo=x9(ld),Xa=w.useMemo(function(){return jn.map(xo)},[jn,xo]),sb=a9(ib),ob=x3(rb),Ya=kSe(ud,"key"),en=w.useMemo(function(){return Rn.reduce(function(gn,br,wr){return gn[br]=Ya({key:br,index:wr}),gn},{})},[Rn,Ya]),Os=w.useMemo(function(){var gn=Rn.map(function(ln){return{key:ln,color:en[ln],data:jn,fill:null}}),br=wSe(wo,gn,So),wr=gn.reduce(function(ln,Ns){var Ao=Ns.key,dd=Ns.fill;return ln[Ao]=dd,ln},{});return{boundDefs:br,fillByKey:wr}},[Rn,jn,wo,So,en]),Vi=Os.boundDefs,hi=Os.fillByKey,pi=w.useMemo(function(){var gn=jn.reduce(function(ln,Ns){return[].concat(ln,Rn.map(function(Ao){return Ns[Ao]}))},[]),br=dc!=="auto"?dc:Math.max.apply(Math,gn),wr=Math.min(hc,pc)/2;return{radius:wr,radiusScale:hB().range([0,wr]).domain([0,br]),centerX:hc/2,centerY:pc/2,angleStep:2*Math.PI/jn.length}},[Rn,jn,dc,hc,pc]),Vr=pi.radius,yr=pi.radiusScale,gc=pi.centerX,_c=pi.centerY,To=pi.angleStep,vr=rSe(Ig),mc=w.useMemo(function(){return{data:jn,keys:Rn,indices:Xa,colorByKey:en,centerX:gc,centerY:_c,radiusScale:yr,angleStep:To}},[jn,Rn,Xa,en,gc,_c,yr,To]),Eo=w.useMemo(function(){return Rn.map(function(gn){return{id:gn,label:gn,color:en[gn]}})},[Rn,en]),fd=w.useMemo(function(){return ji.map(function(gn){var br=gn.data,wr=KE(gn,n3e),ln=br==null?void 0:br.map(function(Ns){return Br({},Eo.find(function(Ao){return Ao.id===Ns.id})||{},Ns)});return Br({},wr,{data:ln||Eo})})},[ji,Eo]);return{getIndex:xo,indices:Xa,formatValue:sb,colorByKey:en,fillByKey:hi,boundDefs:Vi,rotation:ob,radius:Vr,radiusScale:yr,centerX:gc,centerY:_c,angleStep:To,curveFactory:vr,legendData:Eo,boundLegends:fd,customLayerProps:mc}}({data:e,keys:n,indexBy:r,rotationDegrees:a,maxValue:c,valueFormat:u,curve:d,width:fi,height:Ha,colors:q,legends:Gt,defs:sd,fill:Wa}),Ue=ye.getIndex,pt=ye.indices,Le=ye.formatValue,vt=ye.colorByKey,Ft=ye.fillByKey,wn=ye.boundDefs,pn=ye.rotation,zn=ye.radius,Ms=ye.radiusScale,nr=ye.centerX,di=ye.centerY,zi=ye.angleStep,eb=ye.curveFactory,tb=ye.boundLegends,nb=ye.customLayerProps,jr={grid:null,layers:null,slices:null,dots:null,legends:null};return s.includes("grid")&&(jr.grid=x.jsx("g",{transform:"translate("+nr+", "+di+")",children:x.jsx(GSe,{levels:S,shape:I,radius:zn,rotation:pn,angleStep:zi,indices:pt,label:M,labelOffset:N})},"grid")),s.includes("layers")&&(jr.layers=x.jsx("g",{transform:"translate("+nr+", "+di+")",children:n.map(function(Bt){return x.jsx(XSe,{data:e,item:Bt,colorByKey:vt,fillByKey:Ft,radiusScale:Ms,rotation:pn,angleStep:zi,curveFactory:eb,borderWidth:_,borderColor:y,fillOpacity:H,blendMode:Be},Bt)})},"layers")),s.includes("slices")&&Xe&&(jr.slices=x.jsx("g",{transform:"translate("+nr+", "+di+")",children:x.jsx(e3e,{data:e,keys:n,getIndex:Ue,formatValue:Le,colorByKey:vt,radius:zn,rotation:pn,angleStep:zi,tooltip:Ut})},"slices")),s.includes("dots")&&D&&(jr.dots=x.jsx("g",{transform:"translate("+nr+", "+di+")",children:x.jsx(t3e,{data:e,keys:n,getIndex:Ue,radiusScale:Ms,rotation:pn,angleStep:zi,symbol:z,size:ee,colorByKey:vt,color:X,borderWidth:ce,borderColor:G,enableLabel:le,label:oe,formatValue:Le,labelYOffset:Ee})},"dots")),s.includes("legends")&&(jr.legends=x.jsx(w.Fragment,{children:tb.map(function(Bt,jn){return x.jsx(HSe,Br({},Bt,{containerWidth:p,containerHeight:g}),jn)})},"legends")),x.jsx(y9,{defs:wn,width:od,height:ad,margin:fc,role:At,ariaLabel:mr,ariaLabelledBy:tr,ariaDescribedBy:id,children:s.map(function(Bt,jn){var Rn;return typeof Bt=="function"?x.jsx(w.Fragment,{children:w.createElement(Bt,nb)},jn):(Rn=jr==null?void 0:jr[Bt])!=null?Rn:null})})},s3e=function(t){var e=t.isInteractive,n=e===void 0?ot.isInteractive:e,r=t.animate,i=r===void 0?ot.animate:r,s=t.motionConfig,o=s===void 0?ot.motionConfig:s,a=t.theme,l=t.renderWrapper,c=KE(t,r3e);return x.jsx(d9,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:x.jsx(i3e,Br({isInteractive:n},c))})},U6=function(t){return x.jsx(h9,{children:function(e){var n=e.width,r=e.height;return x.jsx(s3e,Br({width:n,height:r},t))}})};const Bp=t=>x.jsx(BF,{asChild:!0,value:t.value,"aria-label":t.label,children:x.jsx("div",{className:"h-16 max-w-full cursor-pointer",children:x.jsxs(qT,{children:[x.jsx(ZT,{asChild:!0,children:x.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[x.jsx("div",{className:"flex-1",children:t.icon}),x.jsx(An,{className:"line-clamp-2 cursor-pointer text-center font-light text-xs",children:t.label})]})}),x.jsx(Hv,{side:"bottom",sideOffset:-10,children:t.label})]})})}),R9=({className:t,...e})=>{const n=Zt(r=>r.active);return x.jsxs("div",{className:an("flex flex-col gap-2",t),...e,children:[x.jsxs("div",{className:"max-h-4 overflow-hidden rounded-sm",children:[n.clusters==="Geographic"&&x.jsx("div",{className:"grid grid-cols-3",children:Object.keys(ya).map(r=>x.jsx("div",{className:"flex aspect-square",style:{backgroundColor:`rgb(${ya[r]})`}},r))}),n.clusters==="Socioeconomic"&&x.jsx("div",{className:"grid grid-cols-4",children:Object.keys(Gs).map(r=>x.jsx("div",{className:"flex aspect-square",style:{backgroundColor:`rgb(${Gs[r]})`}},r))})]}),x.jsxs("div",{className:"flex items-center justify-between gap-2 px-1 py-1",children:[x.jsx(An,{className:"font-bold text-xs",children:"Cluster 1"}),x.jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[x.jsx(An,{className:"z-[100] bg-background px-2 text-xs",children:n.clusters}),x.jsx("div",{className:"absolute w-full border-foreground/50 border-b border-dashed"})]}),x.jsx(An,{className:"font-bold text-xs",children:n.clusters==="Geographic"?"Cluster 3":"Cluster 4"})]})]})},o3e=()=>{const t=Zt(e=>e.active);return x.jsx("div",{className:"aspect-square w-full",children:t.clusters==="Geographic"?x.jsx(U6,{gridLabelOffset:10,dotBorderWidth:.5,motionConfig:"wobbly",blendMode:"multiply",margin:{right:50,left:50},indexBy:"index",valueFormat:">-.3f",keys:["cluster1","cluster2","cluster3"],colors:Object.keys(ya).map(e=>`rgb(${ya[e]})`),data:[{index:"Food",cluster1:.466747978,cluster2:.514496674,cluster3:.866267094},{index:"Non Food",cluster1:.533252022,cluster2:.485503326,cluster3:.133732906},{index:"Vegetation",cluster1:.372436938,cluster2:.607455838,cluster3:.603621829},{index:"Urban",cluster1:.581804036,cluster2:.251200151,cluster3:.24054495},{index:"Pollution",cluster1:.756474774,cluster2:.379658214,cluster3:.368122998}]}):x.jsx(U6,{gridLabelOffset:10,dotBorderWidth:.5,motionConfig:"wobbly",blendMode:"multiply",margin:{right:50,left:50},indexBy:"index",valueFormat:">-.3f",keys:["cluster1","cluster2","cluster3","cluster4"],colors:Object.keys(Gs).map(e=>`rgb(${Gs[e]})`),data:[{index:"Food",cluster1:.41428884,cluster2:.38999789,cluster3:.61106984,cluster4:.92714162},{index:"Non Food",cluster1:.58571116,cluster2:.61000211,cluster3:.38893016,cluster4:.07285838},{index:"Education",cluster1:.359251,cluster2:.112224,cluster3:.106683,cluster4:.089254},{index:"Health",cluster1:.326341,cluster2:.084477,cluster3:.072607,cluster4:.062862},{index:"Economy",cluster1:.418042,cluster2:.248166,cluster3:.229731,cluster4:.214951}]})})},a3e=()=>{const t=Zt(n=>n.active),e=[{value:"Geographic",label:"Geographic Analysis",icon:x.jsx(MV,{className:"stroke-1"})},{value:"Socioeconomic",label:"Socioeconomic Analysis",icon:x.jsx(NV,{className:"stroke-1"})}];return x.jsx("div",{className:"flex flex-col gap-y-8 py-2",children:x.jsx("div",{className:"flex flex-col gap-4",children:x.jsx(xp,{type:"single",value:t.clusters,defaultValue:"FoodExpend",className:"grid grid-cols-2",onValueChange:n=>{n&&Zt.setState({active:{clusters:n,analysis:"cluster"}})},children:e.map(n=>x.jsx(Bp,{...n},n.value))})})})};var P9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},z6=J.createContext&&J.createContext(P9),l3e=["attr","size","title"];function c3e(t,e){if(t==null)return{};var n=u3e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q0.apply(this,arguments)}function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){f3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f3e(t,e,n){return e=d3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d3e(t){var e=h3e(t,"string");return typeof e=="symbol"?e:e+""}function h3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I9(t){return t&&t.map((e,n)=>J.createElement(e.tag,G0({key:n},e.attr),I9(e.child)))}function Is(t){return e=>J.createElement(p3e,Q0({attr:G0({},t.attr)},e),I9(t.child))}function p3e(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=c3e(t,l3e),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),J.createElement("svg",Q0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:G0(G0({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&J.createElement("title",null,s),t.children)};return z6!==void 0?J.createElement(z6.Consumer,null,n=>e(n)):e(P9)}function g3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M463.7 505.9c9.8-8.9 10.7-24.3 2.1-34.3l-42.1-49 0-54.7c0-5.5-1.8-10.8-5.1-15.1L352 266.3l0-.3L485.4 387.8C542.4 447.6 640 405.2 640 320.6c0-47.9-34-88.3-79.4-94.2l-153-23.9 40.8-40.9c7.8-7.8 9.4-20.1 3.9-29.8L428.5 90.1l38.2-50.9c8-10.6 6.1-25.9-4.3-34.1s-25.2-6.3-33.2 4.4l-48 63.9c-5.9 7.9-6.6 18.6-1.7 27.2L402.2 140 352 190.3l0-38.2c0-14.9-10.2-27.4-24-31l0-57.2c0-4.4-3.6-8-8-8s-8 3.6-8 8l0 57.2c-13.8 3.6-24 16.1-24 31l0 38.1L237.8 140l22.6-39.5c4.9-8.6 4.2-19.3-1.7-27.2l-48-63.9c-8-10.6-22.8-12.6-33.2-4.4s-12.2 23.5-4.3 34.1l38.2 50.9-23.9 41.7c-5.5 9.7-3.9 22 3.9 29.8l40.8 40.9-153 23.9C34 232.3 0 272.7 0 320.6c0 84.6 97.6 127 154.6 67.1L288 266l0 .3-66.5 86.4c-3.3 4.3-5.1 9.6-5.1 15.1l0 54.7-42.1 49c-8.6 10.1-7.7 25.5 2.1 34.3s24.7 7.9 33.4-2.1l48-55.9c3.8-4.4 5.9-10.2 5.9-16.1l0-55.4L288 344.7l0 63.1c0 17.7 14.3 32 32 32s32-14.3 32-32l0-63.1 24.3 31.6 0 55.4c0 5.9 2.1 11.7 5.9 16.1l48 55.9c8.6 10.1 23.6 11 33.4 2.1z"},child:[]}]})(t)}function _3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 128c-.6 0-1.1.2-1.6.2 1.1-5.2 1.6-10.6 1.6-16.2 0-44.2-35.8-80-80-80-24.6 0-46.3 11.3-61 28.8C256.4 24.8 219.3 0 176 0 114.1 0 64 50.1 64 112c0 7.3.8 14.3 2.1 21.2C27.8 145.8 0 181.5 0 224c0 53 43 96 96 96h320c53 0 96-43 96-96s-43-96-96-96zM88 374.2c-12.8 44.4-40 56.4-40 87.7 0 27.7 21.5 50.1 48 50.1s48-22.4 48-50.1c0-31.4-27.2-43.1-40-87.7-2.2-8.1-13.5-8.5-16 0zm160 0c-12.8 44.4-40 56.4-40 87.7 0 27.7 21.5 50.1 48 50.1s48-22.4 48-50.1c0-31.4-27.2-43.1-40-87.7-2.2-8.1-13.5-8.5-16 0zm160 0c-12.8 44.4-40 56.4-40 87.7 0 27.7 21.5 50.1 48 50.1s48-22.4 48-50.1c0-31.4-27.2-43.1-40-87.7-2.2-8.1-13.5-8.5-16 0z"},child:[]}]})(t)}function m3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 0c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm-160-16C256 50.1 205.9 0 144 0S32 50.1 32 112v166.5C12.3 303.2 0 334 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-34-12.3-64.9-32-89.5V112zM144 448c-44.1 0-80-35.9-80-80 0-25.5 12.2-48.9 32-63.8V112c0-26.5 21.5-48 48-48s48 21.5 48 48v192.2c19.8 14.8 32 38.3 32 63.8 0 44.1-35.9 80-80 80zm16-125.1V112c0-8.8-7.2-16-16-16s-16 7.2-16 16v210.9c-18.6 6.6-32 24.2-32 45.1 0 26.5 21.5 48 48 48s48-21.5 48-48c0-20.9-13.4-38.5-32-45.1z"},child:[]}]})(t)}function y3e(t){return Is({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M7.56,17.19c0-0.88,0.24-1.89,0.72-3.03s1.1-2.25,1.86-3.31c1.56-2.06,2.92-3.62,4.06-4.67l0.75-0.72
	c0.25,0.26,0.53,0.5,0.83,0.72c0.41,0.42,1.04,1.11,1.88,2.09s1.57,1.85,2.17,2.65c0.71,1.01,1.32,2.1,1.81,3.25
	s0.74,2.16,0.74,3.03c0,1-0.19,1.95-0.58,2.86c-0.39,0.91-0.91,1.7-1.57,2.36c-0.66,0.66-1.45,1.19-2.37,1.58
	c-0.92,0.39-1.89,0.59-2.91,0.59c-1,0-1.95-0.19-2.86-0.57c-0.91-0.38-1.7-0.89-2.36-1.55c-0.66-0.65-1.19-1.44-1.58-2.35
	S7.56,18.23,7.56,17.19z M9.82,14.26c0,0.83,0.17,1.49,0.52,1.99c0.35,0.49,0.88,0.74,1.59,0.74c0.72,0,1.25-0.25,1.61-0.74
	c0.35-0.49,0.53-1.15,0.54-1.99c-0.01-0.84-0.19-1.5-0.54-2c-0.35-0.49-0.89-0.74-1.61-0.74c-0.71,0-1.24,0.25-1.59,0.74
	C9.99,12.76,9.82,13.42,9.82,14.26z M11.39,14.26c0-0.15,0-0.27,0-0.35s0.01-0.19,0.02-0.33c0.01-0.14,0.02-0.25,0.05-0.32
	s0.05-0.16,0.09-0.24c0.04-0.08,0.09-0.15,0.15-0.18c0.07-0.04,0.14-0.06,0.23-0.06c0.14,0,0.25,0.04,0.33,0.12s0.14,0.21,0.17,0.38
	c0.03,0.18,0.05,0.32,0.06,0.45s0.01,0.3,0.01,0.52c0,0.23,0,0.4-0.01,0.52c-0.01,0.12-0.03,0.27-0.06,0.45
	c-0.03,0.17-0.09,0.3-0.17,0.38s-0.19,0.12-0.33,0.12c-0.09,0-0.16-0.02-0.23-0.06c-0.07-0.04-0.12-0.1-0.15-0.18
	c-0.04-0.08-0.07-0.17-0.09-0.24c-0.02-0.08-0.04-0.19-0.05-0.32c-0.01-0.14-0.02-0.25-0.02-0.32S11.39,14.41,11.39,14.26z
	 M11.98,22.01h1.32l4.99-10.74h-1.35L11.98,22.01z M16.28,19.02c0.01,0.84,0.2,1.5,0.55,2c0.35,0.49,0.89,0.74,1.6,0.74
	c0.72,0,1.25-0.25,1.6-0.74c0.35-0.49,0.52-1.16,0.53-2c-0.01-0.84-0.18-1.5-0.53-1.99c-0.35-0.49-0.88-0.74-1.6-0.74
	c-0.71,0-1.25,0.25-1.6,0.74C16.47,17.52,16.29,18.18,16.28,19.02z M17.85,19.02c0-0.23,0-0.4,0.01-0.52
	c0.01-0.12,0.03-0.27,0.06-0.45s0.09-0.3,0.17-0.38s0.19-0.12,0.33-0.12c0.09,0,0.17,0.02,0.24,0.06c0.07,0.04,0.12,0.1,0.16,0.19
	c0.04,0.09,0.07,0.17,0.1,0.24s0.04,0.18,0.05,0.32l0.01,0.32l0,0.34c0,0.16,0,0.28,0,0.35l-0.01,0.32l-0.05,0.32l-0.1,0.24
	l-0.16,0.19l-0.24,0.06c-0.14,0-0.25-0.04-0.33-0.12s-0.14-0.21-0.17-0.38c-0.03-0.18-0.05-0.33-0.06-0.45S17.85,19.25,17.85,19.02z
	`},child:[]}]})(t)}function v3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M154.13 98.45c-74.523-.454-118.57 44.693-124.821 87.952-13.777 104.53-24.78 197.596 42.572 226.59 21.234 9.14 139.689-96.135 223.23-119.239 10.255-63.758 9.712-95.298 3.509-157.142 0 0-3.245-18.8-17.582-21.94-29.596-6.482-80.816-16.355-126.909-16.22zm267.935 10.313c-30.34-.091-65.864 3.56-95.367 9.5-6.687 1.347-10.656 15.303-9.916 19.024 5.8 59.214 6.503 87.53-2.395 149.486 165.98-69.253 180.409-116.413 178.531-136.756-2.967-32.153-33.145-41.14-70.853-41.254zM284.659 314.628c-39.357 14.62-79.953 40.882-113.676 64.54 20.086 5.945 56.674 6.638 74.525-3.397 18.28-15.838 34.462-37.393 39.15-61.143z"},child:[]}]})(t)}function b3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M21.307 21.307v469.386h202.83c-4.174-21.84-1.993-42.658 6.646-60.482 14.007-28.898 44.732-48.323 86.37-51.22l.19-.013.194-.004c13.59-.456 44.624-11.956 61.684-31.192 8.53-9.617 13.925-20.642 14.282-33.626.357-12.984-4.327-28.633-18.682-47.488-53.87-70.76-118.502-154.877-153.504-245.36zm112.767 248.937l16.998 5.926c-7.097 20.357-10.2 36.084-10.066 48.324.132 12.24 3.172 20.972 9.11 29.108 11.874 16.27 37.717 29.868 75.25 49.265l-8.264 15.992c-37.432-19.346-65.516-32.708-81.528-54.647-8.006-10.97-12.4-24.158-12.566-39.526-.167-15.367 3.568-32.934 11.066-54.443zM288.44 330.13c19.56-.24 33.37 5.704 36.013 15.497 1.73 6.472-1.583 14.065-9.324 21.38-5.33-15.247-27.126-21.834-49.005-14.812-20.975 6.755-34.747 23.72-31.6 38.928-13.273-1.856-22.015-7.213-24.076-14.754-3.99-14.79 18.3-33.662 49.78-42.15 9.55-2.576 19.25-3.982 28.21-4.09z"},child:[]}]})(t)}function w3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M372.03 16.318c-18.85 0-37.693 7.71-49.214 23.125-25.114-24.456-78.796-13.708-78.796 32.248 0 6.683 1.14 12.617 3.156 17.81h126.906l43.98 182.098h-75.558l-10.514 90.42c35.93.896 72.553-22.212 72.553-69.356l-.002-.164c15.128 1.198 30.85-4.22 40.5-16.244 13.076 11.892 39.855 6.224 39.855-17.014 0-18.95-17.805-26.2-31.47-21.79-3.356-17.022-15.09-27.788-29.05-32.307 5.138-7.003 8.3-16.072 8.3-27.213 0-21.872-12.166-35.76-27.618-41.682.302-1.52.466-3.144.466-4.875 0-1.72-.164-3.333-.462-4.844 15.914-9.37 27.426-26.276 27.426-50.74 0-39.647-30.228-59.47-60.457-59.472zM98.7 39.695c-19.232-.137-38.25 10.7-43.63 35.428-12.75 58.617 76.628 78.058 89.38 19.44.482-2.216.8-4.37 1-6.473 11.744 3.185 25.72-1.606 29.114-17.207 5.824-26.77-29.91-37.59-42.388-18.38-8.952-8.2-21.255-12.72-33.475-12.808zm62.116 68.494L125.86 252.91h68.466l20.772 178.64h89.992l20.77-178.64h68.464L359.37 108.19H160.815zm308.83 11.29c-10.803 0-21.607 7.087-21.607 21.258 0 28.343 43.214 28.343 43.214 0 0-14.17-10.804-21.258-21.608-21.258zM169.11 167.477l67.292 47.228-79.062 7.078 11.77-54.306zm181.753 0l11.772 54.306-79.063-7.078 67.29-47.228zm111.537 9.42c-7.432 0-14.863 4.875-14.863 14.623 0 19.495 29.727 19.495 29.727 0 0-9.748-7.432-14.624-14.864-14.624zM48.125 189.58c-15.72 0-31.443 10.31-31.443 30.93 0 27.956 28.893 36.956 47.51 27.01 1.29 63.073 85.368 71.095 107.73 24.076h-69.8l19.61-81.192c-16.496-.246-33.104 5.812-44.212 18.184-4.752-12.67-17.072-19.008-29.395-19.008zm211.865 41.053l31.88 42.1-14.9 11.283-16.982-22.428-16.984 22.428-14.9-11.284 31.886-42.1zM40.38 272.738c-7.433 0-14.864 4.872-14.864 14.62 0 19.5 29.726 19.5 29.726 0 0-9.746-7.432-14.62-14.863-14.62zm141.222 32.56c-15.187.658-29.89 10.956-29.89 30.897 0 7.752 2.22 14.044 5.83 18.88-8.155 7.493-13.548 18.505-13.548 33.058 0 23.906 14.53 38.272 32.004 43.125-2.34 3.485-3.756 7.896-3.756 13.238 0 28.692 40.822 30.603 46.274 5.742h-20.06l-16.854-144.94zm147.244 83.747l-7.116 61.193h-52.253c11.388 26.444 46.265 32.527 68.462 18.252 5.28 35.71 62.494 33.894 62.494-5.445 0-25.93-24.858-35.552-43.317-28.875.058-1.037.096-2.087.096-3.162 0-22.225-12.56-36.207-28.367-41.963zm153.53 6.543c-7.142.088-14.38 5.985-11.946 15.072 4.1 15.304 27.436 9.05 23.336-6.254-1.666-6.22-6.505-8.878-11.39-8.818zM61.312 416.842c-13.135 0-26.27 8.613-26.27 25.842 0 17.23 13.14 25.846 26.275 25.843-.26 1.37-.404 2.828-.404 4.38 0 26.502 40.41 26.502 40.41 0 0-11.306-7.355-17.772-15.787-19.432 1.3-3.116 2.045-6.71 2.045-10.79 0-17.23-13.135-25.843-26.27-25.843zM463 431.766c-5.583.068-11.202 3.082-13.688 8.17-13.404-8.747-36.365 2.018-30.974 22.14 6.044 22.56 37.068 17.112 39.658-2.02 9.654 2.782 22.22-4.778 18.775-17.632-2.013-7.516-7.864-10.73-13.77-10.658zm-332.88 1.857c-7.43 0-14.862 4.875-14.862 14.623 0 19.496 29.724 19.496 29.724 0 0-9.75-7.43-14.623-14.86-14.623z"},child:[]}]})(t)}function S3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M153.063 21.74a19.46 28.32 83.178 0 1-23.98 13.947 19.46 28.32 83.178 0 1-27.68-9.18c-1.236 5.62-1.713 12.016-1.163 19.15 3.247 42.106-10.16 118.603 107.54 132.268-41.45 32.308-27.99 64.745-18.467 97.258-33.296-1.63-53.61 23.1-62.577 45.982-97.49-13.226-79.727 121.682-78.574 148.143 1.086 24.9 52.413 28.33 54.285 6.39 3.667-42.972-10.243-104.27 29.207-94.132 22.28 5.724 62.243 53.447 161.366 51.377 140.028-2.926 263.475-321.36 81.64-351.272-63.3-10.412-148.19 37.224-148.19 37.224-67.307 6.347-67.29-24.454-70.937-82.172-.357-5.654-1.216-10.638-2.47-14.983zM137.59 350.176h254.305c-16.912 28.374-52.22 66.58-114.563 65.668-58.09-.85-103.54-18.614-139.742-65.668z"},child:[]}]})(t)}function x3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M227.51,227.4A12,12,0,0,1,216,236a12.15,12.15,0,0,1-3.4-.49l-84.6-25-84.6,25A12.15,12.15,0,0,1,40,236a12,12,0,0,1-3.4-23.51L85.65,198,36.6,183.51a12,12,0,0,1,6.8-23l84.6,25,84.6-25a12,12,0,1,1,6.8,23L170.35,198l49.05,14.49A12,12,0,0,1,227.51,227.4ZM64,104c0-50.59,55.93-81.28,58.31-82.57a12,12,0,0,1,11.38,0C136.07,22.72,192,53.41,192,104a64,64,0,0,1-128,0Zm64,40a12,12,0,0,0,12-12c0-6.47-2.71-12.55-8-18.07a41.26,41.26,0,0,0-4-3.57,42.49,42.49,0,0,0-4,3.57c-5.33,5.52-8,11.6-8,18.07A12,12,0,0,0,128,144ZM88,104a39.78,39.78,0,0,0,4.85,19.08c4.81-25,28.66-37.25,29.78-37.81a12,12,0,0,1,10.74,0c1.12.56,25,12.78,29.78,37.81A39.78,39.78,0,0,0,168,104c0-28.34-27.74-49.81-40-57.92C115.75,54.18,88,75.66,88,104Z"},child:[]}]})(t)}function T3e(t){return Is({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 10v-.2a1.8 1.8 0 0 0 -1.8 -1.8h-.4a1.8 1.8 0 0 0 -1.8 1.8v4.4a1.8 1.8 0 0 0 1.8 1.8h.4a1.8 1.8 0 0 0 1.8 -1.8v-.2"},child:[]},{tag:"path",attr:{d:"M3 3m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"},child:[]}]})(t)}const M9=({className:t,...e})=>x.jsxs("div",{className:an("flex flex-col gap-2",t),...e,children:[x.jsx("div",{className:"grid max-h-4 w-full grid-cols-7 overflow-hidden rounded-sm",children:Object.keys(Sp).map(n=>x.jsxs(qT,{children:[x.jsx(ZT,{asChild:!0,children:x.jsx("div",{className:"flex aspect-square",style:{backgroundColor:`rgb(${Sp[n]})`}})}),x.jsx(Hv,{side:"bottom",sideOffset:-10,children:n})]},n))}),x.jsxs("div",{className:"flex items-center justify-between gap-2 px-1 py-1",children:[x.jsx(An,{className:"font-bold text-xs",children:"Tinggi"}),x.jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[x.jsx(An,{className:"z-[100] bg-background px-2 text-xs",children:"Legenda"}),x.jsx("div",{className:"absolute w-full border-foreground/50 border-b border-dashed"})]}),x.jsx(An,{className:"font-bold text-xs",children:"Rendah"})]})]}),E3e=()=>x.jsx("p",{className:"text-sm",children:"Pemetaan resiko penyakit 5m x 5m menggunakan indikator lingkungan"}),A3e=()=>{const t=Zt(r=>r.active),e=[{value:"FoodExpend",label:"Resiko ISPA",icon:x.jsx(b3e,{})},{value:"FoodExpend",label:"Resiko Hepatitis",icon:x.jsx(v3e,{})},{value:"FoodExpend",label:"Resiko Diare",icon:x.jsx(S3e,{})},{value:"FoodExpend",label:"Resiko Malaria",icon:x.jsx(g3e,{className:"stroke-1"})}],n=[{value:void 0,label:"None",icon:x.jsx(CV,{className:"stroke-1"})},{value:"Elevation",label:"Curah Hujan",icon:x.jsx(_3e,{className:"stroke-1"})},{value:"Slope",label:"Suhu",icon:x.jsx(m3e,{className:"stroke-1"})},{value:"ES_Distance",label:"Kelembapan",icon:x.jsx(y3e,{className:"stroke-1"})},{value:"JHS_Distance",label:"CO",icon:x.jsx(T3e,{className:"stroke-1"})},{value:"SHS_Distance",label:"SO2",icon:x.jsx(w3e,{className:"stroke-1"})},{value:"Hospital_Distance",label:"NO2",icon:x.jsx(x3e,{className:"stroke-1"})},{value:"Hospital_Distance",label:"Fasilitas Kesehatan",icon:x.jsx(AV,{className:"stroke-1"})}];return x.jsxs("div",{className:"flex flex-col gap-y-8 py-2",children:[x.jsxs("div",{className:"flex flex-col gap-4",children:[x.jsx(An,{className:"font-bold",children:"Resiko Penyakit"}),x.jsx(xp,{type:"single",value:t.fill,defaultValue:"FoodExpend",className:"grid grid-cols-3",onValueChange:r=>{r&&Zt.setState(i=>({active:{...i.active,fill:r,analysis:"grid"}}))},children:e.map(r=>x.jsx(Bp,{...r},r.value))})]}),x.jsxs("div",{className:"flex flex-col gap-4",children:[x.jsxs(qT,{children:[x.jsx(ZT,{asChild:!0,children:x.jsx(An,{className:"font-bold",children:" Indikator Lingkungan"})}),x.jsxs(Hv,{side:"bottom",sideOffset:-10,children:["Use ",x.jsx("code",{children:"ctrl"})," and scroll or finger to show the 3d maps"]})]}),x.jsx(xp,{type:"single",value:t.elevation,className:"grid grid-cols-3",onValueChange:r=>Zt.setState(i=>({active:{elevation:r,fill:i.active.fill,analysis:"grid"}})),children:n.map((r,i)=>x.jsx(Bp,{...r},r.value||i))})]})]})};function C3e(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const O9="Switch",[R3e,vRe]=La(O9),[P3e,I3e]=R3e(O9),M3e=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[f,d]=w.useState(null),h=pr(e,m=>d(m)),p=w.useRef(!1),g=f?!!f.closest("form"):!0,[v=!1,_]=$a({prop:i,defaultProp:s,onChange:c});return w.createElement(P3e,{scope:n,checked:v,disabled:a},w.createElement($t.button,Te({type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":N9(v),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onClick:Ot(t.onClick,m=>{_(y=>!y),g&&(p.current=m.isPropagationStopped(),p.current||m.stopPropagation())})})),g&&w.createElement(k3e,{control:f,bubbles:!p.current,name:r,value:l,checked:v,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),O3e="SwitchThumb",N3e=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=I3e(O3e,n);return w.createElement($t.span,Te({"data-state":N9(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),k3e=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=w.useRef(null),o=C3e(n),a=wD(e);return w.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&f){const d=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(d)}},[o,n,r]),w.createElement("input",Te({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N9(t){return t?"checked":"unchecked"}const k9=M3e,D3e=N3e,D9=w.forwardRef(({className:t,...e},n)=>x.jsx(k9,{className:an("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors disabled:cursor-not-allowed data-[state=checked]:bg-primary data-[state=unchecked]:bg-input disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",t),...e,ref:n,children:x.jsx(D3e,{className:an("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));D9.displayName=k9.displayName;const F3e=()=>{const t=Zt(e=>e.settings);return x.jsxs("div",{className:"flex flex-col gap-4 p-2",children:[x.jsx(An,{className:"font-bold",children:"Settings"}),x.jsxs("div",{className:"flex flex-col gap-y-2",children:[x.jsx("div",{className:"flex flex-row items-center justify-between"}),x.jsxs("div",{className:"flex flex-row items-center justify-between",children:[x.jsx(An,{className:"font-light text-sm",children:"Region Border"}),x.jsx(D9,{checked:t.region,onCheckedChange:e=>Zt.setState(n=>({settings:{...n.settings,region:e}}))})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsxs(xp,{type:"single",value:t.baseMap,className:"grid grid-cols-2",onValueChange:e=>Zt.setState(n=>({settings:{...n.settings,baseMap:e||"default"}})),children:[x.jsx(Bp,{label:"Default",value:"default",icon:x.jsx(IV,{className:"stroke-1"})}),x.jsx(Bp,{label:"Satellite",value:"satellite",icon:x.jsx(OV,{className:"stroke-1"})})]}),x.jsxs(An,{className:"flex flex-row justify-end gap-1 font-extralight text-xs",children:[x.jsx("span",{children:""}),x.jsx("a",{href:"http://www.openstreetmap.org/copyright",children:"OpenStreetMap"}),x.jsx("span",{children:""}),x.jsx("a",{href:"https://maplibre.org/",children:"MapLibre"}),x.jsx("span",{children:""}),t.baseMap==="default"?x.jsx("a",{href:"https://carto.com/attributions",children:"CARTO"}):x.jsx("a",{href:"https://arcgis.com/",children:"ESRI"})]})]})]})]})},B3e="/assets/satellite-imagery-B0V8DBhM.png",L3e=nE("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium text-sm ring-offset-background transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F9=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?vf:"button";return x.jsx(o,{className:an(L3e({variant:e,size:n,className:t})),ref:s,...i})});F9.displayName="Button";const B9=()=>x.jsxs("div",{className:"prose",children:[x.jsx("p",{children:"This project offers a game-changing map that helps businesses and governments understand society better. With advanced technology, we provide detailed insights into consumer behavior and pinpoint areas where tackling poverty and shaping a brighter future for everyone is most crucial. Businesses can leverage this data to find new customers and refine their strategies, while governments can make smarter decisions to alleviate poverty and plan for the future. It's not just a mapit's your pathway to success and making a meaningful impact where it's needed most."}),x.jsx("p",{children:"We integrate multisource remote sensing satellite imagery and other geospatial big data by implementing artificial intelligence-machine learning and statistical analysis to develop more granular socioeconomic data in terms of coverage and time at a cheaper cost and faster rate."}),x.jsx("img",{className:"m-auto max-w-xs",src:B3e,alt:"Satellite Imagery"}),x.jsx("p",{children:"The analysis of Non-Food and Food Expenditure across seven zones shows that lighter colors indicate smaller zones with higher spending, while darker colors represent larger zones with lower spending. This means that in smaller zones, people spend more on both food and non-food items."}),x.jsxs("div",{children:[x.jsx("div",{className:"grid max-h-4 w-full grid-cols-7 overflow-hidden",children:Object.keys(Sp).map(t=>x.jsx("div",{className:"flex aspect-square",style:{backgroundColor:`rgb(${Sp[t]})`}},t))}),x.jsxs("div",{className:"flex items-center justify-between gap-2 px-1 py-1",children:[x.jsx(An,{className:"font-bold text-xs",children:"Zona 1"}),x.jsx("div",{className:"relative flex flex-1 items-center justify-center",children:x.jsx("div",{className:"absolute w-full border-foreground/50 border-b border-dashed"})}),x.jsx(An,{className:"font-bold text-xs",children:"Zona 7"})]})]}),x.jsx("p",{children:"We found that consumer behavior according to socioeconomic conditions can be clustered into four groups:"}),x.jsxs("ul",{className:"list-none",children:[x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${Gs["Cluster 1"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 1"})]}),x.jsx("p",{children:"NonFood Expenditure > Food Expenditure"}),x.jsx("p",{children:"Well-Fulfilled Education, Health, and Economic Needs"})]}),x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${Gs["Cluster 2"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 2"})]}),x.jsx("p",{children:"NonFood Expenditure > Food Expenditure"}),x.jsx("p",{children:"Relatively Fulfilled Education, Health, and Economic Needs"})]}),x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${Gs["Cluster 3"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 3"})]}),x.jsx("p",{children:"Food Expenditure > NonFood Expenditure"}),x.jsx("p",{children:"Relatively Fulfilled Education, Health, and Economic Needs"})]}),x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${Gs["Cluster 4"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 4"})]}),x.jsx("p",{children:"Food Expenditure > NonFood Expenditure"}),x.jsx("p",{children:"Relatively Underfulfilled Education, Health, and Economic Needs"})]})]}),x.jsx("p",{children:"Then, according to its geographical factors can be clustered into three groups:"}),x.jsxs("ul",{className:"list-none",children:[x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${ya["Cluster 1"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 1"})]}),x.jsx("p",{children:"NonFood Expenditure > Food Expenditure"}),x.jsx("p",{children:"Highest urbanization and pollution"}),x.jsx("p",{children:"Lowest vegetation"})]}),x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${ya["Cluster 2"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 2"})]}),x.jsx("p",{children:"NonFood Expenditure > Food Expenditure"}),x.jsx("p",{children:"Higher vegetation"}),x.jsx("p",{children:"Lower urbanization and pollution"})]}),x.jsxs("li",{className:"text-sm",children:[x.jsxs("div",{className:"flex flex-row items-center gap-2",children:[x.jsx("div",{className:"size-4",style:{backgroundColor:`rgb(${ya["Cluster 3"]})`}}),x.jsx("span",{className:"font-bold",children:"Cluster 3"})]}),x.jsx("p",{children:"Food Expenditure > NonFood Expenditure"}),x.jsx("p",{children:"Higher vegetation"}),x.jsx("p",{children:"Lower urbanization and pollution"})]})]}),x.jsxs("p",{children:["for full explanation of our project, check on our ",x.jsx("a",{href:"https://github.com/jfrAziz/jabar.pages.dev",children:"GitHub"})]})]}),$3e=({open:t,onOpenChange:e})=>x.jsxs("div",{className:an("absolute top-0 right-0 z-[1000] hidden max-h-screen max-w-lg translate-x-full p-10 transition-all duration-200 ease-in-out md:flex",t&&"translate-x-0"),children:[x.jsx(F9,{size:"icon",onClick:()=>e&&e(!t),className:"absolute top-5 right-5 z-[10001] rounded-full",children:x.jsx(kV,{})}),x.jsx("div",{className:"relative overflow-auto rounded-sm bg-white p-4 shadow-md",children:x.jsx(B9,{})})]}),V6=()=>{const t=Zt(e=>e.active);return x.jsxs("div",{className:"flex flex-col gap-y-2",children:[x.jsxs(tle,{defaultValue:"grid",value:t.analysis,onValueChange:e=>Zt.getState().changeActiveAnalysis(e),children:[x.jsx(SF,{className:"grid w-full grid-cols-2",children:x.jsx(xF,{value:"grid",children:"Grid"})}),x.jsx(ZS,{value:"grid",children:x.jsxs("div",{className:"space-y-2 px-2",children:[x.jsx(M9,{}),x.jsx(E3e,{}),x.jsx(A3e,{})]})}),x.jsx(ZS,{value:"cluster",children:x.jsxs("div",{className:"space-y-2 px-2",children:[x.jsx(R9,{}),x.jsx(a3e,{}),x.jsx(o3e,{})]})})]}),x.jsx(F3e,{})]})},U3e=w.forwardRef((t,e)=>{const n=Zt(r=>r.active);return x.jsxs("div",{ref:e,className:"absolute bottom-5 left-0 z-[1000] w-full p-2",children:[n.analysis==="grid"&&x.jsx(M9,{className:"m-auto max-w-xs flex-1 overflow-hidden rounded-sm rounded-t-sm bg-white"}),n.analysis==="cluster"&&x.jsx(R9,{className:"m-auto max-w-xs flex-1 overflow-hidden rounded-sm rounded-t-sm bg-white"})]})}),z3e=()=>{const[t,e]=w.useState(!1),n=()=>e(!t),r=$se();return r?x.jsxs("div",{children:[x.jsx($3e,{open:r&&t,onOpenChange:n}),x.jsx("div",{className:"absolute left-0 z-[1000] flex h-full w-96 flex-col gap-y-2 p-10",children:x.jsx("div",{className:"max-h-full w-full overflow-auto",children:x.jsx("div",{className:"w-full rounded-sm border bg-white shadow-sm",children:x.jsx(V6,{})})})})]}):x.jsxs(cF,{shouldScaleBackground:!0,children:[x.jsx(NI,{children:x.jsx(U3e,{})}),x.jsx(KS,{children:x.jsxs("div",{className:"m-auto flex max-w-sm flex-col gap-y-2",children:[x.jsx(V6,{}),x.jsxs(Cae,{children:[x.jsx(NI,{asChild:!0}),x.jsx(KS,{children:x.jsx("div",{className:"m-auto max-w-sm",children:x.jsx(B9,{})})})]})]})})]})},j3e=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,V3e=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * opacity * vColor.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,W3e=1024,H3e=4,W6=()=>{},H6={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},X3e={x:0,y:0,width:0,height:0};function Y3e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function K3e(t,e,n,r){const i=Math.min(n/e.width,r/e.height),s=Math.floor(e.width*i),o=Math.floor(e.height*i);return i===1?{data:e,width:s,height:o}:(t.canvas.height=o,t.canvas.width=s,t.clearRect(0,0,s,o),t.drawImage(e,0,0,e.width,e.height,0,0,s,o),{data:t.canvas,width:s,height:o})}function Lp(t){return t&&(t.id||t.url)}function q3e(t,e,n,r){const{width:i,height:s,device:o}=t,a=o.createTexture({format:"rgba8unorm",width:e,height:n,sampler:r}),l=o.createCommandEncoder();return l.copyTextureToTexture({source:t,destination:a,width:i,height:s}),l.finish(),t.destroy(),a}function X6(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=Lp(i);t[o]={...i,x:s,y:n}}}function Z3e({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const c=t[l],u=Lp(c);if(!n[u]){const{height:f,width:d}=c;r+d+e>o&&(X6(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:c,xOffset:r}),r=r+d+e,s=Math.max(s,f)}}return a.length>0&&X6(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:Y3e(s+i+e)}}function Q3e(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=$v(t);for(const o of i){s.index++;const a=e(o,s),l=Lp(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]={...a,source:o,sourceIndex:s.index})}return r}class G3e{constructor(e,{onUpdate:n=W6,onError:r=W6}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=H3e,this._canvasWidth=W3e,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)==null||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Lp(e):e;return this._mapping[n]||X3e}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){var o;e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r&&((o=this._texture)==null||o.delete(),this._texture=null,this._externalTexture=r),s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(Q3e(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:l}=Z3e({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=l,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||H6})),this._texture.height!==this._canvasHeight&&(this._texture=q3e(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||H6)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,t0(r.url,this._loadOptions).then(i=>{const s=Lp(r),o=this._mapping[s],{x:a,y:l,width:c,height:u}=o,{data:f,width:d,height:h}=K3e(n,i,c,u);this._texture.setSubImageData({data:f,x:a+(c-d)/2,y:l+(u-h)/2,width:d,height:h}),o.width=d,o.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const L9=[0,0,0,255],J3e={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:L9},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}},Jy=class Jy extends ao{getShaders(){return super.getShaders({vs:j3e,fs:V3e,modules:[zf,jf]})}initializeState(){this.state={iconManager:new G3e(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:L9},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){var h;super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c,textureParameters:u}=n,{iconManager:f}=this.state;if(typeof o=="string")return;const d=o||this.internalState.isAsyncPropLoading("iconAtlas");f.setProps({loadOptions:n.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?a:null,textureParameters:u}),d?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,c),i.extensionsChanged&&((h=this.state.model)==null||h.destroy(),this.state.model=this._getModel(),s.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();if(c){const u=this.state.model;u.setBindings({iconsTexture:c}),u.setUniforms(e),u.setUniforms({iconsTextureDim:[c.width,c.height],sizeUnits:ws[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:a}),u.draw(this.context.renderPass)}}_getModel(){const e=[-1,-1,1,-1,-1,1,1,1];return new Dr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Ta({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var r;const n=(r=this.getCurrentLayer())==null?void 0:r.props.onIconError;n?n(e):qe.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}};Jy.defaultProps=J3e,Jy.layerName="IconLayer";let J0=Jy;const exe=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
radiusMinPixels, radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
lineWidthMinPixels, lineWidthMaxPixels
);
outerRadiusPixels += stroked * lineWidthPixels / 2.0;
float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
if (billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,txe=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
uniform bool filled;
uniform float stroked;
uniform bool antialiasing;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (stroked > 0.5) {
float isLine = antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (filled) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (!filled) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Y6=[0,0,0,255],nxe={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Y6},getLineColor:{type:"accessor",value:Y6},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},ev=class ev extends ao{getShaders(){return super.getShaders({vs:exe,fs:txe,modules:[zf,jf]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}=this.props,p=this.state.model;p.setUniforms(e),p.setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:ws[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:ws[u],lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}),p.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Dr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Ta({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}};ev.defaultProps=nxe,ev.layerName="ScatterplotLayer";let R3=ev;const qE={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function ZE(t,e,n={}){return rxe(t,n)!==e?(sxe(t,n),!0):!1}function rxe(t,e={}){return Math.sign(ixe(t,e))}const K6={x:0,y:1,z:2};function ixe(t,e={}){const{start:n=0,end:r=t.length,plane:i="xy"}=e,s=e.size||2;let o=0;const a=K6[i[0]],l=K6[i[1]];for(let c=n,u=r-s;c<r;c+=s)o+=(t[c+a]-t[u+a])*(t[c+l]+t[u+l]),u=c;return o/2}function sxe(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const f=t[l+u];t[l+u]=t[c+u],t[c+u]=f}}}function Pi(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function P3(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function $p(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function I3(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function pm(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function $9(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],f=$p(t,0,n,o);let d,h;const p=z9(f,i,s,[]),g=[];Pi(c,f);for(let v=1;v<l;v++){for(d=$p(t,v,n,o,d),h=pm(d,p);h;){I3(f,d,h,p,g);const _=pm(g,p);_&&(I3(f,g,_,p,g),h=_),Pi(c,g),P3(f,g),axe(p,i,h),r&&c.length>n&&(c=[],u.push(c),Pi(c,f)),h=pm(d,p)}Pi(c,d),P3(f,d)}return r?u:u[0]}const q6=0,oxe=1;function U9(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(oxe):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:f,types:d,holes:h}=l.shift();lxe(f,r,h[0]||f.length,c),u=z9(c[0],i,s,u);const p=pm(c[1],u);if(p){let g=Z6(f,d,r,0,h[0]||f.length,u,p);const v={pos:g[0].pos,types:g[0].types,holes:[]},_={pos:g[1].pos,types:g[1].types,holes:[]};l.push(v,_);for(let m=0;m<h.length;m++)g=Z6(f,d,r,h[m],h[m+1]||f.length,u,p),g[0]&&(v.holes.push(v.pos.length),v.pos=N_(v.pos,g[0].pos),o&&(v.types=N_(v.types,g[0].types))),g[1]&&(_.holes.push(_.pos.length),_.pos=N_(_.pos,g[1].pos),o&&(_.types=N_(_.types,g[1].types)))}else{const g={positions:f};o&&(g.edgeTypes=d),h.length&&(g.holeIndices=h),a.push(g)}}return a}function Z6(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],f=[],d=[];let h,p,g;const v=$p(t,a-1,n,r);let _=Math.sign(o&8?v[1]-s[3]:v[0]-s[2]),m=e&&e[a-1],y=0,b=0;for(let S=0;S<a;S++)h=$p(t,S,n,r,h),p=Math.sign(o&8?h[1]-s[3]:h[0]-s[2]),g=e&&e[r/n+S],p&&_&&_!==p&&(I3(v,h,o,s,d),Pi(l,d)&&u.push(m),Pi(c,d)&&f.push(m)),p<=0?(Pi(l,h)&&u.push(g),y-=p):u.length&&(u[u.length-1]=q6),p>=0?(Pi(c,h)&&f.push(g),b+=p):f.length&&(f[f.length-1]=q6),P3(v,h),_=p,m=g;return[y?{pos:l,types:e&&u}:null,b?{pos:c,types:e&&f}:null]}function z9(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function axe(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function lxe(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}function N_(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}const cxe=85.051129;function uxe(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);j9(o,n,0,i-r);const a=$9(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)V9(l,n);return a}function fxe(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let f=0;f<=e.length;f++){const d=e[f]||t.length,h=c,p=dxe(t,r,l,d);for(let g=p;g<d;g++)o[c++]=t[g];for(let g=l;g<p;g++)o[c++]=t[g];j9(o,r,h,c),hxe(o,r,h,c,n==null?void 0:n.maxLatitude),l=d,a[f]=c}a.pop();const u=U9(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const f of u)V9(f.positions,r);return u}function dxe(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function hxe(t,e,n,r,i=cxe){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=$p(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,Pi(t,a),a[1]=Math.sign(a[1])*i,Pi(t,a),a[0]=s,Pi(t,a)}}function j9(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function V9(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}class pxe extends Ta{constructor(e){const{indices:n,attributes:r}=gxe(e);super({...e,indices:n,attributes:r})}}function gxe(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&(qe.assert(i.length>=r),i=i.flatMap(h=>[h[0],h[1]]),ZE(i,qE.COUNTER_CLOCKWISE));const s=n>0,o=r+1,a=s?o*3+1:r,l=Math.PI*2/r,c=new Uint16Array(s?r*3*2:0),u=new Float32Array(a*3),f=new Float32Array(a*3);let d=0;if(s){for(let h=0;h<o;h++){const p=h*l,g=h%r,v=Math.sin(p),_=Math.cos(p);for(let m=0;m<2;m++)u[d+0]=i?i[g*2]:_*e,u[d+1]=i?i[g*2+1]:v*e,u[d+2]=(1/2-m)*n,f[d+0]=i?i[g*2]:_,f[d+1]=i?i[g*2+1]:v,d+=3}u[d+0]=u[d-3],u[d+1]=u[d-2],u[d+2]=u[d-1],d+=3}for(let h=s?0:1;h<o;h++){const p=Math.floor(h/2)*Math.sign(.5-h%2),g=p*l,v=(p+r)%r,_=Math.sin(g),m=Math.cos(g);u[d+0]=i?i[v*2]:m*e,u[d+1]=i?i[v*2+1]:_*e,u[d+2]=n/2,f[d+2]=1,d+=3}if(s){let h=0;for(let p=0;p<r;p++)c[h++]=p*2+0,c[h++]=p*2+2,c[h++]=p*2+0,c[h++]=p*2+1,c[h++]=p*2+1,c[h++]=p*2+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:f}}}}const _xe=`#version 300 es
#define SHADER_NAME column-layer-vertex-shader
in vec3 positions;
in vec3 normals;
in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif
void main(void) {
geometry.worldPosition = instancePositions;
vec4 color = isStroke ? instanceLineColors : instanceFillColors;
mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
float elevation = 0.0;
float strokeOffsetRatio = 1.0;
if (extruded) {
elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
} else if (stroked) {
float widthPixels = clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0;
float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
if (isStroke) {
strokeOffsetRatio -= sign(positions.z) * halfOffset;
} else {
strokeOffsetRatio -= halfOffset;
}
}
float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
float dotRadius = radius * coverage * shouldRender;
geometry.pickingColor = instancePickingColors;
vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
vec3 centroidPosition64Low = instancePositions64Low;
vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
if (radiusUnits == UNIT_METERS) {
offset = project_size(offset);
}
vec3 pos = vec3(offset, 0.);
DECKGL_FILTER_SIZE(pos, geometry);
gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded && !isStroke) {
#ifdef FLAT_SHADING
position_commonspace = geometry.position;
vColor = vec4(color.rgb, color.a * opacity);
#else
vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, color.a * opacity);
#endif
} else {
vColor = vec4(color.rgb, color.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,mxe=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader
precision highp float;
uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;
out vec4 fragColor;
in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
#ifdef FLAT_SHADING
if (extruded && !isStroke && !bool(picking.isActive)) {
vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
}
#endif
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,ey=[0,0,0,255],yxe={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,flatShading:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:ey},getLineColor:{type:"accessor",value:ey},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},tv=class tv extends ao{getShaders(){const e={},{flatShading:n}=this.props;return n&&(e.FLAT_SHADING=1),super.getShaders({vs:_xe,fs:mxe,defines:e,modules:[zf,n?Jq:G5,jf]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getFillColor",defaultValue:ey},instanceLineColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getLineColor",defaultValue:ey},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){var a;super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=i.extensionsChanged||n.flatShading!==r.flatShading;s&&((a=this.state.models)==null||a.forEach(l=>l.destroy()),this.setState(this._getModels()),this.getAttributeManager().invalidateAll());const o=this.getNumInstances();this.state.fillModel.setInstanceCount(o),this.state.wireframeModel.setInstanceCount(o),(s||n.diskResolution!==r.diskResolution||n.vertices!==r.vertices||(n.extruded||n.stroked)!==(r.extruded||r.stroked))&&this._updateGeometry(n)}getGeometry(e,n,r){const i=new pxe({radius:1,height:r?2:0,vertices:n,nradial:e});let s=0;if(n)for(let o=0;o<e;o++){const a=n[o],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);s+=l/e}else s=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*s}),i}_getModels(){const e=this.getShaders(),n=this.getAttributeManager().getBufferLayouts(),r=new Dr(this.context.device,{...e,id:`${this.props.id}-fill`,bufferLayout:n,isInstanced:!0}),i=new Dr(this.context.device,{...e,id:`${this.props.id}-wireframe`,bufferLayout:n,isInstanced:!0});return{fillModel:r,wireframeModel:i,models:[i,r]}}_updateGeometry({diskResolution:e,vertices:n,extruded:r,stroked:i}){const s=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:s.attributes.POSITION.value.length/3});const o=this.state.fillModel,a=this.state.wireframeModel;o.setGeometry(s),o.setTopology("triangle-strip"),o.setIndexBuffer(null),a.setGeometry(s),a.setTopology("line-list")}draw({uniforms:e}){const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:s,radiusUnits:o,elevationScale:a,extruded:l,filled:c,stroked:u,wireframe:f,offset:d,coverage:h,radius:p,angle:g}=this.props,v=this.state.fillModel,_=this.state.wireframeModel,{fillVertexCount:m,edgeDistance:y}=this.state,b={...e,radius:p,angle:g/180*Math.PI,offset:d,extruded:l,stroked:u,coverage:h,elevationScale:a,edgeDistance:y,radiusUnits:ws[o],widthUnits:ws[n],widthScale:r,widthMinPixels:i,widthMaxPixels:s};l&&f&&(_.setUniforms(b),_.setUniforms({isStroke:!0}),_.draw(this.context.renderPass)),v.setUniforms(b),c&&(v.setVertexCount(m),v.setUniforms({isStroke:!1}),v.draw(this.context.renderPass)),!l&&u&&(v.setVertexCount(m*2/3),v.setUniforms({isStroke:!0}),v.draw(this.context.renderPass))}};tv.layerName="ColumnLayer",tv.defaultProps=yxe;let M3=tv;const vxe={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}},nv=class nv extends M3{_updateGeometry(){const e=new TQ;this.state.fillModel.setGeometry(e)}draw({uniforms:e}){const{elevationScale:n,extruded:r,offset:i,coverage:s,cellSize:o,angle:a,radiusUnits:l}=this.props,c=this.state.fillModel;c.setUniforms(e),c.setUniforms({radius:o/2,radiusUnits:ws[l],angle:a,offset:i,extruded:r,coverage:s,elevationScale:n,edgeDistance:1,isStroke:!1}),c.draw(this.context.renderPass)}};nv.layerName="GridCellLayer",nv.defaultProps=vxe;let O3=nv;function bxe(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?$9(i,{size:e,gridResolution:n}):r?uxe(i,{size:e}):i}const wxe=1,Sxe=2,Ww=4;class xxe extends Hk{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?bxe(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(Q6(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&Q6(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=Ww,r[s+o-2]=Ww):(r[s]+=wxe,r[s+o-2]+=Sxe),r[s+o-1]=Ww}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function Q6(t){return Array.isArray(t[0])}const Txe=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = capType;
} else {
vJointType = jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0);
vec3 width;
if (billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Exe=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
uniform float miterLimit;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,W9=[0,0,0,255],Axe={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:W9},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Hw={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},rv=class rv extends ao{getShaders(){return super.getShaders({vs:Txe,fs:Exe,modules:[zf,jf]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Hw,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Hw,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Hw,defaultValue:W9},instancePickingColors:{size:4,type:"uint8",accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new xxe({fp64:this.use64bitPositions()})})}updateState(e){var o;super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}r.extensionsChanged&&((o=this.state.model)==null||o.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,i=this.props.data;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const n=this.props.data;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props,u=this.state.model;u.setUniforms(e),u.setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:ws[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}),u.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Dr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Ta({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}};rv.defaultProps=Axe,rv.layerName="PathLayer";let N3=rv;var QE={exports:{}};QE.exports=K1;QE.exports.default=K1;function K1(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=H9(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,f,d,h;if(r&&(s=Mxe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var p=n;p<i;p+=n)f=t[p],d=t[p+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return Up(s,o,n,a,l,h,0),o}function H9(t,e,n,r,i){var s,o;if(i===F3(t,e,n,r)>0)for(s=e;s<n;s+=r)o=G6(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=G6(s,t[s],t[s+1],o);return o&&q1(o,o.next)&&(jp(o),o=o.next),o}function ql(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(q1(n,n.next)||jt(n.prev,n,n.next)===0)){if(jp(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Up(t,e,n,r,i,s,o){if(t){!o&&s&&Fxe(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Rxe(t,r,i,s):Cxe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),jp(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Pxe(ql(t),e,n),Up(t,e,n,r,i,s,2)):o===2&&Ixe(t,e,n,r,i,s):Up(ql(t),e,n,r,i,s,1);break}}}}function Cxe(t){var e=t.prev,n=t,r=t.next;if(jt(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=f&&p.y<=h&&pu(i,a,s,l,o,c,p.x,p.y)&&jt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Rxe(t,e,n,r){var i=t.prev,s=t,o=t.next;if(jt(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,d=o.y,h=a<l?a<c?a:c:l<c?l:c,p=u<f?u<d?u:d:f<d?f:d,g=a>l?a>c?a:c:l>c?l:c,v=u>f?u>d?u:d:f>d?f:d,_=k3(h,p,e,n,r),m=k3(g,v,e,n,r),y=t.prevZ,b=t.nextZ;y&&y.z>=_&&b&&b.z<=m;){if(y.x>=h&&y.x<=g&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&pu(a,u,l,f,c,d,y.x,y.y)&&jt(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=h&&b.x<=g&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&pu(a,u,l,f,c,d,b.x,b.y)&&jt(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=_;){if(y.x>=h&&y.x<=g&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&pu(a,u,l,f,c,d,y.x,y.y)&&jt(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=m;){if(b.x>=h&&b.x<=g&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&pu(a,u,l,f,c,d,b.x,b.y)&&jt(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Pxe(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!q1(i,s)&&X9(i,r,r.next,s)&&zp(i,s)&&zp(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),jp(r),jp(r.next),r=t=s),r=r.next}while(r!==t);return ql(r)}function Ixe(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&$xe(o,a)){var l=Y9(o,a);o=ql(o,o.next),l=ql(l,l.next),Up(o,e,n,r,i,s,0),Up(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Mxe(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=H9(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Lxe(c));for(i.sort(Oxe),s=0;s<i.length;s++)n=Nxe(i[s],n);return n}function Oxe(t,e){return t.x-e.x}function Nxe(t,e){var n=kxe(t,e);if(!n)return e;var r=Y9(n,t);return ql(r,r.next),ql(n,n.next)}function kxe(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,f=1/0,d;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&pu(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),zp(n,t)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&Dxe(o,n)))&&(o=n,f=d)),n=n.next;while(n!==l);return o}function Dxe(t,e){return jt(t.prev,t,e.prev)<0&&jt(e.next,t,t.next)<0}function Fxe(t,e,n,r){var i=t;do i.z===0&&(i.z=k3(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Bxe(i)}function Bxe(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function k3(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Lxe(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function pu(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function $xe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Uxe(t,e)&&(zp(t,e)&&zp(e,t)&&zxe(t,e)&&(jt(t.prev,t,e.prev)||jt(t,e.prev,e))||q1(t,e)&&jt(t.prev,t,t.next)>0&&jt(e.prev,e,e.next)>0)}function jt(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function q1(t,e){return t.x===e.x&&t.y===e.y}function X9(t,e,n,r){var i=D_(jt(t,e,n)),s=D_(jt(t,e,r)),o=D_(jt(n,r,t)),a=D_(jt(n,r,e));return!!(i!==s&&o!==a||i===0&&k_(t,n,e)||s===0&&k_(t,r,e)||o===0&&k_(n,t,r)||a===0&&k_(n,e,r))}function k_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function D_(t){return t>0?1:t<0?-1:0}function Uxe(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&X9(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function zp(t,e){return jt(t.prev,t,t.next)<0?jt(t,e,t.next)>=0&&jt(t,t.prev,e)>=0:jt(t,e,t.prev)<0||jt(t,t.next,e)<0}function zxe(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Y9(t,e){var n=new D3(t.i,t.x,t.y),r=new D3(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function G6(t,e,n,r){var i=new D3(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function D3(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}K1.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(F3(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(F3(t,c,u,n))}var f=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,h=r[a+1]*n,p=r[a+2]*n;f+=Math.abs((t[d]-t[p])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[p+1]-t[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function F3(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}K1.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var jxe=QE.exports;const Vxe=Un(jxe),F_=qE.CLOCKWISE,J6=qE.COUNTER_CLOCKWISE,aa={isClosed:!0};function Wxe(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function ch(t){return"positions"in t?t.positions:t}function gm(t){return"holeIndices"in t?t.holeIndices:null}function Hxe(t){return Array.isArray(t[0])}function Xxe(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Yxe(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Kxe(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function eM(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!Yxe(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return aa.start=e,aa.end=s,aa.size=r,ZE(t,i,aa),s}function tM(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!Kxe(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return aa.start=e,aa.end=l,aa.size=r,ZE(t,o,aa),l}function qxe(t,e){Wxe(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=tM(n,o,i,e,s[a-1],s[a],a===0?F_:J6),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!Hxe(t))return tM(n,0,t,e,0,n.length,F_),n;if(!Xxe(t)){let i=0;for(const[s,o]of t.entries())i=eM(n,i,o,e,s===0?F_:J6),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return eM(n,0,t,e,F_),n}function Xw(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function nM(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function Zxe(t,e,n,r){let i=gm(t);i&&(i=i.map(a=>a/e));let s=ch(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=Xw(s,0,1),l=Xw(s,0,2),c=Xw(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),nM(s,0,2,1)):(n||(s=s.slice()),nM(s,2,0,1)))}return Vxe(s,i,e)}class Qxe extends Hk{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=qxe(e,this.positionSize);return this.opts.resolution?U9(ch(n),gm(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?fxe(ch(n),gm(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(rM(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return ch(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&rM(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else{const r=e;this._updateIndices(r,n),this._updatePositions(r,n),this._updateVertexValid(r,n)}}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=Zxe(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let f=0;f<u.length;f++)l[c++]=u[f]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=ch(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],f=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&gm(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function rM(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const K9=`uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;
in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project_uCommonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (extruded) {
pos.z += props.elevations * elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * opacity);
} else {
vColor = vec4(colors.rgb, colors.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Gxe=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${K9}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,Jxe=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${K9}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,eTe=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,ty=[0,0,0,255],tTe={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:ty},getLineColor:{type:"accessor",value:ty},material:!0},B_={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},iv=class iv extends ao{getShaders(e){return super.getShaders({vs:e==="top"?Gxe:Jxe,fs:eTe,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[zf,G5,jf]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:r}=this.props;e.isGeospatial&&n===it.DEFAULT&&(n=it.LNGLAT);let i;n===it.LNGLAT&&(r?i=e.projectPosition.bind(e):i=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new Qxe({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const s=this.getAttributeManager(),o=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:B_,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:B_,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:B_,accessor:"getFillColor",defaultValue:ty},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:B_,accessor:"getLineColor",defaultValue:ty},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(a,{index:l,target:c})=>this.encodePickingColor(a&&a.__source?a.__source.index:l,c)}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,i=this.props.data;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const n=this.props.data;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,wireframeModel:l,polygonTesselator:c}=this.state,u={...e,extruded:!!n,elevationScale:s};l&&i&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(u),l.draw(this.context.renderPass)),a&&r&&(a.setInstanceCount(c.instanceCount-1),a.setUniforms(u),a.draw(this.context.renderPass)),o&&r&&(o.setVertexCount(c.vertexCount),o.setUniforms(u),o.draw(this.context.renderPass))}updateState(e){var a;super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded)&&((a=this.state.models)==null||a.forEach(l=>l.destroy()),this.setState(this._getModels()),s.invalidateAll())}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:n,extruded:r}=this.props;let i,s,o;if(n){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1;const l=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new Dr(this.context.device,{...a,id:`${e}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:l,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(r){const a=this.getAttributeManager().getBufferLayouts({isInstanced:!0});s=new Dr(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:a,uniforms:{isWireframe:!1},geometry:new Ta({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new Dr(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:a,uniforms:{isWireframe:!0},geometry:new Ta({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[s,o,i].filter(Boolean),topModel:i,sideModel:s,wireframeModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}};iv.defaultProps=tTe,iv.layerName="SolidPolygonLayer";let B3=iv;function nTe({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let d=0;d<o;d++){const h=e(t[d]);if(a>d&&h>=i&&(a=d),h>=s){l=d;break}}let c=a;const f=l-a!==r.length?t.slice(l):void 0;for(let d=0;d<r.length;d++)t[c++]=r[d];if(f){for(let d=0;d<f.length;d++)t[c++]=f[d];t.length=c}return{startRow:a,endRow:a+r.length}}function rTe(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?iTe(t,r,n):null}function iTe(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function sTe(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),n[r][o*3+0]=s[0],n[r][o*3+1]=s[1],n[r][o*3+2]=s[2]}return n}const oTe=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf) {
float distance = alpha;
alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);
if (outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
color = mix(outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Yw=192/256,iM=[],aTe={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},sv=class sv extends J0{getShaders(){return{...super.getShaders(),fs:oTe}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&qe.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state,o=i?Math.max(r,Yw*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:Yw,outlineBuffer:o,gamma:r,sdf:!!n,outlineColor:s},super.draw(e),n&&i){const{iconManager:a}=this.state,l=a.getTexture(),c=this.state.model;l&&(c.setUniforms({outlineBuffer:Yw}),c.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):iM}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):iM}};sv.defaultProps=aTe,sv.layerName="MultiIconLayer";let L3=sv;const $h=1e20;class lTe{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const l=this.size=e+n*4,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${s}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),l=0,c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-s))),u=Math.min(this.size-this.buffer,a+Math.ceil(i)),f=c+2*this.buffer,d=u+2*this.buffer,h=Math.max(f*d,0),p=new Uint8ClampedArray(h),g={data:p,width:f,height:d,glyphWidth:c,glyphHeight:u,glyphTop:a,glyphLeft:l,glyphAdvance:n};if(c===0||u===0)return g;const{ctx:v,buffer:_,gridInner:m,gridOuter:y}=this;v.clearRect(_,_,c,u),v.fillText(e,_,_+a);const b=v.getImageData(_,_,c,u);y.fill($h,0,h),m.fill(0,0,h);for(let S=0;S<u;S++)for(let A=0;A<c;A++){const I=b.data[4*(S*c+A)+3]/255;if(I===0)continue;const R=(S+_)*f+A+_;if(I===1)y[R]=0,m[R]=$h;else{const M=.5-I;y[R]=M>0?M*M:0,m[R]=M<0?M*M:0}}sM(y,0,0,f,d,f,this.f,this.v,this.z),sM(m,_,_,c,u,f,this.f,this.v,this.z);for(let S=0;S<h;S++){const A=Math.sqrt(y[S])-Math.sqrt(m[S]);p[S]=Math.round(255-255*(A/this.radius+this.cutoff))}return g}}function sM(t,e,n,r,i,s,o,a,l){for(let c=e;c<e+r;c++)oM(t,n*s+c,s,i,o,a,l);for(let c=n;c<n+i;c++)oM(t,c*s+e,1,r,o,a,l)}function oM(t,e,n,r,i,s,o){s[0]=0,o[0]=-$h,o[1]=$h,i[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){i[a]=t[e+a*n];const u=a*a;do{const f=s[l];c=(i[a]-i[f]+u-f*f)/(a-f)/2}while(c<=o[l]&&--l>-1);l++,s[l]=a,o[l]=c,o[l+1]=$h}for(let a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;const c=s[l],u=a-c;t[e+a*n]=i[c]+u*u}}const cTe=32,uTe=[];function fTe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function dTe({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o;const u=n+r*2;for(const f of t)if(!s[f]){const d=e(f);c+d+r*2>i&&(c=0,l++),s[f]={x:c+r,y:a+l*u+r,width:d,height:u,layoutWidth:d,layoutHeight:n},c+=d+r*2}return{mapping:s,xOffset:c,yOffset:a+l*u,canvasHeight:fTe(a+(l+1)*u)}}function q9(t,e,n,r){var s;let i=0;for(let o=e;o<n;o++){const a=t[o];i+=((s=r[a])==null?void 0:s.layoutWidth)||0}return i}function Z9(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const c=q9(t,l,l+1,i);a+c>r&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function hTe(t,e,n,r,i,s){let o=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if((t[u]===" "||t[u+1]===" "||u+1===n)&&(l=u+1),l>a){let f=q9(t,a,l,i);c+f>r&&(o<a&&(s.push(a),o=a,c=0),f>r&&(f=Z9(t,a,l,r,i,s),o=s[s.length-1])),a=l,c+=f}return c}function pTe(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?Z9(t,i,s,n,r,o):hTe(t,i,s,n,r,o),o}function gTe(t,e,n,r,i,s){let o=0,a=0;for(let l=e;l<n;l++){const c=t[l],u=r[c];u?(a||(a=u.layoutHeight),i[l]=o+u.layoutWidth/2,o+=u.layoutWidth):(qe.warn(`Missing character: ${c} (${c.codePointAt(0)})`)(),i[l]=o,o+=cTe)}s[0]=o,s[1]=a}function _Te(t,e,n,r,i){var v;const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,f=[0,0],d=[0,0];let h=0,p=0,g=0;for(let _=0;_<=o;_++){const m=s[_];if((m===`
`||_===o)&&(g=_),g>p){const y=u?pTe(s,n,r,i,p,g):uTe;for(let b=0;b<=y.length;b++){const S=b===0?p:y[b-1],A=b<y.length?y[b]:g;gTe(s,S,A,i,a,d);for(let I=S;I<A;I++){const R=s[I],M=((v=i[R])==null?void 0:v.layoutOffsetY)||0;l[I]=h+d[1]/2+M,c[I]=d[0]}h=h+d[1]*e,f[0]=Math.max(f[0],d[0])}p=g}m===`
`&&(a[p]=0,l[p]=0,c[p]=0,p++)}return f[1]=h,{x:a,y:l,rowWidth:c,size:f}}function mTe({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=r?r/o:0,c=i[e]||Math.ceil((t.length-l)/a),u=s&&new Set,f=new Array(e);let d=t;if(a>1||l>0){const h=t.constructor;d=new h(c);for(let p=0;p<c;p++)d[p]=t[p*a+l]}for(let h=0;h<e;h++){const p=i[h],g=i[h+1]||c,v=d.subarray(p,g);f[h]=String.fromCodePoint.apply(null,v),u&&v.forEach(u.add,u)}if(u)for(const h of u)s.add(String.fromCodePoint(h));return{texts:f,characterCount:c}}class Q9{constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function yTe(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const Fu={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:yTe(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},aM=1024,lM=.9,cM=1.2,G9=3;let ny=new Q9(G9);function vTe(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=ny.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function bTe(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function uM(t,e,n,r){t.font=`${r} ${n}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function wTe(t){qe.assert(Number.isFinite(t)&&t>=G9,"Invalid cache limit"),ny=new Q9(t)}class STe{constructor(){this.props={...Fu}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*cM+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=vTe(this._key,this.props.characterSet),r=ny.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,ny.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:o,sdf:a,radius:l,cutoff:c}=this.props;let u=n&&n.data;u||(u=document.createElement("canvas"),u.width=aM);const f=u.getContext("2d",{willReadFrequently:!0});uM(f,r,s,i);const{mapping:d,canvasHeight:h,xOffset:p,yOffset:g}=dTe({getFontWidth:v=>f.measureText(v).width,fontHeight:s*cM,buffer:o,characterSet:e,maxCanvasWidth:aM,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(u.height!==h){const v=f.getImageData(0,0,u.width,u.height);u.height=h,f.putImageData(v,0,0)}if(uM(f,r,s,i),a){const v=new lTe({fontSize:s,buffer:o,radius:l,cutoff:c,fontFamily:r,fontWeight:`${i}`});for(const _ of e){const{data:m,width:y,height:b,glyphTop:S}=v.draw(_);d[_].width=y,d[_].layoutOffsetY=s*lM-S;const A=f.createImageData(y,b);bTe(m,A),f.putImageData(A,d[_].x,d[_].y)}}else for(const v of e)f.fillText(v,d[v].x,d[v].y+o+s*lM);return{xOffset:p,yOffset:g,mapping:d,data:u,width:u.width,height:u.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:a}=this.props;return s?`${e} ${n} ${r} ${i} ${o} ${a}`:`${e} ${n} ${r} ${i}`}}const xTe=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,TTe=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
uniform bool stroked;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec2 pixelPosition = uv * dimensions;
if (stroked) {
float distToEdge = min(
min(pixelPosition.x, dimensions.x - pixelPosition.x),
min(pixelPosition.y, dimensions.y - pixelPosition.y)
);
float isBorder = smoothedge(distToEdge, vLineWidth);
fragColor = mix(vFillColor, vLineColor, isBorder);
} else {
fragColor = vFillColor;
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,ETe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},ov=class ov extends ao{getShaders(){return super.getShaders({vs:xTe,fs:TTe,modules:[zf,jf]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var r;super.updateState(e);const{changeFlags:n}=e;n.extensionsChanged&&((r=this.state.model)==null||r.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]);const c=this.state.model;c.setUniforms(e),c.setUniforms({billboard:n,stroked:!!a,padding:l,sizeUnits:ws[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:o}),c.draw(this.context.renderPass)}_getModel(){const e=[0,0,1,0,1,1,0,1];return new Dr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Ta({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}};ov.defaultProps=ETe,ov.layerName="TextBackgroundLayer";let $3=ov;const fM={start:1,middle:0,end:-1},dM={top:1,center:0,bottom:-1},Kw=[0,0,0,255],ATe=1,CTe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Kw},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Fu.characterSet},fontFamily:Fu.fontFamily,fontWeight:Fu.fontWeight,lineHeight:ATe,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Kw},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Kw},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},av=class av extends b0{constructor(){super(...arguments),this.getBoundingRect=(e,n)=>{let{size:[r,i]}=this.transformParagraph(e,n);const{fontSize:s}=this.state.fontAtlasManager.props;r/=s,i/=s;const{getTextAnchor:o,getAlignmentBaseline:a}=this.props,l=fM[typeof o=="function"?o(e,n):o],c=dM[typeof a=="function"?a(e,n):a];return[(l-1)*r/2,(c-1)*i/2,r,i]},this.getIconOffsets=(e,n)=>{const{getTextAnchor:r,getAlignmentBaseline:i}=this.props,{x:s,y:o,rowWidth:a,size:[l,c]}=this.transformParagraph(e,n),u=fM[typeof r=="function"?r(e,n):r],f=dM[typeof i=="function"?i(e,n):i],d=s.length,h=new Array(d*2);let p=0;for(let g=0;g<d;g++){const v=(1-u)*(l-a[g])/2;h[p++]=(u-1)*l/2+v+s[g],h[p++]=(f-1)*c/2+o[g]}return h}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new STe},this.props.maxWidth>0&&qe.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(o),!0;for(const a in o)if(o[a]!==i.props[a])return i.setProps(o),!0;return!1}_updateText(){var l;const{data:e,characterSet:n}=this.props,r=(l=e.attributes)==null?void 0:l.getText;let{getText:i}=this.props,s=e.startIndices,o;const a=n==="auto"&&new Set;if(r&&s){const{texts:c,characterCount:u}=mTe({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:s,characterSet:a});o=u,i=(f,{index:d})=>c[d]}else{const{iterable:c,objectInfo:u}=$v(e);s=[0],o=0;for(const f of c){u.index++;const d=Array.from(i(f,u)||"");a&&d.forEach(a.add,a),o+=d.length,s.push(o)}}this.setState({getText:i,startIndices:s,numInstances:o,characterSet:a||n})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,s=this.state.getText,{wordBreak:o,lineHeight:a,maxWidth:l}=this.props,c=s(e,n)||"";return _Te(c,a,o,l*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,atlas:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:p,getBackgroundColor:g,getBorderColor:v,getBorderWidth:_,backgroundPadding:m,background:y,billboard:b,fontSettings:S,outlineWidth:A,outlineColor:I,sizeScale:R,sizeUnits:M,sizeMinPixels:k,sizeMaxPixels:N,transitions:F,updateTriggers:D}=this.props,z=this.getSubLayerClass("characters",L3),Z=this.getSubLayerClass("background",$3);return[y&&new Z({getFillColor:g,getLineColor:v,getLineWidth:_,padding:m,getPosition:u,getSize:d,getAngle:h,getPixelOffset:p,billboard:b,sizeScale:R,sizeUnits:M,sizeMinPixels:k,sizeMaxPixels:N,transitions:F&&{getPosition:F.getPosition,getAngle:F.getAngle,getSize:F.getSize,getFillColor:F.getBackgroundColor,getLineColor:F.getBorderColor,getLineWidth:F.getBorderWidth,getPixelOffset:F.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:D.getPosition,getAngle:D.getAngle,getSize:D.getSize,getFillColor:D.getBackgroundColor,getLineColor:D.getBorderColor,getLineWidth:D.getBorderWidth,getPixelOffset:D.getPixelOffset,getBoundingRect:{getText:D.getText,getTextAnchor:D.getTextAnchor,getAlignmentBaseline:D.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new z({sdf:S.sdf,smoothing:Number.isFinite(S.smoothing)?S.smoothing:Fu.smoothing,outlineWidth:A/(S.radius||Fu.radius),outlineColor:I,iconAtlas:s,iconMapping:o,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:p,billboard:b,sizeScale:R*i,sizeUnits:M,sizeMinPixels:k*i,sizeMaxPixels:N*i,transitions:F&&{getPosition:F.getPosition,getAngle:F.getAngle,getColor:F.getColor,getSize:F.getSize,getPixelOffset:F.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:D.getText,getPosition:D.getPosition,getAngle:D.getAngle,getColor:D.getColor,getSize:D.getSize,getPixelOffset:D.getPixelOffset,getIconOffsets:{getTextAnchor:D.getTextAnchor,getAlignmentBaseline:D.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){wTe(e)}};av.defaultProps=CTe,av.layerName="TextLayer";let U3=av;const _m={circle:{type:R3,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:J0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:U3,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},mm={type:N3,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},z3={type:B3,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Vd({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function qw(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function RTe(t){if(Array.isArray(t))return t;switch(qe.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return qe.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function hM(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let o=i;o<s;o++){const a=t[o],{geometry:l}=a;if(l)if(l.type==="GeometryCollection"){qe.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:c}=l;for(let u=0;u<c.length;u++){const f=c[u];pM(f,r,e,a,o)}}else pM(l,r,e,a,o)}return r}function pM(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(!ITe(s,o)){qe.warn(`${s} coordinates are malformed`)();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach(f=>{l.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":c.push(n({geometry:t},r,i)),o.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":o.forEach(f=>{c.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(d=>{u.push(n({geometry:{type:"LineString",coordinates:d}},r,i))})});break}}const PTe={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function ITe(t,e){let n=PTe[t];for(qe.assert(n,`Unknown GeoJSON type ${t}`);e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function J9(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function L_(t){return t.geometry.coordinates}function MTe(t,e){const n=J9(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=L_,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=L_,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=L_,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=L_,n}function OTe(t,e){const n=J9(),{points:r,lines:i,polygons:s}=t,o=sTe(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const NTe=["points","linestrings","polygons"],kTe={...Vd(_m.circle),...Vd(_m.icon),...Vd(_m.text),...Vd(mm),...Vd(z3),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}},lv=class lv extends b0{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=OTe(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=RTe(e.data),i=this.getSubLayerRow.bind(this);let s={};const o={};if(Array.isArray(n.dataChanged)){const l=this.state.features;for(const c in l)s[c]=l[c].slice(),o[c]=[];for(const c of n.dataChanged){const u=hM(r,i,c);for(const f in l)o[f].push(nTe({data:s[f],getIndex:d=>d.__source.index,dataRange:c,replace:u[f]}))}}else s=hM(r,i);const a=MTe(s,o);this.setState({features:s,featuresDiff:o,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=NTe.find(s=>i.id.startsWith(`${this.id}-${s}-`)),r>=0&&i.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n=`${this.id}-points-`,r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){var o;const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,(o=r.polygons)==null?void 0:o.data)&&this.getSubLayerClass(i,z3.type);if(s){const a=qw(this,z3.props),l=e&&n;return l||delete a.getLineColor,a.updateTriggers.lineColors=l,new s(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),r.polygons)}return null}_renderLineLayers(){var l,c;const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",o=!e&&n&&this.shouldRenderSubLayer(i,(l=r.polygonsOutline)==null?void 0:l.data)&&this.getSubLayerClass(i,mm.type),a=this.shouldRenderSubLayer(s,(c=r.lines)==null?void 0:c.data)&&this.getSubLayerClass(s,mm.type);if(o||a){const u=qw(this,mm.props);return[o&&new o(u,this.getSubLayerProps({id:i,updateTriggers:u.updateTriggers}),r.polygonsOutline),a&&new a(u,this.getSubLayerProps({id:s,updateTriggers:u.updateTriggers}),r.lines)]}return null}_renderPointLayers(){var a;const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(l=>l.__source.index===i));const s=new Set(e.split("+")),o=[];for(const l of s){const c=`points-${l}`,u=_m[l],f=u&&this.shouldRenderSubLayer(c,(a=n.points)==null?void 0:a.data)&&this.getSubLayerClass(c,u.type);if(f){const d=qw(this,u.props);let h=n.points;if(l==="text"&&r){const{instancePickingColors:p,...g}=h.data.attributes;h={...h,data:{...h.data,attributes:g}}}o.push(new f(d,this.getSubLayerProps({id:c,updateTriggers:d.updateTriggers,highlightedObjectIndex:i}),h))}}return o}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:o}=i,a=rTe(s,o);return e(a,i)}}};lv.layerName="GeoJsonLayer",lv.defaultProps=kTe;let Pf=lv;var Tg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},If=typeof window>"u"||"Deno"in globalThis;function Yr(){}function DTe(t,e){return typeof t=="function"?t(e):t}function j3(t){return typeof t=="number"&&t>=0&&t!==1/0}function eL(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gM(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==GE(o,e.options))return!1}else if(!Wp(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function _M(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Vp(e.options.mutationKey)!==Vp(s))return!1}else if(!Wp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function GE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vp)(t)}function Vp(t){return JSON.stringify(t,(e,n)=>W3(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Wp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Wp(t[n],e[n])):!1}function tL(t,e){if(t===e)return t;const n=mM(t)&&mM(e);if(n||W3(t)&&W3(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=tL(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===o&&l===i?t:a}return e}function V3(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function mM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function W3(t){if(!yM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yM(t){return Object.prototype.toString.call(t)==="[object Object]"}function FTe(t){return new Promise(e=>{setTimeout(e,t)})}function H3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?tL(t,e):e}function BTe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function LTe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var nL=Symbol(),rL=(t,e)=>!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===nL?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn,yl,Ko,zu,QM,$Te=(QM=class extends Tg{constructor(){super();xe(this,yl,void 0);xe(this,Ko,void 0);xe(this,zu,void 0);ve(this,zu,e=>{if(!If&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){U(this,Ko)||this.setEventListener(U(this,zu))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Ko))==null||e.call(this),ve(this,Ko,void 0))}setEventListener(e){var n;ve(this,zu,e),(n=U(this,Ko))==null||n.call(this),ve(this,Ko,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){U(this,yl)!==e&&(ve(this,yl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof U(this,yl)=="boolean"?U(this,yl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yl=new WeakMap,Ko=new WeakMap,zu=new WeakMap,QM),JE=new $Te,ju,qo,Vu,GM,UTe=(GM=class extends Tg{constructor(){super();xe(this,ju,!0);xe(this,qo,void 0);xe(this,Vu,void 0);ve(this,Vu,e=>{if(!If&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,qo)||this.setEventListener(U(this,Vu))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,qo))==null||e.call(this),ve(this,qo,void 0))}setEventListener(e){var n;ve(this,Vu,e),(n=U(this,qo))==null||n.call(this),ve(this,qo,e(this.setOnline.bind(this)))}setOnline(e){U(this,ju)!==e&&(ve(this,ju,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return U(this,ju)}},ju=new WeakMap,qo=new WeakMap,Vu=new WeakMap,GM),ry=new UTe;function zTe(t){return Math.min(1e3*2**t,3e4)}function iL(t){return(t??"online")==="online"?ry.isOnline():!0}var sL=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zw(t){return t instanceof sL}function oL(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((_,m)=>{s=_,o=m}),l=_=>{var m;r||(p(new sL(_)),(m=t.abort)==null||m.call(t))},c=()=>{e=!0},u=()=>{e=!1},f=()=>JE.isFocused()&&(t.networkMode==="always"||ry.isOnline())&&t.canRun(),d=()=>iL(t.networkMode)&&t.canRun(),h=_=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,_),i==null||i(),s(_))},p=_=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,_),i==null||i(),o(_))},g=()=>new Promise(_=>{var m;i=y=>{(r||f())&&_(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var _;i=void 0,r||(_=t.onContinue)==null||_.call(t)}),v=()=>{if(r)return;let _;const m=n===0?t.initialPromise:void 0;try{_=m??t.fn()}catch(y){_=Promise.reject(y)}Promise.resolve(_).then(h).catch(y=>{var R;if(r)return;const b=t.retry??(If?0:3),S=t.retryDelay??zTe,A=typeof S=="function"?S(n,y):S,I=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!I){p(y);return}n++,(R=t.onFail)==null||R.call(t,n,y),FTe(A).then(()=>f()?void 0:g()).then(()=>{e?p(y):v()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:u,canStart:d,start:()=>(d()?v():g().then(v),a)}}function jTe(){let t=[],e=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const s=d=>{i=d},o=d=>{let h;e++;try{h=d()}finally{e--,e||c()}return h},a=d=>{e?t.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},c=()=>{const d=t;t=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:o,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:s}}var Tn=jTe(),vl,JM,aL=(JM=class{constructor(){xe(this,vl,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j3(this.gcTime)&&ve(this,vl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(If?1/0:5*60*1e3))}clearGcTimeout(){U(this,vl)&&(clearTimeout(U(this,vl)),ve(this,vl,void 0))}},vl=new WeakMap,JM),Wu,Hu,Hr,kn,Zp,bl,mi,Ds,eO,VTe=(eO=class extends aL{constructor(e){super();xe(this,mi);xe(this,Wu,void 0);xe(this,Hu,void 0);xe(this,Hr,void 0);xe(this,kn,void 0);xe(this,Zp,void 0);xe(this,bl,void 0);ve(this,bl,!1),ve(this,Zp,e.defaultOptions),this.setOptions(e.options),this.observers=[],ve(this,Hr,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ve(this,Wu,e.state||WTe(this.options)),this.state=U(this,Wu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=U(this,kn))==null?void 0:e.promise}setOptions(e){this.options={...U(this,Zp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,Hr).remove(this)}setData(e,n){const r=H3(this.state.data,e,this.options);return Je(this,mi,Ds).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Je(this,mi,Ds).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=U(this,kn))==null?void 0:r.promise;return(i=U(this,kn))==null||i.cancel(e),n?n.then(Yr).catch(Yr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Wu))}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!eL(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=U(this,kn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=U(this,kn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),U(this,Hr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(U(this,kn)&&(U(this,bl)?U(this,kn).cancel({revert:!0}):U(this,kn).cancelRetry()),this.scheduleGc()),U(this,Hr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,mi,Ds).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(U(this,kn))return U(this,kn).continueRetry(),U(this,kn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ve(this,bl,!0),r.signal)})},s=()=>{const f=rL(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),ve(this,bl,!1),this.options.persister?this.options.persister(f,d,this):f(d)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),ve(this,Hu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Je(this,mi,Ds).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=f=>{var d,h,p,g;Zw(f)&&f.silent||Je(this,mi,Ds).call(this,{type:"error",error:f}),Zw(f)||((h=(d=U(this,Hr).config).onError)==null||h.call(d,f,this),(g=(p=U(this,Hr).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return ve(this,kn,oL({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=U(this,Hr).config).onSuccess)==null||h.call(d,f,this),(g=(p=U(this,Hr).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{Je(this,mi,Ds).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{Je(this,mi,Ds).call(this,{type:"pause"})},onContinue:()=>{Je(this,mi,Ds).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),U(this,kn).start()}},Wu=new WeakMap,Hu=new WeakMap,Hr=new WeakMap,kn=new WeakMap,Zp=new WeakMap,bl=new WeakMap,mi=new WeakSet,Ds=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lL(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Zw(i)&&i.revert&&U(this,Hu)?{...U(this,Hu),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),U(this,Hr).notify({query:this,type:"updated",action:e})})},eO);function lL(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iL(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function WTe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rs,tO,HTe=(tO=class extends Tg{constructor(e={}){super();xe(this,rs,void 0);this.config=e,ve(this,rs,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??GE(i,n);let o=this.get(s);return o||(o=new VTe({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){U(this,rs).has(e.queryHash)||(U(this,rs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=U(this,rs).get(e.queryHash);n&&(e.destroy(),n===e&&U(this,rs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,rs).get(e)}getAll(){return[...U(this,rs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gM(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gM(e,r)):n}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},rs=new WeakMap,tO),is,Wn,wl,ss,Bo,nO,XTe=(nO=class extends aL{constructor(e){super();xe(this,ss);xe(this,is,void 0);xe(this,Wn,void 0);xe(this,wl,void 0);this.mutationId=e.mutationId,ve(this,Wn,e.mutationCache),ve(this,is,[]),this.state=e.state||YTe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){U(this,is).includes(e)||(U(this,is).push(e),this.clearGcTimeout(),U(this,Wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ve(this,is,U(this,is).filter(n=>n!==e)),this.scheduleGc(),U(this,Wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){U(this,is).length||(this.state.status==="pending"?this.scheduleGc():U(this,Wn).remove(this))}continue(){var e;return((e=U(this,wl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,l,c,u,f,d,h,p,g,v,_,m,y,b,S,A,I;ve(this,wl,oL({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,M)=>{Je(this,ss,Bo).call(this,{type:"failed",failureCount:R,error:M})},onPause:()=>{Je(this,ss,Bo).call(this,{type:"pause"})},onContinue:()=>{Je(this,ss,Bo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Wn).canRun(this)}));const n=this.state.status==="pending",r=!U(this,wl).canStart();try{if(!n){Je(this,ss,Bo).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=U(this,Wn).config).onMutate)==null?void 0:s.call(i,e,this));const M=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));M!==this.state.context&&Je(this,ss,Bo).call(this,{type:"pending",context:M,variables:e,isPaused:r})}const R=await U(this,wl).start();return await((c=(l=U(this,Wn).config).onSuccess)==null?void 0:c.call(l,R,e,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,R,e,this.state.context)),await((h=(d=U(this,Wn).config).onSettled)==null?void 0:h.call(d,R,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,R,null,e,this.state.context)),Je(this,ss,Bo).call(this,{type:"success",data:R}),R}catch(R){try{throw await((_=(v=U(this,Wn).config).onError)==null?void 0:_.call(v,R,e,this.state.context,this)),await((y=(m=this.options).onError)==null?void 0:y.call(m,R,e,this.state.context)),await((S=(b=U(this,Wn).config).onSettled)==null?void 0:S.call(b,void 0,R,this.state.variables,this.state.context,this)),await((I=(A=this.options).onSettled)==null?void 0:I.call(A,void 0,R,e,this.state.context)),R}finally{Je(this,ss,Bo).call(this,{type:"error",error:R})}}finally{U(this,Wn).runNext(this)}}},is=new WeakMap,Wn=new WeakMap,wl=new WeakMap,ss=new WeakSet,Bo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tn.batch(()=>{U(this,is).forEach(r=>{r.onMutationUpdate(e)}),U(this,Wn).notify({mutation:this,type:"updated",action:e})})},nO);function YTe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Er,Qp,rO,KTe=(rO=class extends Tg{constructor(e={}){super();xe(this,Er,void 0);xe(this,Qp,void 0);this.config=e,ve(this,Er,new Map),ve(this,Qp,Date.now())}build(e,n,r){const i=new XTe({mutationCache:this,mutationId:++Mg(this,Qp)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=$_(e),r=U(this,Er).get(n)??[];r.push(e),U(this,Er).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=$_(e);if(U(this,Er).has(n)){const i=(r=U(this,Er).get(n))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?U(this,Er).delete(n):U(this,Er).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=U(this,Er).get($_(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=U(this,Er).get($_(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...U(this,Er).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>_M(n,r))}findAll(e={}){return this.getAll().filter(n=>_M(e,n))}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Yr))))}},Er=new WeakMap,Qp=new WeakMap,rO);function $_(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function qTe(t){return{onFetch:(e,n)=>{const r=async()=>{var p,g,v,_,m;const i=e.options,s=(v=(g=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:v.direction,o=((_=e.state.data)==null?void 0:_.pages)||[],a=((m=e.state.data)==null?void 0:m.pageParams)||[],l={pages:[],pageParams:[]};let c=!1;const u=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},f=rL(e.options,e.fetchOptions),d=async(y,b,S)=>{if(c)return Promise.reject();if(b==null&&y.pages.length)return Promise.resolve(y);const A={queryKey:e.queryKey,pageParam:b,direction:S?"backward":"forward",meta:e.options.meta};u(A);const I=await f(A),{maxPages:R}=e.options,M=S?LTe:BTe;return{pages:M(y.pages,I,R),pageParams:M(y.pageParams,b,R)}};let h;if(s&&o.length){const y=s==="backward",b=y?ZTe:vM,S={pages:o,pageParams:a},A=b(i,S);h=await d(S,A,y)}else{h=await d(l,a[0]??i.initialPageParam);const y=t??o.length;for(let b=1;b<y;b++){const S=vM(i,h);h=await d(h,S)}}return h};e.options.persister?e.fetchFn=()=>{var i,s;return(s=(i=e.options).persister)==null?void 0:s.call(i,r,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=r}}}function vM(t,{pages:e,pageParams:n}){const r=e.length-1;return t.getNextPageParam(e[r],e,n[r],n)}function ZTe(t,{pages:e,pageParams:n}){var r;return(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n)}var Yt,Zo,Qo,Xu,Yu,Go,Ku,qu,iO,QTe=(iO=class{constructor(t={}){xe(this,Yt,void 0);xe(this,Zo,void 0);xe(this,Qo,void 0);xe(this,Xu,void 0);xe(this,Yu,void 0);xe(this,Go,void 0);xe(this,Ku,void 0);xe(this,qu,void 0);ve(this,Yt,t.queryCache||new HTe),ve(this,Zo,t.mutationCache||new KTe),ve(this,Qo,t.defaultOptions||{}),ve(this,Xu,new Map),ve(this,Yu,new Map),ve(this,Go,0)}mount(){Mg(this,Go)._++,U(this,Go)===1&&(ve(this,Ku,JE.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Yt).onFocus())})),ve(this,qu,ry.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Yt).onOnline())})))}unmount(){var t,e;Mg(this,Go)._--,U(this,Go)===0&&((t=U(this,Ku))==null||t.call(this),ve(this,Ku,void 0),(e=U(this,qu))==null||e.call(this),ve(this,qu,void 0))}isFetching(t){return U(this,Yt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return U(this,Zo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,Yt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=U(this,Yt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(n.staleTime)&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return U(this,Yt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=U(this,Yt).get(r.queryHash),s=i==null?void 0:i.state.data,o=DTe(e,s);if(o!==void 0)return U(this,Yt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>U(this,Yt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,Yt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=U(this,Yt);Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=U(this,Yt),r={type:"active",...t};return Tn.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Tn.batch(()=>U(this,Yt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Yr).catch(Yr)}invalidateQueries(t={},e={}){return Tn.batch(()=>{if(U(this,Yt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Tn.batch(()=>U(this,Yt).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Yr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Yr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=U(this,Yt).build(this,e);return n.isStaleByTime(e.staleTime)?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Yr).catch(Yr)}fetchInfiniteQuery(t){return t.behavior=qTe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Yr).catch(Yr)}resumePausedMutations(){return ry.isOnline()?U(this,Zo).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,Yt)}getMutationCache(){return U(this,Zo)}getDefaultOptions(){return U(this,Qo)}setDefaultOptions(t){ve(this,Qo,t)}setQueryDefaults(t,e){U(this,Xu).set(Vp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...U(this,Xu).values()];let n={};return e.forEach(r=>{Wp(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){U(this,Yu).set(Vp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...U(this,Yu).values()];let n={};return e.forEach(r=>{Wp(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...U(this,Qo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=GE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===nL&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...U(this,Qo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){U(this,Yt).clear(),U(this,Zo).clear()}},Yt=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,Go=new WeakMap,Ku=new WeakMap,qu=new WeakMap,iO),rr,St,Gp,Hn,Sl,Zu,os,Jp,Qu,Gu,xl,Tl,Jo,Ju,El,uh,eg,X3,tg,Y3,ng,K3,rg,q3,ig,Z3,sg,Q3,og,G3,cv,cL,sO,GTe=(sO=class extends Tg{constructor(e,n){super();xe(this,El);xe(this,eg);xe(this,tg);xe(this,ng);xe(this,rg);xe(this,ig);xe(this,sg);xe(this,og);xe(this,cv);xe(this,rr,void 0);xe(this,St,void 0);xe(this,Gp,void 0);xe(this,Hn,void 0);xe(this,Sl,void 0);xe(this,Zu,void 0);xe(this,os,void 0);xe(this,Jp,void 0);xe(this,Qu,void 0);xe(this,Gu,void 0);xe(this,xl,void 0);xe(this,Tl,void 0);xe(this,Jo,void 0);xe(this,Ju,new Set);this.options=n,ve(this,rr,e),ve(this,os,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,St).addObserver(this),bM(U(this,St),this.options)?Je(this,El,uh).call(this):this.updateResult(),Je(this,rg,q3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return J3(U(this,St),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return J3(U(this,St),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,ig,Z3).call(this),Je(this,sg,Q3).call(this),U(this,St).removeObserver(this)}setOptions(e,n){const r=this.options,i=U(this,St);if(this.options=U(this,rr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");Je(this,og,G3).call(this),U(this,St).setOptions(this.options),r._defaulted&&!V3(this.options,r)&&U(this,rr).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,St),observer:this});const s=this.hasListeners();s&&wM(U(this,St),i,this.options,r)&&Je(this,El,uh).call(this),this.updateResult(n),s&&(U(this,St)!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&Je(this,eg,X3).call(this);const o=Je(this,tg,Y3).call(this);s&&(U(this,St)!==i||this.options.enabled!==r.enabled||o!==U(this,Jo))&&Je(this,ng,K3).call(this,o)}getOptimisticResult(e){const n=U(this,rr).getQueryCache().build(U(this,rr),e),r=this.createResult(n,e);return eEe(this,r)&&(ve(this,Hn,r),ve(this,Zu,this.options),ve(this,Sl,U(this,St).state)),r}getCurrentResult(){return U(this,Hn)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){U(this,Ju).add(e)}getCurrentQuery(){return U(this,St)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=U(this,rr).defaultQueryOptions(e),r=U(this,rr).getQueryCache().build(U(this,rr),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Je(this,El,uh).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,Hn)))}createResult(e,n){var I;const r=U(this,St),i=this.options,s=U(this,Hn),o=U(this,Sl),a=U(this,Zu),c=e!==r?e.state:U(this,Gp),{state:u}=e;let f={...u},d=!1,h;if(n._optimisticResults){const R=this.hasListeners(),M=!R&&bM(e,n),k=R&&wM(e,r,n,i);(M||k)&&(f={...f,...lL(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:v}=f;if(n.select&&f.data!==void 0)if(s&&f.data===(o==null?void 0:o.data)&&n.select===U(this,Jp))h=U(this,Qu);else try{ve(this,Jp,n.select),h=n.select(f.data),h=H3(s==null?void 0:s.data,h,n),ve(this,Qu,h),ve(this,os,null)}catch(R){ve(this,os,R)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&v==="pending"){let R;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))R=s.data;else if(R=typeof n.placeholderData=="function"?n.placeholderData((I=U(this,Gu))==null?void 0:I.state.data,U(this,Gu)):n.placeholderData,n.select&&R!==void 0)try{R=n.select(R),ve(this,os,null)}catch(M){ve(this,os,M)}R!==void 0&&(v="success",h=H3(s==null?void 0:s.data,R,n),d=!0)}U(this,os)&&(p=U(this,os),h=U(this,Qu),g=Date.now(),v="error");const _=f.fetchStatus==="fetching",m=v==="pending",y=v==="error",b=m&&_,S=h!==void 0;return{status:v,fetchStatus:f.fetchStatus,isPending:m,isSuccess:v==="success",isError:y,isInitialLoading:b,isLoading:b,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:_,isRefetching:_&&!m,isLoadingError:y&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:y&&S,isStale:eA(e,n),refetch:this.refetch}}updateResult(e){const n=U(this,Hn),r=this.createResult(U(this,St),this.options);if(ve(this,Sl,U(this,St).state),ve(this,Zu,this.options),U(this,Sl).data!==void 0&&ve(this,Gu,U(this,St)),V3(r,n))return;ve(this,Hn,r);const i={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!U(this,Ju).size)return!0;const l=new Set(a??U(this,Ju));return this.options.throwOnError&&l.add("error"),Object.keys(U(this,Hn)).some(c=>{const u=c;return U(this,Hn)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),Je(this,cv,cL).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,rg,q3).call(this)}},rr=new WeakMap,St=new WeakMap,Gp=new WeakMap,Hn=new WeakMap,Sl=new WeakMap,Zu=new WeakMap,os=new WeakMap,Jp=new WeakMap,Qu=new WeakMap,Gu=new WeakMap,xl=new WeakMap,Tl=new WeakMap,Jo=new WeakMap,Ju=new WeakMap,El=new WeakSet,uh=function(e){Je(this,og,G3).call(this);let n=U(this,St).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Yr)),n},eg=new WeakSet,X3=function(){if(Je(this,ig,Z3).call(this),If||U(this,Hn).isStale||!j3(this.options.staleTime))return;const n=eL(U(this,Hn).dataUpdatedAt,this.options.staleTime)+1;ve(this,xl,setTimeout(()=>{U(this,Hn).isStale||this.updateResult()},n))},tg=new WeakSet,Y3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,St)):this.options.refetchInterval)??!1},ng=new WeakSet,K3=function(e){Je(this,sg,Q3).call(this),ve(this,Jo,e),!(If||this.options.enabled===!1||!j3(U(this,Jo))||U(this,Jo)===0)&&ve(this,Tl,setInterval(()=>{(this.options.refetchIntervalInBackground||JE.isFocused())&&Je(this,El,uh).call(this)},U(this,Jo)))},rg=new WeakSet,q3=function(){Je(this,eg,X3).call(this),Je(this,ng,K3).call(this,Je(this,tg,Y3).call(this))},ig=new WeakSet,Z3=function(){U(this,xl)&&(clearTimeout(U(this,xl)),ve(this,xl,void 0))},sg=new WeakSet,Q3=function(){U(this,Tl)&&(clearInterval(U(this,Tl)),ve(this,Tl,void 0))},og=new WeakSet,G3=function(){const e=U(this,rr).getQueryCache().build(U(this,rr),this.options);if(e===U(this,St))return;const n=U(this,St);ve(this,St,e),ve(this,Gp,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},cv=new WeakSet,cL=function(e){Tn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(U(this,Hn))}),U(this,rr).getQueryCache().notify({query:U(this,St),type:"observerResultsUpdated"})})},sO);function JTe(t,e){return e.enabled!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function bM(t,e){return JTe(t,e)||t.state.data!==void 0&&J3(t,e,e.refetchOnMount)}function J3(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&eA(t,e)}return!1}function wM(t,e,n,r){return(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&eA(t,n)}function eA(t,e){return e.enabled!==!1&&t.isStaleByTime(e.staleTime)}function eEe(t,e){return!V3(t.getCurrentResult(),e)}var uL=w.createContext(void 0),tEe=t=>{const e=w.useContext(uL);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nEe=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(uL.Provider,{value:t,children:e})),fL=w.createContext(!1),rEe=()=>w.useContext(fL);fL.Provider;function iEe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var sEe=w.createContext(iEe()),oEe=()=>w.useContext(sEe);function aEe(t,e){return typeof t=="function"?t(...e):!!t}var lEe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},cEe=t=>{w.useEffect(()=>{t.clearReset()},[t])},uEe=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&aEe(n,[t.error,r]),fEe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},dEe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,hEe=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function pEe(t,e,n){const r=tEe(n),i=rEe(),s=oEe(),o=r.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",fEe(o),lEe(o,s),cEe(s);const[a]=w.useState(()=>new e(r,o)),l=a.getOptimisticResult(o);if(w.useSyncExternalStore(w.useCallback(c=>{const u=i?()=>{}:a.subscribe(Tn.batchCalls(c));return a.updateResult(),u},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),w.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),dEe(o,l))throw hEe(o,a,s);if(uEe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw l.error;return o.notifyOnChangeProps?l:a.trackResult(l)}function Eg(t,e){return pEe(t,GTe,e)}const gEe=({cluster:t,onHover:e})=>{const{data:n}=Eg({queryKey:["clusters"],gcTime:1/0,staleTime:1/0,queryFn:()=>fetch("/data/cluster.geojson").then(r=>r.json())});return new Pf({data:n,filled:!0,pickable:!0,onHover:r=>{var i;return r.index===-1?e==null?void 0:e(void 0):e==null?void 0:e({position:{x:r.x,y:r.y},data:(i=r.object)==null?void 0:i.properties})},getFillColor:r=>t==="Geographic"?ya[r.properties.Geographic]||[0,0,0,0]:Gs[r.properties.Socioeconomic]||[0,0,0,0],updateTriggers:{getFillColor:[t]}})},_Ee=()=>{const{data:t}=Eg({queryKey:["regencies"],gcTime:1/0,staleTime:1/0,queryFn:()=>fetch("/data/west-java.geojson").then(e=>e.json())});return new Pf({data:t,getFillColor:[0,0,0,0],getLineColor:[0,0,0,255],getLineWidth:250})},mEe=()=>{const{data:t}=Eg({queryKey:["regencies-label"],gcTime:1/0,staleTime:1/0,queryFn:()=>fetch("/data/west-java-label.geojson").then(e=>e.json())});return new Pf({data:t,pointType:"text",getText:e=>e.properties.name,getTextSize:12,getTextColor:[255,0,0,255],textOutlineWidth:1e3})},yEe=()=>{const{data:t}=Eg({queryKey:["clusters"],gcTime:1/0,staleTime:1/0,queryFn:()=>fetch("/data/cluster.geojson").then(e=>e.json())});return new Pf({data:t,getFillColor:[0,0,0,0],getLineColor:[0,0,0,125],getLineWidth:50})},dL=({disabled:t})=>{const e=_Ee(),n=mEe(),r=yEe();return t?[]:[r,e,n]},vEe=({cluster:t})=>{const e=Zt(i=>i.settings.region),n=gEe({cluster:t,onHover:i=>Zt.setState({tooltip:i})}),r=dL({disabled:!e});return x.jsx(Qk,{layers:[n,...r]})},bEe=new TextDecoder("utf-8"),ex=t=>bEe.decode(t),wEe=new TextEncoder,tA=t=>wEe.encode(t),SEe=t=>typeof t=="number",xEe=t=>typeof t=="boolean",Yn=t=>typeof t=="function",Di=t=>t!=null&&Object(t)===t,Hp=t=>Di(t)&&Yn(t.then),Z1=t=>Di(t)&&Yn(t[Symbol.iterator]),nA=t=>Di(t)&&Yn(t[Symbol.asyncIterator]),tx=t=>Di(t)&&Di(t.schema),hL=t=>Di(t)&&"done"in t&&"value"in t,pL=t=>Di(t)&&Yn(t.stat)&&SEe(t.fd),gL=t=>Di(t)&&rA(t.body),_L=t=>"_getDOMStream"in t&&"_getNodeStream"in t,rA=t=>Di(t)&&Yn(t.cancel)&&Yn(t.getReader)&&!_L(t),mL=t=>Di(t)&&Yn(t.read)&&Yn(t.pipe)&&xEe(t.readable)&&!_L(t),TEe=t=>Di(t)&&Yn(t.clear)&&Yn(t.bytes)&&Yn(t.position)&&Yn(t.setPosition)&&Yn(t.capacity)&&Yn(t.getBufferIdentifier)&&Yn(t.createLong),iA=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function EEe(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,c=0,u=t.length;++l<u;){if(o=e[c],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++c]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++c]=a);continue}e[c]=new Uint8Array(o.buffer,n,r-n+s)}return e}function SM(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}function Es(t,e){const n=EEe(t),r=n.reduce((u,f)=>u+f.byteLength,0);let i,s,o,a=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],s=i.subarray(0,Math.min(i.length,c-a)),c<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?SM(o,s,a):o=s;break}SM(o||(o=new Uint8Array(c)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function dt(t,e){let n=hL(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=tA(n)),n instanceof ArrayBuffer?new t(n):n instanceof iA?new t(n):TEe(n)?dt(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Wd=t=>dt(Int32Array,t),xM=t=>dt(BigInt64Array,t),tt=t=>dt(Uint8Array,t),nx=t=>(t.next(),t);function*AEe(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof iA?n(e):Z1(e)?e:n(e);return yield*nx(function*(i){let s=null;do s=i.next(yield dt(t,s));while(!s.done)}(r[Symbol.iterator]())),new t}const CEe=t=>AEe(Uint8Array,t);function yL(t,e){return gs(this,arguments,function*(){if(Hp(e))return yield We(yield We(yield*lm(Iu(yL(t,yield We(e))))));const r=function(o){return gs(this,arguments,function*(){yield yield We(yield We(o))})},i=function(o){return gs(this,arguments,function*(){yield We(yield*lm(Iu(nx(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof iA?r(e):Z1(e)?i(e):nA(e)?e:r(e);return yield We(yield*lm(Iu(nx(function(o){return gs(this,arguments,function*(){let a=null;do a=yield We(o.next(yield yield We(dt(t,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield We(new t)})}const REe=t=>yL(Uint8Array,t);function PEe(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const Kr={fromIterable(t){return U_(IEe(t))},fromAsyncIterable(t){return U_(MEe(t))},fromDOMStream(t){return U_(OEe(t))},fromNodeStream(t){return U_(kEe(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},U_=t=>(t.next(),t);function*IEe(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Es(r,o)[0]:([i,r,a]=Es(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const c=CEe(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?c.next():c.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(u){(n=!0)&&typeof c.throw=="function"&&c.throw(u)}finally{n===!1&&typeof c.return=="function"&&c.return(null)}return null}function MEe(t){return gs(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Es(i,a)[0]:([s,i,l]=Es(i,a),s)}({cmd:o,size:a}=(yield yield We(null))||{cmd:"read",size:0});const u=REe(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield We(u.next()):yield We(u.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield We(c()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof u.throw=="function"&&(yield We(u.throw(f)))}finally{r===!1&&typeof u.return=="function"&&(yield We(u.return(new Uint8Array(0))))}return yield We(null)})}function OEe(t){return gs(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function c(){return o==="peek"?Es(i,a)[0]:([s,i,l]=Es(i,a),s)}({cmd:o,size:a}=(yield yield We(null))||{cmd:"read",size:0});const u=new NEe(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield We(u.read()):yield We(u.read(a-l)),!n&&s.byteLength>0&&(i.push(tt(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield We(c()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield We(u.cancel(f)))}finally{r===!1?yield We(u.cancel()):t.locked&&u.releaseLock()}return yield We(null)})}class NEe{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return $e(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return $e(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=tt(n)),n})}}const Qw=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function kEe(t){return gs(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,c=[],u;function f(){return o==="peek"?Es(c,a)[0]:([u,c,l]=Es(c,a),u)}if({cmd:o,size:a}=(yield yield We(null))||{cmd:"read",size:0},t.isTTY)return yield yield We(new Uint8Array(0)),yield We(null);try{n[0]=Qw(t,"end"),n[1]=Qw(t,"error");do{if(n[2]=Qw(t,"readable"),[r,s]=yield We(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(u=tt(t.read(a-l)),u.byteLength<a-l&&(u=tt(t.read()))):u=tt(t.read()),u.byteLength>0&&(c.push(u),l+=u.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield We(f()));while(a<l)}while(!i)}finally{yield We(d(n,r==="error"?s:null))}return yield We(null);function d(h,p){return u=c=null,new Promise((g,v)=>{for(const[_,m]of h)t.off(_,m);try{const _=t.destroy;_&&_.call(t,p),p=void 0}catch(_){p=_||p}finally{p!=null?v(p):g()}})}})}var on;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(on||(on={}));var gr;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(gr||(gr={}));var Ln;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Ln||(Ln={}));var ci;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(ci||(ci={}));var Ie;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Ie||(Ie={}));var As;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(As||(As={}));const Gw=2,us=4,Ys=4,ct=4,jo=new Int32Array(2),TM=new Float32Array(jo.buffer),EM=new Float64Array(jo.buffer),z_=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var rx;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(rx||(rx={}));let Mf=class vL{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new vL(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return jo[0]=this.readInt32(e),TM[0]}readFloat64(e){return jo[z_?0:1]=this.readInt32(e),jo[z_?1:0]=this.readInt32(e+4),EM[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){TM[0]=n,this.writeInt32(e,jo[0])}writeFloat64(e,n){EM[0]=n,this.writeInt32(e,jo[z_?0:1]),this.writeInt32(e+4,jo[z_?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+us+Ys)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<Ys;n++)e+=String.fromCharCode(this.readInt8(this.position_+us+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=us;const i=this.bytes_.subarray(e,e+r);return n===rx.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+us}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Ys)throw new Error("FlatBuffers: file identifier must be length "+Ys);for(let n=0;n<Ys;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+us+n))return!1;return!0}createScalarList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s)}return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},bL=class wL{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=Mf.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=wL.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Mf.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(us,0),this.writeInt32(this.offset()-e+us)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*Gw;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let c=Gw;c<s;c+=Gw)if(this.bb.readInt16(a+c)!=this.bb.readInt16(l+c))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?ct:0;if(n){const s=n;if(this.prep(this.minalign,us+Ys+i),s.length!=Ys)throw new TypeError("FlatBuffers: file identifier must be length "+Ys);for(let o=Ys-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,us+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(us,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var iy;(function(t){t[t.BUFFER=0]="BUFFER"})(iy||(iy={}));var sy;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(sy||(sy={}));class Vo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Vo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+ct),(n||new Vo).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):sy.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):iy.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,sy.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,iy.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return Vo.startBodyCompression(e),Vo.addCodec(e,n),Vo.addMethod(e,r),Vo.endBodyCompression(e)}}class SL{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}}let xL=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}},$s=class ix{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new ix).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+ct),(n||new ix).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new xL).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new SL).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Vo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Fc=class sx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new sx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+ct),(n||new sx).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new $s).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var Of;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Of||(Of={}));var oy;(function(t){t[t.DenseArray=0]="DenseArray"})(oy||(oy={}));class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new Ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+ct),(n||new Ir).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return Ir.startInt(e),Ir.addBitWidth(e,n),Ir.addIsSigned(e,r),Ir.endInt(e)}}class Ks{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Ks).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+ct),(n||new Ks).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ir).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):oy.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,oy.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class dn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new dn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+ct),(n||new dn).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return dn.startKeyValue(e),dn.addKey(e,n),dn.addValue(e,r),dn.endKeyValue(e)}}let AM=class fh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new fh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+ct),(n||new fh).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return fh.startBinary(e),fh.endBinary(e)}},CM=class dh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new dh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+ct),(n||new dh).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return dh.startBool(e),dh.endBool(e)}},ym=class Bc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new Bc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+ct),(n||new Bc).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ci.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,ci.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return Bc.startDate(e),Bc.addUnit(e,n),Bc.endDate(e)}},Lc=class Lo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new Lo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+ct),(n||new Lo).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return Lo.startDecimal(e),Lo.addPrecision(e,n),Lo.addScale(e,r),Lo.addBitWidth(e,i),Lo.endDecimal(e)}},vm=class $c{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new $c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+ct),(n||new $c).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ie.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Ie.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return $c.startDuration(e),$c.addUnit(e,n),$c.endDuration(e)}},bm=class Uc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Uc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+ct),(n||new Uc).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Uc.startFixedSizeBinary(e),Uc.addByteWidth(e,n),Uc.endFixedSizeBinary(e)}},wm=class zc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new zc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+ct),(n||new zc).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return zc.startFixedSizeList(e),zc.addListSize(e,n),zc.endFixedSizeList(e)}};class fs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new fs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+ct),(n||new fs).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ln.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Ln.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return fs.startFloatingPoint(e),fs.addPrecision(e,n),fs.endFloatingPoint(e)}}class ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+ct),(n||new ds).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):As.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,As.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return ds.startInterval(e),ds.addUnit(e,n),ds.endInterval(e)}}let RM=class hh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new hh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+ct),(n||new hh).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return hh.startLargeBinary(e),hh.endLargeBinary(e)}},PM=class ph{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new ph).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+ct),(n||new ph).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return ph.startLargeUtf8(e),ph.endLargeUtf8(e)}},IM=class gh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new gh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+ct),(n||new gh).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return gh.startList(e),gh.endList(e)}},Sm=class jc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new jc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+ct),(n||new jc).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return jc.startMap(e),jc.addKeysSorted(e,n),jc.endMap(e)}},MM=class _h{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new _h).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+ct),(n||new _h).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return _h.startNull(e),_h.endNull(e)}};class ml{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new ml).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+ct),(n||new ml).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return ml.startStruct_(e),ml.endStruct_(e)}}class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Gr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+ct),(n||new Gr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ie.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Ie.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return Gr.startTime(e),Gr.addUnit(e,n),Gr.addBitWidth(e,r),Gr.endTime(e)}}class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Jr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+ct),(n||new Jr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ie.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Ie.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return Jr.startTimestamp(e),Jr.addUnit(e,n),Jr.addTimezone(e,r),Jr.endTimestamp(e)}}class cr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new cr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+ct),(n||new cr).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):gr.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,gr.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return cr.startUnion(e),cr.addMode(e,n),cr.addTypeIds(e,r),cr.endUnion(e)}}let OM=class mh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new mh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+ct),(n||new mh).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return mh.startUtf8(e),mh.endUtf8(e)}};var xt;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(xt||(xt={}));let Wr=class xm{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new xm).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+ct),(n||new xm).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):xt.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Ks).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new xm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,xt.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},es=class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Fs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+ct),(n||new Fs).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Of.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Wr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Of.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return Fs.startSchema(e),Fs.addEndianness(e,n),Fs.addFields(e,r),Fs.addCustomMetadata(e,i),Fs.addFeatures(e,s),Fs.endSchema(e)}};var at;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(at||(at={}));var B;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(B||(B={}));var Us;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Us||(Us={}));const DEe=void 0;function Xp(t){if(t===null)return"null";if(t===DEe)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>Xp(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}function kt(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function TL(t,e){return kt(t/e)+kt(t%e)/kt(e)}const FEe=Symbol.for("isArrowBigNum");function $i(t,...e){return e.length===0?Object.setPrototypeOf(dt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}$i.prototype[FEe]=!0;$i.prototype.toJSON=function(){return`"${Kp(this)}"`};$i.prototype.valueOf=function(t){return EL(this,t)};$i.prototype.toString=function(){return Kp(this)};$i.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return EL(this);case"string":return Kp(this);case"default":return $Ee(this)}return Kp(this)};function Bu(...t){return $i.apply(this,t)}function Lu(...t){return $i.apply(this,t)}function Yp(...t){return $i.apply(this,t)}Object.setPrototypeOf(Bu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Yp.prototype,Object.create(Uint32Array.prototype));Object.assign(Bu.prototype,$i.prototype,{constructor:Bu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Lu.prototype,$i.prototype,{constructor:Lu,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Yp.prototype,$i.prototype,{constructor:Yp,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const BEe=BigInt(4294967296)*BigInt(4294967296),LEe=BEe-BigInt(1);function EL(t,e){const{buffer:n,byteOffset:r,byteLength:i,signed:s}=t,o=new BigUint64Array(n,r,i/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),c=0;if(a){for(const u of o)l|=(u^LEe)*(BigInt(1)<<BigInt(64*c++));l*=BigInt(-1),l-=BigInt(1)}else for(const u of o)l|=u*(BigInt(1)<<BigInt(64*c++));if(typeof e=="number"){const u=BigInt(Math.pow(10,e)),f=l/u,d=l%u;return kt(f)+kt(d)/kt(u)}return kt(l)}function Kp(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return Jw(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return Jw(t);e=e.slice();let r=1;for(let s=0;s<e.length;s++){const o=e[s],a=~o+r;e[s]=a,r&=o===0?1:0}return`-${Jw(e)}`}function $Ee(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Kp(t)}function Jw(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class sA{static new(e,n){switch(n){case!0:return new Bu(e);case!1:return new Lu(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Bu(e)}return e.byteLength===16?new Yp(e):new Lu(e)}static signed(e){return new Bu(e)}static unsigned(e){return new Lu(e)}static decimal(e){return new Yp(e)}constructor(e,n){return sA.new(e,n)}}var AL,CL,RL,PL,IL,ML,OL,NL,kL,DL,FL,BL,LL,$L,UL,zL,jL,VL,WL,HL,XL,YL;class we{static isNull(e){return(e==null?void 0:e.typeId)===B.Null}static isInt(e){return(e==null?void 0:e.typeId)===B.Int}static isFloat(e){return(e==null?void 0:e.typeId)===B.Float}static isBinary(e){return(e==null?void 0:e.typeId)===B.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===B.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===B.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===B.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===B.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===B.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===B.Date}static isTime(e){return(e==null?void 0:e.typeId)===B.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===B.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===B.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===B.Duration}static isList(e){return(e==null?void 0:e.typeId)===B.List}static isStruct(e){return(e==null?void 0:e.typeId)===B.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===B.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===B.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===B.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===B.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===B.Dictionary}static isDenseUnion(e){return we.isUnion(e)&&e.mode===gr.Dense}static isSparseUnion(e){return we.isUnion(e)&&e.mode===gr.Sparse}constructor(e){this.typeId=e}}AL=Symbol.toStringTag;we[AL]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(we.prototype);class Ia extends we{constructor(){super(B.Null)}toString(){return"Null"}}CL=Symbol.toStringTag;Ia[CL]=(t=>t[Symbol.toStringTag]="Null")(Ia.prototype);class Zl extends we{constructor(e,n){super(B.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}RL=Symbol.toStringTag;Zl[RL]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Zl.prototype);class qp extends Zl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(qp.prototype,"ArrayType",{value:Int32Array});class ay extends we{constructor(e){super(B.Float),this.precision=e}get ArrayType(){switch(this.precision){case Ln.HALF:return Uint16Array;case Ln.SINGLE:return Float32Array;case Ln.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}PL=Symbol.toStringTag;ay[PL]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(ay.prototype);class ly extends we{constructor(){super(B.Binary)}toString(){return"Binary"}}IL=Symbol.toStringTag;ly[IL]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ly.prototype);class cy extends we{constructor(){super(B.LargeBinary)}toString(){return"LargeBinary"}}ML=Symbol.toStringTag;cy[ML]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(cy.prototype);class uy extends we{constructor(){super(B.Utf8)}toString(){return"Utf8"}}OL=Symbol.toStringTag;uy[OL]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(uy.prototype);class fy extends we{constructor(){super(B.LargeUtf8)}toString(){return"LargeUtf8"}}NL=Symbol.toStringTag;fy[NL]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(fy.prototype);class dy extends we{constructor(){super(B.Bool)}toString(){return"Bool"}}kL=Symbol.toStringTag;dy[kL]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(dy.prototype);class hy extends we{constructor(e,n,r=128){super(B.Decimal),this.scale=e,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}DL=Symbol.toStringTag;hy[DL]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(hy.prototype);class py extends we{constructor(e){super(B.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${ci[this.unit]}>`}get ArrayType(){return this.unit===ci.DAY?Int32Array:BigInt64Array}}FL=Symbol.toStringTag;py[FL]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(py.prototype);class gy extends we{constructor(e,n){super(B.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Ie[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}BL=Symbol.toStringTag;gy[BL]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(gy.prototype);class _y extends we{constructor(e,n){super(B.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${Ie[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}LL=Symbol.toStringTag;_y[LL]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(_y.prototype);class my extends we{constructor(e){super(B.Interval),this.unit=e}toString(){return`Interval<${As[this.unit]}>`}}$L=Symbol.toStringTag;my[$L]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(my.prototype);class yy extends we{constructor(e){super(B.Duration),this.unit=e}toString(){return`Duration<${Ie[this.unit]}>`}}UL=Symbol.toStringTag;yy[UL]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(yy.prototype);class vy extends we{constructor(e){super(B.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}zL=Symbol.toStringTag;vy[zL]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(vy.prototype);class Kn extends we{constructor(e){super(B.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}jL=Symbol.toStringTag;Kn[jL]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Kn.prototype);class by extends we{constructor(e,n,r){super(B.Union),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}VL=Symbol.toStringTag;by[VL]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(by.prototype);class wy extends we{constructor(e){super(B.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}WL=Symbol.toStringTag;wy[WL]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(wy.prototype);class Sy extends we{constructor(e,n){super(B.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}HL=Symbol.toStringTag;Sy[HL]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Sy.prototype);class xy extends we{constructor(e,n=!1){var r,i,s;if(super(B.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((r=e==null?void 0:e.type)===null||r===void 0)&&r.children)){const o=(i=e==null?void 0:e.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}XL=Symbol.toStringTag;xy[XL]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(xy.prototype);const UEe=(t=>()=>++t)(-1);class Nf extends we{constructor(e,n,r,i){super(B.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?UEe():kt(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}YL=Symbol.toStringTag;Nf[YL]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Nf.prototype);function zs(t){const e=t;switch(t.typeId){case B.Decimal:return t.bitWidth/32;case B.Interval:return 1+e.unit;case B.FixedSizeList:return e.listSize;case B.FixedSizeBinary:return e.byteWidth;default:return 1}}class Ze{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return zEe(this,e,n)}getVisitFnByTypeId(e,n=!0){return Vc(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function zEe(t,e,n=!0){return typeof e=="number"?Vc(t,e,n):typeof e=="string"&&e in B?Vc(t,B[e],n):e&&e instanceof we?Vc(t,NM(e),n):e!=null&&e.type&&e.type instanceof we?Vc(t,NM(e.type),n):Vc(t,B.NONE,n)}function Vc(t,e,n=!0){let r=null;switch(e){case B.Null:r=t.visitNull;break;case B.Bool:r=t.visitBool;break;case B.Int:r=t.visitInt;break;case B.Int8:r=t.visitInt8||t.visitInt;break;case B.Int16:r=t.visitInt16||t.visitInt;break;case B.Int32:r=t.visitInt32||t.visitInt;break;case B.Int64:r=t.visitInt64||t.visitInt;break;case B.Uint8:r=t.visitUint8||t.visitInt;break;case B.Uint16:r=t.visitUint16||t.visitInt;break;case B.Uint32:r=t.visitUint32||t.visitInt;break;case B.Uint64:r=t.visitUint64||t.visitInt;break;case B.Float:r=t.visitFloat;break;case B.Float16:r=t.visitFloat16||t.visitFloat;break;case B.Float32:r=t.visitFloat32||t.visitFloat;break;case B.Float64:r=t.visitFloat64||t.visitFloat;break;case B.Utf8:r=t.visitUtf8;break;case B.LargeUtf8:r=t.visitLargeUtf8;break;case B.Binary:r=t.visitBinary;break;case B.LargeBinary:r=t.visitLargeBinary;break;case B.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case B.Date:r=t.visitDate;break;case B.DateDay:r=t.visitDateDay||t.visitDate;break;case B.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case B.Timestamp:r=t.visitTimestamp;break;case B.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case B.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case B.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case B.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case B.Time:r=t.visitTime;break;case B.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case B.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case B.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case B.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case B.Decimal:r=t.visitDecimal;break;case B.List:r=t.visitList;break;case B.Struct:r=t.visitStruct;break;case B.Union:r=t.visitUnion;break;case B.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case B.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case B.Dictionary:r=t.visitDictionary;break;case B.Interval:r=t.visitInterval;break;case B.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case B.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case B.Duration:r=t.visitDuration;break;case B.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case B.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case B.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case B.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case B.FixedSizeList:r=t.visitFixedSizeList;break;case B.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${B[e]}'`)}function NM(t){switch(t.typeId){case B.Null:return B.Null;case B.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?B.Int8:B.Uint8;case 16:return n?B.Int16:B.Uint16;case 32:return n?B.Int32:B.Uint32;case 64:return n?B.Int64:B.Uint64}return B.Int}case B.Float:switch(t.precision){case Ln.HALF:return B.Float16;case Ln.SINGLE:return B.Float32;case Ln.DOUBLE:return B.Float64}return B.Float;case B.Binary:return B.Binary;case B.LargeBinary:return B.LargeBinary;case B.Utf8:return B.Utf8;case B.LargeUtf8:return B.LargeUtf8;case B.Bool:return B.Bool;case B.Decimal:return B.Decimal;case B.Time:switch(t.unit){case Ie.SECOND:return B.TimeSecond;case Ie.MILLISECOND:return B.TimeMillisecond;case Ie.MICROSECOND:return B.TimeMicrosecond;case Ie.NANOSECOND:return B.TimeNanosecond}return B.Time;case B.Timestamp:switch(t.unit){case Ie.SECOND:return B.TimestampSecond;case Ie.MILLISECOND:return B.TimestampMillisecond;case Ie.MICROSECOND:return B.TimestampMicrosecond;case Ie.NANOSECOND:return B.TimestampNanosecond}return B.Timestamp;case B.Date:switch(t.unit){case ci.DAY:return B.DateDay;case ci.MILLISECOND:return B.DateMillisecond}return B.Date;case B.Interval:switch(t.unit){case As.DAY_TIME:return B.IntervalDayTime;case As.YEAR_MONTH:return B.IntervalYearMonth}return B.Interval;case B.Duration:switch(t.unit){case Ie.SECOND:return B.DurationSecond;case Ie.MILLISECOND:return B.DurationMillisecond;case Ie.MICROSECOND:return B.DurationMicrosecond;case Ie.NANOSECOND:return B.DurationNanosecond}return B.Duration;case B.Map:return B.Map;case B.List:return B.List;case B.Struct:return B.Struct;case B.Union:switch(t.mode){case gr.Dense:return B.DenseUnion;case gr.Sparse:return B.SparseUnion}return B.Union;case B.FixedSizeBinary:return B.FixedSizeBinary;case B.FixedSizeList:return B.FixedSizeList;case B.Dictionary:return B.Dictionary}throw new Error(`Unrecognized type '${B[t.typeId]}'`)}Ze.prototype.visitInt8=null;Ze.prototype.visitInt16=null;Ze.prototype.visitInt32=null;Ze.prototype.visitInt64=null;Ze.prototype.visitUint8=null;Ze.prototype.visitUint16=null;Ze.prototype.visitUint32=null;Ze.prototype.visitUint64=null;Ze.prototype.visitFloat16=null;Ze.prototype.visitFloat32=null;Ze.prototype.visitFloat64=null;Ze.prototype.visitDateDay=null;Ze.prototype.visitDateMillisecond=null;Ze.prototype.visitTimestampSecond=null;Ze.prototype.visitTimestampMillisecond=null;Ze.prototype.visitTimestampMicrosecond=null;Ze.prototype.visitTimestampNanosecond=null;Ze.prototype.visitTimeSecond=null;Ze.prototype.visitTimeMillisecond=null;Ze.prototype.visitTimeMicrosecond=null;Ze.prototype.visitTimeNanosecond=null;Ze.prototype.visitDenseUnion=null;Ze.prototype.visitSparseUnion=null;Ze.prototype.visitIntervalDayTime=null;Ze.prototype.visitIntervalYearMonth=null;Ze.prototype.visitDuration=null;Ze.prototype.visitDurationSecond=null;Ze.prototype.visitDurationMillisecond=null;Ze.prototype.visitDurationMicrosecond=null;Ze.prototype.visitDurationNanosecond=null;const KL=new Float64Array(1),Nc=new Uint32Array(KL.buffer);function qL(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function jEe(t){if(t!==t)return 32256;KL[0]=t;const e=(Nc[1]&2147483648)>>16&65535;let n=Nc[1]&2146435072,r=0;return n>=1089470464?Nc[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Nc[1]&1048575)>>10):n<=1056964608?(r=1048576+(Nc[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Nc[1]&1048575)+512>>10),e|n|r&65535}class Me extends Ze{}function ke(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const VEe=(t,e,n)=>{t[e]=Math.floor(n/864e5)},ZL=(t,e,n,r)=>{if(n+1<e.length){const i=kt(e[n]),s=kt(e[n+1]);t.set(r.subarray(0,s-i),i)}},WEe=({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},vo=({values:t},e,n)=>{t[e]=n},oA=({values:t},e,n)=>{t[e]=n},QL=({values:t},e,n)=>{t[e]=jEe(n)},HEe=(t,e,n)=>{switch(t.type.precision){case Ln.HALF:return QL(t,e,n);case Ln.SINGLE:case Ln.DOUBLE:return oA(t,e,n)}},GL=({values:t},e,n)=>{VEe(t,e,n.valueOf())},JL=({values:t},e,n)=>{t[e]=BigInt(n)},XEe=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},e$=({values:t,valueOffsets:e},n,r)=>ZL(t,e,n,r),t$=({values:t,valueOffsets:e},n,r)=>ZL(t,e,n,tA(r)),YEe=(t,e,n)=>{t.type.unit===ci.DAY?GL(t,e,n):JL(t,e,n)},n$=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},r$=({values:t},e,n)=>{t[e]=BigInt(n)},i$=({values:t},e,n)=>{t[e]=BigInt(n*1e3)},s$=({values:t},e,n)=>{t[e]=BigInt(n*1e6)},KEe=(t,e,n)=>{switch(t.type.unit){case Ie.SECOND:return n$(t,e,n);case Ie.MILLISECOND:return r$(t,e,n);case Ie.MICROSECOND:return i$(t,e,n);case Ie.NANOSECOND:return s$(t,e,n)}},o$=({values:t},e,n)=>{t[e]=n},a$=({values:t},e,n)=>{t[e]=n},l$=({values:t},e,n)=>{t[e]=n},c$=({values:t},e,n)=>{t[e]=n},qEe=(t,e,n)=>{switch(t.type.unit){case Ie.SECOND:return o$(t,e,n);case Ie.MILLISECOND:return a$(t,e,n);case Ie.MICROSECOND:return l$(t,e,n);case Ie.NANOSECOND:return c$(t,e,n)}},ZEe=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},QEe=(t,e,n)=>{const r=t.children[0],i=t.valueOffsets,s=ui.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n.get(++o))},GEe=(t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,s=ui.getVisitFn(r);let{[e]:o,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(s(r,o,c),++o>=a)break},JEe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[s]),eAe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(s)),tAe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(i.name)),nAe=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[i.name]),rAe=(t,e,n)=>{const r=t.type.children.map(s=>ui.getVisitFn(s.type)),i=n instanceof Map?tAe(e,n):n instanceof mt?eAe(e,n):Array.isArray(n)?JEe(e,n):nAe(e,n);t.type.children.forEach((s,o)=>i(r[o],t.children[o],s,o))},iAe=(t,e,n)=>{t.type.mode===gr.Dense?u$(t,e,n):f$(t,e,n)},u$=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];ui.visit(i,t.valueOffsets[e],n)},f$=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];ui.visit(i,e,n)},sAe=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},oAe=(t,e,n)=>{t.type.unit===As.DAY_TIME?d$(t,e,n):h$(t,e,n)},d$=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},h$=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},p$=({values:t},e,n)=>{t[e]=n},g$=({values:t},e,n)=>{t[e]=n},_$=({values:t},e,n)=>{t[e]=n},m$=({values:t},e,n)=>{t[e]=n},aAe=(t,e,n)=>{switch(t.type.unit){case Ie.SECOND:return p$(t,e,n);case Ie.MILLISECOND:return g$(t,e,n);case Ie.MICROSECOND:return _$(t,e,n);case Ie.NANOSECOND:return m$(t,e,n)}},lAe=(t,e,n)=>{const{stride:r}=t,i=t.children[0],s=ui.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)s(i,a+o,n.get(o))};Me.prototype.visitBool=ke(WEe);Me.prototype.visitInt=ke(vo);Me.prototype.visitInt8=ke(vo);Me.prototype.visitInt16=ke(vo);Me.prototype.visitInt32=ke(vo);Me.prototype.visitInt64=ke(vo);Me.prototype.visitUint8=ke(vo);Me.prototype.visitUint16=ke(vo);Me.prototype.visitUint32=ke(vo);Me.prototype.visitUint64=ke(vo);Me.prototype.visitFloat=ke(HEe);Me.prototype.visitFloat16=ke(QL);Me.prototype.visitFloat32=ke(oA);Me.prototype.visitFloat64=ke(oA);Me.prototype.visitUtf8=ke(t$);Me.prototype.visitLargeUtf8=ke(t$);Me.prototype.visitBinary=ke(e$);Me.prototype.visitLargeBinary=ke(e$);Me.prototype.visitFixedSizeBinary=ke(XEe);Me.prototype.visitDate=ke(YEe);Me.prototype.visitDateDay=ke(GL);Me.prototype.visitDateMillisecond=ke(JL);Me.prototype.visitTimestamp=ke(KEe);Me.prototype.visitTimestampSecond=ke(n$);Me.prototype.visitTimestampMillisecond=ke(r$);Me.prototype.visitTimestampMicrosecond=ke(i$);Me.prototype.visitTimestampNanosecond=ke(s$);Me.prototype.visitTime=ke(qEe);Me.prototype.visitTimeSecond=ke(o$);Me.prototype.visitTimeMillisecond=ke(a$);Me.prototype.visitTimeMicrosecond=ke(l$);Me.prototype.visitTimeNanosecond=ke(c$);Me.prototype.visitDecimal=ke(ZEe);Me.prototype.visitList=ke(QEe);Me.prototype.visitStruct=ke(rAe);Me.prototype.visitUnion=ke(iAe);Me.prototype.visitDenseUnion=ke(u$);Me.prototype.visitSparseUnion=ke(f$);Me.prototype.visitDictionary=ke(sAe);Me.prototype.visitInterval=ke(oAe);Me.prototype.visitIntervalDayTime=ke(d$);Me.prototype.visitIntervalYearMonth=ke(h$);Me.prototype.visitDuration=ke(aAe);Me.prototype.visitDurationSecond=ke(p$);Me.prototype.visitDurationMillisecond=ke(g$);Me.prototype.visitDurationMicrosecond=ke(_$);Me.prototype.visitDurationNanosecond=ke(m$);Me.prototype.visitFixedSizeList=ke(lAe);Me.prototype.visitMap=ke(GEe);const ui=new Me,vi=Symbol.for("parent"),$u=Symbol.for("rowIndex");class aA{constructor(e,n){return this[vi]=e,this[$u]=n,new Proxy(this,new uAe)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[$u],n=this[vi],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=_r.visit(n.children[s],e);return i}toString(){return`{${[...this].map(([e,n])=>`${Xp(e)}: ${Xp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new cAe(this[vi],this[$u])}}class cAe{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,_r.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(aA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[$u]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class uAe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[vi].type.children.map(n=>n.name)}has(e,n){return e[vi].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[vi].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[vi].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=_r.visit(e[vi].children[r],e[$u]);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[vi].type.children.findIndex(s=>s.name===n);return i!==-1?(ui.visit(e[vi].children[i],e[$u],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class Ae extends Ze{}function Oe(t){return(e,n)=>e.getValid(n)?t(e,n):null}const fAe=(t,e)=>864e5*t[e],dAe=(t,e)=>null,y$=(t,e,n)=>{if(n+1>=e.length)return null;const r=kt(e[n]),i=kt(e[n+1]);return t.subarray(r,i)},hAe=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},v$=({values:t},e)=>fAe(t,e),b$=({values:t},e)=>kt(t[e]),ja=({stride:t,values:e},n)=>e[t*n],pAe=({stride:t,values:e},n)=>qL(e[t*n]),w$=({values:t},e)=>t[e],gAe=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),S$=({values:t,valueOffsets:e},n)=>y$(t,e,n),x$=({values:t,valueOffsets:e},n)=>{const r=y$(t,e,n);return r!==null?ex(r):null},_Ae=({values:t},e)=>t[e],mAe=({type:t,values:e},n)=>t.precision!==Ln.HALF?e[n]:qL(e[n]),yAe=(t,e)=>t.type.unit===ci.DAY?v$(t,e):b$(t,e),T$=({values:t},e)=>1e3*kt(t[e]),E$=({values:t},e)=>kt(t[e]),A$=({values:t},e)=>TL(t[e],BigInt(1e3)),C$=({values:t},e)=>TL(t[e],BigInt(1e6)),vAe=(t,e)=>{switch(t.type.unit){case Ie.SECOND:return T$(t,e);case Ie.MILLISECOND:return E$(t,e);case Ie.MICROSECOND:return A$(t,e);case Ie.NANOSECOND:return C$(t,e)}},R$=({values:t},e)=>t[e],P$=({values:t},e)=>t[e],I$=({values:t},e)=>t[e],M$=({values:t},e)=>t[e],bAe=(t,e)=>{switch(t.type.unit){case Ie.SECOND:return R$(t,e);case Ie.MILLISECOND:return P$(t,e);case Ie.MICROSECOND:return I$(t,e);case Ie.NANOSECOND:return M$(t,e)}},wAe=({values:t,stride:e},n)=>sA.decimal(t.subarray(e*n,e*(n+1))),SAe=(t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:s,[e*r+1]:o}=n,l=i[0].slice(s,o-s);return new mt([l])},xAe=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:s}=n,o=r[0];return new lA(o.slice(i,s-i))},TAe=(t,e)=>new aA(t,e),EAe=(t,e)=>t.type.mode===gr.Dense?O$(t,e):N$(t,e),O$=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return _r.visit(r,t.valueOffsets[e])},N$=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return _r.visit(r,e)},AAe=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},CAe=(t,e)=>t.type.unit===As.DAY_TIME?k$(t,e):D$(t,e),k$=({values:t},e)=>t.subarray(2*e,2*(e+1)),D$=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},F$=({values:t},e)=>t[e],B$=({values:t},e)=>t[e],L$=({values:t},e)=>t[e],$$=({values:t},e)=>t[e],RAe=(t,e)=>{switch(t.type.unit){case Ie.SECOND:return F$(t,e);case Ie.MILLISECOND:return B$(t,e);case Ie.MICROSECOND:return L$(t,e);case Ie.NANOSECOND:return $$(t,e)}},PAe=(t,e)=>{const{stride:n,children:r}=t,s=r[0].slice(e*n,n);return new mt([s])};Ae.prototype.visitNull=Oe(dAe);Ae.prototype.visitBool=Oe(hAe);Ae.prototype.visitInt=Oe(_Ae);Ae.prototype.visitInt8=Oe(ja);Ae.prototype.visitInt16=Oe(ja);Ae.prototype.visitInt32=Oe(ja);Ae.prototype.visitInt64=Oe(w$);Ae.prototype.visitUint8=Oe(ja);Ae.prototype.visitUint16=Oe(ja);Ae.prototype.visitUint32=Oe(ja);Ae.prototype.visitUint64=Oe(w$);Ae.prototype.visitFloat=Oe(mAe);Ae.prototype.visitFloat16=Oe(pAe);Ae.prototype.visitFloat32=Oe(ja);Ae.prototype.visitFloat64=Oe(ja);Ae.prototype.visitUtf8=Oe(x$);Ae.prototype.visitLargeUtf8=Oe(x$);Ae.prototype.visitBinary=Oe(S$);Ae.prototype.visitLargeBinary=Oe(S$);Ae.prototype.visitFixedSizeBinary=Oe(gAe);Ae.prototype.visitDate=Oe(yAe);Ae.prototype.visitDateDay=Oe(v$);Ae.prototype.visitDateMillisecond=Oe(b$);Ae.prototype.visitTimestamp=Oe(vAe);Ae.prototype.visitTimestampSecond=Oe(T$);Ae.prototype.visitTimestampMillisecond=Oe(E$);Ae.prototype.visitTimestampMicrosecond=Oe(A$);Ae.prototype.visitTimestampNanosecond=Oe(C$);Ae.prototype.visitTime=Oe(bAe);Ae.prototype.visitTimeSecond=Oe(R$);Ae.prototype.visitTimeMillisecond=Oe(P$);Ae.prototype.visitTimeMicrosecond=Oe(I$);Ae.prototype.visitTimeNanosecond=Oe(M$);Ae.prototype.visitDecimal=Oe(wAe);Ae.prototype.visitList=Oe(SAe);Ae.prototype.visitStruct=Oe(TAe);Ae.prototype.visitUnion=Oe(EAe);Ae.prototype.visitDenseUnion=Oe(O$);Ae.prototype.visitSparseUnion=Oe(N$);Ae.prototype.visitDictionary=Oe(AAe);Ae.prototype.visitInterval=Oe(CAe);Ae.prototype.visitIntervalDayTime=Oe(k$);Ae.prototype.visitIntervalYearMonth=Oe(D$);Ae.prototype.visitDuration=Oe(RAe);Ae.prototype.visitDurationSecond=Oe(F$);Ae.prototype.visitDurationMillisecond=Oe(B$);Ae.prototype.visitDurationMicrosecond=Oe(L$);Ae.prototype.visitDurationNanosecond=Oe($$);Ae.prototype.visitFixedSizeList=Oe(PAe);Ae.prototype.visitMap=Oe(xAe);const _r=new Ae,Wc=Symbol.for("keys"),Uu=Symbol.for("vals"),Hc=Symbol.for("kKeysAsStrings"),ox=Symbol.for("_kKeysAsStrings");class lA{constructor(e){return this[Wc]=new mt([e.children[0]]).memoize(),this[Uu]=e.children[1],new Proxy(this,new MAe)}get[Hc](){return this[ox]||(this[ox]=Array.from(this[Wc].toArray(),String))}[Symbol.iterator](){return new IAe(this[Wc],this[Uu])}get size(){return this[Wc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Wc],n=this[Uu],r={};for(let i=-1,s=e.length;++i<s;)r[e.get(i)]=_r.visit(n,i);return r}toString(){return`{${[...this].map(([e,n])=>`${Xp(e)}: ${Xp(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class IAe{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),_r.visit(this.vals,e)]})}}class MAe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Hc]}has(e,n){return e[Hc].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Hc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Hc].indexOf(n);if(r!==-1){const i=_r.visit(Reflect.get(e,Uu),r);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Hc].indexOf(n);return i!==-1?(ui.visit(Reflect.get(e,Uu),i,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(lA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Uu]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ox]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let kM;function U$(t,e,n,r){const{length:i=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(kM=s,s=o,o=kM),o>i&&(o=i),r?r(t,s,o):[s,o]}const cA=(t,e)=>t<0?e+t:t,DM=t=>t!==t;function nd(t){if(typeof t!=="object"||t===null)return DM(t)?DM:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?PEe(t,n):!1:t instanceof Map?NAe(t):Array.isArray(t)?OAe(t):t instanceof mt?kAe(t):DAe(t,!0)}function OAe(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=nd(t[n]);return Q1(e)}function NAe(t){let e=-1;const n=[];for(const r of t.values())n[++e]=nd(r);return Q1(n)}function kAe(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=nd(t.get(n));return Q1(e)}function DAe(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=nd(t[n[i]]);return Q1(r,n)}function Q1(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return FAe(t,n);case Map:return FM(t,n,n.keys());case lA:case aA:case Object:case void 0:return FM(t,n,e||Object.keys(n))}return n instanceof mt?BAe(t,n):!1}}function FAe(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function BAe(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function FM(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),c=r.next(),u=i.next();for(;o<a&&!c.done&&!u.done&&!l.done&&!(c.value!==u.value||!t[o](l.value));++o,c=r.next(),u=i.next(),l=s.next());return o===a&&c.done&&u.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function z$(t,e,n,r){return(n&1<<r)!==0}function LAe(t,e,n,r){return(n&1<<r)>>r}function BM(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):ax(new uA(n,t,e,null,z$)).subarray(0,r)),i}return n}function ax(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class uA{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function lx(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new uA(t,e,n-e,t,LAe))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return lx(t,e,i)+lx(t,r,n)+$Ae(t,i>>3,r-i>>3)}function $Ae(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=e2(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=e2(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=e2(s.getUint8(i)),i+=1;return r}function e2(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const UAe=-1;class ut{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return we.isSparseUnion(e)?this.children.some(n=>n.nullable):we.isDenseUnion(e)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){if(we.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let e=this._nullCount,n;return e<=UAe&&(n=this.nullBitmap)&&(this._nullCount=e=n.length===0?0:this.length-lx(n,this.offset,this.offset+this.length)),e}constructor(e,n,r,i,s,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof ut?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=zs(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(e){const{type:n}=this;if(we.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===gr.Dense?this.valueOffsets[e]:e;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+e;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(e,n){let r;const{type:i}=this;if(we.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[e]]],a=s.mode===gr.Dense?this.valueOffsets[e]:e;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+e,c=1<<l%8,u=l>>3;(!s||s.byteLength<=u)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0?(s.set(BM(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const f=s[u];r=(f&c)!==0,s[u]=n?f|c:f&~c}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(e=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new ut(e,n,r,i,s,o,this.dictionary)}slice(e,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(e,n,r,i);return this.clone(this.type,this.offset+e,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===B.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(BM(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Us.VALIDITY]=i,this.clone(this.type,0,e,r+(e-n),s)}_sliceBuffers(e,n,r,i){let s;const{buffers:o}=this;return(s=o[Us.TYPE])&&(o[Us.TYPE]=s.subarray(e,e+n)),(s=o[Us.OFFSET])&&(o[Us.OFFSET]=s.subarray(e,e+n+1))||(s=o[Us.DATA])&&(o[Us.DATA]=i===6?s:s.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(i=>i.slice(n,r))}}ut.prototype.children=Object.freeze([]);class Uh extends Ze{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=e;return new ut(n,r,i,i)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.data),s=tt(e.nullBitmap),o=Wd(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,i,s])}visitLargeUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.data),s=tt(e.nullBitmap),o=xM(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,i,s])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.data),s=tt(e.nullBitmap),o=Wd(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,i,s])}visitLargeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.data),s=tt(e.nullBitmap),o=xM(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,i,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:i}=e,s=tt(e.nullBitmap),o=Wd(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,void 0,s],[i])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=tt(e.nullBitmap),{length:o=i.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,void 0,s],i)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=dt(n.ArrayType,e.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=e;if(we.isSparseUnion(n))return new ut(n,r,o,a,[void 0,void 0,void 0,s],i);const l=Wd(e.valueOffsets);return new ut(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.indices.ArrayType,e.data),{["dictionary"]:o=new mt([new Uh().visit({type:n.dictionary})])}=e,{["length"]:a=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[void 0,s,i],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitDuration(e){const{["type"]:n,["offset"]:r=0}=e,i=tt(e.nullBitmap),s=dt(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,s,i])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new Uh().visit({type:n.valueType})}=e,s=tt(e.nullBitmap),{["length"]:o=i.length/zs(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new ut(n,r,o,a,[void 0,void 0,s],[i])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new Uh().visit({type:n.childType})}=e,s=tt(e.nullBitmap),o=Wd(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new ut(n,r,a,l,[o,void 0,s],[i])}}const zAe=new Uh;function Ye(t){return zAe.visit(t)}class LM{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function jAe(t){return t.some(e=>e.nullable)}function j$(t){return t.reduce((e,n)=>e+n.nullCount,0)}function V$(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function W$(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:c}=a;if(l>=r)break;if(n>=l+c)continue;if(l>=n&&l+c<=r){i.push(a);continue}const u=Math.max(0,n-l),f=Math.min(r-l,c);i.push(a.slice(u,f-u))}return i.length===0&&i.push(t[0].slice(0,0)),i}function fA(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}function dA(t,e){return t.getValid(e)}function Ty(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return fA(r,this._offsets,n,e)}}function H$(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=fA(s,this._offsets,r,n);return e=void 0,o}}function X$(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let c=i-1,u=r.length;++c<u;){const f=r[c];if(~(a=t(f,e,o)))return l+a;o=0,l+=f.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):fA(s,this._offsets,i,n);return e=void 0,o}}class Ce extends Ze{}function VAe(t,e){return e===null&&t.length>0?0:-1}function WAe(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new uA(n,t.offset+(e||0),t.length,n,z$)){if(!i)return r;++r}return-1}function De(t,e,n){if(e===void 0)return-1;if(e===null)switch(t.typeId){case B.Union:break;case B.Dictionary:break;default:return WAe(t,n)}const r=_r.getVisitFn(t),i=nd(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}function Y$(t,e,n){const r=_r.getVisitFn(t),i=nd(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}Ce.prototype.visitNull=VAe;Ce.prototype.visitBool=De;Ce.prototype.visitInt=De;Ce.prototype.visitInt8=De;Ce.prototype.visitInt16=De;Ce.prototype.visitInt32=De;Ce.prototype.visitInt64=De;Ce.prototype.visitUint8=De;Ce.prototype.visitUint16=De;Ce.prototype.visitUint32=De;Ce.prototype.visitUint64=De;Ce.prototype.visitFloat=De;Ce.prototype.visitFloat16=De;Ce.prototype.visitFloat32=De;Ce.prototype.visitFloat64=De;Ce.prototype.visitUtf8=De;Ce.prototype.visitLargeUtf8=De;Ce.prototype.visitBinary=De;Ce.prototype.visitLargeBinary=De;Ce.prototype.visitFixedSizeBinary=De;Ce.prototype.visitDate=De;Ce.prototype.visitDateDay=De;Ce.prototype.visitDateMillisecond=De;Ce.prototype.visitTimestamp=De;Ce.prototype.visitTimestampSecond=De;Ce.prototype.visitTimestampMillisecond=De;Ce.prototype.visitTimestampMicrosecond=De;Ce.prototype.visitTimestampNanosecond=De;Ce.prototype.visitTime=De;Ce.prototype.visitTimeSecond=De;Ce.prototype.visitTimeMillisecond=De;Ce.prototype.visitTimeMicrosecond=De;Ce.prototype.visitTimeNanosecond=De;Ce.prototype.visitDecimal=De;Ce.prototype.visitList=De;Ce.prototype.visitStruct=De;Ce.prototype.visitUnion=De;Ce.prototype.visitDenseUnion=Y$;Ce.prototype.visitSparseUnion=Y$;Ce.prototype.visitDictionary=De;Ce.prototype.visitInterval=De;Ce.prototype.visitIntervalDayTime=De;Ce.prototype.visitIntervalYearMonth=De;Ce.prototype.visitDuration=De;Ce.prototype.visitDurationSecond=De;Ce.prototype.visitDurationMillisecond=De;Ce.prototype.visitDurationMicrosecond=De;Ce.prototype.visitDurationNanosecond=De;Ce.prototype.visitFixedSizeList=De;Ce.prototype.visitMap=De;const Ey=new Ce;class Re extends Ze{}function Ne(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(we.isInt(e)&&e.bitWidth!==64||we.isTime(e)&&e.bitWidth!==64||we.isFloat(e)&&e.precision!==Ln.HALF))return new LM(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new LM(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new HAe(o)})}class HAe{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Re.prototype.visitNull=Ne;Re.prototype.visitBool=Ne;Re.prototype.visitInt=Ne;Re.prototype.visitInt8=Ne;Re.prototype.visitInt16=Ne;Re.prototype.visitInt32=Ne;Re.prototype.visitInt64=Ne;Re.prototype.visitUint8=Ne;Re.prototype.visitUint16=Ne;Re.prototype.visitUint32=Ne;Re.prototype.visitUint64=Ne;Re.prototype.visitFloat=Ne;Re.prototype.visitFloat16=Ne;Re.prototype.visitFloat32=Ne;Re.prototype.visitFloat64=Ne;Re.prototype.visitUtf8=Ne;Re.prototype.visitLargeUtf8=Ne;Re.prototype.visitBinary=Ne;Re.prototype.visitLargeBinary=Ne;Re.prototype.visitFixedSizeBinary=Ne;Re.prototype.visitDate=Ne;Re.prototype.visitDateDay=Ne;Re.prototype.visitDateMillisecond=Ne;Re.prototype.visitTimestamp=Ne;Re.prototype.visitTimestampSecond=Ne;Re.prototype.visitTimestampMillisecond=Ne;Re.prototype.visitTimestampMicrosecond=Ne;Re.prototype.visitTimestampNanosecond=Ne;Re.prototype.visitTime=Ne;Re.prototype.visitTimeSecond=Ne;Re.prototype.visitTimeMillisecond=Ne;Re.prototype.visitTimeMicrosecond=Ne;Re.prototype.visitTimeNanosecond=Ne;Re.prototype.visitDecimal=Ne;Re.prototype.visitList=Ne;Re.prototype.visitStruct=Ne;Re.prototype.visitUnion=Ne;Re.prototype.visitDenseUnion=Ne;Re.prototype.visitSparseUnion=Ne;Re.prototype.visitDictionary=Ne;Re.prototype.visitInterval=Ne;Re.prototype.visitIntervalDayTime=Ne;Re.prototype.visitIntervalYearMonth=Ne;Re.prototype.visitDuration=Ne;Re.prototype.visitDurationSecond=Ne;Re.prototype.visitDurationMillisecond=Ne;Re.prototype.visitDurationMicrosecond=Ne;Re.prototype.visitDurationNanosecond=Ne;Re.prototype.visitFixedSizeList=Ne;Re.prototype.visitMap=Ne;const hA=new Re;var K$;const q$={},Z$={};class mt{constructor(e){var n,r,i;const s=e[0]instanceof mt?e.flatMap(a=>a.data):e;if(s.length===0||s.some(a=>!(a instanceof ut)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:c}=q$[o.typeId],u=s[0];this.isValid=f=>dA(u,f),this.get=f=>a(u,f),this.set=(f,d)=>l(u,f,d),this.indexOf=f=>c(u,f),this._offsets=[0,u.length];break}default:Object.setPrototypeOf(this,Z$[o.typeId]),this._offsets=V$(s);break}this.data=s,this.type=o,this.stride=zs(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,n)=>e+n.byteLength,0)}get nullable(){return jAe(this.data)}get nullCount(){return j$(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${B[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(cA(e,this.length))}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>-1}[Symbol.iterator](){return hA.visit(this)}concat(...e){return new mt(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new mt(U$(this,e,n,({data:r,_offsets:i},s,o)=>W$(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:i,ArrayType:s}=this;switch(e.typeId){case B.Int:case B.Float:case B.Decimal:case B.Time:case B.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new mt(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return we.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(we.isDictionary(this.type)){const e=new Ay(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new mt(n)}return new Ay(this)}unmemoize(){if(we.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new mt(n)}return this}}K$=Symbol.toStringTag;mt[K$]=(t=>{t.type=we.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(B).map(n=>B[n]).filter(n=>typeof n=="number"&&n!==B.NONE);for(const n of e){const r=_r.getVisitFnByTypeId(n),i=ui.getVisitFnByTypeId(n),s=Ey.getVisitFnByTypeId(n);q$[n]={get:r,set:i,indexOf:s},Z$[n]=Object.create(t,{isValid:{value:Ty(dA)},get:{value:Ty(_r.getVisitFnByTypeId(n))},set:{value:H$(ui.getVisitFnByTypeId(n))},indexOf:{value:X$(Ey.getVisitFnByTypeId(n))}})}return"Vector"})(mt.prototype);class Ay extends mt{constructor(e){super(e.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Ay(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class cx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(BigInt(i??0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(n??0)),e.offset()}}class Tr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Tr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+ct),(n||new Tr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):on.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new es).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new cx).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new cx).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,on.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class lt{constructor(e=[],n,r,i=on.V5){this.fields=e||[],this.metadata=n||new Map,r||(r=ux(e)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new lt(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new lt(n,this.metadata)}assign(...e){const n=e[0]instanceof lt?e[0]:Array.isArray(e[0])?new lt(e[0]):new lt(e),r=[...this.fields],i=j_(j_(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(c=>c.name===a.name);return~l?(r[l]=a.clone({metadata:j_(j_(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=ux(s,new Map);return new lt([...r,...s],i,new Map([...this.dictionaries,...o]))}}lt.prototype.fields=null;lt.prototype.metadata=null;lt.prototype.dictionaries=null;class Dt{static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new Dt(`${n}`,r,i,s)}constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],Dt.new(n,r,i,s)}}Dt.prototype.type=null;Dt.prototype.name=null;Dt.prototype.nullable=null;Dt.prototype.metadata=null;function j_(t,e){return new Map([...t||new Map,...e||new Map])}function ux(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(we.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&ux(s.children,e)}return e}var XAe=bL,YAe=Mf;class pA{static decode(e){e=new YAe(tt(e));const n=Tr.getRootAsFooter(e),r=lt.decode(n.schema(),new Map,n.version());return new KAe(r,n)}static encode(e){const n=new XAe,r=lt.encode(n,e.schema);Tr.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())kf.encode(n,o);const i=n.endVector();Tr.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())kf.encode(n,o);const s=n.endVector();return Tr.startFooter(n),Tr.addSchema(n,r),Tr.addVersion(n,on.V5),Tr.addRecordBatches(n,i),Tr.addDictionaries(n,s),Tr.finishFooterBuffer(n,Tr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=on.V5,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class KAe extends pA{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return kf.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return kf.decode(n)}return null}}class kf{static decode(e){return new kf(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return cx.createBlock(e,i,r,s)}constructor(e,n,r){this.metaDataLength=e,this.offset=kt(r),this.bodyLength=kt(n)}}const Vt=Object.freeze({done:!0,value:void 0});class $M{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Q${tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class qAe extends Q${constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return $e(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Vt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Kr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Kr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return $e(this,void 0,void 0,function*(){return yield this.abort(e),Vt})}return(e){return $e(this,void 0,void 0,function*(){return yield this.close(),Vt})}read(e){return $e(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return $e(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Vt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ZAe extends qAe{write(e){if((e=tt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?ex(this.toUint8Array(!0)):this.toUint8Array(!1).then(ex)}toUint8Array(e=!1){return e?Es(this._values)[0]:$e(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,c=Iu(this),u;u=yield c.next(),n=u.done,!n;l=!0){s=u.value,l=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}return Es(o,a)[0]})}}class Cy{constructor(e){e&&(this.source=new QAe(Kr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Df{constructor(e){e instanceof Df?this.source=e.source:e instanceof ZAe?this.source=new Ga(Kr.fromAsyncIterable(e)):mL(e)?this.source=new Ga(Kr.fromNodeStream(e)):rA(e)?this.source=new Ga(Kr.fromDOMStream(e)):gL(e)?this.source=new Ga(Kr.fromDOMStream(e.body)):Z1(e)?this.source=new Ga(Kr.fromIterable(e)):Hp(e)?this.source=new Ga(Kr.fromAsyncIterable(e)):nA(e)&&(this.source=new Ga(Kr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class QAe{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Vt)}return(e){return Object.create(this.source.return&&this.source.return(e)||Vt)}}class Ga{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return $e(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return $e(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return $e(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return $e(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(e){return $e(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Vt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return $e(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Vt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class UM extends Cy{constructor(e,n){super(),this.position=0,this.buffer=tt(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Ry extends Df{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=$e(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return $e(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return $e(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return $e(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),c=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<c.byteLength;)({bytesRead:a}=yield n.read(c,o,c.byteLength-o,s));return c}return null})}readAt(e,n){return $e(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return $e(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return $e(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return $e(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const GAe=65536;function gu(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Ff=8,gA=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class G${constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?GAe:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${gu(this.buffer[1])} ${gu(this.buffer[0])}`}}class ft extends G${times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return ft.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return ft.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new ft(n);for(let s=0;s<r;){const o=Ff<r-s?Ff:r-s,a=new ft(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new ft(new Uint32Array([gA[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)ft.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new ft(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ft(new Uint32Array(e.buffer)).plus(n)}}class sr extends G${negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return sr.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return sr.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new sr(n);for(let o=r?1:0;o<i;){const a=Ff<i-o?Ff:i-o,l=new sr(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),c=new sr(new Uint32Array([gA[a],0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)sr.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new sr(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new sr(new Uint32Array(e.buffer)).plus(n)}}class ts{constructor(e){this.buffer=e}high(){return new sr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new sr(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new ft(new Uint32Array([this.buffer[3],0])),r=new ft(new Uint32Array([this.buffer[2],0])),i=new ft(new Uint32Array([this.buffer[1],0])),s=new ft(new Uint32Array([this.buffer[0],0])),o=new ft(new Uint32Array([e.buffer[3],0])),a=new ft(new Uint32Array([e.buffer[2],0])),l=new ft(new Uint32Array([e.buffer[1],0])),c=new ft(new Uint32Array([e.buffer[0],0]));let u=ft.multiply(s,c);this.buffer[0]=u.low();const f=new ft(new Uint32Array([u.high(),0]));return u=ft.multiply(i,c),f.plus(u),u=ft.multiply(s,l),f.plus(u),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(u)?1:0,this.buffer[2]=f.high(),new ft(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ft.multiply(r,c)).plus(ft.multiply(i,l)).plus(ft.multiply(s,a)),this.buffer[3]+=ft.multiply(n,c).plus(ft.multiply(r,l)).plus(ft.multiply(i,a)).plus(ft.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${gu(this.buffer[3])} ${gu(this.buffer[2])} ${gu(this.buffer[1])} ${gu(this.buffer[0])}`}static multiply(e,n){return new ts(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ts(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return ts.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return ts.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new ts(n);for(let o=r?1:0;o<i;){const a=Ff<i-o?Ff:i-o,l=new ts(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),c=new ts(new Uint32Array([gA[a],0,0,0]));s.times(c),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)ts.from(e[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class J$ extends Ze{constructor(e,n,r,i,s=on.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(e){return super.visit(e instanceof Dt?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ye({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<on.V5&&this.readNullBitmap(e,r),e.mode===gr.Sparse?this.visitSparseUnion(e,{length:n,nullCount:r}):this.visitDenseUnion(e,{length:n,nullCount:r})}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return Ye({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class JAe extends J${constructor(e,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):ax(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return dt(Uint8Array,dt(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return dt(Uint8Array,dt(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return we.isTimestamp(e)||(we.isInt(e)||we.isTime(e))&&e.bitWidth===64||we.isDuration(e)||we.isDate(e)&&e.unit===ci.MILLISECOND?dt(Uint8Array,sr.convertArray(r[n])):we.isDecimal(e)?dt(Uint8Array,ts.convertArray(r[n])):we.isBinary(e)||we.isLargeBinary(e)||we.isFixedSizeBinary(e)?eCe(r[n]):we.isBool(e)?ax(r[n]):we.isUtf8(e)||we.isLargeUtf8(e)?tA(r[n].join("")):dt(Uint8Array,dt(e.ArrayType,r[n].map(i=>+i)))}}function eCe(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class Pe extends Ze{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,i)=>this.compareFields(r,n[i]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Jn(t,e){return e instanceof t.constructor}function uc(t,e){return t===e||Jn(t,e)}function bo(t,e){return t===e||Jn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function G1(t,e){return t===e||Jn(t,e)&&t.precision===e.precision}function tCe(t,e){return t===e||Jn(t,e)&&t.byteWidth===e.byteWidth}function _A(t,e){return t===e||Jn(t,e)&&t.unit===e.unit}function Ag(t,e){return t===e||Jn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Cg(t,e){return t===e||Jn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function nCe(t,e){return t===e||Jn(t,e)&&t.children.length===e.children.length&&Ma.compareManyFields(t.children,e.children)}function rCe(t,e){return t===e||Jn(t,e)&&t.children.length===e.children.length&&Ma.compareManyFields(t.children,e.children)}function mA(t,e){return t===e||Jn(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&Ma.compareManyFields(t.children,e.children)}function iCe(t,e){return t===e||Jn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Ma.visit(t.indices,e.indices)&&Ma.visit(t.dictionary,e.dictionary)}function yA(t,e){return t===e||Jn(t,e)&&t.unit===e.unit}function Rg(t,e){return t===e||Jn(t,e)&&t.unit===e.unit}function sCe(t,e){return t===e||Jn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Ma.compareManyFields(t.children,e.children)}function oCe(t,e){return t===e||Jn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Ma.compareManyFields(t.children,e.children)}Pe.prototype.visitNull=uc;Pe.prototype.visitBool=uc;Pe.prototype.visitInt=bo;Pe.prototype.visitInt8=bo;Pe.prototype.visitInt16=bo;Pe.prototype.visitInt32=bo;Pe.prototype.visitInt64=bo;Pe.prototype.visitUint8=bo;Pe.prototype.visitUint16=bo;Pe.prototype.visitUint32=bo;Pe.prototype.visitUint64=bo;Pe.prototype.visitFloat=G1;Pe.prototype.visitFloat16=G1;Pe.prototype.visitFloat32=G1;Pe.prototype.visitFloat64=G1;Pe.prototype.visitUtf8=uc;Pe.prototype.visitLargeUtf8=uc;Pe.prototype.visitBinary=uc;Pe.prototype.visitLargeBinary=uc;Pe.prototype.visitFixedSizeBinary=tCe;Pe.prototype.visitDate=_A;Pe.prototype.visitDateDay=_A;Pe.prototype.visitDateMillisecond=_A;Pe.prototype.visitTimestamp=Ag;Pe.prototype.visitTimestampSecond=Ag;Pe.prototype.visitTimestampMillisecond=Ag;Pe.prototype.visitTimestampMicrosecond=Ag;Pe.prototype.visitTimestampNanosecond=Ag;Pe.prototype.visitTime=Cg;Pe.prototype.visitTimeSecond=Cg;Pe.prototype.visitTimeMillisecond=Cg;Pe.prototype.visitTimeMicrosecond=Cg;Pe.prototype.visitTimeNanosecond=Cg;Pe.prototype.visitDecimal=uc;Pe.prototype.visitList=nCe;Pe.prototype.visitStruct=rCe;Pe.prototype.visitUnion=mA;Pe.prototype.visitDenseUnion=mA;Pe.prototype.visitSparseUnion=mA;Pe.prototype.visitDictionary=iCe;Pe.prototype.visitInterval=yA;Pe.prototype.visitIntervalDayTime=yA;Pe.prototype.visitIntervalYearMonth=yA;Pe.prototype.visitDuration=Rg;Pe.prototype.visitDurationSecond=Rg;Pe.prototype.visitDurationMillisecond=Rg;Pe.prototype.visitDurationMicrosecond=Rg;Pe.prototype.visitDurationNanosecond=Rg;Pe.prototype.visitFixedSizeList=sCe;Pe.prototype.visitMap=oCe;const Ma=new Pe;function aCe(t,e){return Ma.compareSchemas(t,e)}function t2(t,e){return lCe(t,e.map(n=>n.data.concat()))}function lCe(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const l=e.length;let c,u=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=e[a].shift(),o=Math.min(o,c?c.length:o);Number.isFinite(o)&&(u=cCe(n,o,u,e,i),o>0&&(r[s++]=Ye({type:new Kn(n),length:o,nullCount:0,children:u.slice()})))}return[t=t.assign(n),r.map(f=>new Si(t,f))]}function cCe(t,e,n,r,i){var s;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const c=n[a],u=c==null?void 0:c.length;if(u>=e)u===e?n[a]=c:(n[a]=c.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(c.slice(e,u-e))));else{const f=t[a];t[a]=f.clone({nullable:!0}),n[a]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Ye({type:f.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var eU;class ei{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new lt([]),this._offsets=[0],this;let i,s;e[0]instanceof lt&&(i=e.shift()),e.at(-1)instanceof Uint32Array&&(s=e.pop());const o=l=>{if(l){if(l instanceof Si)return[l];if(l instanceof ei)return l.batches;if(l instanceof ut){if(l.type instanceof Kn)return[new Si(new lt(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>o(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>o(c));if(typeof l=="object"){const c=Object.keys(l),u=c.map(h=>new mt([l[h]])),f=i??new lt(c.map((h,p)=>new Dt(String(h),u[p].type,u[p].nullable))),[,d]=t2(f,u);return d.length===0?[new Si(l)]:d}}}return[]},a=e.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new lt([]),!(i instanceof lt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Si))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!aCe(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??V$(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=j$(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(cA(e,this.numRows))}set(e,n){}indexOf(e,n){return-1}[Symbol.iterator](){return this.batches.length>0?hA.visit(new mt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:i})=>i));return new ei(n,r.map(i=>new Si(n,i)))}slice(e,n){const r=this.schema;[e,n]=U$({length:this.numRows},e,n);const i=W$(this.data,this._offsets,e,n);return new ei(r,i.map(s=>new Si(r,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],i=Ye({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mt(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new mt([Ye({type:new Ia,length:this.numRows})]));const s=r.fields.slice(),o=s[e].clone({type:n.type}),a=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[e],a[e]]=[o,n],[r,i]=t2(r,a)}return new ei(r,i)}select(e){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(i=>i.selectAt(e));return new ei(n,r)}assign(e){const n=this.schema.fields,[r,i]=e.schema.fields.reduce((a,l,c)=>{const[u,f]=a,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=c:u.push(c),a},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new ei(...t2(s,o))}}eU=Symbol.toStringTag;ei[eU]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Ty(dA),t.get=Ty(_r.getVisitFn(B.Struct)),t.set=H$(ui.getVisitFn(B.Struct)),t.indexOf=X$(Ey.getVisitFn(B.Struct)),"Table"))(ei.prototype);var tU;let Si=class yh{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof lt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ye({nullCount:0,type:new Kn(this.schema.fields),children:this.schema.fields.map(n=>Ye({type:n.type,nullCount:0}))})]=e,!(this.data instanceof ut))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=zM(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,c,u)=>(l.children[u]=n[c],l.length=Math.max(l.length,n[c].length),l.fields[u]=Dt.new({name:c,type:n[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new lt(r),a=Ye({type:new Kn(r),length:s,children:i,nullCount:0});[this.schema,this.data]=zM(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=nU(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return _r.visit(this.data,e)}at(e){return this.get(cA(e,this.numRows))}set(e,n){return ui.visit(this.data,e,n)}indexOf(e,n){return Ey.visit(this.data,e,n)}[Symbol.iterator](){return hA.visit(new mt([this.data]))}toArray(){return[...this]}concat(...e){return new ei(this.schema,[this,...e])}slice(e,n){const[r]=new mt([this.data]).slice(e,n).data;return new yh(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new mt([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){n||(n=new mt([Ye({type:new Ia,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[e].clone({type:n.type});[s[e],o[e]]=[a,n.data[0]],r=new lt(s,new Map(this.schema.metadata)),i=Ye({type:new Kn(s),children:o})}return new yh(r,i)}select(e){const n=this.schema.select(e),r=new Kn(n.fields),i=[];for(const s of e){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new yh(n,Ye({type:r,length:this.numRows,children:i}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(s=>this.data.children[s]).filter(Boolean),i=Ye({type:new Kn(n.fields),length:this.numRows,children:r});return new yh(n,i)}};tU=Symbol.toStringTag;Si[tU]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Si.prototype);function zM(t,e,n=e.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const c=e[a];(!c||c.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=c==null?void 0:c._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ye({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(i),Ye({type:new Kn(i),length:n,children:s})]}function nU(t,e,n=new Map){var r,i;if(((r=t==null?void 0:t.length)!==null&&r!==void 0?r:0)>0&&(t==null?void 0:t.length)===(e==null?void 0:e.length))for(let s=-1,o=t.length;++s<o;){const{type:a}=t[s],l=e[s];for(const c of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])nU(a.children,c==null?void 0:c.children,n);if(we.isDictionary(a)){const{id:c}=a;if(!n.has(c))l!=null&&l.dictionary&&n.set(c,l.dictionary);else if(n.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class rU extends Si{constructor(e){const n=e.fields.map(i=>Ye({type:i.type})),r=Ye({type:new Kn(e.fields),nullCount:0,children:n});super(e,r)}}let Do=class Gi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Gi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+ct),(n||new Gi).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):on.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):at.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,on.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,at.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return Gi.startMessage(e),Gi.addVersion(e,n),Gi.addHeaderType(e,r),Gi.addHeader(e,i),Gi.addBodyLength(e,s),Gi.addCustomMetadata(e,o),Gi.endMessage(e)}};class uCe extends Ze{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return MM.startNull(n),MM.endNull(n)}visitInt(e,n){return Ir.startInt(n),Ir.addBitWidth(n,e.bitWidth),Ir.addIsSigned(n,e.isSigned),Ir.endInt(n)}visitFloat(e,n){return fs.startFloatingPoint(n),fs.addPrecision(n,e.precision),fs.endFloatingPoint(n)}visitBinary(e,n){return AM.startBinary(n),AM.endBinary(n)}visitLargeBinary(e,n){return RM.startLargeBinary(n),RM.endLargeBinary(n)}visitBool(e,n){return CM.startBool(n),CM.endBool(n)}visitUtf8(e,n){return OM.startUtf8(n),OM.endUtf8(n)}visitLargeUtf8(e,n){return PM.startLargeUtf8(n),PM.endLargeUtf8(n)}visitDecimal(e,n){return Lc.startDecimal(n),Lc.addScale(n,e.scale),Lc.addPrecision(n,e.precision),Lc.addBitWidth(n,e.bitWidth),Lc.endDecimal(n)}visitDate(e,n){return ym.startDate(n),ym.addUnit(n,e.unit),ym.endDate(n)}visitTime(e,n){return Gr.startTime(n),Gr.addUnit(n,e.unit),Gr.addBitWidth(n,e.bitWidth),Gr.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return Jr.startTimestamp(n),Jr.addUnit(n,e.unit),r!==void 0&&Jr.addTimezone(n,r),Jr.endTimestamp(n)}visitInterval(e,n){return ds.startInterval(n),ds.addUnit(n,e.unit),ds.endInterval(n)}visitDuration(e,n){return vm.startDuration(n),vm.addUnit(n,e.unit),vm.endDuration(n)}visitList(e,n){return IM.startList(n),IM.endList(n)}visitStruct(e,n){return ml.startStruct_(n),ml.endStruct_(n)}visitUnion(e,n){cr.startTypeIdsVector(n,e.typeIds.length);const r=cr.createTypeIdsVector(n,e.typeIds);return cr.startUnion(n),cr.addMode(n,e.mode),cr.addTypeIds(n,r),cr.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return Ks.startDictionaryEncoding(n),Ks.addId(n,BigInt(e.id)),Ks.addIsOrdered(n,e.isOrdered),r!==void 0&&Ks.addIndexType(n,r),Ks.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return bm.startFixedSizeBinary(n),bm.addByteWidth(n,e.byteWidth),bm.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return wm.startFixedSizeList(n),wm.addListSize(n,e.listSize),wm.endFixedSizeList(n)}visitMap(e,n){return Sm.startMap(n),Sm.addKeysSorted(n,e.keysSorted),Sm.endMap(n)}}const n2=new uCe;function fCe(t,e=new Map){return new lt(hCe(t,e),Tm(t.metadata),e)}function iU(t){return new Fi(t.count,sU(t.columns),oU(t.columns))}function dCe(t){return new po(iU(t.data),t.id,t.isDelta)}function hCe(t,e){return(t.fields||[]).filter(Boolean).map(n=>Dt.fromJSON(n,e))}function jM(t,e){return(t.children||[]).filter(Boolean).map(n=>Dt.fromJSON(n,e))}function sU(t){return(t||[]).reduce((e,n)=>[...e,new rd(n.count,pCe(n.VALIDITY)),...sU(n.children)],[])}function oU(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const i=t[n];i.VALIDITY&&e.push(new Js(e.length,i.VALIDITY.length)),i.TYPE_ID&&e.push(new Js(e.length,i.TYPE_ID.length)),i.OFFSET&&e.push(new Js(e.length,i.OFFSET.length)),i.DATA&&e.push(new Js(e.length,i.DATA.length)),e=oU(i.children,e)}return e}function pCe(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function gCe(t,e){let n,r,i,s,o,a;return!e||!(s=t.dictionary)?(o=WM(t,jM(t,e)),i=new Dt(t.name,o,t.nullable,Tm(t.metadata))):e.has(n=s.id)?(r=(r=s.indexType)?VM(r):new qp,a=new Nf(e.get(n),r,n,s.isOrdered),i=new Dt(t.name,a,t.nullable,Tm(t.metadata))):(r=(r=s.indexType)?VM(r):new qp,e.set(n,o=WM(t,jM(t,e))),a=new Nf(o,r,n,s.isOrdered),i=new Dt(t.name,a,t.nullable,Tm(t.metadata))),i||null}function Tm(t=[]){return new Map(t.map(({key:e,value:n})=>[e,n]))}function VM(t){return new Zl(t.isSigned,t.bitWidth)}function WM(t,e){const n=t.type.name;switch(n){case"NONE":return new Ia;case"null":return new Ia;case"binary":return new ly;case"largebinary":return new cy;case"utf8":return new uy;case"largeutf8":return new fy;case"bool":return new dy;case"list":return new vy((e||[])[0]);case"struct":return new Kn(e||[]);case"struct_":return new Kn(e||[])}switch(n){case"int":{const r=t.type;return new Zl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new ay(Ln[r.precision])}case"decimal":{const r=t.type;return new hy(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new py(ci[r.unit])}case"time":{const r=t.type;return new gy(Ie[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new _y(Ie[r.unit],r.timezone)}case"interval":{const r=t.type;return new my(As[r.unit])}case"duration":{const r=t.type;return new yy(Ie[r.unit])}case"union":{const r=t.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new by(gr[o],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new wy(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new Sy(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new xy((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var _Ce=bL,mCe=Mf;class Ti{static fromJSON(e,n){const r=new Ti(0,on.V5,n);return r._createHeader=yCe(e,n),r}static decode(e){e=new mCe(tt(e));const n=Do.getRootAsMessage(e),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ti(r,i,s);return o._createHeader=vCe(n,s),o}static encode(e){const n=new _Ce;let r=-1;return e.isSchema()?r=lt.encode(n,e.header()):e.isRecordBatch()?r=Fi.encode(n,e.header()):e.isDictionaryBatch()&&(r=po.encode(n,e.header())),Do.startMessage(n),Do.addVersion(n,on.V5),Do.addHeader(n,r),Do.addHeaderType(n,e.headerType),Do.addBodyLength(n,BigInt(e.bodyLength)),Do.finishMessageBuffer(n,Do.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof lt)return new Ti(0,on.V5,at.Schema,e);if(e instanceof Fi)return new Ti(n,on.V5,at.RecordBatch,e);if(e instanceof po)return new Ti(n,on.V5,at.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===at.Schema}isRecordBatch(){return this.headerType===at.RecordBatch}isDictionaryBatch(){return this.headerType===at.DictionaryBatch}constructor(e,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=kt(e)}}class Fi{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=kt(e)}}class po{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=kt(n)}}class Js{constructor(e,n){this.offset=kt(e),this.length=kt(n)}}class rd{constructor(e,n){this.length=kt(e),this.nullCount=kt(n)}}function yCe(t,e){return()=>{switch(e){case at.Schema:return lt.fromJSON(t);case at.RecordBatch:return Fi.fromJSON(t);case at.DictionaryBatch:return po.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${at[e]}, type: ${e} }`)}}function vCe(t,e){return()=>{switch(e){case at.Schema:return lt.decode(t.header(new es),new Map,t.version());case at.RecordBatch:return Fi.decode(t.header(new $s),t.version());case at.DictionaryBatch:return po.decode(t.header(new Fc),t.version())}throw new Error(`Unrecognized Message type: { name: ${at[e]}, type: ${e} }`)}}Dt.encode=ICe;Dt.decode=RCe;Dt.fromJSON=gCe;lt.encode=PCe;lt.decode=bCe;lt.fromJSON=fCe;Fi.encode=MCe;Fi.decode=wCe;Fi.fromJSON=iU;po.encode=OCe;po.decode=SCe;po.fromJSON=dCe;rd.encode=NCe;rd.decode=TCe;Js.encode=kCe;Js.decode=xCe;function bCe(t,e=new Map,n=on.V5){const r=CCe(t,e);return new lt(r,Em(t),e,n)}function wCe(t,e=on.V5){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new Fi(t.length(),ECe(t),ACe(t,e))}function SCe(t,e=on.V5){return new po(Fi.decode(t.data(),e),t.id(),t.isDelta())}function xCe(t){return new Js(t.offset(),t.length())}function TCe(t){return new rd(t.length(),t.nullCount())}function ECe(t){const e=[];for(let n,r=-1,i=-1,s=t.nodesLength();++r<s;)(n=t.nodes(r))&&(e[++i]=rd.decode(n));return e}function ACe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.buffersLength();++i<o;)(r=t.buffers(i))&&(e<on.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Js.decode(r));return n}function CCe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.fieldsLength();++i<o;)(r=t.fields(i))&&(n[++s]=Dt.decode(r,e));return n}function HM(t,e){const n=[];for(let r,i=-1,s=-1,o=t.childrenLength();++i<o;)(r=t.children(i))&&(n[++s]=Dt.decode(r,e));return n}function RCe(t,e){let n,r,i,s,o,a;return!e||!(a=t.dictionary())?(i=YM(t,HM(t,e)),r=new Dt(t.name(),i,t.nullable(),Em(t))):e.has(n=kt(a.id()))?(s=(s=a.indexType())?XM(s):new qp,o=new Nf(e.get(n),s,n,a.isOrdered()),r=new Dt(t.name(),o,t.nullable(),Em(t))):(s=(s=a.indexType())?XM(s):new qp,e.set(n,i=YM(t,HM(t,e))),o=new Nf(i,s,n,a.isOrdered()),r=new Dt(t.name(),o,t.nullable(),Em(t))),r||null}function Em(t){const e=new Map;if(t)for(let n,r,i=-1,s=Math.trunc(t.customMetadataLength());++i<s;)(n=t.customMetadata(i))&&(r=n.key())!=null&&e.set(r,n.value());return e}function XM(t){return new Zl(t.isSigned(),t.bitWidth())}function YM(t,e){const n=t.typeType();switch(n){case xt.NONE:return new Ia;case xt.Null:return new Ia;case xt.Binary:return new ly;case xt.LargeBinary:return new cy;case xt.Utf8:return new uy;case xt.LargeUtf8:return new fy;case xt.Bool:return new dy;case xt.List:return new vy((e||[])[0]);case xt.Struct_:return new Kn(e||[])}switch(n){case xt.Int:{const r=t.type(new Ir);return new Zl(r.isSigned(),r.bitWidth())}case xt.FloatingPoint:{const r=t.type(new fs);return new ay(r.precision())}case xt.Decimal:{const r=t.type(new Lc);return new hy(r.scale(),r.precision(),r.bitWidth())}case xt.Date:{const r=t.type(new ym);return new py(r.unit())}case xt.Time:{const r=t.type(new Gr);return new gy(r.unit(),r.bitWidth())}case xt.Timestamp:{const r=t.type(new Jr);return new _y(r.unit(),r.timezone())}case xt.Interval:{const r=t.type(new ds);return new my(r.unit())}case xt.Duration:{const r=t.type(new vm);return new yy(r.unit())}case xt.Union:{const r=t.type(new cr);return new by(r.mode(),r.typeIdsArray()||[],e||[])}case xt.FixedSizeBinary:{const r=t.type(new bm);return new wy(r.byteWidth())}case xt.FixedSizeList:{const r=t.type(new wm);return new Sy(r.listSize(),(e||[])[0])}case xt.Map:{const r=t.type(new Sm);return new xy((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${xt[n]}" (${n})`)}function PCe(t,e){const n=e.fields.map(s=>Dt.encode(t,s));es.startFieldsVector(t,n.length);const r=es.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?es.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const a=t.createString(`${s}`),l=t.createString(`${o}`);return dn.startKeyValue(t),dn.addKey(t,a),dn.addValue(t,l),dn.endKeyValue(t)})):-1;return es.startSchema(t),es.addFields(t,r),es.addEndianness(t,DCe?Of.Little:Of.Big),i!==-1&&es.addCustomMetadata(t,i),es.endSchema(t)}function ICe(t,e){let n=-1,r=-1,i=-1;const s=e.type;let o=e.typeId;we.isDictionary(s)?(o=s.dictionary.typeId,i=n2.visit(s,t),r=n2.visit(s.dictionary,t)):r=n2.visit(s,t);const a=(s.children||[]).map(u=>Dt.encode(t,u)),l=Wr.createChildrenVector(t,a),c=e.metadata&&e.metadata.size>0?Wr.createCustomMetadataVector(t,[...e.metadata].map(([u,f])=>{const d=t.createString(`${u}`),h=t.createString(`${f}`);return dn.startKeyValue(t),dn.addKey(t,d),dn.addValue(t,h),dn.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Wr.startField(t),Wr.addType(t,r),Wr.addTypeType(t,o),Wr.addChildren(t,l),Wr.addNullable(t,!!e.nullable),n!==-1&&Wr.addName(t,n),i!==-1&&Wr.addDictionary(t,i),c!==-1&&Wr.addCustomMetadata(t,c),Wr.endField(t)}function MCe(t,e){const n=e.nodes||[],r=e.buffers||[];$s.startNodesVector(t,n.length);for(const o of n.slice().reverse())rd.encode(t,o);const i=t.endVector();$s.startBuffersVector(t,r.length);for(const o of r.slice().reverse())Js.encode(t,o);const s=t.endVector();return $s.startRecordBatch(t),$s.addLength(t,BigInt(e.length)),$s.addNodes(t,i),$s.addBuffers(t,s),$s.endRecordBatch(t)}function OCe(t,e){const n=Fi.encode(t,e.data);return Fc.startDictionaryBatch(t),Fc.addId(t,BigInt(e.id)),Fc.addIsDelta(t,e.isDelta),Fc.addData(t,n),Fc.endDictionaryBatch(t)}function NCe(t,e){return xL.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function kCe(t,e){return SL.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const DCe=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),vA=t=>`Expected ${at[t]} Message in stream, but was null or length 0.`,bA=t=>`Header pointer of flatbuffer-encoded ${at[t]} Message is null or length 0.`,aU=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,lU=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class cU{constructor(e){this.source=e instanceof Cy?e:new Cy(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Vt:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(vA(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=tt(this.source.read(e));if(n.byteLength<e)throw new Error(lU(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=at.Schema,r=this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(bA(n));return i}readMetadataLength(){const e=this.source.read(J1),n=e&&new Mf(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return Vt;if(n.byteLength<e)throw new Error(aU(e,n.byteLength));return{done:!1,value:Ti.decode(n)}}}class FCe{constructor(e,n){this.source=e instanceof Df?e:pL(e)?new Ry(e,n):new Df(e)}[Symbol.asyncIterator](){return this}next(){return $e(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Vt:e})}throw(e){return $e(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return $e(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return $e(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(vA(e));return n.value})}readMessageBody(e){return $e(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=tt(yield this.source.read(e));if(n.byteLength<e)throw new Error(lU(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return $e(this,arguments,void 0,function*(e=!1){const n=at.Schema,r=yield this.readMessage(n),i=r==null?void 0:r.header();if(e&&!i)throw new Error(bA(n));return i})}readMetadataLength(){return $e(this,void 0,void 0,function*(){const e=yield this.source.read(J1),n=e&&new Mf(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(e){return $e(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Vt;if(n.byteLength<e)throw new Error(aU(e,n.byteLength));return{done:!1,value:Ti.decode(n)}})}}class BCe extends cU{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof $M?e:new $M(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ti.fromJSON(e.schema,at.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ti.fromJSON(n,at.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ti.fromJSON(n,at.RecordBatch)}}return this._body=[],Vt}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(vA(e));return n.value}readSchema(){const e=at.Schema,n=this.readMessage(e),r=n==null?void 0:n.header();if(!n||!r)throw new Error(bA(e));return r}}const J1=4,fx="ARROW1",Py=new Uint8Array(fx.length);for(let t=0;t<fx.length;t+=1)Py[t]=fx.codePointAt(t);function wA(t,e=0){for(let n=-1,r=Py.length;++n<r;)if(Py[n]!==t[e+n])return!1;return!0}const Pg=Py.length,uU=Pg+J1,LCe=Pg*2+J1;class to extends Q${constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Hp(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Kr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Kr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof to?e:tx(e)?jCe(e):pL(e)?HCe(e):Hp(e)?$e(this,void 0,void 0,function*(){return yield to.from(yield e)}):gL(e)||rA(e)||mL(e)||nA(e)?WCe(new Df(e)):VCe(new Cy(e))}static readAll(e){return e instanceof to?e.isSync()?KM(e):qM(e):tx(e)||ArrayBuffer.isView(e)||Z1(e)||hL(e)?KM(e):qM(e)}}class Iy extends to{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return gs(this,arguments,function*(){yield We(yield*lm(Iu(this[Symbol.iterator]())))})}}class My extends to{constructor(e){super(e),this._impl=e}readAll(){return $e(this,void 0,void 0,function*(){var e,n,r,i;const s=new Array;try{for(var o=!0,a=Iu(this),l;l=yield a.next(),e=l.done,!e;o=!0){i=l.value,o=!1;const c=i;s.push(c)}}catch(c){n={error:c}}finally{try{!o&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class fU extends Iy{constructor(e){super(e),this._impl=e}}class $Ce extends My{constructor(e){super(e),this._impl=e}}class dU{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=Ye({type:new Kn(this.schema.fields),length:e.length,children:r});return new Si(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const l=o.dictionaries.get(r),c=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new mt(c)):new mt(c)).memoize()}return a.memoize()}_loadVectors(e,n,r){return new J$(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Oy extends dU{constructor(e,n){super(n),this._reader=tx(e)?new BCe(this._handle=e):new cU(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=pU(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Vt}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Vt}next(){if(this.closed)return Vt;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rU(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Ny extends dU{constructor(e,n){super(n),this._reader=new FCe(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return $e(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return $e(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=pU(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return $e(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Vt})}return(e){return $e(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Vt})}next(){return $e(this,void 0,void 0,function*(){if(this.closed)return Vt;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new rU(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return $e(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class hU extends Oy{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof UM?e:new UM(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(at.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(at.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-uU,r=e.readInt32(n),i=e.readAt(n-r,r);return pA.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class UCe extends Ny{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof Ry?e:new Ry(e,r),i)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return $e(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){return $e(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(at.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){return $e(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(at.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return $e(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-uU,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return pA.decode(i)})}_readNextMessageAndValidate(e){return $e(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class zCe extends Oy{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new JAe(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function pU(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*KM(t){const e=to.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function qM(t){return gs(this,arguments,function*(){const n=yield We(to.from(t));try{if(!(yield We(n.open({autoDestroy:!1}))).closed)do yield yield We(n);while(!(yield We(n.reset().open())).closed)}finally{yield We(n.cancel())}})}function jCe(t){return new Iy(new zCe(t))}function VCe(t){const e=t.peek(Pg+7&-8);return e&&e.byteLength>=4?wA(e)?new fU(new hU(t.read())):new Iy(new Oy(t)):new Iy(new Oy(function*(){}()))}function WCe(t){return $e(this,void 0,void 0,function*(){const e=yield t.peek(Pg+7&-8);return e&&e.byteLength>=4?wA(e)?new fU(new hU(yield t.read())):new My(new Ny(t)):new My(new Ny(function(){return gs(this,arguments,function*(){})}()))})}function HCe(t){return $e(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Ry(t,e);return e>=LCe&&wA(yield n.readAt(0,Pg+7&-8))?new $Ce(new UCe(n)):new My(new Ny(n))})}function gU(t){const e=to.from(t);return Hp(e)?e.then(n=>gU(n)):e.isAsync()?e.readAll().then(n=>new ei(n)):new ei(e.readAll())}const XCe={Slope:250,Elevation:10,ES_Distance:1,JHS_Distance:1,SHS_Distance:1,Hospital_Distance:.4,PublicHealth_Distance:.5},YCe=({fill:t="FoodExpend",elevation:e,onHover:n})=>{var u,f,d,h;const{data:r}=Eg({queryKey:["grid"],gcTime:1/0,staleTime:1/0,queryFn:()=>fetch("/data/grid.parquet").then(p=>p.arrayBuffer())});if(!r)return;const i=new Uint8Array(r),s=fre(i).intoIPCStream(),o=gU(s),a=(f=(u=o.getChild("geometry"))==null?void 0:u.getChildAt(0))==null?void 0:f.data[0].values,l=(d=o.getChild(t))==null?void 0:d.toArray(),c=new Float32Array(l.length*3);for(let p=0;p<l.length;++p){const g=Sp[l[p]];c[p*3]=g[0]/255,c[p*3+1]=g[1]/255,c[p*3+2]=g[2]/255}return new O3({cellSize:1010,pickable:!0,extruded:!!e,elevationScale:XCe[e]||1,onHover:p=>{var g;return p.index===-1?n==null?void 0:n(void 0):n==null?void 0:n({position:{x:p.x,y:p.y},data:(g=o.get(p.index))==null?void 0:g.toJSON()})},data:{length:o.numRows,attributes:{getFillColor:{value:c,size:3},getPosition:{value:a,size:2},...e&&{getElevation:{value:new Float32Array((h=o.getChild(e))==null?void 0:h.data[0].values)}}}}})},dx=({fill:t,elevation:e})=>{const n=Zt(s=>s.settings.region),r=YCe({fill:t,elevation:e,onHover:s=>Zt.setState({tooltip:s})}),i=dL({disabled:!n});return x.jsx(Qk,{controller:!0,layers:[r,...i]})},KCe=({elevation:t})=>{const e=Zt(n=>n.settings.baseMap);return x.jsx(ore,{viewState:ID,left:x.jsx(dx,{fill:"FoodExpend",elevation:t}),right:x.jsx(dx,{fill:"NonFoodExpend",elevation:t}),mapStyle:e==="default"?"/maps/style.json":"/maps/style-satellite.json"})},qCe=()=>{const t=Zt(n=>n.tooltip);return!Zt(n=>n.settings).tooltip||!t?null:x.jsx("div",{style:{left:t.position.x,top:t.position.y},className:"-translate-x-[50%] -translate-y-full pointer-events-none absolute z-[100] w-64 cursor-pointer gap-0.5 rounded-sm border bg-background p-4 shadow-sm",children:Object.keys(t.data).filter(n=>n!=="geometry").map(n=>x.jsxs("div",{className:"flex flex-row items-center justify-between gap-0.5",children:[x.jsx(An,{className:"font-bold text-xs",children:n}),x.jsx(An,{className:"font-light font-mono text-xs",children:!t.data[n]||Number.isNaN(Number(t.data[n]))?t.data[n]:Number(t.data[n]).toFixed(4)})]},n))})},ZCe=()=>{const t=Zt(n=>n.settings.baseMap),e=Zt(n=>n.active);return e.analysis==="grid"&&e.fill==="Compare"?x.jsx(KCe,{elevation:e.elevation}):x.jsxs(FS,{mapStyle:t==="default"?"/maps/style.json":"/maps/style-satellite.json",initialViewState:ID,children:[x.jsx(qCe,{}),e.analysis==="cluster"&&x.jsx(vEe,{cluster:e.clusters}),e.analysis==="grid"&&x.jsx(dx,{elevation:e.elevation,fill:e.fill})]})},QCe=()=>x.jsx(cse,{children:x.jsx(bre,{children:x.jsxs(Fne,{children:[x.jsx(z3e,{}),x.jsx(ZCe,{})]})})});function GCe(){return x.jsx("div",{"vaul-drawer-wrapper":"",className:"relative h-svh w-full overflow-hidden bg-background font-sans",children:x.jsx(QCe,{})})}const JCe=new QTe;i2.createRoot(document.getElementById("root")).render(x.jsx(J.StrictMode,{children:x.jsx(nEe,{client:JCe,children:x.jsx(GCe,{})})}));export{Og as c,Un as g};
